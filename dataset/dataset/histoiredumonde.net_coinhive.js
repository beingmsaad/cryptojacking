"/**\n * autosave plugin\n *\n * Copyright (c) 2009-2016 Fil (fil@rezo.net)\n * Dual licensed under the MIT and GPL licenses:\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.gnu.org/licenses/gpl.html\n *\n */\n\n/*\n * Usage: $(\"form\").autosave({options...});\n * to use with SPIP's action/session.php\n */\n\n(function($){\n\t$.fn.autosave = function(opt) {\n\t\topt = $.extend({\n\t\t\turl: window.location,\n\t\t\tconfirm: false,\n\t\t\tconfirmstring: 'Sauvegarder ?'\n\t\t},opt);\n\t\tvar save_changed = function(){\n\t\t\t$('form.autosavechanged')\n\t\t\t.each(function(){\n\t\t\t\tif (!opt.confirm || confirm(opt.confirmstring)) {\n\t\t\t\t\tvar contenu = $(this).serialize();\n\t\t\t\t\t// ajoutons un timestamp\n\t\t\t\t\tvar d=new Date();\n\t\t\t\t\tcontenu = contenu + \"&__timestamp=\" + Math.round(d.getTime()/1000);\n\t\t\t\t\t$.post(opt.url, {\n\t\t\t\t\t\t'action': 'session',\n\t\t\t\t\t\t'var': 'autosave_' + $('input[name=autosave]', this).val(),\n\t\t\t\t\t\t'val': contenu\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).removeClass('autosavechanged');\n\t\t}\n\t\t$(window).on('unload', save_changed);\n\t\treturn this\n\t\t\t.on('keyup', function() {\n\t\t\t\t$(this).addClass('autosavechanged');\n\t\t\t})\n\t\t\t.on('change', function() {\n\t\t\t\t$(this).addClass('autosavechanged');\n\t\t\t\tsave_changed();\n\t\t\t})\n\t\t\t.on('submit',function() {\n\t\t\t\tsave_changed();\n\t\t\t\t/* trop agressif : exemple du submit previsu forum, ou des submit suivant/precedent d'un cvt multipage\n\t\t\t\ton sauvegarde toujours, et le serveur videra quand il faudra */\n\t\t\t\t/*$(this).removeClass('autosavechanged')*/;\n\t\t\t});\n\t}\n})(jQuery);\n\n"
"var canRunAds = true;"
