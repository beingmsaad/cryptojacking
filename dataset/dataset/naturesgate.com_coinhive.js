"var mod_pagespeed_Gt_EEsahke = \"Ext.ns(\\\"Ext.CMS\\\");Ext.CMS.GMap=Ext.extend(Ext.ux.GMapPanel,{id:'gMap',zoomLevel:4,gmapType:'map',mapConfOpts:['enableScrollWheelZoom','enableDoubleClickZoom','enableDragging'],mapControls:['GSmallMapControl','GMapTypeControl','NonExistantControl'],setCenter:{geoCodeAddr:'4 Yawkey Way, Boston, MA, 02215'},initComponent:function(){Ext.CMS.GMap.superclass.initComponent.call(this);},animateTo:function(addr){if(typeof addr!=='object'){if(!this.geocoder){this.geocoder=new google.maps.Geocoder();}\\nthis.geocoder.geocode({address:addr},function(response,status){if(!response||status!=='OK'){this.respErrorMsg(status);}\\nelse{var place=response[0].geometry.location;window.place=place;var point=new google.maps.LatLng(place.lat(),place.lng());this.getMap().setZoom(11);var mrks=window.mrks;var mark=[];var idArray=[];function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2,cmarker){var R=6371;var dLat=deg2rad(lat2-lat1);var dLon=deg2rad(lon2-lon1);var a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(deg2rad(lat1))*Math.cos(deg2rad(lat2))*Math.sin(dLon/2)*Math.sin(dLon/2);var c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));var d=R*c;if(d<52){cmarker.dist=d;mark.push(cmarker);var rec=store.getById(cmarker.id);rec.set('dist',d);rec.commit();idArray.push(cmarker.id);}};function deg2rad(deg){return deg*(Math.PI/180)};function mapfilt(mrks,callback){for(i=0;i<mrks.length;i++){getDistanceFromLatLonInKm(place.lat(),place.lng(),mrks[i].lat,mrks[i].lng,mrks[i]);};store.sort('dist','ASC');callback();}\\nthat=new Object();that=this;mapfilt(mrks,function(){this.that.addMarkers(mark);store.filterBy(function(rec){for(i=0;i<idArray.length;i++){if(rec.get('id')==idArray[i]){return true;}};});});this.getMap().panTo(point);}}.createDelegate(this));}\\nelse{var point=new google.maps.LatLng(addr.lat,addr.lng);this.getMap().setZoom(11);this.getMap().panTo(point);}},openInfoWindow:function(id,map)\\n{Ext.each(this.cache.infowindow,function(infowindow){if(infowindow.id==id)\\n{infowindow.open(this.getMap());return false;}},this);}});Ext.reg('gMap',Ext.CMS.GMap);\";\nvar mod_pagespeed_c_fe4lLjlo = \"Ext.ns(\\\"Ext.CMS\\\");Ext.onReady(function(){var map=new Ext.CMS.GMap({height:450,width:718,layout:'fit',renderTo:'map',zoomLevel:4,setCenter:{lat:38,lng:-97},listeners:{'mapready':{fn:function(){if(Ext.get('address').getValue()!=='')\\nsearchEvent();}}}});store=new Ext.data.JsonStore({url:'/wp-includes/map.json',root:'centers',idProperty:'id',remoteSort:false,sorters:[{property:'dist',direction:'ASC'}],fields:[{name:'id',type:'float'},{name:'address',type:'string'},{name:'city',type:'string'},{name:'state',type:'string'},{name:'zip',type:'string'},{name:'dist',type:'float'},{name:'geo_accuracy',type:'string'},{name:'phone',type:'string'},{name:'lat',type:'float'},{name:'lng',type:'float'}],autoload:false,listeners:{'load':{fn:function(){var markers=new Array();this.each(function(record){var marker={id:record.get('id'),lat:record.get('lat'),lng:record.get('lng'),dist:record.get('dist'),types:'store',marker:{title:'Address',infoWindow:{id:record.get('id'),content:'<div style=\\\"font: bold 14px Verdana;margin-bottom:7px;\\\">'+record.get('geo_accuracy')+'</div>'+record.get('address')+'<br>'+record.get('city')+', '+record.get('state')+', '+record.get('zip')+'<br>Phone: '+record.get('phone')+'</div>'}},listeners:{click:function(record){this.select(record);}.createDelegate(listSelection,[record],0)}};markers.push(marker);},this);window.mrks=markers;Ext.select('.choose').on('click',function(){this.parentNode.submit();});}}}});var tpl=new Ext.XTemplate('<tpl for=\\\".\\\">'+'<div class=\\\"location\\\"><b>{geo_accuracy}</b><br>{address}<br>{city}, {state} {zip}<br>'+'{phone}'+'<form action=\\\"/order/process\\\" method=\\\"post\\\">'+'<input type=\\\"hidden\\\" name=\\\"location\\\" value=\\\"{id}\\\">'+'<img src=\\\"/wp-includes/images/choose-location.jpg\\\" alt=\\\"Choose this location\\\"><br></form></div>'+'</tpl>');var listSelection=new Ext.DataView({id:'listSelection',height:450,loadingText:'Searching nearest location...',autoScroll:true,renderTo:'list',store:store,tpl:tpl,singleSelect:true,selectedClass:'x-view-selected',overClass:'x-view-over',itemSelector:'div.location',deferEmptyText:true,emptyText:'<div class=\\\"test\\\">No store found</div>',listeners:{click:{fn:function(view,index,node,e){var location=view.store.getAt(index);map.animateTo({lat:location.get('lat'),lng:location.get('lng')});map.hideAllInfoWindows();map.openInfoWindow(location.get('id'));}}}});listSelection.getTemplateTarget().update('<div class=\\\"test\\\">Please choose a zip code or City Name above to see results here</div>');var searchEvent=function(){map.clearMarkers();var address=Ext.get('address').getValue();var geocoder=new google.maps.Geocoder();var lng,lat='';geocoder.geocode({'address':address},function(results,status){if(status==google.maps.GeocoderStatus.OK){listSelection.store.load({params:{lat:results[0].geometry.location.lat(),lng:results[0].geometry.location.lng()},callback:function(){map.animateTo(address);}});}else{alert('Geocode was not successful for the following reason: '+status);}});};Ext.get(\\\"search-button\\\").on('click',searchEvent);Ext.get('address').addKeyListener(13,searchEvent);});\";\n"
