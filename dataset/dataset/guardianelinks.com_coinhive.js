"var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,b){a instanceof String&&(a=String(a));for(var g=a.length,c=0;c<g;c++){var d=a[c];if(e.call(b,d,c,a))return{i:c,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(a,e,b){a!=Array.prototype&&a!=Object.prototype&&(a[e]=b.value)};\n$jscomp.getGlobal=function(a){return\"undefined\"!=typeof window&&window===a?a:\"undefined\"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,b,g){if(e){b=$jscomp.global;a=a.split(\".\");for(g=0;g<a.length-1;g++){var c=a[g];c in b||(b[c]={});b=b[c]}a=a[a.length-1];g=b[a];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:e})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},\"es6\",\"es3\");\n!function(a,e,b,g){XF.Notices=XF.Element.newHandler({options:{type:\"block\",target:\".js-notice\",scrollInterval:5},$notices:null,slider:null,dismissing:!1,init:function(){this.updateNoticeList();this.filter();this.handleNoticeListChange()&&(this.$target.on(\"click\",\".js-noticeDismiss\",XF.proxy(this,\"dismiss\")),this.start())},updateNoticeList:function(){a(b).trigger(\"xf:notice-change\");return this.$notices=this.$target.find(this.options.target).not(\".clone\")},handleNoticeListChange:function(){var c=this.$notices.length;\nc?1==c&&this.$target.removeClass(\"notices--isMulti\"):(this.slider&&(this.slider.destroy(),this.slider=null),this.$target.remove());return c},filter:function(){var c=this.getCookies(),d=!1;this.$notices.each(function(){var f=a(this),h=parseInt(f.data(\"notice-id\"),10),b=f.data(\"visibility\");c&&h&&-1!=a.inArray(h,c)&&(f.remove(),d=!0);b&&(\"hidden\"==f.css(\"visibility\")?(f.remove(),d=!0):f.addClass(\"is-vis-processed\"))});d&&this.updateNoticeList()},start:function(){var c=this,d=this.$notices,f=this.options.type;\n\"floating\"==f?d.each(function(){var d=a(this),f=d.data(\"display-duration\"),b=d.data(\"delay-duration\"),e=d.data(\"auto-dismiss\");b?setTimeout(function(){c.displayFloating(d,XF.config.speed.normal,f,e)},b):c.displayFloating(d,XF.config.speed.fast,f,e)}):\"scrolling\"==f&&1<this.$notices.length&&(a.fn.lightSlider?(this.slider=this.$target.lightSlider({item:1,addClass:\"noticeScrollContainer\",slideMargin:0,galleryMargin:0,controls:!1,auto:!0,pause:1E3*this.options.scrollInterval,speed:400,pauseOnHover:!0,\nloop:!0,rtl:XF.isRtl(),enableDrag:!1}),a(e).on(\"resize\",XF.proxy(this,\"refreshSlider\"))):console.error(\"Lightslider must be loaded first.\"))},displayFloating:function(c,a,f,b){c.xfFadeDown(a,function(){f&&setTimeout(function(){c.xfFadeUp(XF.config.speed.normal);b&&c.find(\"a.js-noticeDismiss\").trigger(\"click\")},f)})},getCookies:function(){if(!XF.config.userId){var a=XF.Cookie.get(\"notice_dismiss\");a=a?a.split(\",\"):[];for(var d=[],f,b=0;b<a.length;b++)(f=parseInt(a[b],10))&&d.push(f);return d}},dismiss:function(c){c.preventDefault();\nif(!this.dismissing){this.dismissing=!0;var d=a(c.target);c=d.parents(\".js-notice\");var b=parseInt(c.data(\"notice-id\"),10),e=XF.config.userId,g=this.getCookies();e?XF.ajax(\"post\",d.attr(\"href\"),{},function(){},{skipDefault:!0}):b&&-1==a.inArray(b,g)&&(g.push(b),g.sort(function(a,c){return a-c}),d=new Date,d.setUTCMonth(d.getUTCMonth()+1),XF.Cookie.set(\"notice_dismiss\",g.join(\",\"),d));this.removeNotice(c);this.dismissing=!1}},removeNotice:function(a){var d=this;if(this.slider){var c=this.$notices.length,\nb=this.slider.getCurrentSlideCount(),e=function(){a.remove();d.updateNoticeList();d.handleNoticeListChange()&&(d.refreshSlider(),d.slider.goToSlide(b))};1<c?(b>=d.slider.getTotalSlideCount()&&(b=1),this.slider.goToNextSlide(),setTimeout(e,500)):e()}else a.xfFadeUp(XF.config.speed.fast,function(){a.remove();d.updateNoticeList();d.handleNoticeListChange()})},refreshSlider:function(){this.$target.css(\"height\",\"\");this.slider.refresh()}});XF.Element.register(\"notices\",\"XF.Notices\")}(jQuery,window,document);\n"
"jQuery(document).ready(function(e){var o=e(document),l=e(\"body\");e(\".parallax\").length?$pxScrolled=\"239\":$pxScrolled=\"0\",o.scroll(function(){l.toggleClass(\"hasScrolled\",o.scrollTop()>=$pxScrolled)});var c=e(\".bgPicker\"),a=e(\".bgChooser\"),i=e(\".closeBgChooser, .bgChooser ul li\"),s=e(\".closeBgChooser\");e(\".bgPicker\").click(function(e){if(e.preventDefault(),c.hasClass(\"active\"))return i.fadeOut(100,function(){a.slideUp(200),c.removeClass(\"active\")}),!1;c.addClass(\"active\"),a.slideDown(200,function(){i.fadeIn(300)})}),s.click(function(e){return i.fadeOut(100,function(){a.slideUp(200),c.removeClass(\"active\")}),!1});l=e(\"body\");e(\".bgChooser ul li\").click(function(o){o.preventDefault(),e.cookie(\"cookieBg\",null,{expires:-1,path:\"/\"});var c=e(this).attr(\"id\");e.cookie(\"cookieBg\",c,{expires:365,path:\"/\"}),l.removeClass().addClass(c)}),null!=e.cookie(\"cookieBg\")?l.addClass(e.cookie(\"cookieBg\")):l.addClass(\"bg-default\")});"
"var XF=window.XF||{};!function(e){var d=0;e.console||(e.console={});e.console.log&&!e.console.debug&&(e.console.debug=e.console.log);var f=\"assert clear count debug dir dirxml error getFirebugElement group groupCollapsed groupEnd info log notifyFirebug profile profileEnd time timeEnd trace warn\".split(\" \");for(d=0;d<f.length;++d)e.console[f[d]]||(e.console[f[d]]=function(){})}(window);\n!function(e,d){var f=d.documentElement,h=f.getAttribute(\"data-cookie-prefix\")||\"\",k=f.getAttribute(\"data-app\"),l=\"true\"===f.getAttribute(\"data-logged-in\");f.addEventListener(\"error\",function(a){a=a.target;switch(a.getAttribute(\"data-onerror\")){case \"hide\":a.style.display=\"none\";break;case \"hide-parent\":a.parentNode.style.display=\"none\"}},!0);XF.Feature=function(){function a(a){var b=f.className;g&&(b=b.replace(/(^|\\s)has-no-js($|\\s)/,\"$1has-js$2\"),g=!1);a.length&&(b+=\" \"+a.join(\" \"));f.className=\nb}var b={touchevents:function(){return\"ontouchstart\"in e||e.DocumentTouch&&d instanceof DocumentTouch},passiveeventlisteners:function(){var a=!1;try{var b=Object.defineProperty({},\"passive\",{get:function(){a=!0}}),c=function(){};e.addEventListener(\"test\",c,b);e.removeEventListener(\"test\",c,b)}catch(m){}return a},hiddenscroll:function(){var a=d.body,b=!1;a||(a=d.createElement(\"body\"),d.body=a,b=!0);var c=d.createElement(\"div\");c.style.width=\"100px\";c.style.height=\"100px\";c.style.overflow=\"scroll\";\nc.style.position=\"absolute\";c.style.top=\"-9999px\";a.appendChild(c);var e=c.offsetWidth===c.clientWidth;b?a.parentNode.removeChild(a):c.parentNode.removeChild(c);return e}},c={},g=!0;return{runTests:function(){var e=[],d;for(d in b)if(b.hasOwnProperty(d)&&\"undefined\"===typeof c[d]){var f=!!b[d]();e.push(\"has-\"+(f?\"\":\"no-\")+d);c[d]=f}a(e)},runTest:function(b,d){d=!!d();a([\"has-\"+(d?\"\":\"no-\")+b]);c[b]=d},has:function(a){return\"undefined\"===typeof c[a]?(console.error(\"Asked for unknown test results: \"+\na),!1):c[a]}}}();XF.Feature.runTests();\"public\"!==k||l||function(){var a=(a=(a=(new RegExp(\"(^| )\"+h+\"notice_dismiss=([^;]+)(;|$)\")).exec(d.cookie))?decodeURIComponent(a[2]):null)?a.split(\",\"):[];for(var b,c=[],e=0;e<a.length;e++)b=parseInt(a[e],10),0!==b&&c.push('.notice[data-notice-id=\"'+b+'\"]');c.length&&(a=c.join(\", \")+\" { display: none !important } \",b=d.createElement(\"style\"),b.type=\"text/css\",b.innerHTML=a,d.head.appendChild(b))}();(function(){var a=navigator.userAgent.toLowerCase(),b;if(b=\n/trident\\/.*rv:([0-9.]+)/.exec(a))b={browser:\"msie\",version:parseFloat(b[1])};else{b=/(msie)[ \\/]([0-9\\.]+)/.exec(a)||/(edge)[ \\/]([0-9\\.]+)/.exec(a)||/(chrome)[ \\/]([0-9\\.]+)/.exec(a)||/(webkit)[ \\/]([0-9\\.]+)/.exec(a)||/(opera)(?:.*version|)[ \\/]([0-9\\.]+)/.exec(a)||0>a.indexOf(\"compatible\")&&/(mozilla)(?:.*? rv:([0-9\\.]+)|)/.exec(a)||[];if(\"webkit\"==b[1]&&a.indexOf(\"safari\")){var c=/version[ \\/]([0-9\\.]+)/.exec(a);c&&(b=[b[0],\"safari\",c[1]])}b={browser:b[1]||\"\",version:parseFloat(b[2])||0}}b.browser&&\n(b[b.browser]=!0);c=\"\";var d=null,e;if(/(ipad|iphone|ipod)/.test(a)){if(c=\"ios\",e=/os ([0-9_]+)/.exec(a))d=parseFloat(e[1].replace(\"_\",\".\"))}else(e=/android[ \\/]([0-9\\.]+)/.exec(a))?(c=\"android\",d=parseFloat(e[1])):/windows /.test(a)?c=\"windows\":/linux/.test(a)?c=\"linux\":/mac os/.test(a)&&(c=\"mac\");b.os=c;b.osVersion=d;c&&(b[c]=!0);XF.browser=b})()}(window,document);\n"
"jQuery.cookie=function(b,j,m){if(typeof j!=\"undefined\"){m=m||{};if(j===null){j=\"\";m.expires=-1}var e=\"\";if(m.expires&&(typeof m.expires==\"number\"||m.expires.toUTCString)){var f;if(typeof m.expires==\"number\"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e=\"; expires=\"+f.toUTCString()}var l=m.path?\"; path=\"+(m.path):\"\";var g=m.domain?\"; domain=\"+(m.domain):\"\";var a=m.secure?\"; secure\":\"\";document.cookie=[b,\"=\",encodeURIComponent(j),e,l,g,a].join(\"\")}else{var d=null;if(document.cookie&&document.cookie!=\"\"){var k=document.cookie.split(\";\");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+\"=\")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};"
"!function(c,g,m){XF.BRMSContainer=XF.Element.newHandler({options:{},$clone:null,created:!1,init:function(){this.$container=$container=this.$target;var a=$container.attr(\"data-previewType\"),b=parseInt($container.attr(\"data-allowCusItemLimit\")),e=parseInt($container.attr(\"data-allowCusLayout\")),h=$container.attr(\"data-useLimit\"),l=$container.attr(\"data-entryLimit\"),k=$container.attr(\"data-navPosition\"),d=parseInt($container.attr(\"data-updateInterval\")),f=parseInt($container.attr(\"data-modernStatisticId\"));\nthis.$containerClass=\"BRMSContainer \";$container.hasClass(\"BRMSContainerDark\")&&(this.$containerClass=\"BRMSContainer BRMSContainerDark \");this.$previewType=a;this.$allowCusItemLimit=b;this.$allowCusLayout=e;this.$entryLimit=l;this.$navPosition=k;this.$updateIntervalTime=d;this.$modernStatisticId=f;this.$hardReload=!1;a=XF.Cookie.get(\"brmsLayoutChange\"+f);e&&a&&($container.removeClass(\"brmsTopTabs brmsRightTabs brmsLeftTabs\"),$container.addClass(a));h&&0<parseInt(h)?(this.$entryLimit=h,$container.attr(\"data-entryLimit\",\nh)):this.$allowCusItemLimit&&XF.Cookie.get(\"brmsNumberEntry\"+f)&&(this.$entryLimit=XF.Cookie.get(\"brmsNumberEntry\"+f),$container.attr(\"data-entryLimit\",this.$entryLimit));e=$container.find(\"ul.brmsTabNav > li\").length-2;$container.find(\"ul.brmsTabNav > li:first\").addClass(\"first\");$container.find(\"ul.brmsTabNav > li:eq(\"+e+\")\").addClass(\"last\");$container.find(\"ul.brmsTabNav > li > a, .brmsTabNavHidden  ul.brmsDropdownMenu  > li > a\").click(XF.proxy(this,\"navTabTriggerHandle\"));this.showTab($container.find(\".brmsTabContent:first\").data(\"content\"));\nthis.updateInterval();$container.find(\".brmsNumberEntry\").click(XF.proxy(this,\"numberEntryChangeHandle\"));$container.find(\".brmsLayoutChange\").click(XF.proxy(this,\"layoutChangeHandle\"));$container.find(\".brmsRefresh\").click(XF.proxy(this,\"refreshHandle\"));this.responsiveInit();c(g).resize(XF.proxy(this,\"responsiveInit\"));$container.find(\".brmsDropdownToggle\").hover(function(a){a=c(this).find(\"ul.brmsDropdownMenu\");a.show();a.offset().left+a.width()>$container.width()?a.addClass(\"edge\"):a.removeClass(\"edge\");\n\"none\"!=a.css(\"display\")&&0>=a.offset().left&&a.css({left:0})},function(a){a=c(this).find(\"ul.brmsDropdownMenu\");c(this).find(\"ul.brmsDropdownMenu\").hide();a.offset().left+a.width()>$container.width()?a.addClass(\"edge\"):a.removeClass(\"edge\");\"none\"!=a.css(\"display\")&&0>=a.offset().left&&a.css({left:0})});$container.find(\".brmsDropdownToggle\").click(function(a){c(this).find(\"ul.brmsDropdownMenu\").toggle()})},navTabTriggerHandle:function(a){a.preventDefault();var b=this.$container;a=c(a.target);a.attr(\"data-content\")||\n(a=a.closest(\"a\"));var e=a.closest(\"li\");e&&!e.hasClass(\"current\")&&(b.find(\"ul.brmsTabNav > li , .brmsTabNavHidden  ul.brmsDropdownMenu  > li\").removeClass(\"current\"),a.closest(\"li\").addClass(\"current\"),e=a.attr(\"data-content\"),b.find(\".\"+e).find(\".brmsIcoLoader\").length&&this.getStatistics(a.attr(\"data-tabid\"),0),b.find(\".brmsTabContent\").hide().removeClass(\"current\"),b.find(\".\"+e).fadeIn(100).addClass(\"current\"),this.responsiveInit())},numberEntryChangeHandle:function(a){a.preventDefault();var b=\nthis.$container;if(a=c(a.target).attr(\"data-limit\"))this.$entryLimit=a,b.attr(\"data-entryLimit\",a),XF.Cookie.set(\"brmsNumberEntry\"+this.$modernStatisticId,a),this.resetInterval(),this.$hardReload=1,this.runInterval(),this.$hardReload=!1},layoutChangeHandle:function(a){a.preventDefault();var b=this.$container;if(a=c(a.target).attr(\"data-layout\"))b.hasClass(a)||(b.removeClass(\"brmsTopTabs brmsRightTabs brmsLeftTabs\"),b.addClass(a)),XF.Cookie.set(\"brmsLayoutChange\"+this.$modernStatisticId,a),this.responsiveInit()},\nrefreshHandle:function(a){a.preventDefault();a=c(a.target);a.hasClass(\"disable\")||(this.resetInterval(),this.$hardReload=1,a.addClass(\"disable\"),this.runInterval(),this.$hardReload=!1)},getStatistics:function(a,b){var e=this.$modernStatisticId,c=this;b||(b=c.$entryLimit);XF.ajax(\"post\",XF.canonicalizeUrl(\"index.php?brms-statistics/load-tab\"),{tab_id:a,modern_statistic_id:e,hard_reload:c.$hardReload,limit:b},XF.proxy(c,\"showResult\"),{cache:!1}).always(function(){c.$entryLimit=0})},showResult:function(a){var b=\nthis.$container,c=this;a.errors||a.exception||(c=this,XF.setupHtmlInsert(a.tabContentHtml,function(e,l,k){e?c.$container.find(\".brmsTabContent_\"+a.tabId).html(e):c.$container.find(\".brmsTabContent_\"+a.tabId).html(\"\");k();XF.activate(b);c.$container.find(\".brmsRefresh\").removeClass(\"disable\");c.responsiveInit()}),a.limit&&b.attr(\"data-entryLimit\",a.limit))},showTab:function(a){var b=this.$container;a?(b.find(\"ul.brmsTabNav > li > a[data-content='\"+a+\"']\").trigger(\"click\"),a.replace(\"brmsTabContent_\",\n\"\")):(b.find(\"ul.brmsTabNav > li.current a\").trigger(\"click\"),b.find(\"ul.brmsTabNav > li.current a\").attr(\"data-content\").replace(\"brmsTabContent_\",\"\"))},runInterval:function(){this.getStatistics(this.$container.find(\"li.brmlShow.current a\").data(\"tabid\"),this.$entryLimit)},updateInterval:function(){if(!this.$brmsActive){var a=this.$container,b=this.$updateIntervalTime,c=this;if(0<b)return this.$brmsActive=g.setInterval(function(){c.getStatistics(a.find(\"ul.brmsTabNav > li.current a\").data(\"tabid\"),\nc.$entryLimit)},1E3*b)}},clearInterval:function(){g.clearInterval(this.$brmsActive);this.$brmsActive=!1;this.$updateIntervalTime=0},resetInterval:function(){this.clearInterval();this.updateInterval()},responsiveInit:function(){var a=this.$container;if(a.find(\".brmsTabContent.current\").length){var b=a.find(\".brmsLayoutList\");if(a.hasClass(\"brmsTopTabs\")){var e=0,h=a.find(\".brmsStatisticHeader\").width()-a.find(\".brmsConfigList\").width()-75,l=!1;a.find(\".brmsTabNav > li.brmlShow\").each(function(){var b=\na.find(\".brmsTabNavHidden li:eq(\"+c(this).index()+\")\");e+c(this).width()<=h?(e+=c(this).width(),c(this).css({display:\"block\"}),b.hasClass(\"current\")&&(c(this).addClass(\"current\"),b.removeClass(\"current\")),b.css({display:\"none\"})):(l=!0,c(this).css({display:\"none\"}),c(this).hasClass(\"current\")&&(c(this).removeClass(\"current\"),b.addClass(\"current\")),b.css({display:\"block\"}))});var k=a.find(\".brmsTabNavHiddenMenu\");l?k.show():k.hide();480<a.width()?(XF.Cookie.get(\"brmsLayoutChange\"+this.$modernStatisticId)&&\n!a.hasClass(XF.Cookie.get(\"brmsLayoutChange\"+this.$modernStatisticId))&&a.attr(\"class\",this.$containerClass+XF.Cookie.get(\"brmsLayoutChange\"+this.$modernStatisticId)),b.css({display:\"inline-block\"})):b.css({display:\"none\"})}else 480>=a.width()&&(a.attr(\"class\",this.$containerClass+\" brmsTopTabs\"),b.css({display:\"none\"}));var d=a.find(\".brmsTabContent.current ol li.itemStast\");if(550>a.find(\".brmsTabContent.current\").width())d.hasClass(\"itemUser\")||d.hasClass(\"itemProfilePost\")?(d.find(\".itemDetail.itemSubDetail\").hide(),\nd.find(\".itemTitle\").css({\"max-width\":\"75%\"}),350>a.find(\".brmsTabContent.current\").width()?(d.find(\".itemDetail.itemDetailMain span\").hide(),d.find(\".itemDetail.itemDetailMain\").css({width:\"50px\"}),d.find(\".itemDetail.itemDetailMain.itemDate\").css({width:\"90px\"}),d.find(\".itemTitle\").css({\"max-width\":\"85%\"})):(d.find(\".itemDetail.itemDetailMain span, .itemDetail.itemDetailMain strong\").show(),d.find(\".itemDetail.itemDetailMain\").css({width:\"200px\"}),d.find(\".itemTitle\").css({\"max-width\":\"75%\"}))):\n(d.find(\".itemDetail\").hide(),d.find(\".itemTitle\").css({\"max-width\":\"90%\"}),350>a.find(\".brmsTabContent.current\").width()?d.find(\".prefix\").hide():d.find(\".prefix\").show());else{d.find(\".prefix\").show();d.find(\".itemDetail\").show();d.find(\".itemTitle\").css({width:\"auto\"});d.find(\".itemDetail.itemDetailMain span\").show();d.find(\".itemDetail.itemDetailMain\").css({width:\"150px\"});d.find(\".itemDetail.itemDetailMain.itemDate\").css({width:\"200px\"});var f=parseInt(.33*d.width()),g=d.find(\".itemTitle\").width();\nd.find(\".itemSubDetail\").each(function(a){\"none\"==c(this).css(\"display\")?g-150>f&&d.find(\".itemSubDetail:eq(\"+a+\")\").show():g<f&&d.find(\".itemSubDetail:eq(\"+a+\")\").hide()})}}},getText:function(a,b){return BRMSLANG.xf[a]||b}});XF.BRMSTooltip=XF.Element.newHandler({options:{},$parent:null,init:function(){this.$parent=this.$target.closest(\".BRMSToolTip\");this.$parent.hover(XF.proxy(this,\"showTooltip\"),XF.proxy(this,\"hideTooltip\"))},showTooltip:function(){var a=this.$parent.find(\".tooltip\");a.length||\n(a=c(this.toolTips()),a.insertBefore(this.$target));a.addClass(\"show\")},hideTooltip:function(){var a=this.$parent.find(\".tooltip\");a.length&&a.removeClass(\"show\")},toolTips:function(){var a,b=this.$target;\"resource\"==b.attr(\"data-kind\")&&b.attr(\"data-box\")?a=\"<div>[\"+this.getText(\"brms_category\")+\"] : <b>\"+b.attr(\"data-box\")+'</b></div><ul class=\"listInline listInline--bullet\"><li>'+this.getText(\"brms_download\")+\": <b>\"+b.attr(\"data-download\")+\"</b> </li><li>\"+this.getText(\"brms_update\")+\": <b>\"+\nb.attr(\"data-update\")+\"</b> </li><li>\"+this.getText(\"brms_review\")+\": <b>\"+b.attr(\"data-review\")+\"</b> </li><li>\"+this.getText(\"brms_rating\")+\": <b>\"+b.attr(\"data-vote\")+\"</b> </li></ul></div>\":b.attr(\"data-box\")&&(a=\"<div>[\"+this.getText(\"brms_forum\")+\"] : <b>\"+b.attr(\"data-box\")+'</b></div><ul class=\"listInline listInline--bullet\"><li>'+this.getText(\"brms_views\")+\": <b>\"+b.attr(\"data-view\")+\"</b> </li><li>\"+this.getText(\"brms_replies\")+\": <b>\"+b.attr(\"data-rep\")+\"</b> </li><li>\"+this.getText(\"brms_likes\")+\n\": <b>\"+b.attr(\"data-like\")+\"</b> </li></ul></div>\");if(a)return'<div class=\"tooltip tooltip--basic tooltip--top\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-content\">'+a+\"</div></div>\"},getText:function(a,b){return XF.phrases[a]||b}});XF.Element.register(\"brms-container\",\"XF.BRMSContainer\");XF.Element.register(\"brms-tooltip\",\"XF.BRMSTooltip\")}(jQuery,window,document);"
"/*! lightslider - v1.1.6 - 2016-10-25\n* https://github.com/sachinchoolur/lightslider\n* Copyright (c) 2016 Sachin N; Licensed MIT */\n!function(a,b){\"use strict\";var c={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:\"\",mode:\"slide\",useCSS:!0,cssEasing:\"ease\",easing:\"linear\",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:\"\",nextHtml:\"\",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:\"middle\",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(a){},onSliderLoad:function(a){},onBeforeSlide:function(a,b){},onAfterSlide:function(a,b){},onBeforeNextSlide:function(a,b){},onBeforePrevSlide:function(a,b){}};a.fn.lightSlider=function(b){if(0===this.length)return this;if(this.length>1)return this.each(function(){a(this).lightSlider(b)}),this;var d={},e=a.extend(!0,{},c,b),f={},g=this;d.$el=this,\"fade\"===e.mode&&(e.vertical=!1);var h=g.children(),i=a(window).width(),j=null,k=null,l=0,m=0,n=!1,o=0,p=\"\",q=0,r=e.vertical===!0?\"height\":\"width\",s=e.vertical===!0?\"margin-bottom\":\"margin-right\",t=0,u=0,v=0,w=0,x=null,y=\"ontouchstart\"in document.documentElement,z={};return z.chbreakpoint=function(){if(i=a(window).width(),e.responsive.length){var b;if(e.autoWidth===!1&&(b=e.item),i<e.responsive[0].breakpoint)for(var c=0;c<e.responsive.length;c++)i<e.responsive[c].breakpoint&&(j=e.responsive[c].breakpoint,k=e.responsive[c]);if(\"undefined\"!=typeof k&&null!==k)for(var d in k.settings)k.settings.hasOwnProperty(d)&&((\"undefined\"==typeof f[d]||null===f[d])&&(f[d]=e[d]),e[d]=k.settings[d]);if(!a.isEmptyObject(f)&&i>e.responsive[0].breakpoint)for(var g in f)f.hasOwnProperty(g)&&(e[g]=f[g]);e.autoWidth===!1&&t>0&&v>0&&b!==e.item&&(q=Math.round(t/((v+e.slideMargin)*e.slideMove)))}},z.calSW=function(){e.autoWidth===!1&&(v=(o-(e.item*e.slideMargin-e.slideMargin))/e.item)},z.calWidth=function(a){var b=a===!0?p.find(\".lslide\").length:h.length;if(e.autoWidth===!1)m=b*(v+e.slideMargin);else{m=0;for(var c=0;b>c;c++)m+=parseInt(h.eq(c).width())+e.slideMargin}return m},d={doCss:function(){var a=function(){for(var a=[\"transition\",\"MozTransition\",\"WebkitTransition\",\"OTransition\",\"msTransition\",\"KhtmlTransition\"],b=document.documentElement,c=0;c<a.length;c++)if(a[c]in b.style)return!0};return e.useCSS&&a()?!0:!1},keyPress:function(){e.keyPress&&a(document).on(\"keyup.lightslider\",function(b){a(\":focus\").is(\"input, textarea\")||(b.preventDefault?b.preventDefault():b.returnValue=!1,37===b.keyCode?g.goToPrevSlide():39===b.keyCode&&g.goToNextSlide())})},controls:function(){e.controls&&(g.after('<div class=\"lSAction\"><a class=\"lSPrev\">'+e.prevHtml+'</a><a class=\"lSNext\">'+e.nextHtml+\"</a></div>\"),e.autoWidth?z.calWidth(!1)<o&&p.find(\".lSAction\").hide():l<=e.item&&p.find(\".lSAction\").hide(),p.find(\".lSAction a\").on(\"click\",function(b){return b.preventDefault?b.preventDefault():b.returnValue=!1,\"lSPrev\"===a(this).attr(\"class\")?g.goToPrevSlide():g.goToNextSlide(),!1}))},initialStyle:function(){var a=this;\"fade\"===e.mode&&(e.autoWidth=!1,e.slideEndAnimation=!1),e.auto&&(e.slideEndAnimation=!1),e.autoWidth&&(e.slideMove=1,e.item=1),e.loop&&(e.slideMove=1,e.freeMove=!1),e.onBeforeStart.call(this,g),z.chbreakpoint(),g.addClass(\"lightSlider\").wrap('<div class=\"lSSlideOuter '+e.addClass+'\"><div class=\"lSSlideWrapper\"></div></div>'),p=g.parent(\".lSSlideWrapper\"),e.rtl===!0&&p.parent().addClass(\"lSrtl\"),e.vertical?(p.parent().addClass(\"vertical\"),o=e.verticalHeight,p.css(\"height\",o+\"px\")):o=g.outerWidth(),h.addClass(\"lslide\"),e.loop===!0&&\"slide\"===e.mode&&(z.calSW(),z.clone=function(){if(z.calWidth(!0)>o){for(var b=0,c=0,d=0;d<h.length&&(b+=parseInt(g.find(\".lslide\").eq(d).width())+e.slideMargin,c++,!(b>=o+e.slideMargin));d++);var f=e.autoWidth===!0?c:e.item;if(f<g.find(\".clone.left\").length)for(var i=0;i<g.find(\".clone.left\").length-f;i++)h.eq(i).remove();if(f<g.find(\".clone.right\").length)for(var j=h.length-1;j>h.length-1-g.find(\".clone.right\").length;j--)q--,h.eq(j).remove();for(var k=g.find(\".clone.right\").length;f>k;k++)g.find(\".lslide\").eq(k).clone().removeClass(\"lslide\").addClass(\"clone right\").appendTo(g),q++;for(var l=g.find(\".lslide\").length-g.find(\".clone.left\").length;l>g.find(\".lslide\").length-f;l--)g.find(\".lslide\").eq(l-1).clone().removeClass(\"lslide\").addClass(\"clone left\").prependTo(g);h=g.children()}else h.hasClass(\"clone\")&&(g.find(\".clone\").remove(),a.move(g,0))},z.clone()),z.sSW=function(){l=h.length,e.rtl===!0&&e.vertical===!1&&(s=\"margin-left\"),e.autoWidth===!1&&h.css(r,v+\"px\"),h.css(s,e.slideMargin+\"px\"),m=z.calWidth(!1),g.css(r,m+\"px\"),e.loop===!0&&\"slide\"===e.mode&&n===!1&&(q=g.find(\".clone.left\").length)},z.calL=function(){h=g.children(),l=h.length},this.doCss()&&p.addClass(\"usingCss\"),z.calL(),\"slide\"===e.mode?(z.calSW(),z.sSW(),e.loop===!0&&(t=a.slideValue(),this.move(g,t)),e.vertical===!1&&this.setHeight(g,!1)):(this.setHeight(g,!0),g.addClass(\"lSFade\"),this.doCss()||(h.fadeOut(0),h.eq(q).fadeIn(0))),e.loop===!0&&\"slide\"===e.mode?h.eq(q).addClass(\"active\"):h.first().addClass(\"active\")},pager:function(){var a=this;if(z.createPager=function(){w=(o-(e.thumbItem*e.thumbMargin-e.thumbMargin))/e.thumbItem;var b=p.find(\".lslide\"),c=p.find(\".lslide\").length,d=0,f=\"\",h=0;for(d=0;c>d;d++){\"slide\"===e.mode&&(e.autoWidth?h+=(parseInt(b.eq(d).width())+e.slideMargin)*e.slideMove:h=d*(v+e.slideMargin)*e.slideMove);var i=b.eq(d*e.slideMove).attr(\"data-thumb\");if(f+=e.gallery===!0?'<li style=\"width:100%;'+r+\":\"+w+\"px;\"+s+\":\"+e.thumbMargin+'px\"><a href=\"#\"><img src=\"'+i+'\" /></a></li>':'<li><a href=\"#\">'+(d+1)+\"</a></li>\",\"slide\"===e.mode&&h>=m-o-e.slideMargin){d+=1;var j=2;e.autoWidth&&(f+='<li><a href=\"#\">'+(d+1)+\"</a></li>\",j=1),j>d?(f=null,p.parent().addClass(\"noPager\")):p.parent().removeClass(\"noPager\");break}}var k=p.parent();k.find(\".lSPager\").html(f),e.gallery===!0&&(e.vertical===!0&&k.find(\".lSPager\").css(\"width\",e.vThumbWidth+\"px\"),u=d*(e.thumbMargin+w)+.5,k.find(\".lSPager\").css({property:u+\"px\",\"transition-duration\":e.speed+\"ms\"}),e.vertical===!0&&p.parent().css(\"padding-right\",e.vThumbWidth+e.galleryMargin+\"px\"),k.find(\".lSPager\").css(r,u+\"px\"));var l=k.find(\".lSPager\").find(\"li\");l.first().addClass(\"active\"),l.on(\"click\",function(){return e.loop===!0&&\"slide\"===e.mode?q+=l.index(this)-k.find(\".lSPager\").find(\"li.active\").index():q=l.index(this),g.mode(!1),e.gallery===!0&&a.slideThumb(),!1})},e.pager){var b=\"lSpg\";e.gallery&&(b=\"lSGallery\"),p.after('<ul class=\"lSPager '+b+'\"></ul>');var c=e.vertical?\"margin-left\":\"margin-top\";p.parent().find(\".lSPager\").css(c,e.galleryMargin+\"px\"),z.createPager()}setTimeout(function(){z.init()},0)},setHeight:function(a,b){var c=null,d=this;c=e.loop?a.children(\".lslide \").first():a.children().first();var f=function(){var d=c.outerHeight(),e=0,f=d;b&&(d=0,e=100*f/o),a.css({height:d+\"px\",\"padding-bottom\":e+\"%\"})};f(),c.find(\"img\").length?c.find(\"img\")[0].complete?(f(),x||d.auto()):c.find(\"img\").on(\"load\",function(){setTimeout(function(){f(),x||d.auto()},100)}):x||d.auto()},active:function(a,b){this.doCss()&&\"fade\"===e.mode&&p.addClass(\"on\");var c=0;if(q*e.slideMove<l){a.removeClass(\"active\"),this.doCss()||\"fade\"!==e.mode||b!==!1||a.fadeOut(e.speed),c=b===!0?q:q*e.slideMove;var d,f;b===!0&&(d=a.length,f=d-1,c+1>=d&&(c=f)),e.loop===!0&&\"slide\"===e.mode&&(c=b===!0?q-g.find(\".clone.left\").length:q*e.slideMove,b===!0&&(d=a.length,f=d-1,c+1===d?c=f:c+1>d&&(c=0))),this.doCss()||\"fade\"!==e.mode||b!==!1||a.eq(c).fadeIn(e.speed),a.eq(c).addClass(\"active\")}else a.removeClass(\"active\"),a.eq(a.length-1).addClass(\"active\"),this.doCss()||\"fade\"!==e.mode||b!==!1||(a.fadeOut(e.speed),a.eq(c).fadeIn(e.speed))},move:function(a,b){e.rtl===!0&&(b=-b),this.doCss()?a.css(e.vertical===!0?{transform:\"translate3d(0px, \"+-b+\"px, 0px)\",\"-webkit-transform\":\"translate3d(0px, \"+-b+\"px, 0px)\"}:{transform:\"translate3d(\"+-b+\"px, 0px, 0px)\",\"-webkit-transform\":\"translate3d(\"+-b+\"px, 0px, 0px)\"}):e.vertical===!0?a.css(\"position\",\"relative\").animate({top:-b+\"px\"},e.speed,e.easing):a.css(\"position\",\"relative\").animate({left:-b+\"px\"},e.speed,e.easing);var c=p.parent().find(\".lSPager\").find(\"li\");this.active(c,!0)},fade:function(){this.active(h,!1);var a=p.parent().find(\".lSPager\").find(\"li\");this.active(a,!0)},slide:function(){var a=this;z.calSlide=function(){m>o&&(t=a.slideValue(),a.active(h,!1),t>m-o-e.slideMargin?t=m-o-e.slideMargin:0>t&&(t=0),a.move(g,t),e.loop===!0&&\"slide\"===e.mode&&(q>=l-g.find(\".clone.left\").length/e.slideMove&&a.resetSlide(g.find(\".clone.left\").length),0===q&&a.resetSlide(p.find(\".lslide\").length)))},z.calSlide()},resetSlide:function(a){var b=this;p.find(\".lSAction a\").addClass(\"disabled\"),setTimeout(function(){q=a,p.css(\"transition-duration\",\"0ms\"),t=b.slideValue(),b.active(h,!1),d.move(g,t),setTimeout(function(){p.css(\"transition-duration\",e.speed+\"ms\"),p.find(\".lSAction a\").removeClass(\"disabled\")},50)},e.speed+100)},slideValue:function(){var a=0;if(e.autoWidth===!1)a=q*(v+e.slideMargin)*e.slideMove;else{a=0;for(var b=0;q>b;b++)a+=parseInt(h.eq(b).width())+e.slideMargin}return a},slideThumb:function(){var a;switch(e.currentPagerPosition){case\"left\":a=0;break;case\"middle\":a=o/2-w/2;break;case\"right\":a=o-w}var b=q-g.find(\".clone.left\").length,c=p.parent().find(\".lSPager\");\"slide\"===e.mode&&e.loop===!0&&(b>=c.children().length?b=0:0>b&&(b=c.children().length));var d=b*(w+e.thumbMargin)-a;d+o>u&&(d=u-o-e.thumbMargin),0>d&&(d=0),this.move(c,d)},auto:function(){e.auto&&(clearInterval(x),x=setInterval(function(){g.goToNextSlide()},e.pause))},pauseOnHover:function(){var b=this;e.auto&&e.pauseOnHover&&(p.on(\"mouseenter\",function(){a(this).addClass(\"ls-hover\"),g.pause(),e.auto=!0}),p.on(\"mouseleave\",function(){a(this).removeClass(\"ls-hover\"),p.find(\".lightSlider\").hasClass(\"lsGrabbing\")||b.auto()}))},touchMove:function(a,b){if(p.css(\"transition-duration\",\"0ms\"),\"slide\"===e.mode){var c=a-b,d=t-c;if(d>=m-o-e.slideMargin)if(e.freeMove===!1)d=m-o-e.slideMargin;else{var f=m-o-e.slideMargin;d=f+(d-f)/5}else 0>d&&(e.freeMove===!1?d=0:d/=5);this.move(g,d)}},touchEnd:function(a){if(p.css(\"transition-duration\",e.speed+\"ms\"),\"slide\"===e.mode){var b=!1,c=!0;t-=a,t>m-o-e.slideMargin?(t=m-o-e.slideMargin,e.autoWidth===!1&&(b=!0)):0>t&&(t=0);var d=function(a){var c=0;if(b||a&&(c=1),e.autoWidth)for(var d=0,f=0;f<h.length&&(d+=parseInt(h.eq(f).width())+e.slideMargin,q=f+c,!(d>=t));f++);else{var g=t/((v+e.slideMargin)*e.slideMove);q=parseInt(g)+c,t>=m-o-e.slideMargin&&g%1!==0&&q++}};a>=e.swipeThreshold?(d(!1),c=!1):a<=-e.swipeThreshold&&(d(!0),c=!1),g.mode(c),this.slideThumb()}else a>=e.swipeThreshold?g.goToPrevSlide():a<=-e.swipeThreshold&&g.goToNextSlide()},enableDrag:function(){var b=this;if(!y){var c=0,d=0,f=!1;p.find(\".lightSlider\").addClass(\"lsGrab\"),p.on(\"mousedown\",function(b){return o>m&&0!==m?!1:void(\"lSPrev\"!==a(b.target).attr(\"class\")&&\"lSNext\"!==a(b.target).attr(\"class\")&&(c=e.vertical===!0?b.pageY:b.pageX,f=!0,b.preventDefault?b.preventDefault():b.returnValue=!1,p.scrollLeft+=1,p.scrollLeft-=1,p.find(\".lightSlider\").removeClass(\"lsGrab\").addClass(\"lsGrabbing\"),clearInterval(x)))}),a(window).on(\"mousemove\",function(a){f&&(d=e.vertical===!0?a.pageY:a.pageX,b.touchMove(d,c))}),a(window).on(\"mouseup\",function(g){if(f){p.find(\".lightSlider\").removeClass(\"lsGrabbing\").addClass(\"lsGrab\"),f=!1,d=e.vertical===!0?g.pageY:g.pageX;var h=d-c;Math.abs(h)>=e.swipeThreshold&&a(window).on(\"click.ls\",function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopImmediatePropagation(),b.stopPropagation(),a(window).off(\"click.ls\")}),b.touchEnd(h)}})}},enableTouch:function(){var a=this;if(y){var b={},c={};p.on(\"touchstart\",function(a){c=a.originalEvent.targetTouches[0],b.pageX=a.originalEvent.targetTouches[0].pageX,b.pageY=a.originalEvent.targetTouches[0].pageY,clearInterval(x)}),p.on(\"touchmove\",function(d){if(o>m&&0!==m)return!1;var f=d.originalEvent;c=f.targetTouches[0];var g=Math.abs(c.pageX-b.pageX),h=Math.abs(c.pageY-b.pageY);e.vertical===!0?(3*h>g&&d.preventDefault(),a.touchMove(c.pageY,b.pageY)):(3*g>h&&d.preventDefault(),a.touchMove(c.pageX,b.pageX))}),p.on(\"touchend\",function(){if(o>m&&0!==m)return!1;var d;d=e.vertical===!0?c.pageY-b.pageY:c.pageX-b.pageX,a.touchEnd(d)})}},build:function(){var b=this;b.initialStyle(),this.doCss()&&(e.enableTouch===!0&&b.enableTouch(),e.enableDrag===!0&&b.enableDrag()),a(window).on(\"focus\",function(){b.auto()}),a(window).on(\"blur\",function(){clearInterval(x)}),b.pager(),b.pauseOnHover(),b.controls(),b.keyPress()}},d.build(),z.init=function(){z.chbreakpoint(),e.vertical===!0?(o=e.item>1?e.verticalHeight:h.outerHeight(),p.css(\"height\",o+\"px\")):o=p.outerWidth(),e.loop===!0&&\"slide\"===e.mode&&z.clone(),z.calL(),\"slide\"===e.mode&&g.removeClass(\"lSSlide\"),\"slide\"===e.mode&&(z.calSW(),z.sSW()),setTimeout(function(){\"slide\"===e.mode&&g.addClass(\"lSSlide\")},1e3),e.pager&&z.createPager(),e.adaptiveHeight===!0&&e.vertical===!1&&g.css(\"height\",h.eq(q).outerHeight(!0)),e.adaptiveHeight===!1&&(\"slide\"===e.mode?e.vertical===!1?d.setHeight(g,!1):d.auto():d.setHeight(g,!0)),e.gallery===!0&&d.slideThumb(),\"slide\"===e.mode&&d.slide(),e.autoWidth===!1?h.length<=e.item?p.find(\".lSAction\").hide():p.find(\".lSAction\").show():z.calWidth(!1)<o&&0!==m?p.find(\".lSAction\").hide():p.find(\".lSAction\").show()},g.goToPrevSlide=function(){if(q>0)e.onBeforePrevSlide.call(this,g,q),q--,g.mode(!1),e.gallery===!0&&d.slideThumb();else if(e.loop===!0){if(e.onBeforePrevSlide.call(this,g,q),\"fade\"===e.mode){var a=l-1;q=parseInt(a/e.slideMove)}g.mode(!1),e.gallery===!0&&d.slideThumb()}else e.slideEndAnimation===!0&&(g.addClass(\"leftEnd\"),setTimeout(function(){g.removeClass(\"leftEnd\")},400))},g.goToNextSlide=function(){var a=!0;if(\"slide\"===e.mode){var b=d.slideValue();a=b<m-o-e.slideMargin}q*e.slideMove<l-e.slideMove&&a?(e.onBeforeNextSlide.call(this,g,q),q++,g.mode(!1),e.gallery===!0&&d.slideThumb()):e.loop===!0?(e.onBeforeNextSlide.call(this,g,q),q=0,g.mode(!1),e.gallery===!0&&d.slideThumb()):e.slideEndAnimation===!0&&(g.addClass(\"rightEnd\"),setTimeout(function(){g.removeClass(\"rightEnd\")},400))},g.mode=function(a){e.adaptiveHeight===!0&&e.vertical===!1&&g.css(\"height\",h.eq(q).outerHeight(!0)),n===!1&&(\"slide\"===e.mode?d.doCss()&&(g.addClass(\"lSSlide\"),\"\"!==e.speed&&p.css(\"transition-duration\",e.speed+\"ms\"),\"\"!==e.cssEasing&&p.css(\"transition-timing-function\",e.cssEasing)):d.doCss()&&(\"\"!==e.speed&&g.css(\"transition-duration\",e.speed+\"ms\"),\"\"!==e.cssEasing&&g.css(\"transition-timing-function\",e.cssEasing))),a||e.onBeforeSlide.call(this,g,q),\"slide\"===e.mode?d.slide():d.fade(),p.hasClass(\"ls-hover\")||d.auto(),setTimeout(function(){a||e.onAfterSlide.call(this,g,q)},e.speed),n=!0},g.play=function(){g.goToNextSlide(),e.auto=!0,d.auto()},g.pause=function(){e.auto=!1,clearInterval(x)},g.refresh=function(){z.init()},g.getCurrentSlideCount=function(){var a=q;if(e.loop){var b=p.find(\".lslide\").length,c=g.find(\".clone.left\").length;a=c-1>=q?b+(q-c):q>=b+c?q-b-c:q-c}return a+1},g.getTotalSlideCount=function(){return p.find(\".lslide\").length},g.goToSlide=function(a){q=e.loop?a+g.find(\".clone.left\").length-1:a,g.mode(!1),e.gallery===!0&&d.slideThumb()},g.destroy=function(){g.lightSlider&&(g.goToPrevSlide=function(){},g.goToNextSlide=function(){},g.mode=function(){},g.play=function(){},g.pause=function(){},g.refresh=function(){},g.getCurrentSlideCount=function(){},g.getTotalSlideCount=function(){},g.goToSlide=function(){},g.lightSlider=null,z={init:function(){}},g.parent().parent().find(\".lSAction, .lSPager\").remove(),g.removeClass(\"lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right\").removeAttr(\"style\").unwrap().unwrap(),g.children().removeAttr(\"style\"),h.removeClass(\"lslide active\"),g.find(\".clone\").remove(),h=null,x=null,n=!1,q=0)},setTimeout(function(){e.onSliderLoad.call(this,g)},10),a(window).on(\"resize orientationchange\",function(a){setTimeout(function(){a.preventDefault?a.preventDefault():a.returnValue=!1,z.init()},200)}),this}}(jQuery);\n!function(e,f,k,l){XF.Carousel=XF.Element.newHandler({options:{items:null,pause:4E3},breakpoints:{2:[700]},$items:null,init:function(){if(e.fn.lightSlider){this.$items=this.$target.children();var a=this.options,c=[];null===a.items&&(this.$target.attr(\"class\").match(/--show(\\d+)/)?a.items=parseInt(RegExp.$1,10):a.items=1);if(this.breakpoints[a.items])for(var d=this.breakpoints[a.items],b=0;b<d.length;b++)c.push({breakpoint:d[b],settings:{item:a.items-b-1}});d=a.items;b=e(f).width();for(var g in c)b<\nc[g].breakpoint&&(d=c[g].settings.item);if(!(this.$items.length<=d)){this.slider=this.$target.lightSlider({item:a.items,addClass:\"carousel-scrollContainer\",slideMargin:0,galleryMargin:0,controls:!1,auto:!0,pause:a.pause,speed:400,pauseOnHover:!0,loop:!0,rtl:XF.isRtl(),enableDrag:!1,responsive:c});var h=this;e(f).on(\"resize\",function(){h.$target.css(\"height\",\"\");h.slider.refresh()})}}else console.error(\"Lightslider must be loaded\")}});XF.Element.register(\"carousel\",\"XF.Carousel\")}(jQuery,window,document);"
"!function(f,g,r,s){var b=navigator.userAgent;var q=/firefox/i.test(b);var m=/Edge/i.test(b);var a=!m&&/Chrome/i.test(b);var y=f(\"#siropuChat\");var u=f(\"#siropuChatHeader\");var A=f(\"#siropuChatTabs\");var d=A.find('a[data-target=\"room-list\"]');var h=A.find('a[data-target=\"conv-list\"]');var i=A.find('a[data-target=\"conv-form\"]');var t=f(\"#siropuChatContent\");var B=f(\".siropuChatMessages\");var o=f(\"#siropuChatStartConversation\");var p=f(\".siropuChatConversation.siropuChatUsers\");var j=f(\"#siropuChatNoConversations\");var C=f(\"#siropuChatRooms\");var z=f(\"#siropuChatSettings\");var e=f(\"#siropuChatEditor\");var c=e.find(\"form\");var l=c.find(\"textarea\");var w=f(\"#siropuChatBar\");var v=f(\"#siropuChatBarMessageContainer\");var n=f(\"#siropuChatBarUserCount span\");var k=y.hasClass(\"siropuChatAllPages\");var x=f(\".siropuChatLogout\");XF.SiropuChat={};XF.SiropuChat.Core=XF.Element.newHandler({options:{active:false},canUseChat:true,loggedIn:f(\"#XF\").data(\"logged-in\"),channel:\"room\",screenSize:\"l\",serverTime:0,pageFocus:true,pageTitle:f(\"title\").text(),tabNotification:false,tabNotificationInterval:null,roomId:1,lastId:{},convId:0,convUnread:{},convOnly:0,noticeLastUpdate:0,convLastActive:0,userLastUpdate:0,messageDisplayLimit:25,notificationTimeout:5000,isVisible:true,refreshActive:5000,refreshActiveHidden:15000,refreshInactive:30000,refreshInactiveHidden:60000,refreshInterval:0,refreshSet:null,inverse:0,floadCheck:0,displayNavCount:false,forceRoom:false,inIframe:g.frameElement,dynamicTitle:true,commands:{},sounds:{},loadMoreButton:{room:true,conv:true},forceAutoScroll:false,init:function(){this.getScreenSize();this.startRefreshInterval();this._initSubmitForm();this._initTabs();this._initRoomListActions();this._initRoomActions();this._initConversations();this._initAutoScrollToggle();this._initSounds();this._initOnLoad();z.on(\"change\",f.proxy(this,\"saveSettings\"));w.on(\"click\",f.proxy(this,\"toggleChat\"));y.on(\"new-message\",f.proxy(this,\"newMessage\"));var D=this;if(k){f(\".p-footer\").css(\"padding-bottom\",60)}f(g).scroll(function(){if(f(\".p-navSticky\").length&&f(\".siropuChatAllPages.siropuChatMaximized\").length){D.adjustContentHeight()}});f(g).resize(function(){D.getScreenSize();D.adjustContentHeight()});f(g).blur(function(){D.pageFocus=false});f(g).focus(function(){D.pageFocus=true;if(D.tabNotificationInterval){clearInterval(D.tabNotificationInterval);f(\"title\").text(D.pageTitle)}});f(r).on(\"click\",\".colorPicker-save\",function(){D.saveSettings()});f(r).on(\"keyup\",function(E){if(E.which==27&&k){D.toggleChat()}});f(r).on(\"click\",\".siropuChatMessageRow.siropuChatBot ol li b\",function(){D.editorSetHtml(f(this).html())});f(r).on(\"siropuChat:show-load-more\",\".siropuChatMessages\",function(){if(D.inRoom()&&!D.loadMoreButton.room||D.inConv()&&!D.loadMoreButton.conv){return}if(f(this).find(\"> li[data-id]\").length<D.messageDisplayLimit){return}var F=f('<li class=\"siropuChatLoadMoreMessages\" style=\"display: none;\" />');var E=f('<a class=\"button button--link\" data-xf-click=\"siropu-chat-load-more-messages\" />');E.html(XF.phrase(\"siropu_chat_load_more_messages\")).appendTo(F);if(f(this).find(\".siropuChatLoadMoreMessages\").length){return f(this).find(\".siropuChatLoadMoreMessages\").fadeIn()}if(D.inverse){F.appendTo(f(this)).fadeIn();f(this).scrollTop(1000000)}else{F.prependTo(f(this)).fadeIn()}XF.activate(F)});f(r).on(\"click\",function(E){if(k&&y.is(\":visible\")&&E.target.className.match(\"p-\")){w.trigger(\"click\")}});this.$target.on(\"mouseover mouseout\",\".siropuChatMessageRow\",function(){if(f(this).find(\".siropuChatMessageActions\").length){f(this).find(\".siropuChatDateTime, .siropuChatMessageActions\").toggle()}});setTimeout(function(){D.adjustContentHeight();D.editorSetHtml(\"\");if(y.hasClass(\"siropuChatPage\")&&!D.inIframe&&!D.screenSizeIs(\"s\")){D.editorFocus()}if(D.channel==\"conv\"&&D.getConvCount()){p.find(\".siropuChatActiveConversation\").trigger(\"click\",true)}if(!D.canUseChat){D.editorOffPlaceholder(\"nopermission\")}},500);if(this.isResponsive()&&this.inRoom()){f(\".siropuChatRoom.siropuChatUsers\").hide()}this.noticeLastUpdate=this.serverTime;this.userLastUpdate=this.serverTime;this.convLastActive=this.serverTime;this.autoScroll();this.toggleLogout();this.toggleBotMessages()},getScreenSize:function(){if(g.matchMedia(\"(max-width: 768px)\").matches){this.screenSize=\"s\"}else{if(g.matchMedia(\"(max-width: 1024px)\").matches){this.screenSize=\"m\"}else{this.screenSize=\"l\"}}},getRoomCount:function(){return y.find(\"ul[data-room-id]\").length},getConvCount:function(){return y.find(\"li[data-conv-id]\").length},screenSizeIs:function(D){return this.screenSize==D},isResponsive:function(){return(this.screenSizeIs(\"s\")||y.hasClass(\"siropuChatSidebar\"))},newMessage:function(E,D){if(D.action!=\"join\"){this.playSound(D);if(!this.pageFocus){this.displayTabNotification(D);this.initDesktopNotification(D)}}},doRoomActions:function(H){var K=this;if(H.actions){for(var E in H.actions){if(this.lastId[E]===undefined){continue}var D=f('.siropuChatMessages[data-room-id=\"'+E+'\"]');for(var I in H.actions[E]){var G=H.actions[E][I];var L=D.find('> li[data-id=\"'+I+'\"]');for(var J in G.action){if(L.attr(\"data-last-change\")==G.action[J]){continue}switch(J){case\"edit\":L.find(\".siropuChatMessageText\").html(G.html);break;case\"delete\":L.fadeOut();break;case\"like\":var F=L.find(\".siropuChatMessageLikes\");if(F.length){if(G.likes){F.replaceWith(G.likes)}else{F.remove()}}else{L.find(\".siropuChatMessageText\").after(G.likes)}break;case\"prune\":if(H.prune){D.find('> li[data-user-id=\"'+H.prune+'\"]').remove()}else{D.find(\"> li\").each(function(){if(f(this).data(\"id\")<I){f(this).remove()}})}break}L.attr(\"data-last-change\",G.action[J])}}}}},updateHeaderTitle:function(D){if(this.dynamicTitle){u.find(\"> span\").text(D.data(\"title\"))}},updateRooms:function(K){var N=this;var M=false;if(K.rooms===undefined){return}for(var I in K.rooms){var E=t.find('.siropuChatMessages[data-room-id=\"'+I+'\"]');var H=t.find('.siropuChatUsers[data-room-id=\"'+I+'\"]');var J=f(K.rooms[I][\"messages\"]);var F=f(K.rooms[I][\"users\"]);var G=K.rooms[I][\"userCount\"];var D=A.find('a[data-room-id=\"'+I+'\"]');var L=H.find(\".siropuChatNoRoomUsers\");if(K.action!=\"submit\"){F.each(function(){var P=f(this).data(\"user-id\");if(P==0){O=H.find('li[data-username=\"'+f(this).data(\"username\")+'\"]')}else{var O=H.find('li[data-user-id=\"'+P+'\"]')}if(O.length){O.find(\".siropuChatActivityStatus\").replaceWith(f(this).find(\".siropuChatActivityStatus\"))}else{if(f(this).hasClass(\"siropuChatNoRoomUsers\")){H.html(f(this))}else{H.prepend(f(this));XF.activate(H);if(L.length){L.remove()}}}});if(F){this.userLastUpdate=K.serverTime}D.find(\"span\").html(G).attr(\"class\",G?\"siropuChatTabCountActive\":\"siropuChatTabCountInactive\")}if(J.length){J=f.grep(J,function(O){return E.find('> li[data-id=\"'+f(O).data(\"id\")+'\"]').length?false:true});if(this.inverse){E.prepend(J)}else{E.append(J)}XF.activate(E);this.autoScroll(E);this.deleteOlderMessages(K.serverTime,E);if(!D.hasClass(\"siropuChatActiveTab\")){D.addClass(\"siropuChatNewMessage\")}if(f(J).length){M=true}}}this.updateLastId(K);this.updateNavUserCount(K);this.updateRoomTabs(K);this.updateBar(K);if(M){K.channel=\"room\";y.trigger(\"new-message\",K)}},updateConversations:function(H){var E=this;var D=false;this.convUnread={};h.find(\"span\").html(H.convOnline).attr(\"class\",H.convOnline?\"siropuChatTabCountActive\":\"siropuChatTabCountInactive\");if(H.convContacts){f(H.convContacts).each(function(){var K=p.find('li[data-conv-id=\"'+f(this).data(\"conv-id\")+'\"]');if(K.length){K.find(\".siropuChatActivityStatus\").replaceWith(f(this).find(\".siropuChatActivityStatus\"))}else{p.append(f(this));if(j.length){j.remove()}}});this.userLastUpdate=H.serverTime}if(H.convMessages){for(var J in H.convMessages){var G=f(H.convMessages[J]);var I=f('.siropuChatConversation.siropuChatMessages[data-conv-id=\"'+J+'\"]');if(I.length){G=f.grep(G,function(K){return I.find('> li[data-id=\"'+f(K).data(\"id\")+'\"]').length?false:true})}else{if(!this.convId||H.convId){I=this.createConversationMessageContainer(J);I.insertBefore(o);this.convId=H.convId?H.convId:J;setTimeout(function(){p.find('li[data-conv-id=\"'+E.convId+'\"]').click()})}}if(this.inverse){I.prepend(G)}else{I.append(G)}XF.activate(I);this.autoScroll(I);this.deleteOlderMessages(H.serverTime,I)}}if(H.convUnread){this.convUnread=H.convUnread;for(var J in H.convUnread){var F=p.find('li[data-conv-id=\"'+J+'\"]');if(!F.hasClass(\"siropuChatNewMessage\")){D=true}F.addClass(\"siropuChatNewMessage\")}if(this.inRoom()){h.addClass(\"siropuChatNewMessage\")}}if(D){H.channel=\"conv\";y.trigger(\"new-message\",H)}},createRoomMessageContainer:function(D){return f('<ul class=\"siropuChatRoom siropuChatMessages\" data-room-id=\"'+D+'\" data-autoscroll=\"1\" />')},createConversationMessageContainer:function(D){return f('<ul class=\"siropuChatConversation siropuChatMessages\" data-conv-id=\"'+D+'\" data-autoscroll=\"1\" />')},updateNotice:function(E){var F=f(\"#siropuChatNotice\");if(E.notice&&(E.serverTime-this.noticeLastUpdate>=60||!F.length)){var D=f(E.notice);if(F.length&&F.find(\"span\").text()==D.find(\"span\").text()){return}D.find(\"span\").hide();if(F.length){F.replaceWith(D)}else{f(\"#siropuChatHeader\").after(D)}setTimeout(function(){D.find(\"span\").fadeIn()});this.noticeLastUpdate=E.serverTime}if(!E.notice&&F.length){F.remove()}},updateActivityStatus:function(D){if(D.action!=\"submit\"&&(D.active&&!this.options.active||!D.active&&this.options.active)){this.options.active=D.active;y.attr(\"data-active\",D.active);this.resetRefreshInterval()}},updateNavUserCount:function(E){if(E.action==\"submit\"){return}if(!this.displayNavCount){return}var D=f('a[data-nav-id=\"siropuChat\"] span.badge');D.text(E.userCount);if(E.userCount){D.addClass(\"badge--active\")}else{D.removeClass(\"badge--active\")}},updateBar:function(D){if(!D.lastRow){return}v.html(D.lastRow.message);w.attr(\"data-room-id\",D.lastRow.roomId);if(D.action!=\"submit\"){n.html(D.userCount)}},updateRoomTabs:function(E){if(this.forceRoom==true||this.loggedIn==false||E.joinedRooms===undefined){return}if(A.length){if(this.lastId&&E.joinedRooms){for(var D in this.lastId){if(f.inArray(Number(D),E.joinedRooms)==-1){this.leaveRoomPostActions(D)}}}else{if(this.getRoomCount()){this.postLogout()}}}},updateLastId:function(D){if(D.lastId===undefined||D.lastId.length===0){return}for(var E in D.lastId){this.lastId[E]=D.lastId[E]}},getRooms:function(){XF.ajax(\"GET\",XF.canonicalizeUrl(\"index.php?chat/room/list\"),{},function(D){if(D.html){XF.setupHtmlInsert(D.html,function(E,F,G){C.html(E)})}})},loadRoom:function(F){var D=this;var E=f(F.roomTab);if(this.getRoomCount()==0){E.removeClass(\"siropuChatActiveTab\")}E.insertBefore(d);var G=this.createRoomMessageContainer(F.roomId);G.prependTo(t);this._initAutoScrollToggle(G);f('<ul class=\"siropuChatRoom siropuChatUsers\" data-room-id=\"'+F.roomId+'\" />').prependTo(t);this.updateRooms(F);setTimeout(function(){D.doAutoScroll(G)});this.switchRoom(F.roomId);this.toggleLogout()},leaveRoom:function(E){var D=this;var E=E?E:this.roomId;XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?chat/room/\"+E+\"/leave\"),{},function(F){D.leaveRoomPostActions(E)},{skipDefault:true})},leaveRoomPostActions:function(E,D){y.find('[data-room-id=\"'+E+'\"]').remove();delete this.lastId[E];XF.Cookie.remove(\"siropu_chat_room_id\");if(D){var F=A.find(\"[data-room-id]:last\");if(F.length){F.click()}else{d.click()}}this.toggleLogout()},leaveConversationPostActions:function(D){y.find('[data-conv-id=\"'+D+'\"]').remove();XF.Cookie.remove(\"siropu_chat_conv_id\");if(this.getConvCount()){p.find(\"li[data-conv-id]:first\").click()}},autoScroll:function(D){var D=D?D:f(\".siropuChatMessages\");if(D.attr(\"data-autoscroll\")==1||this.forceAutoScroll){this.doAutoScroll(D)}},doAutoScroll:function(D){var D=D?D:f(\".siropuChatMessages\");if(this.inverse){D.scrollTop(0)}else{D.scrollTop(1000000)}},getSoundSetting:function(D){return z.find('input[name=\"sound['+D+']\"]').is(\":checked\")},getNotificationSetting:function(D){return z.find('input[name=\"notification['+D+']\"]').is(\":checked\")},getMiscSetting:function(D){return z.find('input[name=\"'+D+'\"]').is(\":checked\")},getCommand:function(D){return this.commands[D]},getNotificationPhrase:function(E){var D=this.getMessageType(E);switch(D){case\"mention\":case\"public\":return XF.phrase(\"siropu_chat_new_public_message\");break;case\"private\":return XF.phrase(\"siropu_chat_new_private_message\");break;case\"whisper\":return XF.phrase(\"siropu_chat_new_whisper_message\");break;default:return XF.phrase(\"siropu_chat_new_message\");break}},getMessageType:function(D){return D.channel==\"room\"?D.lastRow.type:D.convLastRow.type},playSound:function(D){if(D.channel==\"room\"){var E=D.playSound}else{var E=D.convPlaySound}if(this.sounds[E]){this.sounds[E].play()}},initDesktopNotification:function(E){var D=this;if(!(\"Notification\" in g)){return}if(!this.getNotificationSetting(this.getMessageType(E))){return}if(Notification.permission===\"granted\"){this.sendDesktopNotification(E)}else{if(Notification.permission!==\"denied\"){Notification.requestPermission(function(F){if(F===\"granted\"){D.sendDesktopNotification(E)}})}}},sendDesktopNotification:function(G){if(G.channel==\"room\"){var F=G.lastRow}else{var F=G.convLastRow}var D=this;var E={body:F.text,icon:F.avatar,tag:\"siropuChatNotification\"};var H=new Notification(this.getNotificationPhrase(G),E);setTimeout(H.close.bind(H),this.notificationTimeout);H.onclick=function(){this.close();g.focus();if(k&&y.is(\":hidden\")){w.click()}else{D.switchRoom()}}},displayTabNotification:function(E){var D=this;if(this.tabNotification&&!this.tabNotificationInterval){this.tabNotificationInterval=setInterval(function(){f(\"title\").text(f(\"title\").text()==D.pageTitle?D.getNotificationPhrase(E):D.pageTitle)},1500)}},switchRoom:function(D){A.find('a[data-room-id=\"'+D+'\"]').click()},switchConversation:function(D){p.find('li[data-conv-id=\"'+D+'\"]').click()},preSubmit:function(){var D=this;this.editorSetHtml(\"\");D.editorOffPlaceholder(\"posting\");this.responseTimeout=setTimeout(function(){D.editorSetPlaceholder(\"noresponse\");D.editorOn();D.startRefreshInterval()},5000);this.stopRefreshInterval()},postSubmit:function(){if(this.inRoom()&&!this.getRoomCount()||this.inConv()&&!this.getConvCount()){this.editorOffPlaceholder(\"\")}else{this.editorOn();this.editorFocus();if(this.inRoom()){this.editorSetPlaceholder(\"public\")}else{this.editorSetPlaceholder(\"private\",p.find('li[data-conv-id=\"'+this.convId+'\"]'))}}clearTimeout(this.responseTimeout);this.startRefreshInterval()},saveSettings:function(E){var D=this;if(!z.length){return}XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?chat/save-settings\"),z.serialize(),function(G){if(G.errorHtml){XF.setupHtmlInsert(G.errorHtml,function(H,I){var J=I.h1||I.title||XF.phrase(\"oops_we_ran_into_some_problems\");XF.overlayMessage(J,H)});return true}var F=\"\";if(E!==undefined){F=E.target.name}switch(F){case\"inverse\":D.inverse=D.getMiscSetting(\"inverse\");D.autoScroll();break;case\"maximized\":y.toggleClass(\"siropuChatMaximized\");D.adjustContentHeight();if(k&&!y.hasClass(\"siropuChatMaximized\")){y.css(\"z-index\",\"\");t.css(\"height\",\"\")}break;case\"display_mode\":case\"editor_on_top\":if(F==\"display_mode\"&&y.hasClass(\"siropuChatPage\")){return}XF.flashMessage(XF.phrase(\"siropu_chat_settings_change_reload_page\"),3000);break;case\"hide_bot\":D.toggleBotMessages();break;case\"hide_chatters\":y.toggleClass(\"siropuChatHideUserList\");break;case\"disable\":XF.flashMessage(XF.phrase(\"siropu_chat_has_been_disabled\"),5000);f(\"#siropuChat, #siropuChatBar\").remove();f(r).click();break;default:if(F.match(\"sound\")){D._initSounds()}break}},{skipDefault:true})},toggleChat:function(){y.toggle();v.toggle();this.isVisible=y.is(\":visible\");this.switchRoom(w.attr(\"data-room-id\"));this.doAutoScroll();this.resetRefreshInterval();if(!this.screenSizeIs(\"s\")){this.editorFocus()}var D=y.height()+w.height()+10;if(D>f(g).height()){this.adjustContentHeight()}},toggleAutoScroll:function(D){var F=D[0].scrollHeight-D.innerHeight();var E=parseInt(D.scrollTop());D.attr(\"data-autoscroll\",0);if(((E==F||E+1==F||E-1==F)&&!this.inverse)||E==0&&this.inverse){D.attr(\"data-autoscroll\",1)}if(E==0&&!this.inverse||((E==F||E+1==F||E-1==F)&&this.inverse)){D.trigger(\"siropuChat:show-load-more\")}},toggleLogout:function(){if(this.getRoomCount()==0){x.fadeOut()}else{x.fadeIn()}},toggleBotMessages:function(){var D=f(\".siropuChatRoom.siropuChatMessages > li.siropuChatBot\");if(this.getMiscSetting(\"hide_bot\")){D.fadeOut()}else{D.fadeIn()}},startRefreshInterval:function(){if(this.isVisible){if(this.options.active){this.refreshInterval=this.refreshActive}else{this.refreshInterval=this.refreshInactive}}else{if(this.options.active){this.refreshInterval=this.refreshActiveHidden}else{this.refreshInterval=this.refreshInactiveHidden}}this.refreshSet=setInterval(f.proxy(this,\"refresh\"),this.refreshInterval)},resetRefreshInterval:function(){this.stopRefreshInterval();this.startRefreshInterval()},stopRefreshInterval:function(){clearInterval(this.refreshSet)},refresh:function(){var D=this;XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?chat/update\"),{channel:D.channel,room_id:D.roomId,last_id:D.lastId,conv_id:D.convId,conv_unread:D.convUnread,conv_only:D.convOnly,conv_last_active:D.convLastActive,is_chat_page:y.hasClass(\"siropuChatPage\")},function(E){D.updateRooms(E);D.updateConversations(E);D.updateNotice(E);D.updateActivityStatus(E);setTimeout(function(){D.doRoomActions(E)})},{skipDefault:true,global:false})},adjustContentHeight:function(){var I=f(g).height();var D=y.height();var F=t.height();var H=w.height();var E=I-D;var G=0;if(f(\".p-navSticky\").length&&f(\".p-navSticky.is-sticky\").length){G=f(\".p-navSticky\").height()}if(f(\".siropuChatAllPages.siropuChatMaximized\").length){y.css(\"z-index\",100);t.css(\"height\",(F+E-H-G-20)+\"px\")}else{if(f(\"#siropuChatFullPage\").length){t.css(\"height\",(F+E)+\"px\")}else{if(this.screenSizeIs(\"s\")){t.css(\"height\",(F+E-H-20)+\"px\")}}}},editorFocus:function(){l.froalaEditor(\"events.focus\")},editorOn:function(){l.froalaEditor(\"edit.on\")},editorOff:function(){l.froalaEditor(\"edit.off\")},editorSetHtml:function(D){l.froalaEditor(\"html.set\",D);l.froalaEditor(\"selection.setAfter\",\"p\");l.froalaEditor(\"selection.restore\")},editorGetHtml:function(){return l.froalaEditor(\"html.get\",true)},editorGetText:function(){return f.trim(l.data(\"froala.editor\").$el.text())},editorInsertImage:function(D){l.froalaEditor(\"image.insert\",D)},editorSetPlaceholder:function(E,D){var F=\" \";switch(E){case\"public\":F=XF.phrase(\"siropu_chat_write_public_message\");break;case\"private\":if(this.getConvCount()){F=\"(\"+D.data(\"username\")+\") \"+XF.phrase(\"siropu_chat_write_private_message\")}else{F=XF.phrase(\"siropu_chat_no_conversations_started\")}break;case\"posting\":F=XF.phrase(\"siropu_chat_posting_message\");break;case\"wait\":if(this.floodCheck==1000){F=XF.phrase(\"siropu_chat_please_wait\")}else{F=XF.phrase(\"siropu_chat_please_wait_x_seconds\")}break;case\"readonly\":F=XF.phrase(\"siropu_chat_room_is_read_only\");break;case\"noresponse\":F=XF.phrase(\"siropu_chat_no_response\");break;case\"nopermission\":F=XF.phrase(\"siropu_chat_do_not_have_permission_to_use\");break}l.data(\"froala.editor\").opts.placeholderText=F;l.froalaEditor(\"placeholder.refresh\")},editorOffPlaceholder:function(D){this.editorOff();this.editorSetPlaceholder(D)},editorOnPlaceholder:function(D){this.editorOn();this.editorSetPlaceholder(D)},loadSound:function(D){return this.sounds[D]?this.sounds[D]:new Audio(XF.config.url.basePath+\"styles/default/siropu/chat/sounds/\"+D+\".mp3\")},postLogout:function(){for(var D in this.lastId){this.leaveRoomPostActions(D)}if(d.hasClass(\"siropuChatActiveTab\")){this.getRooms()}else{d.click()}},setChannel:function(D){if(this.channel!=D){XF.Cookie.set(\"siropu_chat_channel\",D)}this.channel=D},deleteOlderMessages:function(E,D){if(E-this.serverTime>=300&&D.find(\"> li[data-id]\").length>=100&&D.data(\"autoscroll\")==0){D.find(\">li[data-id]:nth-child(\"+(this.inverse?\"\":\"-\")+\"n+\"+this.messageDisplayLimit+\")\").remove();this.serverTime=E}},_initRoomListActions:function(){var D=this;f(r).on(\"click\",\".siropuChatRoomInfo h3\",function(){f(this).parents(\"li\").find(\".siropuChatRoomJoin\").submit()});f(r).on(\"submit\",\".siropuChatRoomAction form\",function(G){G.preventDefault();var F=f(this).find('button[type=\"submit\"]');var E=f(this).find('input[name=\"password\"]');if(E.length){E.toggle().focus();if(!E.val()){return}}F.prop(\"disabled\",true);setTimeout(function(){F.prop(\"disabled\",false);E.val(\"\")},1000);XF.ajax(\"POST\",f(this).attr(\"action\"),f(this).serialize(),function(H){if(H.action==\"join\"){D.loadRoom(H)}if(H.action==\"leave\"){D.leaveRoomPostActions(H.roomId)}D.getRooms()})})},_initRoomActions:function(){var D=this;f(r).on(\"click\",\".siropuChatRecipients\",function(){var E=f(this).data(\"recipients\").split(\", \");D.editorSetHtml(\"/\"+D.getCommand(\"whisper\")+\" [\"+E.join(\", \")+\"] \")});f(r).on(\"click\",\".siropuChatTag\",function(){var E=l.val();D.editorSetHtml(E+\" @\"+f(this).next(\"a\").text()+(E?\"\":\",&nbsp;\"))})},_initSubmitForm:function(){var D=this;l.on(\"froalaEditor.initialized\",function(G,E){var F=l.data(\"buttons-remove\");if(!XF.isEditorEnabled()&&F.match(/xfBbCode/)){XF.setIsEditorEnabled(true)}E.events.on(\"click\",function(I){if(D.channel==\"conv\"){var H=p.find('li[data-conv-id=\"'+D.convId+'\"]');if(H.hasClass(\"siropuChatNewMessage\")){H.removeClass(\"siropuChatNewMessage\")}}});E.events.on(\"keyup\",function(J){var I=D.getCommand(\"join\");var L=D.editorGetText();var K=L.replace(\"/\"+I,\"\").trim();if(L.match(/\\/join/)&&K){var H=new XF.AutoCompleteResults({onInsert:function(M){D.editorSetHtml(L.replace(K,M));H.hideResults();c.submit()}});XF.ajax(\"GET\",XF.canonicalizeUrl(\"index.php?chat/room/find\"),{q:K},function(M){H.showResults(M.q,M.results,c)},{global:false,error:false})}});if(D.channel==\"room\"&&A.find('a[data-room-id=\"'+D.roomId+'\"]').data(\"readonly\")){D.editorOffPlaceholder(\"readonly\")}if(D.channel==\"room\"&&!D.getRoomCount()||D.channel==\"conv\"&&!D.getConvCount()){D.editorOffPlaceholder(\"\")}});c.on(\"submit\",function(H){H.preventDefault();var E=D.editorGetHtml();var G=D.editorGetText();if(!G&&!f(E).find(\"img\").length){return D.editorSetHtml(\"\")}var I=f('.siropuChatMessages[data-room-id=\"'+D.roomId+'\"]');var F=f('.siropuChatUsers[data-room-id=\"'+D.roomId+'\"]');D.preSubmit();XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?chat/submit\"),{channel:D.channel,room_id:D.roomId,last_id:D.lastId,conv_id:D.convId,conv_unread:D.convUnread,message_html:E},function(J){if(J.input){D.editorSetHtml(J.input)}if(J.roomTab){D.loadRoom(J);D.postSubmit();return}if(J.find!==undefined){f(\".siropuChatMessages:visible\").html(f(J.messages)).attr(\"data-search\",J.find);D.doAutoScroll();D.postSubmit();return}if(J.leaveRoom){D.leaveRoomPostActions(J.leaveRoom,true)}if(J.leaveConv){D.leaveConversationPostActions(J.leaveConv)}if(J.logout){D.postLogout()}if(J.html){XF.setupHtmlInsert(J.html,function(K,L){if(K.length){XF.overlayMessage(L.title,K)}})}if(J.prune){if(J.prune==\"all\"){f(\".siropuChatMessages[data-room-id]\").html(\"\");D.lastId={}}else{if(J.prune==\"room\"){I.html(\"\")}else{if(J.prune.user_id){I.find('> li[data-user-id=\"'+J.prune.user_id+'\"]').html(\"\")}}}}if(J.sanctioned){F.find('> li[data-user-id=\"'+J.sanctioned+'\"]').remove()}D.updateRooms(J);D.updateConversations(J);D.updateNotice(J);D.updateActivityStatus(J);if(D.floodCheck){D.editorSetPlaceholder(\"wait\")}setTimeout(function(){D.postSubmit()},D.floodCheck);if(D.channel==\"conv\"){D.convLastActive=J.serverTime}},{global:false})})},_initTabs:function(){var D=this;A.on(\"click\",\"a\",function(F){F.preventDefault();if(f(this).hasClass(\"siropuChatActiveTab\")&&!D.isResponsive()){return}f(this).removeClass(\"siropuChatNewMessage\");t.find(\"> *\").hide();A.find(\"a.siropuChatActiveTab\").removeClass(\"siropuChatActiveTab\");f(this).addClass(\"siropuChatActiveTab\");D.editorSetPlaceholder(\"public\");D.updateHeaderTitle(f(this));var E=f(this).data(\"target\");switch(E){case\"room\":D.roomId=f(this).data(\"room-id\");XF.Cookie.set(\"siropu_chat_room_id\",D.roomId);t.find('[data-room-id=\"'+D.roomId+'\"]').show();if(f(this).data(\"readonly\")){D.editorOffPlaceholder(\"readonly\")}else{D.editorOnPlaceholder(\"public\")}if(D.isResponsive()){f(\".siropuChatRoom.siropuChatUsers\").hide()}else{D.editorFocus()}D.autoScroll();break;case\"room-list\":C.toggle();D.getRooms();D.editorOffPlaceholder(\"\");break;case\"conv-list\":p.show();if(D.getConvCount()){p.find('li[data-conv-id=\"'+D.convId+'\"]').trigger(\"click\",true)}else{D.editorOffPlaceholder(\"\")}break;case\"conv-form\":o.show();if(!D.screenSizeIs(\"s\")){o.find(\"input\").focus()}D.editorOffPlaceholder(\"\");break}D.setChannel(E.match(/room/)?\"room\":\"conv\")})},_initConversations:function(){var D=this;p.on(\"click\",\"li[data-conv-id]\",function(F,E){D.convId=f(this).data(\"conv-id\");XF.Cookie.set(\"siropu_chat_conv_id\",D.convId);D.updateHeaderTitle(f(this));f(this).removeClass(\"siropuChatNewMessage\");f(\".siropuChatConversation.siropuChatMessages\").hide();f(this).addClass(\"siropuChatActiveConversation\").siblings().removeClass(\"siropuChatActiveConversation\");var H=f('.siropuChatConversation.siropuChatMessages[data-conv-id=\"'+D.convId+'\"]');if(H.find(\"> li\").length){H.show();D.autoScroll(H);if(D.convUnread[D.convId]){XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?chat/conversation/\"+D.convId+\"/mark-as-read\"),{conv_unread:D.convUnread[D.convId]},function(I){if(I.convRead){delete D.convUnread[I.convRead]}},{skipDefault:true,global:false})}}else{var G=f('<li class=\"siropuChatLoadingMessages\" />');G.html(XF.phrase(\"siropu_chat_loading_conversation_messages\"));H=D.createConversationMessageContainer(D.convId);H.html(G).insertBefore(o).show();D._initAutoScrollToggle(H);XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?chat/conversation/\"+D.convId+\"/load-messages\"),{conv_unread:D.convUnread[D.convId]},function(I){H.html(I.messages);XF.activate(H);setTimeout(function(){D.doAutoScroll(H)})})}D.editorOn();D.editorSetPlaceholder(\"private\",f(this));if(!D.inverse&&H.find(\"iframe\").length){setTimeout(function(){D.autoScroll(H)},1000)}if(D.isResponsive()){if(E){H.hide()}else{p.hide()}}else{if(!E){D.editorFocus()}}});p.on(\"mouseover mouseout\",\"> li\",function(){f(this).find(\".siropuChatLeaveConversation\").toggle()})},_initOnLoad:function(){if(this.inverse){return}var D=this;f(\".siropuChatMessageText:visible .bbImage\").on(\"load\",function(){D.doAutoScroll()})},_initAutoScrollToggle:function(E){var D=this;var E=E?E:f(\".siropuChatMessages\");E.scroll(function(){D.toggleAutoScroll(f(this))})},_initSounds:function(){this.sounds.normal=this.getSoundSetting(\"normal\")?this.loadSound(\"normal\"):\"\";this.sounds.whisper=this.getSoundSetting(\"whisper\")?this.loadSound(\"whisper\"):\"\";this.sounds[\"private\"]=this.getSoundSetting(\"private\")?this.loadSound(\"private\"):\"\";this.sounds.tag=this.getSoundSetting(\"tag\")?this.loadSound(\"tag\"):\"\";this.sounds.bot=this.getSoundSetting(\"bot\")?this.loadSound(\"bot\"):\"\";this.sounds.error=this.getSoundSetting(\"bot\")?this.loadSound(\"error\"):\"\"},getChannel:function(){return this.channel},getRoomId:function(){return this.roomId},getConvId:function(){return this.convId},inRoom:function(){return this.channel==\"room\"},inConv:function(){return this.channel==\"conv\"},escapeRegExp:function(D){return isNaN(D)?D.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\"):D}});XF.SiropuChat.Form=XF.Element.newHandler({options:{edit:false,multiLine:false},init:function(){var E=this;var F=this.$target;var D=F.find(\"textarea\");D.on(\"froalaEditor.initialized\",function(H,G){G.opts.multiLine=E.options.multiLine;G.opts.htmlAllowedTags=[\"img\"];G.events.on(\"keydown\",function(I){if(I.which==32&&!E.options.edit&&!XF.SiropuChat.Core.prototype.editorGetText()){I.preventDefault();return D.froalaEditor(\"html.set\",\"\")}if(I.which==13){if(E.options.multiLine&&I.shiftKey){return I.preventDefault()}F.submit();if(E.options.edit){F.find(\".js-overlayClose\").click()}}});if(E.options.edit){setTimeout(function(){D.froalaEditor(\"events.focus\");D.froalaEditor(\"selection.setAfter\",\"p\");D.froalaEditor(\"selection.restore\")},500)}else{D.froalaEditor(\"html.set\",\"\")}})}});XF.SiropuChat.Messages=XF.Element.newHandler({options:{},init:function(){f('a[data-xf-click=\"siropu-chat-quote\"]').remove();this.$target.on(\"mouseover mouseout\",\".siropuChatMessageRow\",function(){if(f(this).find(\".siropuChatMessageActions\").length){f(this).find(\".siropuChatDateTime, .siropuChatMessageActions\").toggle()}})}});XF.SiropuChat.FindRooms=XF.Element.newHandler({options:{},init:function(){this.$target.on(\"keyup\",function(){var E=f(this).val().trim();var D=new RegExp(E,\"gi\");f(\"#siropuChatRooms > li[data-room-name]\").hide().each(function(){if(f(this).data(\"room-name\").match(D)){f(this).show()}})})}});XF.SiropuChat.StartConversationForm=XF.Element.newHandler({options:{},init:function(){var D=this;this.$target.on(\"submit\",function(G){G.preventDefault();var F=f(this).find(\"input\");var E=f(this).find(\"textarea\");if(!F.val().trim()){return F.focus()}if(!E.val().trim()){return E.focus()}XF.ajax(\"POST\",f(this).attr(\"action\"),f(this).serialize(),function(H){if(j.length){j.remove()}XF.SiropuChat.Core.prototype.updateConversations(H);A.find('a[data-target=\"conv-list\"]').click();F.val(\"\");E.val(\"\")})})}});XF.SiropuChat.LeaveConversation=XF.Element.newHandler({options:{},init:function(){this.$target.on(\"ajax-submit:response\",f.proxy(this,\"ajaxResponse\"))},ajaxResponse:function(E,D){XF.SiropuChat.Core.prototype.updateConversations(D);XF.SiropuChat.Core.prototype.leaveConversationPostActions(D.convId)}});XF.SiropuChat.Like=XF.Click.newHandler({eventNameSpace:\"SiropuChatLike\",init:function(){},click:function(E){E.preventDefault();var D=this;XF.ajax(\"POST\",this.$target.attr(\"href\"),function(F){if(F.html){XF.setupHtmlInsert(F.html,function(G,H,I){if(G.length){D.$target.parents(\".siropuChatMessageRow\").replaceWith(G)}})}})}});XF.SiropuChat.Unlike=XF.Click.newHandler({eventNameSpace:\"SiropuChatUnlike\",init:function(){},click:function(E){E.preventDefault();var D=this;XF.ajax(\"POST\",this.$target.attr(\"href\"),function(F){if(F.html){XF.setupHtmlInsert(F.html,function(G,H,I){if(G.length){D.$target.parents(\".siropuChatMessageRow\").replaceWith(G)}})}})}});XF.SiropuChat.Quote=XF.Click.newHandler({eventNameSpace:\"SiropuChatQuote\",init:function(){},click:function(D){D.preventDefault();XF.ajax(\"POST\",this.$target.attr(\"href\"),function(E){if(E.quote){XF.SiropuChat.Core.prototype.editorSetHtml(E.quoteHtml);XF.SiropuChat.Core.prototype.editorFocus()}})}});XF.SiropuChat.LeaveRoom=XF.Click.newHandler({eventNameSpace:\"SiropuChatLeaveRoom\",init:function(){},click:function(E){E.preventDefault();var D=this;XF.ajax(\"POST\",this.$target.attr(\"href\"),function(F){XF.SiropuChat.Core.prototype.leaveRoomPostActions(F.roomId,true);D.$target.parent(\".menu\").toggle()})}});XF.SiropuChat.Whisper=XF.Click.newHandler({eventNameSpace:\"SiropuChatWhisper\",init:function(){},click:function(L){var N=this.$target.parents(\".menu\").attr(\"id\");var J=f('a[aria-controls=\"'+N+'\"').parents(\"li[data-user-id]\").data(\"username\");var F=XF.SiropuChat.Core.prototype.editorGetText();var G=XF.SiropuChat.Core.prototype.getCommand(\"whisper\");var D=[];D.push(J);if(F.match(/\\[(.*?)\\]/)){var O=F.indexOf(\"[\");var H=F.indexOf(\"]\");var K=F.substring(O+1,H);if(K.length){var M=K.split(\",\");for(var I in M){D.push(M[I].trim())}}if(K.match(XF.SiropuChat.Core.prototype.escapeRegExp(J))){D=D.filter(function(P){return P!=J})}}var E=\"\";if(D.length){E=\"/\"+G+\" [\"+D.join(\", \")+\"]\"}XF.SiropuChat.Core.prototype.editorSetHtml(E)}});XF.SiropuChat.Popup=XF.Click.newHandler({eventNameSpace:\"SiropuChatPopup\",init:function(){},click:function(D){D.preventDefault();var E;if(E===undefined||E.closed){E=g.open(D.target.href,\"siropuChatWindowPopup\",\"width=800,height=500\")}else{E.focus()}}});XF.SiropuChat.LoadMoreMessages=XF.Click.newHandler({eventNameSpace:\"siropuChatLoadMoreMessages\",init:function(){},click:function(G){G.preventDefault();var H=this.$target;if(H.data(\"complete\")){return}var I=H.parents(\"ul.siropuChatMessages\");var E=I.data(\"room-id\");var J=I.data(\"conv-id\");var L=I.attr(\"data-search\");var F=XF.SiropuChat.Core.prototype.getMiscSetting(\"inverse\");if(F){var K=I.find(\"> li[data-id]:last\")}else{var K=I.find(\"> li[data-id]:first\")}if(E){var D=\"room/\"+E}else{var D=\"conversation/\"+J}XF.ajax(\"GET\",XF.canonicalizeUrl(\"index.php?chat/\"+D+\"/load-more-messages\"),{message_id:K.data(\"id\"),find:L},function(M){if(M.messages){if(F){K.after(M.messages)}else{K.before(M.messages).get(0).scrollIntoView(false)}}if(!M.hasMore){H.attr(\"data-complete\",true);H.html(XF.phrase(\"siropu_chat_all_messages_have_been_loaded\"));setTimeout(function(){H.fadeOut()},5000)}})}});XF.SiropuChat.EditNotice=XF.Element.newHandler({options:{},init:function(){this.$target.on(\"ajax-submit:response\",f.proxy(this,\"ajaxResponse\"))},ajaxResponse:function(E,D){if(D.message){XF.flashMessage(D.message,2000)}XF.SiropuChat.Core.prototype.updateNotice(D)}});XF.SiropuChat.ToggleUsers=XF.Click.newHandler({eventNameSpace:\"siropuChatToggleUsers\",init:function(){},click:function(F){var E=XF.SiropuChat.Core.prototype.getChannel();var D=XF.SiropuChat.Core.prototype.getRoomId();var G=XF.SiropuChat.Core.prototype.getConvId();if(E==\"room\"){f('.siropuChatUsers[data-room-id=\"'+D+'\"]').toggle();f('.siropuChatMessages[data-room-id=\"'+D+'\"]').toggle()}else{p.toggle();f('.siropuChatMessages[data-conv-id=\"'+G+'\"]').toggle()}}});XF.SiropuChat.ToggleOptions=XF.Click.newHandler({eventNameSpace:\"siropuChatToggleOptions\",init:function(){},click:function(E){var D=this.$target.parents(\"fieldset\").find(\"input\");D.prop(\"checked\",D.filter(\":checked\").length?false:true);z.change()}});XF.SiropuChat.ToggleConvForm=XF.Click.newHandler({eventNameSpace:\"siropuChatToggleConvForm\",init:function(){},click:function(E){var D=this.$target.parent(\".siropuChatUserMenu\").find(\"form\");D.toggle();if(!XF.SiropuChat.Core.prototype.screenSizeIs(\"s\")){D.find(\"textarea\").focus()}}});XF.SiropuChat.Logout=XF.Element.newHandler({options:{},init:function(){this.$target.on(\"ajax-submit:response\",f.proxy(this,\"ajaxResponse\"))},ajaxResponse:function(E,D){if(D.errors||D.exception){return}E.preventDefault();if(D.message){XF.flashMessage(D.message,3000)}XF.SiropuChat.Core.prototype.postLogout()}});XF.SiropuChat.EditorButton={init:function(){XF.SiropuChat.EditorButton.initializeDialog();XF.EditorHelpers.dialogs.chat=new XF.SiropuChat.EditorDialogGallery(\"chat\");if(f.FE.COMMANDS.xfCustom_chat){f.FE.COMMANDS.xfCustom_chat.callback=XF.SiropuChat.EditorButton.callback}},initializeDialog:function(){XF.SiropuChat.EditorDialogGallery=XF.extend(XF.EditorDialog,{cache:false,_init:function(G){var F=this;var E=G.$container;var D=E.find(\".formSubmitRow-controls\");f(\".siropuChatDialogInsert\").click(function(I){I.preventDefault();var H=\"\";f(\".js-attachmentFileSelected\").each(function(){H+=f(this).data(\"url\")});F.ed.image.insert(H);F.overlay.hide()});f(\".siropuChatDialogDelete\").click(function(I){I.preventDefault();var H=[];f(\".js-attachmentFileSelected\").each(function(){H.push(f(this).data(\"attachment-id\"))});if(H.length){XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?chat/delete-attachments\"),{hash:E.find('input[name=\"hash\"]').val(),remove:H,},function(J){if(J.success){f(\".js-attachmentFileSelected\").remove();if(!E.find(\".js-attachmentFile\").length){D.fadeOut()}}})}});E.on(\"click\",\".js-attachmentFile\",function(){f(this).toggleClass(\"js-attachmentFileSelected\");if(E.find(\".js-attachmentFileSelected\").length){D.fadeIn()}else{D.fadeOut()}})}})},callback:function(){XF.EditorHelpers.loadDialog(this,\"chat\")}};f(r).on(\"editor:first-start\",XF.SiropuChat.EditorButton.init);XF.Element.register(\"siropu-chat\",\"XF.SiropuChat.Core\");XF.Element.register(\"siropu-chat-form\",\"XF.SiropuChat.Form\");XF.Element.register(\"siropu-chat-messages\",\"XF.SiropuChat.Messages\");XF.Element.register(\"siropu-chat-find-rooms\",\"XF.SiropuChat.FindRooms\");XF.Element.register(\"siropu-chat-start-conversation-form\",\"XF.SiropuChat.StartConversationForm\");XF.Element.register(\"siropu-chat-leave-conversation\",\"XF.SiropuChat.LeaveConversation\");XF.Element.register(\"siropu-chat-edit-notice\",\"XF.SiropuChat.EditNotice\");XF.Element.register(\"siropu-chat-logout\",\"XF.SiropuChat.Logout\");XF.Click.register(\"siropu-chat-popup\",\"XF.SiropuChat.Popup\");XF.Click.register(\"siropu-chat-like\",\"XF.SiropuChat.Like\");XF.Click.register(\"siropu-chat-unlike\",\"XF.SiropuChat.Unlike\");XF.Click.register(\"siropu-chat-quote\",\"XF.SiropuChat.Quote\");XF.Click.register(\"siropu-chat-whisper\",\"XF.SiropuChat.Whisper\");XF.Click.register(\"siropu-chat-leave-room\",\"XF.SiropuChat.LeaveRoom\");XF.Click.register(\"siropu-chat-load-more-messages\",\"XF.SiropuChat.LoadMoreMessages\");XF.Click.register(\"siropu-chat-toggle-users\",\"XF.SiropuChat.ToggleUsers\");XF.Click.register(\"siropu-chat-toggle-options\",\"XF.SiropuChat.ToggleOptions\");XF.Click.register(\"siropu-chat-toggle-conv-form\",\"XF.SiropuChat.ToggleConvForm\")}(jQuery,window,document);"
"/*\n Sticky-kit v1.1.4 | MIT | Leaf Corcoran 2015 | http://leafo.net\n*/\n(function(){var d=window.jQuery;var k=d(window);var J=d(document);d.fn.stick_in_parent=function(b){var w;null==b&&(b={});var u=b.sticky_class;var E=b.inner_scrolling;var K=b.recalc_every;var x=b.parent;var n=b.offset_top;var q=b.spacer;var y=b.bottoming;var F=k.height();var G=J.height();null==n&&(n=0);null==x&&(x=void 0);null==E&&(E=!0);null==u&&(u=\"is_stuck\");null==y&&(y=!0);var M=function(a){if(window.getComputedStyle){a=window.getComputedStyle(a[0]);var b=parseFloat(a.getPropertyValue(\"width\"))+\nparseFloat(a.getPropertyValue(\"margin-left\"))+parseFloat(a.getPropertyValue(\"margin-right\"));\"border-box\"!==a.getPropertyValue(\"box-sizing\")&&(b+=parseFloat(a.getPropertyValue(\"border-left-width\"))+parseFloat(a.getPropertyValue(\"border-right-width\"))+parseFloat(a.getPropertyValue(\"padding-left\"))+parseFloat(a.getPropertyValue(\"padding-right\")));return b}return a.outerWidth(!0)};var N=function(a,b,t,z,A,r,p,H){var l,e;if(!a.data(\"sticky_kit\")){a.data(\"sticky_kit\",!0);var w=G;var g=a.parent();null!=\nx&&(g=g.closest(x));if(!g.length)throw\"failed to find stick parent\";var c=0;var v=l=!1;(e=null!=q?q&&a.closest(q):d(\"<div />\"))&&e.css(\"position\",a.css(\"position\"));var B=function(){if(!H){F=k.height();w=G=J.height();var d=parseInt(g.css(\"border-top-width\"),10);var m=parseInt(g.css(\"padding-top\"),10);b=parseInt(g.css(\"padding-bottom\"),10);t=g.offset().top+d+m;z=g.height();if(l){v=l=!1;c=n;null==q&&(a.insertAfter(e),e.detach());a.css({position:\"\",top:\"\",width:\"\",bottom:\"\"}).removeClass(u);var h=!0}A=\na.offset().top-(parseInt(a.css(\"margin-top\"),10)||0)-n;r=a.outerHeight(!0);p=a.css(\"float\");e&&e.css({width:M(a),height:r,display:a.css(\"display\"),\"vertical-align\":a.css(\"vertical-align\"),\"float\":p});if(h)return f()}};B();var I=void 0;c=n;var C=K;var f=function(){var d;if(!H&&r!==z){var m=!1;null!=C&&(--C,0>=C&&(C=K,B(),m=!0));m||G===w||B();var h=k.scrollTop();null!=I&&(d=h-I);I=h;if(l){if(y){var f=h+r+c>z+t;v&&!f&&(v=!1,a.css({position:\"fixed\",bottom:\"\",top:c}).trigger(\"sticky_kit:unbottom\"))}if(h<\nA||0===h&&h===A)l=!1,c=n,null==q&&(\"left\"!==p&&\"right\"!==p||a.insertAfter(e),e.detach()),m={position:\"\",width:\"\",top:\"\"},a.css(m).removeClass(u).trigger(\"sticky_kit:unstick\");E&&r+n>F&&!v&&(c-=d,c=Math.max(F-r,c),c=Math.min(n,c),l&&a.css({top:c+\"px\"}))}else h>A&&(l=!0,m={position:\"fixed\",top:c},m.width=\"border-box\"===a.css(\"box-sizing\")?a.outerWidth()+\"px\":a.width()+\"px\",a.css(m).addClass(u),null==q&&(a.after(e),\"left\"!==p&&\"right\"!==p||e.append(a)),a.trigger(\"sticky_kit:stick\"));if(l&&y&&(null==\nf&&(f=h+r+c>z+t),!v&&f))return v=!0,\"static\"===g.css(\"position\")&&g.css({position:\"relative\"}),a.css({position:\"absolute\",bottom:b,top:\"auto\"}).trigger(\"sticky_kit:bottom\")}};var D=function(){B();return f()};var L=function(){H=!0;k.off(\"touchmove\",f);k.off(\"scroll\",f);k.off(\"resize\",D);d(document.body).off(\"sticky_kit:recalc\",D);a.off(\"sticky_kit:detach\",L);a.removeData(\"sticky_kit\");a.css({position:\"\",bottom:\"\",top:\"\",width:\"\"});g.position(\"position\",\"\");if(l)return null==q&&(\"left\"!==p&&\"right\"!==\np||a.insertAfter(e),e.remove()),a.removeClass(u)};k.on(\"touchmove\",f);k.on(\"scroll\",f);k.on(\"resize\",D);d(document.body).on(\"sticky_kit:recalc\",D);a.on(\"sticky_kit:detach\",L);return setTimeout(f,0)}};var t=0;for(w=this.length;t<w;t++)b=this[t],N(d(b));return this}}).call(this);\n\n(function defineMustache(global,factory){if(typeof exports===\"object\"&&exports&&typeof exports.nodeName!==\"string\"){factory(exports)}else if(typeof define===\"function\"&&define.amd){define([\"exports\"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)===\"[object Array]\"};function isFunction(object){return typeof object===\"function\"}function typeStr(obj){return isArray(obj)?\"array\":typeof obj}function escapeRegExp(string){return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,\"\\\\$&\")}function hasProperty(obj,propName){return obj!=null&&typeof obj===\"object\"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#x2F;\",\"`\":\"&#x60;\",\"=\":\"&#x3D;\"};function escapeHtml(string){return String(string).replace(/[&<>\"'`=\\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\\s*/;var spaceRe=/\\s+/;var equalsRe=/\\s*=/;var curlyRe=/\\s*\\}/;var tagRe=/#|\\^|\\/|>|\\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile===\"string\")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error(\"Invalid tags: \"+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+\"\\\\s*\");closingTagRe=new RegExp(\"\\\\s*\"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp(\"\\\\s*\"+escapeRegExp(\"}\"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push([\"text\",chr,start,start+1]);start+=1;if(chr===\"\\n\")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||\"name\";scanner.scan(whiteRe);if(type===\"=\"){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type===\"{\"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type=\"&\"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error(\"Unclosed tag at \"+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type===\"#\"||type===\"^\"){sections.push(token)}else if(type===\"/\"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section \"'+value+'\" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section \"'+openSection[1]+'\" at '+start)}else if(type===\"name\"||type===\"{\"||type===\"&\"){nonSpace=true}else if(type===\"=\"){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section \"'+openSection[1]+'\" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]===\"text\"&&lastToken&&lastToken[0]===\"text\"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case\"#\":case\"^\":collector.push(token);sections.push(token);collector=token[4]=[];break;case\"/\":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===\"\"};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return\"\";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail=\"\";break;case 0:match=\"\";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={\".\":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(\".\")>0){value=context.view;names=name.split(\".\");index=0;while(value!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(value,names[index]);value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit)break;context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null)tokens=cache[template]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer=\"\";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol===\"#\")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol===\"^\")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===\">\")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol===\"&\")value=this.unescapedValue(token,context);else if(symbol===\"name\")value=this.escapedValue(token,context);else if(symbol===\"text\")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer=\"\";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value===\"object\"||typeof value===\"string\"||typeof value===\"number\"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!==\"string\")throw new Error(\"Cannot use higher-order sections without the original template\");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name=\"mustache.js\";mustache.version=\"2.2.1\";mustache.tags=[\"{{\",\"}}\"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!==\"string\"){throw new TypeError('Invalid template! Template should be a \"string\" '+'but \"'+typeStr(template)+'\" was given as the first '+\"argument for mustache#render(template, view, partials)\")}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer});\n\n\n/*\n Pikaday\n\n Copyright ? 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n*/\n(function(p,n){if(\"object\"===typeof exports){try{var u=require(\"moment\")}catch(k){}module.exports=n(u)}else\"function\"===typeof define&&define.amd?define(function(k){try{u=k(\"moment\")}catch(y){}return n(u)}):p.Pikaday=n(p.moment)})(this,function(p){var n=\"function\"===typeof p,u=!!window.addEventListener,k=window.document,y=window.setTimeout,q=function(a,b,d,c){u?a.addEventListener(b,d,!!c):a.attachEvent(\"on\"+b,d)},v=function(a,b,d,c){u?a.removeEventListener(b,d,!!c):a.detachEvent(\"on\"+b,d)},C=function(a,\nb,d){if(k.createEvent){var c=k.createEvent(\"HTMLEvents\");c.initEvent(b,!0,!1);c=w(c,d);a.dispatchEvent(c)}else k.createEventObject&&(c=k.createEventObject(),c=w(c,d),a.fireEvent(\"on\"+b,c))},f=function(a,b){return-1!==(\" \"+a.className+\" \").indexOf(\" \"+b+\" \")},D=function(a){return/Array/.test(Object.prototype.toString.call(a))},m=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},M=function(a,b){return[31,0===a%4&&0!==a%100||0===a%400?29:28,31,30,31,30,31,31,30,31,\n30,31][b]},A=function(a){m(a)&&a.setHours(0,0,0,0)},F=function(a,b){a=new Date(a.getTime());b=new Date(b.getTime());A(a);A(b);return a.getTime()===b.getTime()},w=function(a,b,d){var c,l;for(c in b)if((l=void 0!==a[c])&&\"object\"===typeof b[c]&&null!==b[c]&&void 0===b[c].nodeName)m(b[c])?d&&(a[c]=new Date(b[c].getTime())):D(b[c])?d&&(a[c]=b[c].slice(0)):a[c]=w({},b[c],d);else if(d||!l)a[c]=b[c];return a},G=function(a){0>a.month&&(a.year-=Math.ceil(Math.abs(a.month)/12),a.month+=12);11<a.month&&(a.year+=\nMath.floor(Math.abs(a.month)/12),a.month-=12);return a},r={field:null,bound:void 0,position:\"bottom left\",reposition:!0,format:null,inputFormats:null,defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:\"\",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,showTime:!0,showMinutes:!0,showSeconds:!1,use24hour:!1,\nincrementHourBy:1,incrementMinuteBy:1,incrementSecondBy:1,timeLabel:null,autoClose:!0,mainCalendar:\"left\",container:void 0,i18n:{previousMonth:\"Previous Month\",nextMonth:\"Next Month\",months:\"January February March April May June July August September October November December\".split(\" \"),weekdays:\"Sunday Monday Tuesday Wednesday Thursday Friday Saturday\".split(\" \"),weekdaysShort:\"Sun Mon Tue Wed Thu Fri Sat\".split(\" \"),midnight:\"Midnight\",noon:\"Noon\"},theme:null,onSelect:null,onOpen:null,onClose:null,\nonDraw:null},N=function(a,b,d){for(b+=a.firstDay;7<=b;)b-=7;return d?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},O=function(a){var b=[],d=\"false\";if(a.isEmpty)if(a.showDaysInNextAndPreviousMonths)b.push(\"is-outside-current-month\");else return'<td class=\"is-empty\"></td>';a.isDisabled&&b.push(\"is-disabled\");a.isToday&&b.push(\"is-today\");a.isSelected&&(b.push(\"is-selected\"),d=\"true\");a.isInRange&&b.push(\"is-inrange\");a.isStartRange&&b.push(\"is-startrange\");a.isEndRange&&b.push(\"is-endrange\");return'<td data-day=\"'+\na.day+'\" class=\"'+b.join(\" \")+'\" aria-selected=\"'+d+'\"><button class=\"pika-button pika-day\" type=\"button\" data-pika-year=\"'+a.year+'\" data-pika-month=\"'+a.month+'\" data-pika-day=\"'+a.day+'\">'+a.day+\"</button></td>\"},P=function(a,b,d){var c=new Date(d,0,1);return'<td class=\"pika-week\">'+Math.ceil(((new Date(d,b,a)-c)/864E5+c.getDay()+1)/7)+\"</td>\"},Q=function(a,b){return\"<tr>\"+(b?a.reverse():a).join(\"\")+\"</tr>\"},J=function(a,b,d,c,l,h){var e,g=a._o,k=d===g.minYear,f=d===g.maxYear;h='<div id=\"'+h+'\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">';\nvar m=!0,p=!0;var n=[];for(e=0;12>e;e++)n.push('<option value=\"'+(d===l?e-b:12+e-b)+'\"'+(e===c?' selected=\"selected\"':\"\")+(k&&e<g.minMonth||f&&e>g.maxMonth?'disabled=\"disabled\"':\"\")+\">\"+g.i18n.months[e]+\"</option>\");l='<div class=\"pika-label\">'+g.i18n.months[c]+'<select class=\"pika-select pika-select-month\" tabindex=\"-1\">'+n.join(\"\")+\"</select></div>\";if(D(g.yearRange)){e=g.yearRange[0];var q=g.yearRange[1]+1}else e=d-g.yearRange,q=1+d+g.yearRange;for(n=[];e<q&&e<=g.maxYear;e++)e>=g.minYear&&n.push('<option value=\"'+\ne+'\"'+(e===d?' selected=\"selected\"':\"\")+\">\"+e+\"</option>\");d='<div class=\"pika-label\">'+d+g.yearSuffix+'<select class=\"pika-select pika-select-year\" tabindex=\"-1\">'+n.join(\"\")+\"</select></div>\";h=g.showMonthAfterYear?h+(d+l):h+(l+d);k&&(0===c||g.minMonth>=c)&&(m=!1);f&&(11===c||g.maxMonth<=c)&&(p=!1);0===b&&(h+='<button class=\"pika-prev'+(m?\"\":\" is-disabled\")+'\" type=\"button\">'+g.i18n.previousMonth+\"</button>\");b===a._o.numberOfMonths-1&&(h+='<button class=\"pika-next'+(p?\"\":\" is-disabled\")+'\" type=\"button\">'+\ng.i18n.nextMonth+\"</button>\");return h+\"</div>\"},E=function(a,b,d,c,l){l=l||1;d='<td><select class=\"pika-select '+d+'\">';for(var h=0;h<a;h+=l)d+='<option value=\"'+h+'\" '+(h==b?\"selected\":\"\")+\">\"+c(h)+\"</option>\";return d+\"</select></td>\"},R=function(a,b,d,c){a='<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-time\"><tbody><tr>'+(null!==c.timeLabel?'<td class=\"pika-time-label\">'+c.timeLabel+\"</td>\":\"\")+E(24,a,\"pika-select-hour\",function(a){if(c.use24hour)return a;a=a%12+(12>a?\" AM\":\" PM\");return\"0 AM\"==\na?c.i18n.midnight:\"0 PM\"==a?c.i18n.noon:a},c.incrementHourBy);c.showMinutes&&(a+=\"<td>:</td>\"+E(60,b,\"pika-select-minute\",function(a){return 10>a?\"0\"+a:a},c.incrementMinuteBy));c.showSeconds&&(a+=\"<td>:</td>\"+E(60,d,\"pika-select-second\",function(a){return 10>a?\"0\"+a:a},c.incrementSecondBy));return a+\"</tr></tbody></table>\"},H=function(a){var b=this,d=b.config(a);b._onMouseDown=function(a){if(b._v){a=a||window.event;var c=a.target||a.srcElement;if(c){if(!f(c,\"is-disabled\"))if(!f(c,\"pika-button\")||\nf(c,\"is-empty\")||f(c.parentNode,\"is-disabled\"))f(c,\"pika-prev\")?b.prevMonth():f(c,\"pika-next\")&&b.nextMonth();else{var h=new Date(c.getAttribute(\"data-pika-year\"),c.getAttribute(\"data-pika-month\"),c.getAttribute(\"data-pika-day\")),e=b._d||d.defaultDate;e&&m(e)&&d.showTime&&(h.setHours(e.getHours()),h.setMinutes(e.getMinutes()),d.showSeconds&&h.setSeconds(e.getSeconds()));b.setDate(h);d.bound&&y(function(){d.autoClose&&b.hide();d.field&&d.field.blur()},100)}if(f(c,\"pika-select\"))b._c=!0;else if(a.preventDefault)a.preventDefault();\nelse return a.returnValue=!1}}};b._onChange=function(a){a=a||window.event;(a=a.target||a.srcElement)&&(f(a,\"pika-select-month\")?b.gotoMonth(a.value):f(a,\"pika-select-year\")?b.gotoYear(a.value):f(a,\"pika-select-hour\")?b.setTime(a.value):f(a,\"pika-select-minute\")?b.setTime(null,a.value):f(a,\"pika-select-second\")&&b.setTime(null,null,a.value))};b._onKeyChange=function(a){a=a||window.event;if(b.isVisible())switch(a.keyCode){case 13:case 27:d.field.blur();break;case 37:a.preventDefault();b.adjustDate(\"subtract\",\n1);break;case 38:b.adjustDate(\"subtract\",7);break;case 39:b.adjustDate(\"add\",1);break;case 40:b.adjustDate(\"add\",7)}};b._onInputChange=function(a){a.firedBy!==b&&(a=n?(a=p(d.field.value,d.inputFormats,d.formatStrict))&&a.isValid()?a.toDate():null:new Date(Date.parse(d.field.value)),m(a)&&b.setDate(a),b._v||b.show())};b._onInputFocus=function(){b.show()};b._onInputClick=function(){b.show()};b._onInputBlur=function(){var a=k.activeElement;do if(f(a,\"pika-single\"))return;while(a=a.parentNode);d.autoClose&&\n!b._c&&(b._b=y(function(){b.hide()},50));b._c=!1};b._onClick=function(a){a=a||window.event;var c=a=a.target||a.srcElement;if(a){u||!f(a,\"pika-select\")||a.onchange||(a.setAttribute(\"onchange\",\"return;\"),q(a,\"change\",b._onChange));do if(f(c,\"pika-single\")||c===d.trigger||d.showTime&&f(c,\"pika-time-container\"))return;while(c=c.parentNode);b._v&&a!==d.trigger&&c!==d.trigger&&b.hide()}};b.el=k.createElement(\"div\");b.el.className=\"pika-single\"+(d.isRTL?\" is-rtl\":\"\")+(d.theme?\" \"+d.theme:\"\");q(b.el,\"mousedown\",\nb._onMouseDown,!0);q(b.el,\"touchend\",b._onMouseDown,!0);q(b.el,\"change\",b._onChange);q(k,\"keydown\",b._onKeyChange);d.field&&(d.container?d.container.appendChild(b.el):d.bound?k.body.appendChild(b.el):d.field.parentNode.insertBefore(b.el,d.field.nextSibling),q(d.field,\"change\",b._onInputChange),d.defaultDate||(d.defaultDate=n&&d.field.value?p(d.field.value,d.inputFormats).toDate():new Date(Date.parse(d.field.value)),d.setDefaultDate=!0));a=d.defaultDate;m(a)?d.setDefaultDate?b.setDate(a,!0):b.gotoDate(a):\nb.gotoDate(new Date);d.bound?(this.hide(),b.el.className+=\" is-bound\",q(d.trigger,\"click\",b._onInputClick),q(d.trigger,\"focus\",b._onInputFocus),q(d.trigger,\"blur\",b._onInputBlur)):this.show()};H.prototype={config:function(a){this._o||(this._o=w({},r,!0));a=w(this._o,a,!0);a.isRTL=!!a.isRTL;a.autoClose=!!a.autoClose;a.field=a.field&&a.field.nodeName?a.field:null;a.theme=\"string\"===typeof a.theme&&a.theme?a.theme:null;a.bound=!!(void 0!==a.bound?a.field&&a.bound:a.field);a.trigger=a.trigger&&a.trigger.nodeName?\na.trigger:a.field;a.disableWeekends=!!a.disableWeekends;a.disableDayFn=\"function\"===typeof a.disableDayFn?a.disableDayFn:null;var b=parseInt(a.numberOfMonths,10)||1;a.numberOfMonths=4<b?4:b;m(a.minDate)||(a.minDate=!1);m(a.maxDate)||(a.maxDate=!1);a.minDate&&a.maxDate&&a.maxDate<a.minDate&&(a.maxDate=a.minDate=!1);a.minDate&&this.setMinDate(a.minDate);a.maxDate&&this.setMaxDate(a.maxDate);D(a.yearRange)?(b=(new Date).getFullYear()-10,a.yearRange[0]=parseInt(a.yearRange[0],10)||b,a.yearRange[1]=parseInt(a.yearRange[1],\n10)||b):(a.yearRange=Math.abs(parseInt(a.yearRange,10))||r.yearRange,100<a.yearRange&&(a.yearRange=100));null===a.format&&(a.format=\"YYYY-MM-DD\",a.showTime&&(a.format+=\" HH:mm:ss\"));a.inputFormats||(a.inputFormats=a.format);return a},toString:function(a){return m(this._d)?n?p(this._d).format(a||this._o.format):this._o.showTime?this._d.toString():this._d.toDateString():\"\"},getMoment:function(){return n?p(this._d):null},setMoment:function(a,b){n&&p.isMoment(a)&&this.setDate(a.toDate(),b)},getDate:function(){return m(this._d)?\nnew Date(this._d.getTime()):new Date},setTime:function(a,b,d){this._d||(this._d=new Date,this._d.setHours(0,0,0,0));a&&this._d.setHours(a);b&&this._d.setMinutes(b);d&&this._d.setSeconds(d);this.setDate(this._d)},setDate:function(a,b){if(!a)return this._d=null,this._o.field&&(this._o.field.value=\"\",C(this._o.field,\"change\",{firedBy:this})),this.draw();\"string\"===typeof a&&(a=new Date(Date.parse(a)));if(m(a)){var d=this._o.minDate,c=this._o.maxDate;m(d)&&a<d?a=d:m(c)&&a>c&&(a=c);this._d=new Date(a.getTime());\nthis._o.showTime&&!this._o.showSeconds?this._d.setSeconds(0):this._o.showTime||A(this._d);this.gotoDate(this._d);this._o.field&&(this._o.field.value=this.toString(),C(this._o.field,\"change\",{firedBy:this}));b||\"function\"!==typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(a){var b=!0;if(m(a)){if(this.calendars){b=new Date(this.calendars[0].year,this.calendars[0].month,1);var d=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-\n1].month,1),c=a.getTime();d.setMonth(d.getMonth()+1);d.setDate(d.getDate()-1);b=c<b.getTime()||d.getTime()<c}b&&(this.calendars=[{month:a.getMonth(),year:a.getFullYear(),hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds()}],\"right\"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths));this.adjustCalendars()}},adjustDate:function(a,b){var d=this.getDate(),c=864E5*parseInt(b),l;\"add\"===a?l=new Date(d.valueOf()+c):\"subtract\"===a&&(l=new Date(d.valueOf()-c));n&&(\"add\"===\na?l=p(d).add(b,\"days\").toDate():\"subtract\"===a&&(l=p(d).subtract(b,\"days\").toDate()));this.setDate(l)},adjustCalendars:function(){this.calendars[0]=G(this.calendars[0]);for(var a=1;a<this._o.numberOfMonths;a++)this.calendars[a]=G({month:this.calendars[0].month+a,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){isNaN(a)||(this.calendars[0].month=parseInt(a,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},\nprevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(a){isNaN(a)||(this.calendars[0].year=parseInt(a,10),this.adjustCalendars())},setMinDate:function(a){a instanceof Date?(this._o.showTime||A(a),this._o.minDate=a,this._o.minYear=a.getFullYear(),this._o.minMonth=a.getMonth()):(this._o.minDate=r.minDate,this._o.minYear=r.minYear,this._o.minMonth=r.minMonth,this._o.startRange=r.startRange);this.draw()},setMaxDate:function(a){a instanceof Date?(this._o.showTime||A(a),\nthis._o.maxDate=a,this._o.maxYear=a.getFullYear(),this._o.maxMonth=a.getMonth()):(this._o.maxDate=r.maxDate,this._o.maxYear=r.maxYear,this._o.maxMonth=r.maxMonth,this._o.endRange=r.endRange);this.draw()},setStartRange:function(a){this._o.startRange=a},setEndRange:function(a){this._o.endRange=a},draw:function(a){if(this._v||a){var b=this._o,d=b.minYear,c=b.maxYear,l=b.minMonth,h=b.maxMonth;a=\"\";this._y<=d&&(this._y=d,!isNaN(l)&&this._m<l&&(this._m=l));this._y>=c&&(this._y=c,!isNaN(h)&&this._m>h&&(this._m=\nh));d=\"pika-title-\"+Math.random().toString(36).replace(/[^a-z]+/g,\"\").substr(0,2);for(c=0;c<b.numberOfMonths;c++)a+='<div class=\"pika-lendar\">'+J(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,d)+this.render(this.calendars[c].year,this.calendars[c].month,d)+\"</div>\";b.showTime&&(d=this._d||this._o.defaultDate,a+='<div class=\"pika-time-container\">'+R(d&&m(d)?d.getHours():0,d&&m(d)?d.getMinutes():0,d&&m(d)?d.getSeconds():0,b)+\"</div>\");this.el.innerHTML=a;b.bound&&\"hidden\"!==\nb.field.type&&y(function(){b.trigger.focus()},1);if(\"function\"===typeof this._o.onDraw)this._o.onDraw(this);b.bound&&b.field.setAttribute(\"aria-label\",\"Use the arrow keys to pick a date\")}},adjustPosition:function(){var a;if(!this._o.container){this.el.style.position=\"absolute\";var b=a=this._o.trigger;var d=this.el.offsetWidth;var c=this.el.offsetHeight;var l=window.innerWidth||k.documentElement.clientWidth;var h=window.innerHeight||k.documentElement.clientHeight;var e=window.pageYOffset||k.body.scrollTop||\nk.documentElement.scrollTop;if(\"function\"===typeof a.getBoundingClientRect){b=a.getBoundingClientRect();var g=b.left+window.pageXOffset;var f=b.bottom+window.pageYOffset}else for(g=b.offsetLeft,f=b.offsetTop+b.offsetHeight;b=b.offsetParent;)g+=b.offsetLeft,f+=b.offsetTop;if(this._o.reposition&&g+d>l||-1<this._o.position.indexOf(\"right\")&&0<g-d+a.offsetWidth)g=g-d+a.offsetWidth;if(this._o.reposition&&f+c>h+e||-1<this._o.position.indexOf(\"top\")&&0<f-c-a.offsetHeight)f=f-c-a.offsetHeight;this.el.style.left=\ng+\"px\";this.el.style.top=f+\"px\"}},render:function(a,b,d){var c=this._o,f=new Date,h=M(a,b),e=(new Date(a,b,1)).getDay(),g=[],k=[];c.showTime||A(f);0<c.firstDay&&(e-=c.firstDay,0>e&&(e+=7));for(var n=0===b?11:b-1,p=11===b?0:b+1,q=0===b?a-1:a,r=11===b?a+1:a,v=M(q,n),u=h+e,B=u;7<B;)B-=7;u+=7-B;B=c.minDate?new Date(c.minDate.getFullYear(),c.minDate.getMonth(),c.minDate.getDate()):null;for(var w=c.maxDate?new Date(c.maxDate.getFullYear(),c.maxDate.getMonth(),c.maxDate.getDate()):null,x=0,y=0;x<u;x++){var t=\nnew Date(a,b,1+(x-e)),D=m(this._d)?F(t,this._d):!1,E=F(t,f),C=x<e||x>=h+e,I=1+(x-e),K=b,L=a,G=c.startRange&&F(c.startRange,t),H=c.endRange&&F(c.endRange,t),J=c.startRange&&c.endRange&&c.startRange<t&&t<c.endRange,z;!(z=B&&t<B||w&&t>w)&&(z=c.disableWeekends)&&(z=t.getDay(),z=0===z||6===z);t=z||c.disableDayFn&&c.disableDayFn(t);C&&(x<e?(I=v+I,K=n,L=q):(I-=h,K=p,L=r));k.push(O({day:I,month:K,year:L,isSelected:D,isToday:E,isDisabled:t,isEmpty:C,isStartRange:G,isEndRange:H,isInRange:J,showDaysInNextAndPreviousMonths:c.showDaysInNextAndPreviousMonths}));\n7===++y&&(c.showWeekNumber&&k.unshift(P(x-e,b,a)),g.push(Q(k,c.isRTL)),k=[],y=0)}b=[];c.showWeekNumber&&b.push(\"<th></th>\");for(a=0;7>a;a++)b.push('<th scope=\"col\"><abbr title=\"'+N(c,a)+'\">'+N(c,a,!0)+\"</abbr></th>\");c=\"<thead><tr>\"+(c.isRTL?b.reverse():b).join(\"\")+\"</tr></thead>\";return'<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"'+d+'\">'+c+(\"<tbody>\"+g.join(\"\")+\"</tbody>\")+\"</table>\"},isVisible:function(){return this._v},show:function(){if(!this.isVisible()){var a=\nthis.el;var b=(\" \"+a.className+\" \").replace(\" is-hidden \",\" \");b=b.trim?b.trim():b.replace(/^\\s+|\\s+$/g,\"\");a.className=b;this._v=!0;this.draw();this._o.bound&&(q(k,\"click\",this._onClick),this.adjustPosition());\"function\"===typeof this._o.onOpen&&this._o.onOpen.call(this)}},hide:function(){var a=this._v;if(!1!==a){this._o.bound&&v(k,\"click\",this._onClick);this.el.style.position=\"static\";this.el.style.left=\"auto\";this.el.style.top=\"auto\";var b=this.el;f(b,\"is-hidden\")||(b.className=\"\"===b.className?\n\"is-hidden\":b.className+\" is-hidden\");this._v=!1;void 0!==a&&\"function\"===typeof this._o.onClose&&this._o.onClose.call(this)}},destroy:function(){this.hide();v(this.el,\"mousedown\",this._onMouseDown,!0);v(this.el,\"touchend\",this._onMouseDown,!0);v(this.el,\"change\",this._onChange);this._o.field&&(v(this._o.field,\"change\",this._onInputChange),this._o.bound&&(v(this._o.trigger,\"click\",this._onInputClick),v(this._o.trigger,\"focus\",this._onInputFocus),v(this._o.trigger,\"blur\",this._onInputBlur)));this.el.parentNode&&\nthis.el.parentNode.removeChild(this.el)}};return H});\n\n\n/*\n Pikaday jQuery plugin.\n\n Copyright ? 2013 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n*/\n(function(c,d){\"object\"===typeof exports?d(require(\"jquery\"),require(\"../pikaday\")):\"function\"===typeof define&&define.amd?define([\"jquery\",\"pikaday\"],d):d(c.jQuery,c.Pikaday)})(this,function(c,d){c.fn.pikaday=function(){var a=arguments;a&&a.length||(a=[{}]);return this.each(function(){var e=c(this),b=e.data(\"pikaday\");b instanceof d?\"string\"===typeof a[0]&&\"function\"===typeof b[a[0]]&&(b[a[0]].apply(b,Array.prototype.slice.call(a,1)),\"destroy\"===a[0]&&e.removeData(\"pikaday\")):\"object\"===typeof a[0]&&\n(b=c.extend({},a[0]),b.field=e[0],e.data(\"pikaday\",new d(b)))})}});\n\n\n/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n!function(e,t){if(\"function\"==typeof define&&define.amd)define([\"module\",\"exports\"],t);else if(\"undefined\"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.autosize=n.exports}}(this,function(e,t){\"use strict\";var n,o,p=\"function\"==typeof Map?new Map:(n=[],o=[],{has:function(e){return-1<n.indexOf(e)},get:function(e){return o[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),o.push(t))},delete:function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),o.splice(t,1))}}),c=function(e){return new Event(e,{bubbles:!0})};try{new Event(\"test\")}catch(e){c=function(e){var t=document.createEvent(\"Event\");return t.initEvent(e,!0,!1),t}}function r(r){if(r&&r.nodeName&&\"TEXTAREA\"===r.nodeName&&!p.has(r)){var e,n=null,o=null,i=null,d=function(){r.clientWidth!==o&&a()},l=function(t){window.removeEventListener(\"resize\",d,!1),r.removeEventListener(\"input\",a,!1),r.removeEventListener(\"keyup\",a,!1),r.removeEventListener(\"autosize:destroy\",l,!1),r.removeEventListener(\"autosize:update\",a,!1),Object.keys(t).forEach(function(e){r.style[e]=t[e]}),p.delete(r)}.bind(r,{height:r.style.height,resize:r.style.resize,overflowY:r.style.overflowY,overflowX:r.style.overflowX,wordWrap:r.style.wordWrap});r.addEventListener(\"autosize:destroy\",l,!1),\"onpropertychange\"in r&&\"oninput\"in r&&r.addEventListener(\"keyup\",a,!1),window.addEventListener(\"resize\",d,!1),r.addEventListener(\"input\",a,!1),r.addEventListener(\"autosize:update\",a,!1),r.style.overflowX=\"hidden\",r.style.wordWrap=\"break-word\",p.set(r,{destroy:l,update:a}),\"vertical\"===(e=window.getComputedStyle(r,null)).resize?r.style.resize=\"none\":\"both\"===e.resize&&(r.style.resize=\"horizontal\"),n=\"content-box\"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(n)&&(n=0),a()}function s(e){var t=r.style.width;r.style.width=\"0px\",r.offsetWidth,r.style.width=t,r.style.overflowY=e}function u(){if(0!==r.scrollHeight){var e=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(r),t=document.documentElement&&document.documentElement.scrollTop;r.style.height=\"\",r.style.height=r.scrollHeight+n+\"px\",o=r.clientWidth,e.forEach(function(e){e.node.scrollTop=e.scrollTop}),t&&(document.documentElement.scrollTop=t)}}function a(){u();var e=Math.round(parseFloat(r.style.height)),t=window.getComputedStyle(r,null),n=\"content-box\"===t.boxSizing?Math.round(parseFloat(t.height)):r.offsetHeight;if(n<e?\"hidden\"===t.overflowY&&(s(\"scroll\"),u(),n=\"content-box\"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(r,null).height)):r.offsetHeight):\"hidden\"!==t.overflowY&&(s(\"hidden\"),u(),n=\"content-box\"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(r,null).height)):r.offsetHeight),i!==n){i=n;var o=c(\"autosize:resized\");try{r.dispatchEvent(o)}catch(e){}}}}function i(e){var t=p.get(e);t&&t.destroy()}function d(e){var t=p.get(e);t&&t.update()}var l=null;\"undefined\"==typeof window||\"function\"!=typeof window.getComputedStyle?((l=function(e){return e}).destroy=function(e){return e},l.update=function(e){return e}):((l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return r(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],d),e}),t.default=l,e.exports=t.default});\n\n/**\n * @license Rangy Inputs, a jQuery plug-in for selection and caret manipulation within textareas and text inputs.\n *\n * https://github.com/timdown/rangyinputs\n *\n * For range and selection features for contenteditable, see Rangy.\n\n * http://code.google.com/p/rangy/\n *\n * Depends on jQuery 1.0 or later.\n *\n * Copyright 2014, Tim Down\n * Licensed under the MIT license.\n * Version: 1.2.0\n * Build date: 30 November 2014\n */\n!function(e){function t(e,t){var n=typeof e[t];return\"function\"===n||!(\"object\"!=n||!e[t])||\"unknown\"==n}function n(e,t){return typeof e[t]!=x}function r(e,t){return!(\"object\"!=typeof e[t]||!e[t])}function o(e){window.console&&window.console.log&&window.console.log(\"RangyInputs not supported in your browser. Reason: \"+e)}function a(e,t,n){return 0>t&&(t+=e.value.length),typeof n==x&&(n=t),0>n&&(n+=e.value.length),{start:t,end:n}}function c(e,t,n){return{start:t,end:n,length:n-t,text:e.value.slice(t,n)}}function l(){return r(document,\"body\")?document.body:document.getElementsByTagName(\"body\")[0]}var i,u,s,d,f,v,p,m,g,x=\"undefined\";e(document).ready(function(){function h(e,t){var n=e.value,r=i(e),o=r.start;return{value:n.slice(0,o)+t+n.slice(r.end),index:o,replaced:r.text}}function y(e,t){e.focus();var n=i(e);return u(e,n.start,n.end),\"\"==t?document.execCommand(\"delete\",!1,null):document.execCommand(\"insertText\",!1,t),{replaced:n.text,index:n.start}}function T(e,t){e.focus();var n=h(e,t);return e.value=n.value,n}function E(e,t){return function(){var n=this.jquery?this[0]:this,r=n.nodeName.toLowerCase();if(1==n.nodeType&&(\"textarea\"==r||\"input\"==r&&/^(?:text|email|number|search|tel|url|password)$/i.test(n.type))){var o=[n].concat(Array.prototype.slice.call(arguments)),a=e.apply(this,o);if(!t)return a}return t?this:void 0}}var S=document.createElement(\"textarea\");if(l().appendChild(S),n(S,\"selectionStart\")&&n(S,\"selectionEnd\"))i=function(e){var t=e.selectionStart,n=e.selectionEnd;return c(e,t,n)},u=function(e,t,n){var r=a(e,t,n);e.selectionStart=r.start,e.selectionEnd=r.end},g=function(e,t){t?e.selectionEnd=e.selectionStart:e.selectionStart=e.selectionEnd};else{if(!(t(S,\"createTextRange\")&&r(document,\"selection\")&&t(document.selection,\"createRange\")))return l().removeChild(S),void o(\"No means of finding text input caret position\");i=function(e){var t,n,r,o,a=0,l=0,i=document.selection.createRange();return i&&i.parentElement()==e&&(r=e.value.length,t=e.value.replace(/\\r\\n/g,\"\\n\"),n=e.createTextRange(),n.moveToBookmark(i.getBookmark()),o=e.createTextRange(),o.collapse(!1),n.compareEndPoints(\"StartToEnd\",o)>-1?a=l=r:(a=-n.moveStart(\"character\",-r),a+=t.slice(0,a).split(\"\\n\").length-1,n.compareEndPoints(\"EndToEnd\",o)>-1?l=r:(l=-n.moveEnd(\"character\",-r),l+=t.slice(0,l).split(\"\\n\").length-1))),c(e,a,l)};var w=function(e,t){return t-(e.value.slice(0,t).split(\"\\r\\n\").length-1)};u=function(e,t,n){var r=a(e,t,n),o=e.createTextRange(),c=w(e,r.start);o.collapse(!0),r.start==r.end?o.move(\"character\",c):(o.moveEnd(\"character\",w(e,r.end)),o.moveStart(\"character\",c)),o.select()},g=function(e,t){var n=document.selection.createRange();n.collapse(t),n.select()}}l().removeChild(S);var b=function(e,t){var n=h(e,t);try{var r=y(e,t);if(e.value==n.value)return b=y,r}catch(o){}return b=T,e.value=n.value,n};d=function(e,t,n,r){t!=n&&(u(e,t,n),b(e,\"\")),r&&u(e,t)},s=function(e){u(e,b(e,\"\").index)},m=function(e){var t=b(e,\"\");return u(e,t.index),t.replaced};var R=function(e,t,n,r){var o=t+n.length;if(r=\"string\"==typeof r?r.toLowerCase():\"\",(\"collapsetoend\"==r||\"select\"==r)&&/[\\r\\n]/.test(n)){var a=n.replace(/\\r\\n/g,\"\\n\").replace(/\\r/g,\"\\n\");o=t+a.length;var c=t+a.indexOf(\"\\n\");\"\\r\\n\"==e.value.slice(c,c+2)&&(o+=a.match(/\\n/g).length)}switch(r){case\"collapsetostart\":u(e,t,t);break;case\"collapsetoend\":u(e,o,o);break;case\"select\":u(e,t,o)}};f=function(e,t,n,r){u(e,n),b(e,t),\"boolean\"==typeof r&&(r=r?\"collapseToEnd\":\"\"),R(e,n,t,r)},v=function(e,t,n){var r=b(e,t);R(e,r.index,t,n||\"collapseToEnd\")},p=function(e,t,n,r){typeof n==x&&(n=t);var o=i(e),a=b(e,t+o.text+n);R(e,a.index+t.length,o.text,r||\"select\")},e.fn.extend({getSelection:E(i,!1),setSelection:E(u,!0),collapseSelection:E(g,!0),deleteSelectedText:E(s,!0),deleteText:E(d,!0),extractSelectedText:E(m,!1),insertText:E(f,!0),replaceSelectedText:E(v,!0),surroundSelectedText:E(p,!0)})})}(jQuery);\n\n/*!\n  SerializeJSON jQuery plugin.\n  https://github.com/marioizquierdo/jquery.serializeJSON\n  version 2.8.1 (Dec, 2016)\n\n  Copyright (c) 2012, 2017 Mario Izquierdo\n  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)\n  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.\n*/\n!function(a){if(\"function\"==typeof define&&define.amd)define([\"jquery\"],a);else if(\"object\"==typeof exports){var b=require(\"jquery\");module.exports=a(b)}else a(window.jQuery||window.Zepto||window.$)}(function(a){\"use strict\";a.fn.serializeJSON=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return c=a.serializeJSON,d=this,e=c.setupOpts(b),f=d.serializeArray(),c.readCheckboxUncheckedValues(f,e,d),g={},a.each(f,function(a,b){h=b.name,i=b.value,k=c.extractTypeAndNameWithNoType(h),l=k.nameWithNoType,m=k.type,m||(m=c.attrFromInputWithName(d,h,\"data-value-type\")),c.validateType(h,m,e),\"skip\"!==m&&(n=c.splitInputNameIntoKeysArray(l),j=c.parseValue(i,h,m,e),o=!j&&c.shouldSkipFalsy(d,h,l,m,e),o||c.deepSet(g,n,j,e))}),g},a.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(a){return String(a)},number:function(a){return Number(a)},boolean:function(a){var b=[\"false\",\"null\",\"undefined\",\"\",\"0\"];return b.indexOf(a)===-1},null:function(a){var b=[\"false\",\"null\",\"undefined\",\"\",\"0\"];return b.indexOf(a)===-1?a:null},array:function(a){return JSON.parse(a)},object:function(a){return JSON.parse(a)},auto:function(b){return a.serializeJSON.parseValue(b,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(b){var c,d,e,f,g,h;h=a.serializeJSON,null==b&&(b={}),e=h.defaultOptions||{},d=[\"checkboxUncheckedValue\",\"parseNumbers\",\"parseBooleans\",\"parseNulls\",\"parseAll\",\"parseWithFunction\",\"skipFalsyValuesForTypes\",\"skipFalsyValuesForFields\",\"customTypes\",\"defaultTypes\",\"useIntKeysAsArrayIndex\"];for(c in b)if(d.indexOf(c)===-1)throw new Error(\"serializeJSON ERROR: invalid option '\"+c+\"'. Please use one of \"+d.join(\", \"));return f=function(a){return b[a]!==!1&&\"\"!==b[a]&&(b[a]||e[a])},g=f(\"parseAll\"),{checkboxUncheckedValue:f(\"checkboxUncheckedValue\"),parseNumbers:g||f(\"parseNumbers\"),parseBooleans:g||f(\"parseBooleans\"),parseNulls:g||f(\"parseNulls\"),parseWithFunction:f(\"parseWithFunction\"),skipFalsyValuesForTypes:f(\"skipFalsyValuesForTypes\"),skipFalsyValuesForFields:f(\"skipFalsyValuesForFields\"),typeFunctions:a.extend({},f(\"defaultTypes\"),f(\"customTypes\")),useIntKeysAsArrayIndex:f(\"useIntKeysAsArrayIndex\")}},parseValue:function(b,c,d,e){var f,g;return f=a.serializeJSON,g=b,e.typeFunctions&&d&&e.typeFunctions[d]?g=e.typeFunctions[d](b):e.parseNumbers&&f.isNumeric(b)?g=Number(b):!e.parseBooleans||\"true\"!==b&&\"false\"!==b?e.parseNulls&&\"null\"==b&&(g=null):g=\"true\"===b,e.parseWithFunction&&!d&&(g=e.parseWithFunction(g,c)),g},isObject:function(a){return a===Object(a)},isUndefined:function(a){return void 0===a},isValidArrayIndex:function(a){return/^[0-9]+$/.test(String(a))},isNumeric:function(a){return a-parseFloat(a)>=0},optionKeys:function(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)c.push(b);return c},readCheckboxUncheckedValues:function(b,c,d){var e,f,g,h,i;null==c&&(c={}),i=a.serializeJSON,e=\"input[type=checkbox][name]:not(:checked):not([disabled])\",f=d.find(e).add(d.filter(e)),f.each(function(d,e){if(g=a(e),h=g.attr(\"data-unchecked-value\"),null==h&&(h=c.checkboxUncheckedValue),null!=h){if(e.name&&e.name.indexOf(\"[][\")!==-1)throw new Error(\"serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '\"+e.name+\"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67\");b.push({name:e.name,value:h})}})},extractTypeAndNameWithNoType:function(a){var b;return(b=a.match(/(.*):([^:]+)$/))?{nameWithNoType:b[1],type:b[2]}:{nameWithNoType:a,type:null}},shouldSkipFalsy:function(b,c,d,e,f){var g=a.serializeJSON,h=g.attrFromInputWithName(b,c,\"data-skip-falsy\");if(null!=h)return\"false\"!==h;var i=f.skipFalsyValuesForFields;if(i&&(i.indexOf(d)!==-1||i.indexOf(c)!==-1))return!0;var j=f.skipFalsyValuesForTypes;return null==e&&(e=\"string\"),!(!j||j.indexOf(e)===-1)},attrFromInputWithName:function(a,b,c){var d,e,f;return d=b.replace(/(:|\\.|\\[|\\]|\\s)/g,\"\\\\$1\"),e='[name=\"'+d+'\"]',f=a.find(e).add(a.filter(e)),f.attr(c)},validateType:function(b,c,d){var e,f;if(f=a.serializeJSON,e=f.optionKeys(d?d.typeFunctions:f.defaultOptions.defaultTypes),c&&e.indexOf(c)===-1)throw new Error(\"serializeJSON ERROR: Invalid type \"+c+\" found in input name '\"+b+\"', please use one of \"+e.join(\", \"));return!0},splitInputNameIntoKeysArray:function(b){var c,d;return d=a.serializeJSON,c=b.split(\"[\"),c=a.map(c,function(a){return a.replace(/\\]/g,\"\")}),\"\"===c[0]&&c.shift(),c},deepSet:function(b,c,d,e){var f,g,h,i,j,k;if(null==e&&(e={}),k=a.serializeJSON,k.isUndefined(b))throw new Error(\"ArgumentError: param 'o' expected to be an object or array, found undefined\");if(!c||0===c.length)throw new Error(\"ArgumentError: param 'keys' expected to be an array with least one element\");f=c[0],1===c.length?\"\"===f?b.push(d):b[f]=d:(g=c[1],\"\"===f&&(i=b.length-1,j=b[i],f=k.isObject(j)&&(k.isUndefined(j[g])||c.length>2)?i:i+1),\"\"===g?!k.isUndefined(b[f])&&a.isArray(b[f])||(b[f]=[]):e.useIntKeysAsArrayIndex&&k.isValidArrayIndex(g)?!k.isUndefined(b[f])&&a.isArray(b[f])||(b[f]=[]):!k.isUndefined(b[f])&&k.isObject(b[f])||(b[f]={}),h=c.slice(1),k.deepSet(b[f],h,d,e))}}});\n\n/*!\n * clipboard.js v1.7.1\n * https://zenorocha.github.io/clipboard.js\n *\n * Licensed MIT  Zeno Rocha\n */\n!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t,e,n;return function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var l=\"function\"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error(\"Cannot find module '\"+a+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r=\"function\"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){function o(t,e){for(;t&&t.nodeType!==i;){if(\"function\"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if(\"undefined\"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=o},{}],2:[function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}var r=t(\"./closest\");e.exports=o},{\"./closest\":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&(\"[object NodeList]\"===e||\"[object HTMLCollection]\"===e)&&\"length\"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return\"string\"==typeof t||t instanceof String},n.fn=function(t){return\"[object Function]\"===Object.prototype.toString.call(t)}},{}],4:[function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error(\"Missing required arguments\");if(!c.string(e))throw new TypeError(\"Second argument must be a String\");if(!c.fn(n))throw new TypeError(\"Third argument must be a Function\");if(c.node(t))return i(t,e,n);if(c.nodeList(t))return r(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError(\"First argument must be a String, HTMLElement, HTMLCollection, or NodeList\")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return l(document.body,t,e,n)}var c=t(\"./is\"),l=t(\"delegate\");e.exports=o},{\"./is\":3,delegate:2}],5:[function(t,e,n){function o(t){var e;if(\"SELECT\"===t.nodeName)t.focus(),e=t.value;else if(\"INPUT\"===t.nodeName||\"TEXTAREA\"===t.nodeName){var n=t.hasAttribute(\"readonly\");n||t.setAttribute(\"readonly\",\"\"),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute(\"readonly\"),e=t.value}else{t.hasAttribute(\"contenteditable\")&&t.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(t),o.removeAllRanges(),o.addRange(i),e=o.toString()}return e}e.exports=o},{}],6:[function(t,e,n){function o(){}o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,a=o.length;r<a;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},e.exports=o},{}],7:[function(e,n,o){!function(i,r){if(\"function\"==typeof t&&t.amd)t([\"module\",\"select\"],r);else if(void 0!==o)r(n,e(\"select\"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var i=n(e),r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:\"resolveOptions\",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=\"\"}},{key:\"initSelection\",value:function t(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:\"selectFake\",value:function t(){var e=this,n=\"rtl\"==document.documentElement.getAttribute(\"dir\");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener(\"click\",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement(\"textarea\"),this.fakeElem.style.fontSize=\"12pt\",this.fakeElem.style.border=\"0\",this.fakeElem.style.padding=\"0\",this.fakeElem.style.margin=\"0\",this.fakeElem.style.position=\"absolute\",this.fakeElem.style[n?\"right\":\"left\"]=\"-9999px\";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+\"px\",this.fakeElem.setAttribute(\"readonly\",\"\"),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:\"removeFake\",value:function t(){this.fakeHandler&&(this.container.removeEventListener(\"click\",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:\"selectTarget\",value:function t(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:\"copyText\",value:function t(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:\"handleResult\",value:function t(e){this.emitter.emit(e?\"success\":\"error\",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:\"clearSelection\",value:function t(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:\"destroy\",value:function t(){this.removeFake()}},{key:\"action\",set:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"copy\";if(this._action=e,\"copy\"!==this._action&&\"cut\"!==this._action)throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"')},get:function t(){return this._action}},{key:\"target\",set:function t(e){if(void 0!==e){if(!e||\"object\"!==(void 0===e?\"undefined\":r(e))||1!==e.nodeType)throw new Error('Invalid \"target\" value, use a valid Element');if(\"copy\"===this.action&&e.hasAttribute(\"disabled\"))throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');if(\"cut\"===this.action&&(e.hasAttribute(\"readonly\")||e.hasAttribute(\"disabled\")))throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');this._target=e}},get:function t(){return this._target}}]),t}();t.exports=c})},{select:5}],8:[function(e,n,o){!function(i,r){if(\"function\"==typeof t&&t.amd)t([\"module\",\"./clipboard-action\",\"tiny-emitter\",\"good-listener\"],r);else if(void 0!==o)r(n,e(\"./clipboard-action\"),e(\"tiny-emitter\"),e(\"good-listener\"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,o){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function a(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function c(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n=\"data-clipboard-\"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var s=i(e),u=i(n),f=i(o),d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return c(e,t),h(e,[{key:\"resolveOptions\",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=\"function\"==typeof e.action?e.action:this.defaultAction,this.target=\"function\"==typeof e.target?e.target:this.defaultTarget,this.text=\"function\"==typeof e.text?e.text:this.defaultText,this.container=\"object\"===d(e.container)?e.container:document.body}},{key:\"listenClick\",value:function t(e){var n=this;this.listener=(0,f.default)(e,\"click\",function(t){return n.onClick(t)})}},{key:\"onClick\",value:function t(e){var n=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(n),target:this.target(n),text:this.text(n),container:this.container,trigger:n,emitter:this})}},{key:\"defaultAction\",value:function t(e){return l(\"action\",e)}},{key:\"defaultTarget\",value:function t(e){var n=l(\"target\",e);if(n)return document.querySelector(n)}},{key:\"defaultText\",value:function t(e){return l(\"text\",e)}},{key:\"destroy\",value:function t(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:\"isSupported\",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[\"copy\",\"cut\"],n=\"string\"==typeof e?[e]:e,o=!!document.queryCommandSupported;return n.forEach(function(t){o=o&&!!document.queryCommandSupported(t)}),o}}]),e}(u.default);t.exports=p})},{\"./clipboard-action\":7,\"good-listener\":4,\"tiny-emitter\":6}]},{},[8])(8)});\n\n/*!\n * jQuery Mobile Events\n * by Ben Major\n *\n * Copyright 2011-2017, Ben Major\n * Licensed under the MIT License:\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n\n\"use strict\";!function(e){e.attrFn=e.attrFn||{};var t=\"ontouchstart\"in window,a={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,shake_threshold:15,touch_capable:t,orientation_support:\"orientation\"in window&&\"onorientationchange\"in window,startevent:t?\"touchstart\":\"mousedown\",endevent:t?\"touchend\":\"mouseup\",moveevent:t?\"touchmove\":\"mousemove\",tapevent:t?\"tap\":\"click\",scrollevent:t?\"touchmove\":\"scroll\",hold_timer:null,tap_timer:null};e.touch={},e.isTouchCapable=function(){return a.touch_capable},e.getStartEvent=function(){return a.startevent},e.getEndEvent=function(){return a.endevent},e.getMoveEvent=function(){return a.moveevent},e.getTapEvent=function(){return a.tapevent},e.getScrollEvent=function(){return a.scrollevent},e.touch.setSwipeThresholdX=function(e){if(\"number\"!=typeof e)throw new Error(\"Threshold parameter must be a type of number\");a.swipe_h_threshold=e},e.touch.setSwipeThresholdY=function(e){if(\"number\"!=typeof e)throw new Error(\"Threshold parameter must be a type of number\");a.swipe_v_threshold=e},e.touch.setDoubleTapInt=function(e){if(\"number\"!=typeof e)throw new Error(\"Interval parameter must be a type of number\");a.doubletap_int=e},e.touch.setTapHoldThreshold=function(e){if(\"number\"!=typeof e)throw new Error(\"Threshold parameter must be a type of number\");a.taphold_threshold=e},e.touch.setTapRange=function(e){if(\"number\"!=typeof e)throw new Error(\"Ranger parameter must be a type of number\");a.tap_pixel_range=threshold},e.each([\"tapstart\",\"tapend\",\"tapmove\",\"tap\",\"singletap\",\"doubletap\",\"taphold\",\"swipe\",\"swipeup\",\"swiperight\",\"swipedown\",\"swipeleft\",\"swipeend\",\"scrollstart\",\"scrollend\",\"orientationchange\",\"tap2\",\"taphold2\"],function(t,a){e.fn[a]=function(e){return e?this.on(a,e):this.trigger(a)},e.attrFn[a]=!0}),e.event.special.tapstart={setup:function(){var t=this,o=e(t);o.on(a.startevent,function e(n){if(o.data(\"callee\",e),n.which&&1!==n.which)return!1;var i=n.originalEvent,r={position:{x:a.touch_capable?i.touches[0].pageX:n.pageX,y:a.touch_capable?i.touches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(i.changedTouches[0].pageX-(o.offset()?o.offset().left:0)):Math.round(n.pageX-(o.offset()?o.offset().left:0)),y:a.touch_capable?Math.round(i.changedTouches[0].pageY-(o.offset()?o.offset().top:0)):Math.round(n.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:n.target};return w(t,\"tapstart\",n,r),!0})},remove:function(){e(this).off(a.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,o=e(t);o.on(a.moveevent,function e(n){o.data(\"callee\",e);var i=n.originalEvent,r={position:{x:a.touch_capable?i.touches[0].pageX:n.pageX,y:a.touch_capable?i.touches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(i.changedTouches[0].pageX-(o.offset()?o.offset().left:0)):Math.round(n.pageX-(o.offset()?o.offset().left:0)),y:a.touch_capable?Math.round(i.changedTouches[0].pageY-(o.offset()?o.offset().top:0)):Math.round(n.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:n.target};return w(t,\"tapmove\",n,r),!0})},remove:function(){e(this).off(a.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,o=e(t);o.on(a.endevent,function e(n){o.data(\"callee\",e);var i=n.originalEvent,r={position:{x:a.touch_capable?i.changedTouches[0].pageX:n.pageX,y:a.touch_capable?i.changedTouches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(i.changedTouches[0].pageX-(o.offset()?o.offset().left:0)):Math.round(n.pageX-(o.offset()?o.offset().left:0)),y:a.touch_capable?Math.round(i.changedTouches[0].pageY-(o.offset()?o.offset().top:0)):Math.round(n.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:n.target};return w(t,\"tapend\",n,r),!0})},remove:function(){e(this).off(a.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,o=this,n=e(o),i={x:0,y:0},r=0,s=0;n.on(a.startevent,function e(p){if(p.which&&1!==p.which)return!1;n.data(\"tapheld\",!1),t=p.target;var h=p.originalEvent,c=Date.now();a.touch_capable?h.touches[0].pageX:p.pageX,a.touch_capable?h.touches[0].pageY:p.pageY,a.touch_capable?(h.touches[0].pageX,h.touches[0].target.offsetLeft):p.offsetX,a.touch_capable?(h.touches[0].pageY,h.touches[0].target.offsetTop):p.offsetY;i.x=p.originalEvent.targetTouches?p.originalEvent.targetTouches[0].pageX:p.pageX,i.y=p.originalEvent.targetTouches?p.originalEvent.targetTouches[0].pageY:p.pageY,r=i.x,s=i.y;var u=n.parent().data(\"threshold\")?n.parent().data(\"threshold\"):n.data(\"threshold\"),f=void 0!==u&&!1!==u&&parseInt(u)?parseInt(u):a.taphold_threshold;return a.hold_timer=window.setTimeout(function(){var u=i.x-r,f=i.y-s;if(p.target==t&&(i.x==r&&i.y==s||u>=-a.tap_pixel_range&&u<=a.tap_pixel_range&&f>=-a.tap_pixel_range&&f<=a.tap_pixel_range)){n.data(\"tapheld\",!0);for(var l=Date.now()-c,g=p.originalEvent.targetTouches?p.originalEvent.targetTouches:[p],d=[],v=0;v<g.length;v++){var _={position:{x:a.touch_capable?h.changedTouches[v].pageX:p.pageX,y:a.touch_capable?h.changedTouches[v].pageY:p.pageY},offset:{x:a.touch_capable?Math.round(h.changedTouches[v].pageX-(n.offset()?n.offset().left:0)):Math.round(p.pageX-(n.offset()?n.offset().left:0)),y:a.touch_capable?Math.round(h.changedTouches[v].pageY-(n.offset()?n.offset().top:0)):Math.round(p.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:p.target,duration:l};d.push(_)}var T=2==g.length?\"taphold2\":\"taphold\";n.data(\"callee1\",e),w(o,T,p,d)}},f),!0}).on(a.endevent,function e(){n.data(\"callee2\",e),n.data(\"tapheld\",!1),window.clearTimeout(a.hold_timer)}).on(a.moveevent,function e(t){n.data(\"callee3\",e),r=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,s=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2).off(a.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,o,n=this,i=e(n),r=null,s=!1;i.on(a.startevent,function t(n){return(!n.which||1===n.which)&&(i.data(\"doubletapped\",!1),n.target,i.data(\"callee1\",t),o=n.originalEvent,r||(r={position:{x:a.touch_capable?o.touches[0].pageX:n.pageX,y:a.touch_capable?o.touches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(o.changedTouches[0].pageX-(i.offset()?i.offset().left:0)):Math.round(n.pageX-(i.offset()?i.offset().left:0)),y:a.touch_capable?Math.round(o.changedTouches[0].pageY-(i.offset()?i.offset().top:0)):Math.round(n.pageY-(i.offset()?i.offset().top:0))},time:Date.now(),target:n.target,element:n.originalEvent.srcElement,index:e(n.target).index()}),!0)}).on(a.endevent,function p(h){var c=Date.now(),u=c-(i.data(\"lastTouch\")||c+1);if(window.clearTimeout(t),i.data(\"callee2\",p),u<a.doubletap_int&&e(h.target).index()==r.index&&u>100){i.data(\"doubletapped\",!0),window.clearTimeout(a.tap_timer);var f={position:{x:a.touch_capable?h.originalEvent.changedTouches[0].pageX:h.pageX,y:a.touch_capable?h.originalEvent.changedTouches[0].pageY:h.pageY},offset:{x:a.touch_capable?Math.round(o.changedTouches[0].pageX-(i.offset()?i.offset().left:0)):Math.round(h.pageX-(i.offset()?i.offset().left:0)),y:a.touch_capable?Math.round(o.changedTouches[0].pageY-(i.offset()?i.offset().top:0)):Math.round(h.pageY-(i.offset()?i.offset().top:0))},time:Date.now(),target:h.target,element:h.originalEvent.srcElement,index:e(h.target).index()},l={firstTap:r,secondTap:f,interval:f.time-r.time};s||(w(n,\"doubletap\",h,l),r=null),s=!0,window.setTimeout(function(){s=!1},a.doubletap_int)}else i.data(\"lastTouch\",c),t=window.setTimeout(function(){r=null,window.clearTimeout(t)},a.doubletap_int,[h]);i.data(\"lastTouch\",c)})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,o=e(t),n=null,i=null,r={x:0,y:0};o.on(a.startevent,function e(t){return(!t.which||1===t.which)&&(i=Date.now(),n=t.target,o.data(\"callee1\",e),r.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,r.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,!0)}).on(a.endevent,function e(s){if(o.data(\"callee2\",e),s.target==n){var p=s.originalEvent.changedTouches?s.originalEvent.changedTouches[0].pageX:s.pageX,h=s.originalEvent.changedTouches?s.originalEvent.changedTouches[0].pageY:s.pageY;a.tap_timer=window.setTimeout(function(){var e=r.x-p,n=r.y-h;if(!o.data(\"doubletapped\")&&!o.data(\"tapheld\")&&(r.x==p&&r.y==h||e>=-a.tap_pixel_range&&e<=a.tap_pixel_range&&n>=-a.tap_pixel_range&&n<=a.tap_pixel_range)){var c=s.originalEvent,u={position:{x:a.touch_capable?c.changedTouches[0].pageX:s.pageX,y:a.touch_capable?c.changedTouches[0].pageY:s.pageY},offset:{x:a.touch_capable?Math.round(c.changedTouches[0].pageX-(o.offset()?o.offset().left:0)):Math.round(s.pageX-(o.offset()?o.offset().left:0)),y:a.touch_capable?Math.round(c.changedTouches[0].pageY-(o.offset()?o.offset().top:0)):Math.round(s.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:s.target};u.time-i<a.taphold_threshold&&w(t,\"singletap\",s,u)}},a.doubletap_int)}})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,o,n=this,i=e(n),r=!1,s=null,p={x:0,y:0};i.on(a.startevent,function e(a){return i.data(\"callee1\",e),(!a.which||1===a.which)&&(r=!0,p.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX,p.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY,t=Date.now(),s=a.target,o=a.originalEvent.targetTouches?a.originalEvent.targetTouches:[a],!0)}).on(a.endevent,function e(h){i.data(\"callee2\",e);var c=h.originalEvent.targetTouches?h.originalEvent.changedTouches[0].pageX:h.pageX,u=h.originalEvent.targetTouches?h.originalEvent.changedTouches[0].pageY:h.pageY,f=p.x-c,l=p.y-u;if(s==h.target&&r&&Date.now()-t<a.taphold_threshold&&(p.x==c&&p.y==u||f>=-a.tap_pixel_range&&f<=a.tap_pixel_range&&l>=-a.tap_pixel_range&&l<=a.tap_pixel_range)){for(var g=h.originalEvent,d=[],v=0;v<o.length;v++){var _={position:{x:a.touch_capable?g.changedTouches[v].pageX:h.pageX,y:a.touch_capable?g.changedTouches[v].pageY:h.pageY},offset:{x:a.touch_capable?Math.round(g.changedTouches[v].pageX-(i.offset()?i.offset().left:0)):Math.round(h.pageX-(i.offset()?i.offset().left:0)),y:a.touch_capable?Math.round(g.changedTouches[v].pageY-(i.offset()?i.offset().top:0)):Math.round(h.pageY-(i.offset()?i.offset().top:0))},time:Date.now(),target:h.target};d.push(_)}var T=2==o.length?\"tap2\":\"tap\";w(n,T,h,d)}})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){var t,o=e(this),n=!1,i=!1,r={x:0,y:0},s={x:0,y:0};o.on(a.startevent,function i(p){(o=e(p.currentTarget)).data(\"callee1\",i),r.x=p.originalEvent.targetTouches?p.originalEvent.targetTouches[0].pageX:p.pageX,r.y=p.originalEvent.targetTouches?p.originalEvent.targetTouches[0].pageY:p.pageY,s.x=r.x,s.y=r.y,n=!0;var h=p.originalEvent;t={position:{x:a.touch_capable?h.touches[0].pageX:p.pageX,y:a.touch_capable?h.touches[0].pageY:p.pageY},offset:{x:a.touch_capable?Math.round(h.changedTouches[0].pageX-(o.offset()?o.offset().left:0)):Math.round(p.pageX-(o.offset()?o.offset().left:0)),y:a.touch_capable?Math.round(h.changedTouches[0].pageY-(o.offset()?o.offset().top:0)):Math.round(p.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:p.target}}),o.on(a.moveevent,function p(h){var c;(o=e(h.currentTarget)).data(\"callee2\",p),s.x=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageX:h.pageX,s.y=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageY:h.pageY;var u=o.parent().data(\"xthreshold\")?o.parent().data(\"xthreshold\"):o.data(\"xthreshold\"),f=o.parent().data(\"ythreshold\")?o.parent().data(\"ythreshold\"):o.data(\"ythreshold\"),l=void 0!==u&&!1!==u&&parseInt(u)?parseInt(u):a.swipe_h_threshold,g=void 0!==f&&!1!==f&&parseInt(f)?parseInt(f):a.swipe_v_threshold;if(r.y>s.y&&r.y-s.y>g&&(c=\"swipeup\"),r.x<s.x&&s.x-r.x>l&&(c=\"swiperight\"),r.y<s.y&&s.y-r.y>g&&(c=\"swipedown\"),r.x>s.x&&r.x-s.x>l&&(c=\"swipeleft\"),void 0!=c&&n){r.x=0,r.y=0,s.x=0,s.y=0,n=!1;var d=h.originalEvent,v={position:{x:a.touch_capable?d.touches[0].pageX:h.pageX,y:a.touch_capable?d.touches[0].pageY:h.pageY},offset:{x:a.touch_capable?Math.round(d.changedTouches[0].pageX-(o.offset()?o.offset().left:0)):Math.round(h.pageX-(o.offset()?o.offset().left:0)),y:a.touch_capable?Math.round(d.changedTouches[0].pageY-(o.offset()?o.offset().top:0)):Math.round(h.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:h.target},w=Math.abs(t.position.x-v.position.x),_=Math.abs(t.position.y-v.position.y),T={startEvnt:t,endEvnt:v,direction:c.replace(\"swipe\",\"\"),xAmount:w,yAmount:_,duration:v.time-t.time};i=!0,o.trigger(\"swipe\",T).trigger(c,T)}}),o.on(a.endevent,function r(s){var p=\"\";if((o=e(s.currentTarget)).data(\"callee3\",r),i){var h=o.data(\"xthreshold\"),c=o.data(\"ythreshold\"),u=void 0!==h&&!1!==h&&parseInt(h)?parseInt(h):a.swipe_h_threshold,f=void 0!==c&&!1!==c&&parseInt(c)?parseInt(c):a.swipe_v_threshold,l=s.originalEvent,g={position:{x:a.touch_capable?l.changedTouches[0].pageX:s.pageX,y:a.touch_capable?l.changedTouches[0].pageY:s.pageY},offset:{x:a.touch_capable?Math.round(l.changedTouches[0].pageX-(o.offset()?o.offset().left:0)):Math.round(s.pageX-(o.offset()?o.offset().left:0)),y:a.touch_capable?Math.round(l.changedTouches[0].pageY-(o.offset()?o.offset().top:0)):Math.round(s.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:s.target};t.position.y>g.position.y&&t.position.y-g.position.y>f&&(p=\"swipeup\"),t.position.x<g.position.x&&g.position.x-t.position.x>u&&(p=\"swiperight\"),t.position.y<g.position.y&&g.position.y-t.position.y>f&&(p=\"swipedown\"),t.position.x>g.position.x&&t.position.x-g.position.x>u&&(p=\"swipeleft\");var d=Math.abs(t.position.x-g.position.x),v=Math.abs(t.position.y-g.position.y),w={startEvnt:t,endEvnt:g,direction:p.replace(\"swipe\",\"\"),xAmount:d,yAmount:v,duration:g.time-t.time};o.trigger(\"swipeend\",w)}n=!1,i=!1})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.moveevent,e(this).data.callee2).off(a.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){var t,o,n=this,i=e(n);function r(e,a){w(n,(t=a)?\"scrollstart\":\"scrollend\",e)}i.on(a.scrollevent,function e(a){i.data(\"callee\",e),t||r(a,!0),clearTimeout(o),o=setTimeout(function(){r(a,!1)},50)})},remove:function(){e(this).off(a.scrollevent,e(this).data.callee)}};var o,n,i,r,s=e(window),p={0:!0,180:!0};if(a.orientation_support){var h=window.innerWidth||s.width(),c=window.innerHeight||s.height();i=h>c&&h-c>50,r=p[window.orientation],(i&&r||!i&&!r)&&(p={\"-90\":!0,90:!0})}function u(){var e=o();e!==n&&(n=e,s.trigger(\"orientationchange\"))}e.event.special.orientationchange={setup:function(){return!a.orientation_support&&(n=o(),s.on(\"throttledresize\",u),!0)},teardown:function(){return!a.orientation_support&&(s.off(\"throttledresize\",u),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=o(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=o=function(){var e=document.documentElement;return(a.orientation_support?p[window.orientation]:e&&e.clientWidth/e.clientHeight<1.1)?\"portrait\":\"landscape\"},e.event.special.throttledresize={setup:function(){e(this).on(\"resize\",d)},teardown:function(){e(this).off(\"resize\",d)}};var f,l,g,d=function(){l=Date.now(),(g=l-v)>=250?(v=l,e(this).trigger(\"throttledresize\")):(f&&window.clearTimeout(f),f=window.setTimeout(u,250-g))},v=0;function w(t,a,o,n){var i=o.type;o.type=a,e.event.dispatch.call(t,o,n),o.type=i}e.each({scrollend:\"scrollstart\",swipeup:\"swipe\",swiperight:\"swipe\",swipedown:\"swipe\",swipeleft:\"swipe\",swipeend:\"swipe\",tap2:\"tap\",taphold2:\"taphold\"},function(t,a){e.event.special[t]={setup:function(){e(this).on(a,e.noop)}}})}(jQuery);\n\n/* Files: sticky-kit/sticky-kit.min.js, mustache/mustache.min.js, pikaday/pikaday.js, pikaday/pikaday.jquery.js, autosize/autosize.min.js, rangyinputs/rangyinputs-jquery.js, serializejson/jquery.serializejson.min.js, clipboard.js/clipboard.min.js, mobile-events/jquery.mobile-events.min.js */"
"var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(e,k,h){e instanceof String&&(e=String(e));for(var l=e.length,a=0;a<l;a++){var b=e[a];if(k.call(h,b,a,e))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(e,k,h){e!=Array.prototype&&e!=Object.prototype&&(e[k]=h.value)};\n$jscomp.getGlobal=function(e){return\"undefined\"!=typeof window&&window===e?e:\"undefined\"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(e,k,h,l){if(k){h=$jscomp.global;e=e.split(\".\");for(l=0;l<e.length-1;l++){var a=e[l];a in h||(h[a]={});h=h[a]}e=e[e.length-1];l=h[e];k=k(l);k!=l&&null!=k&&$jscomp.defineProperty(h,e,{configurable:!0,writable:!0,value:k})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(e){return e?e:function(e,h){return $jscomp.findInternal(this,e,h).v}},\"es6\",\"es3\");\n!function(e,k,h,l){XF.Color=XF.create({rgb:null,hsv:null,hsl:null,a:1,name:null,__construct:function(a,b,c){var d=null,g=function(a,b,c){a=parseInt(a,10);a=Math.max(b,Math.min(c,a));return isNaN(a)?b:a},f=function(a,b,c){a=parseFloat(a);return Math.max(b,Math.min(c,a))};\"rgb\"==a?\"undefined\"!=typeof b.r?(this.rgb={r:g(b.r,0,255),g:g(b.g,0,255),b:g(b.b,0,255)},d=b.a):\"undefined\"!=typeof b[0]&&(this.rgb={r:g(b[0],0,255),g:g(b[1],0,255),b:g(b[2],0,255)},d=b[3]):\"hsv\"==a?\"undefined\"!=typeof b.h?(this.hsv=\n{h:g(b.h,0,359),s:f(b.s,0,1),v:f(b.v,0,1)},d=b.a):\"undefined\"!=typeof b[0]&&(this.hsv={h:g(b[0],0,359),s:f(b[1],0,1),v:f(b[2],0,1)},d=b[3]):\"hsl\"==a&&(\"undefined\"!=typeof b.h?(this.hsl={h:g(b.h,0,359),s:f(b.s,0,1),l:f(b.l,0,1)},d=b.a):\"undefined\"!=typeof b[0]&&(this.hsl={h:g(b[0],0,359),s:f(b[1],0,1),v:f(b[2],0,1)},d=b[3]));if(!this.rgb&&!this.hsv&&!this.hsl)throw Error(\"No RGB, HSV or HSL color\");\"undefined\"!==typeof d&&null!==d&&(this.a=f(d,0,1));this.name=c},setName:function(a){if(this.rgb){var b=\nthis.rgb;var c=\"rgb\"}else this.hsv?(b=this.hsv,c=\"hsv\"):this.hsl&&(b=this.hsl,c=\"hsl\");b.a=this.a;return new XF.Color(c,b,a)},setHsvHue:function(a){var b=this.toHsv();b.h=a;return new XF.Color(\"hsv\",b)},setHsvSaturation:function(a){var b=this.toHsv();b.s=a;return new XF.Color(\"hsv\",b)},setHsvValue:function(a){var b=this.toHsv();b.v=a;return new XF.Color(\"hsv\",b)},setHslHue:function(a){var b=this.toHsl();b.h=a;return new XF.Color(\"hsl\",b)},setHslSaturation:function(a){var b=this.toHsl();b.s=a;return new XF.Color(\"hsl\",\nb)},setHslLightness:function(a){var b=this.toHsl();b.l=a;return new XF.Color(\"hsl\",b)},setR:function(a){var b=this.toRgb();b.r=a;return new XF.Color(\"rgb\",b)},setG:function(a){var b=this.toRgb();b.g=a;return new XF.Color(\"rgb\",b)},setB:function(a){var b=this.toRgb();b.b=a;return new XF.Color(\"rgb\",b)},setAlpha:function(a){if(this.rgb){var b=this.rgb;var c=\"rgb\"}else this.hsv?(b=this.hsv,c=\"hsv\"):this.hsl&&(b=this.hsl,c=\"hsl\");b.a=a;return new XF.Color(c,b)},toHsv:function(){var a=this.hsv;a||(this.rgb?\n(a=this.rgb,a=this._rgbToHsv(a.r,a.g,a.b)):this.hsl&&(a=this.hsl,a=this._hslToHsv(a.h,a.s,a.l)));a.a=this.a;return a},_rgbToHsv:function(a,b,c){var d;a/=255;b/=255;c/=255;var g=Math.max(a,b,c);var f=g-Math.min(a,b,c);if(0==f)a=d=0;else{switch(g){case a:d=(b-c)/f%6;break;case b:d=(c-a)/f+2;break;case c:d=(a-b)/f+4}d=Math.round(60*d);0>d&&(d+=360);a=f/g}return{h:d,s:a,v:g}},_hslToHsv:function(a,b,c){b=.5>c?b*c:b*(1-c);return{h:a,s:2*b/(c+b),v:c+b}},toRgb:function(){var a=this.rgb;a||(this.hsv?(a=this.hsv,\na=this._hsvToRgb(a.h,a.s,a.v)):this.hsl&&(a=this.hsl,a=this._hslToRgb(a.h,a.s,a.l)));a.a=this.a;return a},_hsvToRgb:function(a,b,c){b*=c;a/=60;var d=b*(1-Math.abs(a%2-1));if(1>a){var g=b;var f=d;var e=0}else 2>a?(g=d,f=b,e=0):3>a?(g=0,f=b,e=d):4>a?(g=0,f=d,e=b):5>a?(g=d,f=0,e=b):6>a&&(g=b,f=0,e=d);c-=b;return{r:Math.round(255*(g+c)),g:Math.round(255*(f+c)),b:Math.round(255*(e+c))}},_hslToRgb:function(a,b,c){a/=360;if(0==b)b=c=a=255*c;else{var d=.5>c?c*(1+b):c+b-b*c;var g=2*c-d;var e=function(a){0>\na&&a++;1<a&&a--;return 1>6*a?g+6*(d-g)*a:1>2*a?d:2>3*a?g+(d-g)*(2/3-a)*6:g};b=255*e(a+1/3);c=255*e(a);a=255*e(a-1/3)}return{r:Math.round(b),g:Math.round(c),b:Math.round(a)}},toHsl:function(){var a=this.hsl;a||(this.hsv?(a=this.hsv,a=this._hsvToHsl(a.h,a.s,a.v)):this.rgb&&(a=this.rgb,a=this._rgbToHsl(a.r,a.g,a.b)));a.a=this.a;return a},_hsvToHsl:function(a,b,c){var d=(2-b)*c;return{h:a,s:b*c/(1>d?d:2-d),l:d/2}},_rgbToHsl:function(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),\nf=(d+e)/2;if(d==e)e=a=0;else{var h=d-e;e=.5<f?h/(2-d-e):h/(d+e);switch(d){case a:a=(b-c)/h;break;case b:a=2+(c-a)/h;break;case c:a=4+(a-b)/h;break;default:a=0}a*=60;0>a&&(a+=360)}return{h:a,s:e,l:f}},toCss:function(){var a=this.toRgb();return 1==a.a?\"rgb(\"+a.r+\", \"+a.g+\", \"+a.b+\")\":\"rgba(\"+a.r+\", \"+a.g+\", \"+a.b+\", \"+Math.round(100*a.a)/100+\")\"},toPrintable:function(){return this.name?this.name:this.toCss()}});XF.Color.fromString=function(a,b){a=e.trim(a);if(0==a.length)return null;var c;var d=null;\nif(c=a.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i)){a=parseInt(c[1],16);d=parseInt(c[2],16);var g=parseInt(c[3],16);return new XF.Color(\"rgb\",[a,d,g,1],b)}if(c=a.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i))return a=parseInt(c[1]+c[1],16),d=parseInt(c[2]+c[2],16),g=parseInt(c[3]+c[3],16),new XF.Color(\"rgb\",[a,d,g,1],b);if(c=a.match(/^rgb\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)$/i))return a=c[1],d=c[2],g=c[3],new XF.Color(\"rgb\",[a,d,g,1],b);if(c=a.match(/^rgba\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*(([0-9]*\\.)?[0-9]+)\\s*\\)$/i))return a=\nc[1],d=c[2],g=c[3],c=c[4],new XF.Color(\"rgb\",[a,d,g,c],b);if(c=a.match(/^(xf-diminish|xf-intensify|lighten|darken|fade)\\(\\s*([a-z0-9_]*\\([^)]*\\)\\s*|[^,]+),([^)]+)\\)$/i)){var f=XF.Color.fromString(e.trim(c[2]),b||a);if(!f)return null;if(g=e.trim(c[3]).match(/^([0-9.]+)%/))d=parseFloat(g[1]);\"xf-intensify\"==c[1]?c[1]=\"light\"==XF.Color.styleType?\"darken\":\"lighten\":\"xf-diminish\"==c[1]&&(c[1]=\"light\"==XF.Color.styleType?\"lighten\":\"darken\");switch(c[1].toLowerCase()){case \"darken\":if(d)return c=f.toHsl(),\nc.l=Math.max(0,c.l-d/100),new XF.Color(\"hsl\",c,b||a);break;case \"lighten\":if(d)return c=f.toHsl(),c.l=Math.min(1,c.l+d/100),new XF.Color(\"hsl\",c,b||a);break;case \"fade\":if(d)return f=f.setAlpha(d/100),f.setName(b||a)}return f}if(c=a.match(/^(mix)\\(\\s*([a-z0-9_]*\\([^)]*\\)\\s*|[^,]+),\\s*([a-z0-9_]*\\([^)]*\\)\\s*|[^,]+)(,([^)]+))?\\)$/i)){var h=XF.Color.fromString(e.trim(c[2]),b||a);f=XF.Color.fromString(e.trim(c[3]),b||a);if(!h||!f)return null;c[5]&&(g=e.trim(c[5]).match(/^([0-9.]+)%/))&&(d=parseFloat(g[1]));\nd||(d=50);d/=100;c=h.toRgb();g=f.toRgb();d=2*d-1;f=c.a-g.a;d=((-1==d*f?d:(d+f)/(1+d*f))+1)/2;f=1-d;return new XF.Color(\"rgb\",[Math.round(c.r*d+g.r*f),Math.round(c.g*d+g.g*f),Math.round(c.b*d+g.b*f),Math.round(c.a*d+g.a*f)],b||a)}if(XF.Color.namedColors[a.toLowerCase()])return XF.Color.fromString(XF.Color.namedColors[a.toLowerCase()],b||a);d=XF.Color.mapColors;c=!1;null===XF.Color.mapVisited&&(c=!0,XF.Color.mapVisited={});for(f in d)if(d.hasOwnProperty(f)&&d[f].colors[a]){if(XF.Color.mapVisited[a])return c&&\n(XF.Color.mapVisited=null),\"\";XF.Color.mapVisited[a]=!0;b=XF.Color.fromString(d[f].colors[a].value,b||a);c&&(XF.Color.mapVisited=null);return b}c&&(XF.Color.mapVisited=null);return null};XF.Color.styleType=\"light\";XF.Color.namedColors={};k=e(\".js-namedColors\");k.length&&(XF.Color.namedColors=e.parseJSON(k.first().html())||{});XF.Color.mapColors={};XF.Color.mapVisited=null;XF.ColorPicker=XF.Element.newHandler({options:{input:\"| .input\",box:\"| .js-colorPickerTrigger\",rgbTxt:\"| .js-rgbTxt\",allowPalette:!0,\nmapName:null},$input:null,$box:null,inputColor:null,$rgbTxtR:null,$rgbTxtG:null,$rgbTxtB:null,menuInited:!1,menu:null,menuColor:null,menuEls:{},allowReparse:!0,init:function(){var a=this.$target;this.$input=XF.findRelativeIf(this.options.input,a);this.$input.on(\"keyup paste\",XF.proxy(this,\"onInputUpdate\"));this.$box=XF.findRelativeIf(this.options.box,a);this.$box.append('<span class=\"colorPickerBox-sample\" />');this.$box.click(XF.proxy(this,\"click\"));this.$rgbTxtR=XF.findRelativeIf(\"| .js-rgbTxt-r\",\na);this.$rgbTxtG=XF.findRelativeIf(\"| .js-rgbTxt-g\",a);this.$rgbTxtB=XF.findRelativeIf(\"| .js-rgbTxt-b\",a);this.updateFromInput();var b=this;e(h).on(\"color-picker:reparse\",function(){b.allowReparse&&(b.updateFromInput(),b.destroyMenu())})},getInputColor:function(a){var b=this.inputColor;!b&&a&&(b=new XF.Color(\"hsv\",[0,1,1]));return b},updateFromInput:function(a){var b=this.$input.val();this.inputColor=XF.Color.fromString(b);this.updateBox();this.inputColor&&a&&(this.updateMapColor(b),this.$input.trigger(\"change\"))},\nupdateMapColor:function(a){var b,c,d=XF.Color.mapColors,g=this.options.mapName;if(g)for(b in d)if(d.hasOwnProperty(b))for(c in d[b].colors)if(d[b].colors.hasOwnProperty(c)&&c==g){d[b].colors[c].value=a;this.allowReparse=!1;e(h).trigger(\"color-picker:reparse\");this.destroyMenu();this.allowReparse=!0;break}},updateBox:function(){var a=this.getInputColor(),b=this.$box,c=b.find(\".colorPickerBox-sample\");a?(b.removeClass(\"is-unknown\").addClass(\"is-active\"),c.css(\"background-color\",a.toCss())):(\"\"==this.$input.val()?\nb.removeClass(\"is-active is-unknown\"):b.removeClass(\"is-active\").addClass(\"is-unknown\"),c.css(\"background-color\",\"\"));this.updateRgb(a)},updateRgb:function(a){this.$rgbTxtR.length&&(a?(a=a.toRgb(),this.$rgbTxtR.text(a.r),this.$rgbTxtG.text(a.g),this.$rgbTxtB.text(a.b)):(this.$rgbTxtR.text(\"\"),this.$rgbTxtG.text(\"\"),this.$rgbTxtB.text(\"\")))},onInputUpdate:function(){this.updateFromInput(!0)},setupMenu:function(){if(!this.menuInited){this.menuInited=!0;var a=this.getMenuEl();this.$box.after(a);XF.activate(a);\nthis.menuEls.$propertyContainer=a.find(\".colorPicker-propertyContainer\");this.menuEls.$colorGrad=a.find(\".colorPicker-colorGrad-color\");this.menuEls.$colorGradIndicator=a.find(\".colorPicker-colorGrad-indicator\");this.menuEls.$hueBar=a.find(\".colorPicker-hue-bar\");this.menuEls.$hueIndicator=a.find(\".colorPicker-hue-indicator\");this.menuEls.$alphaBar=a.find(\".colorPicker-alpha-bar\");this.menuEls.$alphaIndicator=a.find(\".colorPicker-alpha-indicator\");this.menuEls.$previewOriginal=a.find(\".colorPicker-preview-original\");\nthis.menuEls.$previewCurrent=a.find(\".colorPicker-preview-current\");this.menuEls.$input=a.find(\".colorPicker-input\");this.menuEls.$save=a.find(\".colorPicker-save\");this.menuEls.$propertyContainer.on(\"click\",\"[data-property]\",XF.proxy(this,\"propertyClick\"));this.menuEls.$colorGrad.on(\"mousedown\",XF.proxy(this,\"colorGradMouseDown\"));this.menuEls.$hueBar.on(\"mousedown\",XF.proxy(this,\"hueBarMouseDown\"));this.menuEls.$alphaBar.on(\"mousedown\",XF.proxy(this,\"alphaBarMouseDown\"));this.menuEls.$save.on(\"click\",\nXF.proxy(this,\"save\"));this.menu=new XF.MenuClick(this.$box,{})}},destroyMenu:function(){this.menuInited&&(this.closeMenu(),this.menuInited=!1,this.menuColor=this.menu=null,this.menuEls={})},openMenu:function(){this.$input.prop(\"disabled\")||(this.setupMenu(),this.menu.open())},closeMenu:function(){this.menu&&this.menu.close()},getMenuEl:function(){var a=[],b=[];if(this.options.allowPalette){var c=XF.Color.mapColors,d=this.options.mapName,g,f;for(g in c)if(c.hasOwnProperty(g)){var h=c[g];var k=\"\";\nfor(f in h.colors)if(h.colors.hasOwnProperty(f)&&(!d||d!==f)){var l=h.colors[f];var m=XF.Color.fromString(l.value);var n=XF.htmlspecialchars(f);k+='<div class=\"colorPicker-property'+(m?\"\":\" is-unknown\")+'\" data-property=\"'+n+'\" title=\"'+n+'\"><span class=\"colorPicker-property-preview\" style=\"background-color: '+XF.htmlspecialchars(m?m.toCss():\"transparent\")+'\"></span>'+XF.htmlspecialchars(l.title)+'<span class=\"colorPicker-propName\">'+n+\"</span></div>\"}a.push(h.title);b.push('<div class=\"colorPicker-propertyContainer\">'+\nk+\"</div>\")}}a.push(XF.phrase(\"picker\"));b.push('<div class=\"colorPicker-sliders\" dir=\"ltr\"><div class=\"colorPicker-hue\"><div class=\"colorPicker-hue-bar\"><span class=\"colorPicker-hue-indicator\"></span></div></div><div class=\"colorPicker-colorGrad\"><div class=\"colorPicker-colorGrad-color\"><div class=\"colorPicker-colorGrad-sat\"><div class=\"colorPicker-colorGrad-val\"><span class=\"colorPicker-colorGrad-indicator\"></span></div></div></div></div><div class=\"colorPicker-alpha\"><div class=\"colorPicker-alpha-bar\"><span class=\"colorPicker-alpha-indicator\"></span></div></div></div>');\nc=\"\";if(1<a.length){c+='<h4 class=\"menu-tabHeader tabs hScroller\" data-xf-init=\"tabs h-scroller\" role=\"tablist\"><span class=\"hScroller-scroll\">';for(d=0;d<a.length;d++)c+='<a class=\"tabs-tab'+(0==d?\" is-active\":\"\")+'\" role=\"tab\" tabindex=\"0\">'+XF.htmlspecialchars(a[d])+\"</a>\";c+='</span></h4><ul class=\"tabPanes\">';for(d=0;d<a.length;d++)c+='<li class=\"'+(0==d?\"is-active\":\"\")+'\" role=\"tabpanel\">'+b[d]+\"</li>\";c+=\"</ul>\"}else 1==a.length&&(c=b[0]);a='<div class=\"colorPicker-inputs\"><div class=\"colorPicker-preview\"><span class=\"colorPicker-preview-original\"></span><span class=\"colorPicker-preview-current\"></span></div><div class=\"colorPicker-inputContainer\"><input type=\"text\" class=\"input colorPicker-input\" dir=\"ltr\" /></div><div class=\"colorPicker-saveContainer\"><button class=\"button button--primary colorPicker-save\"><span class=\"button-text\">'+\nXF.phrase(\"update\")+\"</span></button></div></div>\";return e(e.parseHTML('<div class=\"menu menu--colorPicker\" data-menu=\"menu\" aria-hidden=\"true\"><div class=\"menu-content colorPicker\">'+c+a+\"</div></div>\"))},propertyClick:function(a){a.preventDefault();if(a=e(a.currentTarget).data(\"property\")){var b=XF.Color.fromString(a);b||(b=XF.Color.fromString(\"transparent\",a));this.updateMenuColor(b)}},colorGradMouseDown:function(a){this.colorGradMouseAction(a);var b=this;e(h).on({\"mouseup.colorpicker\":function(){e(h).off(\".colorpicker\")},\n\"mousemove.colorpicker\":function(a){b.colorGradMouseAction(a)}})},colorGradMouseAction:function(a){a.preventDefault();var b=this.menuEls.$colorGrad,c=b.offset(),d=a.pageY-c.top;a=Math.max(0,Math.min(1,(a.pageX-c.left)/b.width()));b=Math.max(0,Math.min(1,1-d/b.height()));b=this.getMenuColor(!0).setHsvSaturation(a).setHsvValue(b);this.updateMenuColor(b)},hueBarMouseDown:function(a){this.hueBarMouseAction(a);var b=this;e(h).on({\"mouseup.colorpicker\":function(){e(h).off(\".colorpicker\")},\"mousemove.colorpicker\":function(a){b.hueBarMouseAction(a)}})},\nhueBarMouseAction:function(a){a.preventDefault();var b=this.menuEls.$hueBar;a=359*(a.pageY-b.offset().top)/b.height();a=Math.round(Math.max(0,Math.min(359,a)));a=this.getMenuColor(!0).setHsvHue(a);this.updateMenuColor(a)},alphaBarMouseDown:function(a){this.alphaBarMouseAction(a);var b=this;e(h).on({\"mouseup.colorpicker\":function(){e(h).off(\".colorpicker\")},\"mousemove.colorpicker\":function(a){b.alphaBarMouseAction(a)}})},alphaBarMouseAction:function(a){a.preventDefault();var b=this.menuEls.$alphaBar;\na=(a.pageX-b.offset().left)/b.width();a=1-Math.max(0,Math.min(1,a));a=this.getMenuColor(!0).setAlpha(a);this.updateMenuColor(a)},save:function(){var a=this.menuEls.$input.val();this.closeMenu();this.$input.val(a);this.updateFromInput(!0)},getMenuColor:function(a){var b=this.menuColor;!b&&a&&(b=new XF.Color(\"hsv\",[0,1,1]));return b},updateMenuColor:function(a,b){this.menuColor=a;this.updatePickerData(b)},updatePickerData:function(a){var b=this.getMenuColor(!0),c=this.getMenuColor();this.updatePickerSelections(b);\nthis.updateSelectedPropertyColor(c);c?(this.menuEls.$input.val(c.toPrintable()),this.menuEls.$previewCurrent.css(\"background-color\",c.toCss())):(a&&this.menuEls.$input.val(\"\"),this.menuEls.$previewCurrent.css(\"background-color\",\"\"))},updateSelectedPropertyColor:function(a){var b=this.menuEls.$propertyContainer.find(\"[data-property]\");a=this.getPropertyColorMatch(a);b.removeClass(\"is-active\");a&&a.addClass(\"is-active\")},getPropertyColorMatch:function(a){var b=this.menuEls.$propertyContainer.find(\"[data-property]\"),\nc=null;a&&a.name&&b.each(function(){var b=e(this);if(b.data(\"property\")==a.name)return c=b,!1});return c},updatePickerSelections:function(a){var b=a.toHsv(),c=new XF.Color(\"hsv\",[b.h,1,1]),d=b.h/359*100+\"%\",e=100-100*b.a+\"%\";this.menuEls.$colorGradIndicator.css({top:100-100*b.v+\"%\",left:100*b.s+\"%\"});this.menuEls.$colorGrad.css(\"background-color\",c.toCss());this.menuEls.$hueIndicator.css(\"top\",d);b=a.setAlpha(1);a=a.setAlpha(0);this.menuEls.$alphaBar.css(\"background-image\",\"linear-gradient(to right, \"+\nb.toCss()+\", \"+a.toCss()+\")\");this.menuEls.$alphaIndicator.css(\"left\",e)},onMenuOpen:function(){var a=this.getInputColor(),b=this.menuEls.$previewOriginal;this.updateMenuColor(a,!0);a?b.css(\"background-color\",a.toCss()):b.css(\"background-color\",\"\")},click:function(a){if(this.$input.prop(\"disabled\"))this.menu&&this.closeMenu();else{this.setupMenu();if(!this.menu.isOpen())this.onMenuOpen();this.menu.click(a)}}});XF.Element.register(\"color-picker\",\"XF.ColorPicker\");e(h).on(\"xf:page-load-start\",function(){if(e(\".js-colorPickerData\").length){try{var a=\ne.parseJSON(e(\".js-colorPickerData\").first().html())||{}}catch(b){console.error(b),a={}}a.colors&&(XF.Color.mapColors=e.extend({},XF.Color.mapColors,a.colors));a.config&&(XF.Color.styleType=a.config.styleType||\"light\")}})}(jQuery,window,document);\n"
"var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,k,h){d instanceof String&&(d=String(d));for(var a=d.length,b=0;b<a;b++){var c=d[b];if(k.call(h,c,b,d))return{i:b,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(d,k,h){d!=Array.prototype&&d!=Object.prototype&&(d[k]=h.value)};\n$jscomp.getGlobal=function(d){return\"undefined\"!=typeof window&&window===d?d:\"undefined\"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,k,h,a){if(k){h=$jscomp.global;d=d.split(\".\");for(a=0;a<d.length-1;a++){var b=d[a];b in h||(h[b]={});h=h[b]}d=d[d.length-1];a=h[d];k=k(a);k!=a&&null!=k&&$jscomp.defineProperty(h,d,{configurable:!0,writable:!0,value:k})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(d){return d?d:function(d,h){return $jscomp.findInternal(this,d,h).v}},\"es6\",\"es3\");$jscomp.polyfill(\"Array.prototype.fill\",function(d){return d?d:function(d,h,a){var b=this.length||0;0>h&&(h=Math.max(0,b+h));if(null==a||a>b)a=b;a=Number(a);0>a&&(a=Math.max(0,b+a));for(h=Number(h||0);h<a;h++)this[h]=d;return this}},\"es6\",\"es3\");\n$jscomp.checkStringArgs=function(d,k,h){if(null==d)throw new TypeError(\"The 'this' value for String.prototype.\"+h+\" must not be null or undefined\");if(k instanceof RegExp)throw new TypeError(\"First argument to String.prototype.\"+h+\" must not be a regular expression\");return d+\"\"};\n$jscomp.polyfill(\"String.prototype.repeat\",function(d){return d?d:function(d){var h=$jscomp.checkStringArgs(this,null,\"repeat\");if(0>d||1342177279<d)throw new RangeError(\"Invalid count value\");d|=0;for(var a=\"\";d;)if(d&1&&(a+=h),d>>>=1)h+=h;return a}},\"es6\",\"es3\");var XF=window.XF||{};void 0===window.jQuery&&(jQuery=$={});\n!function(d,k,h){XF.activate?console.error(\"XF core has been double loaded\"):(XF.browser||(XF.browser={browser:\"\",version:0,os:\"\",osVersion:null}),function(){var a=function(){var a=h.createElement(\"fake\"),b={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"},c;for(c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}();d.support.transition=a;d.support.transition&&(d.event.special.xfTransitionEnd={bindType:a.end,\ndelegateType:a.end,handle:function(a){if(d(a.target).is(this))return a.handleObj.handler.apply(this,arguments)}});var b=d(\"html\").attr(\"dir\");a=\"normal\";if(b&&\"RTL\"==b.toUpperCase()){b=d('<div style=\"width: 80px; height: 40px; font-size: 30px; overflow: scroll; white-space: nowrap; word-wrap: normal; position: absolute; top: -1000px; visibility: hidden; pointer-events: none\">MMMMMMMMMM</div>');var c=b[0];b.appendTo(\"body\");0<c.scrollLeft?a=\"inverted\":(c.scrollLeft=-1,-1==c.scrollLeft&&(a=\"negative\"));\nb.remove()}d.support.scrollLeftType=a;d.addEventCapture=function(){var a=d.event.special;return function(b){h.addEventListener&&(\"string\"==typeof b&&(b=[b]),d.each(b,function(b,c){var g=function(a){a=d.event.fix(a);return d.event.dispatch.call(this,a)};a[c]=a[c]||{};a[c].setup||a[c].teardown||d.extend(a[c],{setup:function(){this.addEventListener(c,g,!0)},teardown:function(){this.removeEventListener(c,g,!0)}})}))}}()}(),d.fn.extend({onWithin:function(a,b,c){var e=this;d(h).on(a,function(a){d(a.target).has(e).length&&\n(c&&d(h).off(a),b(a))});return this},oneWithin:function(a,b){return this.onWithin(a,b,!0)},onPassive:function(a,b){if(\"object\"==typeof a){for(var c in a)this.onPassive(c,a[c]);return this}if(\"string\"!=typeof a||\"function\"!=typeof b)return console.warn(\"$.onPassive failure for %s.on%s, check parameters\",this.get(0),a),this;if(-1!==a.indexOf(\".\"))return console.warn(\"$.onPassive does not support namespaced events %s.on%s\",this.get(0),a),!1;XF.Feature.has(\"passiveeventlisteners\")?this.get(0).addEventListener(a,\nb,{passive:!0}):this.get(0).addEventListener(a,b);return this},offPassive:function(a,b){this.get(0).removeEventListener(a,b);return this},onPointer:function(a,b){if(d.isPlainObject(a)){for(var c in a)if(a.hasOwnProperty(c))this.onPointer(c,a[c]);return this}\"string\"===typeof a&&(a=a.split(/\\s+/));var e=this,f=function(a){var c=d(this).data(\"xf-pointer-type\");a.xfPointerType=a.pointerType||c||\"\";b(a)};a.forEach(function(a){e.on(a,f)});this.off(\"pointerdown.pointer-watcher\").on(\"pointerdown.pointer-watcher\",\nfunction(a){d(this).data(\"xf-pointer-type\",a.pointerType)});return this},xfFadeDown:function(a,b){this.filter(\":hidden\").hide().css(\"opacity\",0);a=a||XF.config.speed.normal;this.find(\".is-sticky\").addClass(\"was-sticky\").removeClass(\"is-sticky\");this.animate({opacity:1,height:\"show\",marginTop:\"show\",marginBottom:\"show\",paddingTop:\"show\",paddingBottom:\"show\"},{duration:a,easing:\"swing\",complete:function(){d(this).find(\".was-sticky\").addClass(\"is-sticky\").removeClass(\"was-sticky\");b&&b();XF.layoutChange()}});\nreturn this},xfFadeUp:function(a,b){a=a||XF.config.speed.normal;this.find(\".is-sticky\").addClass(\"was-sticky\").removeClass(\"is-sticky\");this.animate({opacity:0,height:\"hide\",marginTop:\"hide\",marginBottom:\"hide\",paddingTop:\"hide\",paddingBottom:\"hide\"},{duration:a,easing:\"swing\",complete:function(){d(this).find(\".was-sticky\").addClass(\"is-sticky\").removeClass(\"was-sticky\");b&&b();XF.layoutChange()}});return this},xfUniqueId:function(){var a=this.attr(\"id\");a||this.attr(\"id\",\"js-XFUniqueId\"+XF.getUniqueCounter());\nreturn a},findExtended:function(a){var b;if(\"string\"===typeof a&&(b=a.match(/^<([^|]+)(\\|([\\s\\S]+))?$/))){a=d.trim(b[1]);var c,e,f={up:\"parent\",next:\"next\",prev:\"prev\"},g=this;do if(c=a.match(/^:(up|next|prev)(\\((\\d+)\\))?/)){c[2]||(c[3]=1);var l=f[c[1]];for(e=0;e<c[3];e++)(g=g[l]())||(g=d());a=d.trim(a.substr(c[0].length))}while(c);a.length&&(g=g.closest(a));g.length||(g=d());a=b[2]?d.trim(b[3]):\"\";return a.length?g.find(a):g}return this._find(a)},dimensions:function(a,b){var c=this.offset();c={top:c.top,\nleft:c.left};b=b?!0:!1;c.width=a?this.outerWidth(b):this.width();c.height=a?this.outerHeight(b):this.height();c.right=c.left+c.width;c.bottom=c.top+c.height;return c},viewport:function(a,b){a={width:a?this.outerWidth(b):this.width(),height:a?this.outerHeight(b):this.height(),left:this.scrollLeft(),top:this.scrollTop(),right:0,bottom:0,docWidth:d(h).width(),docHeight:d(h).height()};a.bottom=a.top+a.height;a.right=a.left+a.width;return a},hasFixableParent:function(){var a=!1;this.parents().each(function(){var b=\nd(this);switch(b.css(\"position\")){case \"fixed\":case \"sticky\":case \"-webkit-sticky\":return a=b,!1}if(b.data(\"sticky_kit\"))return a=b,!1});return a},hasFixedParent:function(){var a=!1;this.parents().each(function(){var b=d(this);switch(b.css(\"position\")){case \"fixed\":return a=b,!1;case \"sticky\":case \"-webkit-sticky\":var c=b.dimensions(!0),e=d(k).viewport(),f=b.css(\"top\"),g=b.css(\"bottom\");if(\"auto\"!==f&&(f=c.top-e.top-parseInt(f,10),.5>=f&&-.5<=f)||\"auto\"!==g&&(f=c.bottom-e.bottom-parseInt(g,10),.5>=\nf&&-.5<=f))return a=b,!1}});return a},onTransitionEnd:function(a,b){var c=!1,e=this;this.one(\"xfTransitionEnd\",function(){if(!c)return c=!0,b.apply(this,arguments)});setTimeout(function(){c||e.trigger(\"xfTransitionEnd\")},a+10);return this},autofocus:function(){var a=d(this);XF.isIOS()?a.is(\":focus\")||(a.addClass(\"is-focused\"),a.on(\"blur\",function(){a.removeClass(\"is-focused\")})):a.focus();return this},normalizedScrollLeft:function(a){var b=d.support.scrollLeftType;if(\"undefined\"!==typeof a){for(var c=\n0;c<this.length;c++){var e=this[c],f=a;switch(b){case \"negative\":f=0<f?-f:0;break;case \"inverted\":f=e.scrollWidth-e.offsetWidth-f}e.scrollLeft=f}return this}a=this[0];if(!a)return 0;c=a.scrollLeft;switch(b){case \"negative\":return 0>c?-c:0;case \"inverted\":return b=a.scrollWidth-c-a.offsetWidth,.5>b?0:b;default:return c}},focusNext:function(){var a=d('input:not([type=\"hidden\"]), select, textarea, a, button').filter(\":visible\");return a.eq(a.index(this)+1).focus()}}),function(){function a(a){if(!d.support.transition)return 0;\nvar b=a[0];if(!(b&&b instanceof k.Element))return 0;a=a.css(\"transition-duration\");b=0;a&&a.match(/^(\\+|-|)([0-9]*\\.[0-9]+|[0-9]+)(ms|s)/i)&&(b=(\"-\"==RegExp.$1?-1:1)*parseFloat(RegExp.$2)*(\"ms\"==RegExp.$3.toLowerCase()?1:1E3));return b}function b(a,b,c){var e=[];d.isFunction(b)&&(b=b.call(a[0],0,a[0].className));b=d.trim(b).split(/\\s+/);a=\" \"+a[0].className+\" \";for(var g,f=0;f<b.length;f++)((g=0<=a.indexOf(\" \"+b[f]+\" \"))&&!c||!g&&c)&&e.push(b[f]);return e.join(\" \")}function c(c,g,l,m,p){p=p?0:a(c);\nvar f=g?\"addClass\":\"removeClass\",h=g?\"removeClass\":\"addClass\";g=b(c,l,g?!0:!1);var n=c[0],k=function(){m&&setTimeout(function(){m.call(n,d.Event(\"xfTransitionEnd\"))},0)};if(g.length)if(0>=p)c[f](g),k();else{c.hasClass(\"is-transitioning\")&&c.trigger(\"xfTransitionEnd\");c.addClass(\"is-transitioning\");if(c.css(\"transition-property\").match(/(^|\\s|,)-xf-(width|height)($|\\s|,)/)){k=RegExp.$2;var r=e[k],B=c.css(r),A=B[k],y=\"transition.\"+k,u=c.data(y),x=n.style,w=x.transition||x[\"-webkit-transition\"]||x[\"-moz-transition\"]||\nx[\"-o-transition\"]||\"\",z;if(void 0===u)for(u={},z=0;z<r.length;z++)u[r[z]]=x[r[z]]||\"\";if(0==c[k]())for(z in A=\"0\",B)B.hasOwnProperty(z)&&(B[z]=\"0\");c.data(y,u).css(\"transition\",\"none\")[f](g);r=c.css(r);u=r[k];if(0==c[k]())for(z in u=\"0\",r)r.hasOwnProperty(z)&&(r[z]=\"0\");c[h](g);if(A!=u){var C=m;c.css(B);n.offsetWidth;c.css(\"transition\",w).css(r);m=function(){c.css(c.data(y)).removeData(y);C&&C.apply(this,arguments)}}else c.css(\"transition\",w)}c.onTransitionEnd(p,function(){c.removeClass(\"is-transitioning\");\nm&&m.apply(this,arguments)});c[f](l)}else k()}var e={height:\"height padding-top padding-bottom margin-top margin-bottom border-top-width border-bottom-width\".split(\" \"),width:\"width padding-left padding-right margin-left margin-right border-right-width border-left-width\".split(\" \")};d.fn.addClassTransitioned=function(a,b,e){for(var g=this.length,f=0;f<g;f++)c(d(this[f]),!0,a,b,e);return this};d.fn.removeClassTransitioned=function(a,b,e){for(var g=this.length,f=0;f<g;f++)c(d(this[f]),!1,a,b,e);return this};\nd.fn.toggleClassTransitioned=function(a,b,e,m){\"boolean\"!==typeof b&&\"undefined\"===typeof e&&(e=b,b=null);for(var g=\"boolean\"===typeof b,f=this.length,l=0;l<f;l++){var h=d(this[l]);var k=g?b:h.hasClass(a)?!1:!0;c(h,k,a,e,m)}return this}}(),d.extend(XF,{config:{userId:null,enablePush:!1,skipServiceWorkerRegistration:!1,skipPushNotificationCta:!1,pushAppServerKey:null,csrf:d(\"html\").data(\"csrf\"),time:{now:0,today:0,todayDow:0},cookie:{path:\"/\",domain:\"\",prefix:\"xf_\"},url:{fullBase:\"/\",basePath:\"/\",\ncss:\"\",keepAlive:\"\"},css:{},js:{},jsState:{},speed:{xxfast:50,xfast:100,fast:200,normal:400,slow:600},job:{manualUrl:\"\"},borderSizeFeature:\"3px\",fontAwesomeWeight:\"r\",enableRtnProtect:!0,enableFormSubmitSticky:!0,visitorCounts:{conversations_unread:0,alerts_unread:0,title_count:!1,icon_indicator:!1},uploadMaxFilesize:null,allowedVideoExtensions:[],shortcodeToEmoji:!0,publicMetadataLogoUrl:\"\",publicPushBadgeUrl:\"\"},debug:{disableAjaxSubmit:!1},counter:1,pageDisplayTime:null,phrases:{},getApp:function(){return d(\"html\").data(\"app\")||\nnull},getKeyboardInputs:function(){return\"input:not([type=radio], [type=checkbox], [type=submit], [type=reset]), textarea\"},onPageLoad:function(){d(h).trigger(\"xf:page-load-start\");XF.NavDeviceWatcher.initialize();XF.ActionIndicator.initialize();XF.DynamicDate.initialize();XF.KeepAlive.initialize();XF.LinkWatcher.initLinkProxy();XF.LinkWatcher.initExternalWatcher();XF.NoticeWatcher.initialize();XF.BbBlockExpand.watch();XF.ScrollButtons.initialize();XF.KeyboardShortcuts.initialize();XF.FormInputValidation.initialize();\nXF.Push.initialize();XF.IgnoreWatcher.initializeHash();XF.config.jsState=XF.applyJsState({},XF.config.jsState);XF.activate(h);d(h).on(\"ajax:complete\",function(a,b,c){(a=b.responseJSON)&&a.visitor&&XF.updateVisitorCounts(a.visitor,!0)});d(h).on(\"ajax:before-success\",function(a,b,c,e){(b=e.responseJSON)&&b&&b.job&&(a=b.job,a.manual&&XF.JobRunner.runManual(a.manual),a.autoBlocking?XF.JobRunner.runAutoBlocking(a.autoBlocking,a.autoBlockingMessage):a.auto&&setTimeout(XF.JobRunner.runAuto,0))});d(h).on(\"keyup\",\n\"a:not([href])\",function(a){\"Enter\"==a.key&&d(a.currentTarget).click()});d(\"html[data-run-jobs]\").length&&setTimeout(XF.JobRunner.runAuto,100);XF.updateVisitorCountsOnLoad(XF.config.visitorCounts);XF.CrossTab.on(\"visitorCounts\",function(a){XF.updateVisitorCounts(a,!1)});XF.pageLoadScrollFix();setTimeout(function(){d(\"[data-load-auto-click]\").first().click()},100);d(h).trigger(\"xf:page-load-complete\")},addExtraPhrases:function(a){d(a).find(\"script.js-extraPhrases\").each(function(){var a=d(this);try{var c=\nd.parseJSON(a.html())||{};d.extend(XF.phrases,c)}catch(e){console.error(e)}a.remove()})},phrase:function(a,b,c){var e=XF.phrases[a];b&&(e=XF.stringTranslate(e,b));return e||c||a},_isRtl:null,isRtl:function(){if(null===XF._isRtl){var a=d(\"html\").attr(\"dir\");XF._isRtl=a&&\"RTL\"==a.toUpperCase()}return XF._isRtl},rtlFlipKeyword:function(a){if(!XF.isRtl())return a;switch(a.toLowerCase()){case \"left\":return\"right\";case \"right\":return\"left\";default:return a}},isMac:function(){return-1!=navigator.userAgent.indexOf(\"Mac OS\")},\nisIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!k.MSStream},isIE:function(){var a=navigator.userAgent;return 0<a.indexOf(\"MSIE \")||0<a.indexOf(\"Trident/\")},log:function(){console.log&&console.log.apply&&console.log.apply(console,arguments)},findRelativeIf:function(a,b){if(!a)throw Error(\"No selector provided\");var c;if(c=a.match(/^(<|>|\\|)/)){if(\"<\"==c[1])return b.findExtended(a);\"|\"==c[1]&&(a=a.substr(1));return b.find(a)}return d(a)},isElementVisible:function(a){a=a[0].getBoundingClientRect();\nreturn 0<=a.top&&0<=a.left&&a.bottom<=d(k).height()&&a.right<=d(k).width()},layoutChange:function(){XF._layoutChangeTriggered||(XF._layoutChangeTriggered=!0,setTimeout(function(){XF._layoutChangeTriggered=!1;d(h.body).trigger(\"sticky_kit:recalc\").trigger(\"xf:layout\")},0))},_layoutChangeTriggered:!1,updateAvatars:function(a,b,c){d(\".avatar\").each(function(){var e=d(this),f=e.find(\"img, span\").first(),g=\"avatar-u\"+a+\"-\",l=e.hasClass(\"avatar--updateLink\")?e.find(\".avatar-update\"):null;if((c||!f.hasClass(\".js-croppedAvatar\"))&&\nf.is('[class^=\"'+g+'\"]')){if(f.hasClass(g+\"s\"))f=d(b.s);else if(f.hasClass(g+\"m\"))f=d(b.m);else if(f.hasClass(g+\"l\"))f=d(b.l);else if(f.hasClass(g+\"o\"))f=d(b.o);else return;e.html(f.html());f.hasClass(\"avatar--default\")?(e.addClass(\"avatar--default\"),f.hasClass(\"avatar--default--dynamic\")?e.addClass(\"avatar--default--dynamic\"):f.hasClass(\"avatar--default--text\")?e.addClass(\"avatar--default--text\"):f.hasClass(\"avatar--default--image\")&&e.addClass(\"avatar--default--image\")):e.removeClass(\"avatar--default avatar--default--dynamic avatar--default--text avatar--default--image\");\ne.attr(\"style\",f.attr(\"style\"));l&&e.append(l)}})},updateVisitorCounts:function(a,b,c){a&&\"public\"==XF.getApp()&&(XF.badgeCounterUpdate(d(\".js-badge--conversations\"),a.conversations_unread),XF.badgeCounterUpdate(d(\".js-badge--alerts\"),a.alerts_unread),XF.config.visitorCounts.title_count&&XF.pageTitleCounterUpdate(a.total_unread),XF.config.visitorCounts.icon_indicator&&XF.faviconUpdate(a.total_unread),b&&(XF.CrossTab.trigger(\"visitorCounts\",a),XF.LocalStorage.setJson(\"visitorCounts\",{time:c||Math.floor((new Date).getTime()/\n1E3)-1,conversations_unread:a.conversations_unread,alerts_unread:a.alerts_unread,total_unread:a.total_unread})))},updateVisitorCountsOnLoad:function(a){var b=XF.getLocalLoadTime(),c=XF.LocalStorage.getJson(\"visitorCounts\");c&&c.time&&c.time>b&&(a.conversations_unread=c.conversations_unread,a.alerts_unread=c.alerts_unread,a.total_unread=c.total_unread);XF.updateVisitorCounts(a,!0,b)},badgeCounterUpdate:function(a,b){a.length&&(a.attr(\"data-badge\",b),\"0\"!=String(b)?a.addClass(\"badgeContainer--highlighted\"):\na.removeClass(\"badgeContainer--highlighted\"))},pageTitleCache:\"\",pageTitleCounterUpdate:function(a){var b=h.title;\"\"===XF.pageTitleCache&&(XF.pageTitleCache=b);b!==XF.pageTitleCache&&\"(\"===b.charAt(0)&&(b=XF.pageTitleCache);a=(0<a?\"(\"+a+\") \":\"\")+b;a!=h.title&&(h.title=a)},favIconAlertShown:!1,faviconUpdate:function(a){var b=0<a;if(b!=XF.favIconAlertShown){var c=d('link[rel~=\"icon\"]');c.length&&(XF.favIconAlertShown=b,c.each(function(b,c){var e=d(c);b=e.attr(\"href\");c=e.data(\"original-href\");0<a?(c||\ne.data(\"original-href\",b),d(\"<img />\").on(\"load\",function(){var a=XF.faviconDraw(this);a&&e.attr(\"href\",a)}).attr(\"src\",b)):c&&e.attr(\"href\",c).removeData(\"original-href\")}))}},faviconDraw:function(a){var b=a.naturalWidth,c=a.naturalHeight;c=d(\"<canvas />\").attr({width:b,height:c});var e=c[0].getContext(\"2d\"),f=b/(32/6),g=2*Math.PI;e.drawImage(a,0,0);e.beginPath();e.arc(f,f,f,0,g,!1);e.fillStyle=\"#E03030\";e.fill();e.lineWidth=b/16;e.strokeStyle=\"#EAEAEA\";e.stroke();e.closePath();try{return c[0].toDataURL(\"image/png\")}catch(l){return null}},\nunparseBbCode:function(a){var b=d(h.createElement(\"div\"));b.html(a);b.find(\".js-noSelectToQuote\").each(function(){d(this).remove()});d.each([\"B\",\"I\",\"U\",\"S\"],function(a,e){b.find(e).each(function(){d(this).replaceWith(\"[\"+e+\"]\"+d(this).html()+\"[/\"+e+\"]\")})});b.find(\".bbCodeBlock--quote\").each(function(){var a=d(this),b=a.find(\".bbCodeBlock-expandContent\");b.length?a.replaceWith(\"<div>[QUOTE]\"+b.html()+\"[/QUOTE]</div>\"):b.find(\".bbCodeBlock-expand\").remove()});b.find(\".bbCodeBlock--code\").each(function(){var a=\nd(this);if(!a.find(\".bbCodeCode\"))return!0;var b=a.find(\".bbCodeCode code\");if(!b.length)return!0;var f=b.attr(\"class\").match(/language-(\\S+)/)[1];b.removeAttr(\"class\");a.replaceWith(b.first().attr(\"data-language\",f||\"none\"))});b.find(\".bbCodeBlock--unfurl\").each(function(){var a=d(this).data(\"url\");d(this).replaceWith(\"[URL unfurl=true]\"+a+\"[/URL]\")});b.find('div[style*=\"text-align\"]').each(function(){var a=d(this).css(\"text-align\").toUpperCase();d(this).replaceWith(\"[\"+a+\"]\"+d(this).html()+\"[/\"+\na+\"]\")});b.find(\".bbCodeSpoiler\").each(function(){var a=\"\";var b=d(this).find(\".bbCodeSpoiler-button\");if(b.length){var f=d(this).find(\".bbCodeSpoiler-content\").html();b=b.find(\".bbCodeSpoiler-button-title\");b.length&&(a='=\"'+b.text()+'\"');d(this).replaceWith(\"[SPOILER\"+a+\"]\"+f+\"[/SPOILER]\")}});b.find(\".bbCodeInlineSpoiler\").each(function(){var a=d(this).html();d(this).replaceWith(\"[ISPOILER]\"+a+\"[/ISPOILER]\")});return b.html()},hideOverlays:function(){d.each(XF.Overlay.cache,function(a,b){b.hide()})},\nhideTooltips:function(){d.each(XF.TooltipTrigger.cache,function(a,b){b.hide()})},hideParentOverlay:function(a){a=a.closest(\".overlay-container\");a.length&&a.data(\"overlay\")&&a.data(\"overlay\").hide()},loadedScripts:{},loadScript:function(a,b){if(XF.loadedScripts.hasOwnProperty(a))return!1;XF.loadedScripts[a]=!0;return d.ajax({url:a,dataType:\"script\",cache:!0,global:!1,success:b})},loadScripts:function(a,b){function c(){m--;0===m&&b&&b()}function e(){for(var a;p[0]&&\"loaded\"==p[0].readyState;)a=p.shift(),\na.onreadystatechange=null,a.onerror=null,l.appendChild(a),c()}var f=h.scripts[0],g=\"async\"in f;f=f.readyState;var l=h.head,m=0,p=[],q;for(q in a)if(a.hasOwnProperty(q)){var k=a[q];XF.loadedScripts[k]||(XF.loadedScripts[k]=!0,m++,g?function(a){var b=d(\"<script>\").prop({src:a,async:!1});b.on(\"load error\",function(a){b.off(\"load error\");c()});l.appendChild(b[0])}(k):f?function(a){var b=h.createElement(\"script\");p.push(b);b.onreadystatechange=e;b.onerror=function(){b.onreadystatechange=null;b.onerror=\nnull;c()};b.src=a}(k):d.ajax({url:k,dataType:\"script\",cache:!0,global:!1}).always(c))}!m&&b&&b()},ajax:function(a,b,c,e,f){\"function\"==typeof c&&void 0===e&&(e=c,c={});c=c||{};var g=!0,l=!0,m=!0;f&&(f.skipDefault&&(l=g=!1,delete f.skipDefault),f.skipDefaultSuccessError&&(l=!1,delete f.skipDefaultSuccessError),f.skipDefaultSuccess&&(g=!1,delete f.skipDefaultSuccess),f.skipError&&(m=!1,delete f.skipError));var p=function(a,b,c){d(h).trigger(\"ajax:before-success\",[a,b,c]);l&&XF.defaultAjaxSuccessError(a,\nb,c)||g&&XF.defaultAjaxSuccess(a,b,c)||e&&e(a,b,c)},q=function(a,b,c){if(a.readyState)try{var e=d.parseJSON(a.responseText);p(e,\"\",a)}catch(A){XF.defaultAjaxError(a,b,c)}};c=XF.dataPush(c,\"_xfRequestUri\",k.location.pathname+k.location.search);c=XF.dataPush(c,\"_xfWithData\",1);XF.config.csrf&&(c=XF.dataPush(c,\"_xfToken\",XF.config.csrf));var t=k.FormData&&c instanceof FormData;a=d.extend(!0,{cache:!0,data:c||{},dataType:\"json\",beforeSend:function(a,b){d(h).trigger(\"ajax:send\",[a,b])},error:m?q:null,\nsuccess:p,complete:function(a,b){d(h).trigger(\"ajax:complete\",[a,b])},timeout:\"get\"===a?3E4:6E4,type:a,url:b,processData:t?!1:!0},f);t&&(a.contentType=!1);switch(a.dataType){case \"html\":case \"json\":case \"xml\":a.data=XF.dataPush(a.data,\"_xfResponseType\",a.dataType)}\"json\"!=a.dataType&&(g=!1);return d.ajax(a)},dataPush:function(a,b,c){a&&\"string\"!=typeof a?void 0!==a[0]?a.push({name:b,value:c}):k.FormData&&a instanceof FormData?a.append(b,c):a[b]=c:(a=String(a),a+=\"&\"+encodeURIComponent(b)+\"=\"+encodeURIComponent(c));\nreturn a},defaultAjaxSuccessError:function(a,b,c){if(\"object\"!=typeof a)return XF.alert(\"Response was not JSON.\"),!0;a.html&&a.html.templateErrors&&(b=\"Errors were triggered when rendering this template:\",a.html.templateErrorDetails&&(b+=\"\\n* \"+a.html.templateErrorDetails.join(\"\\n* \")),console.error(b));return a.errorHtml?(XF.setupHtmlInsert(a.errorHtml,function(a,b){b=b.h1||b.title||XF.phrase(\"oops_we_ran_into_some_problems\");XF.overlayMessage(b,a)}),!0):a.errors?(XF.alert(a.errors),!0):a.exception?\n(XF.alert(a.exception),!0):!1},defaultAjaxSuccess:function(a,b,c){a&&\"ok\"==a.status&&a.message&&XF.flashMessage(a.message,3E3);return!1},defaultAjaxError:function(a,b,c){switch(b){case \"abort\":return;case \"timeout\":XF.alert(XF.phrase(\"server_did_not_respond_in_time_try_again\"));return;case \"notmodified\":case \"error\":if(!a||!a.responseText)return}console.error(\"PHP: \"+a.responseText);XF.alert(XF.phrase(\"oops_we_ran_into_some_problems_more_details_console\"))},activate:function(a){XF.addExtraPhrases(a);\nXF.IgnoreWatcher.refresh(a);XF.Element.initialize(a);XF.DynamicDate.refresh(a);XF.BbBlockExpand.checkSizing(a);XF.UnfurlLoader.activateContainer(a);XF.KeyboardShortcuts.initializeElements(a);XF.FormInputValidation.initializeElements(a);var b=a instanceof d?a.get(0):a;k.FB&&setTimeout(function(){FB.XFBML.parse(b)},0);d(h).trigger(\"xf:reinit\",[a])},getDefaultFormData:function(a,b,c,e){var f;b&&b.length&&b.attr(\"name\")&&(f=b.attr(\"name\"));c&&\"multipart/form-data\"===a.attr(\"enctype\")&&console.error(\"JSON serialized forms do not support the file upload-style enctype.\");\nif(k.FormData&&!c){var g=new FormData(a[0]);f&&g.append(f,b.attr(\"value\"));a.find('input[type=\"file\"]').each(function(){var a=d(this);if(0===a.prop(\"files\").length)try{g.delete(a.attr(\"name\"))}catch(n){}})}else{if(c){a=a.is(\"form\")?d(a[0].elements):a;var l,m=[],p=[];if(e){\"string\"===typeof e&&(e=e.split(\",\"));var h=[];d.each(e,function(a,b){\"number\"===typeof a?h.push(XF.regexQuote(d.trim(b))):h.push(XF.regexQuote(d.trim(a)))});h.length&&(l=new RegExp(\"^(\"+h.join(\"|\")+\")(\\\\[|$)\"))}a.each(function(a,\nb){(a=b.name)&&\"_xf\"!==a.substring(0,3)?!l||l.test(a)?m.push(b):p.push(b):p.push(b)});g=d(p).serializeArray();e=d(m).serializeJSON();g.unshift({name:c,value:JSON.stringify(e)})}else g=a.serializeArray();f&&g.push({name:f,value:b.attr(\"value\")})}return g},scriptMatchRegex:/<script([^>]*)>([\\s\\S]*?)<\\/script>/ig,setupHtmlInsert:function(a,b,c){if(\"string\"===typeof a||a instanceof d)a={content:a};if(\"object\"==typeof a&&a.content){var e=arguments;XF.Loader.load(a.js,a.css,function(){var c,g=a.jsInline||\n[],l=a.content,m=\"string\"==typeof l,p=e[2]?!0:!1;if(a.cssInline)for(c=0;c<a.cssInline.length;c++)d(\"<style>\"+a.cssInline[c]+\"</style>\").appendTo(\"head\");if(m){var h;l=d.trim(l);if(!p)for(;c=XF.scriptMatchRegex.exec(l);){var t=!1;if(h=c[1].match(/(^|\\s)type=(\"|'|)([^\"' ;]+)/))switch(h[3].toLowerCase()){case \"text/javascript\":case \"text/ecmascript\":case \"application/javascript\":case \"application/ecmascript\":t=!0}else t=!0;t&&(g.push(c[2]),l=l.replace(c[0],\"\"))}l=l.replace(/<noscript>([\\s\\S]*?)<\\/noscript>/ig,\n\"\")}var n=d(m?d.parseHTML(l,null,p):l);2<=k.devicePixelRatio&&XF.isIOS()&&n.find(\"img[srcset]\").each(function(){d(this).prop(\"src\",this.getAttribute(\"srcset\").replace(/\\s+2x$/i,\"\"))});n.find(\"noscript\").empty().remove();if(b instanceof d){var v=b;b=function(a){v.html(a)}}if(\"function\"!==typeof b)console.error(\"onReady was not a function\");else{var r=!1;l=function(b){if(!r){r=!0;for(var c=0;c<g.length;c++)d.globalEval(g[c]);a.jsState&&(XF.config.jsState=XF.applyJsState(XF.config.jsState,a.jsState));\nb||XF.activate(n)}};!1!==b(n,a,l)&&l()}})}else console.error(\"Was not provided an object or HTML content\")},alert:function(a,b,c,e){var f=a;\"object\"==typeof a&&(f=\"<ul>\",d.each(a,function(a,b){f+=\"<li>\"+b+\"</li>\"}),f+=\"</ul>\",f='<div class=\"blockMessage\">'+f+\"</div>\");b||(b=\"error\");if(!c)switch(b){case \"error\":c=XF.phrase(\"oops_we_ran_into_some_problems\");break;default:c=\"\"}return XF.overlayMessage(c,f)},getOverlayHtml:function(a){var b={dismissible:!0,title:null};d.isPlainObject(a)&&(b=d.extend({},\nb,a),a.html&&(a=a.html));if(\"string\"==typeof a)a=d(d.parseHTML(a));else if(!(a instanceof d))throw Error(\"Can only create an overlay with html provided as a string or jQuery object\");if(!a.is(\".overlay\")){var c=b.title;if(!c){var e=a.find(\".overlay-title\");e.length&&(c=e.contents(),e.remove())}c||(c=XF.htmlspecialchars(d(\"title\").text()));e=a.find(\".overlay-content\");e.length&&(a=e);e=d('<div class=\"overlay\" tabindex=\"-1\"><div class=\"overlay-title\"></div><div class=\"overlay-content\"></div></div>');\nvar f=e.find(\".overlay-title\");f.html(c);b.dismissible&&f.prepend('<a class=\"overlay-titleCloser js-overlayClose\" role=\"button\" tabindex=\"0\" aria-label=\"'+XF.phrase(\"close\")+'\"></a>');e.find(\".overlay-content\").html(a);a=e}a.appendTo(\"body\");return a},createMultiBar:function(a,b,c,e){},getMultiBarHtml:function(a){var b={dismissible:!0,title:null};d.isPlainObject(a)&&(d.extend({},b,a),a.html&&(a=a.html));if(\"string\"==typeof a)a=d(d.parseHTML(a));else if(!(a instanceof d))throw Error(\"Can only create an action bar with html provided as a string or jQuery object\");\nb=d('<div class=\"multiBar\" tabindex=\"-1\"><div class=\"multiBar-inner\"><span>Hello there.</span></div></div>');b.find(\".multiBar-inner\").html(a);b.appendTo(\"body\");return b},overlayMessage:function(a,b){if(\"string\"==typeof b)b=d(d.parseHTML(b));else if(!(b instanceof d))throw Error(\"Can only create an overlay with html provided as a string or jQuery object\");b.is(\".block, .blockMessage\")||b.find(\".block, .blockMessage\").length||(b=d('<div class=\"blockMessage\" />').html(b));b=XF.getOverlayHtml({title:a,\nhtml:b});return XF.showOverlay(b,{role:\"alertdialog\"})},flashMessage:function(a,b,c){var e=d('<div class=\"flashMessage\"><div class=\"flashMessage-content\"></div></div>');e.find(\".flashMessage-content\").html(a);e.appendTo(\"body\").addClassTransitioned(\"is-active\");setTimeout(function(){e.removeClassTransitioned(\"is-active\",function(){e.remove();c&&c()})},Math.max(500,b))},htmlspecialchars:function(a){return String(a).replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")},\nregexQuote:function(a){return(a+\"\").replace(/([\\\\\\.\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}=!<>\\|:])/g,\"\\\\$1\")},stringTranslate:function(a,b){a=a.toString();for(var c in b)if(b.hasOwnProperty(c)){var e=new RegExp(XF.regexQuote(c,\"g\"));a=a.replace(e,b[c])}return a},stringHashCode:function(a){var b=0,c;if(0===a.length)return b;var e=0;for(c=a.length;e<c;e++){var d=a.charCodeAt(e);b=(b<<5)-b+d;b|=0}return b},getUniqueCounter:function(){var a=XF.counter;XF.counter++;return a},canonicalizeUrl:function(a){if(a.match(/^[a-z]+:/i))return a;\nif(0==a.indexOf(\"/\")){var b;return(b=XF.config.url.fullBase.match(/^([a-z]+:(\\/\\/)?[^\\/]+)\\//i))?b[1]+a:a}return XF.config.url.fullBase+a},isRedirecting:!1,redirect:function(a){XF.isRedirecting=!0;if(XF.JobRunner.isBlockingJobRunning())return d(h).one(\"job:blocking-complete\",function(){XF.redirect(a)}),!1;a=XF.canonicalizeUrl(a);var b=k.location;if(a==b.href)b.reload(!0);else{k.location=a;var c=a.split(\"#\"),e=b.href.split(\"#\");c[1]&&c[0]==e[0]&&b.reload(!0)}return!0},getAutoCompleteUrl:function(){return\"admin\"==\nXF.getApp()?XF.canonicalizeUrl(\"admin.php?users/find\"):XF.canonicalizeUrl(\"index.php?members/find\")},applyDataOptions:function(a,b,c){var e={},f;for(f in a)if(a.hasOwnProperty(f)&&(e[f]=a[f],b.hasOwnProperty(f))){var g=b[f];var l=typeof g;var m=!0;switch(typeof e[f]){case \"string\":\"string\"!=l&&(g=String(g));break;case \"number\":\"number\"!=l&&(g=Number(g),isNaN(g)&&(m=!1));break;case \"boolean\":if(\"boolean\"!=l)switch(g){case \"true\":case \"yes\":case \"on\":case \"1\":g=!0;break;default:g=!1}}m&&(e[f]=g)}d.isPlainObject(c)&&\n(e=d.extend(e,c));return e},watchInputChangeDelayed:function(a,b,c){var e=d(a),f=e.val(),g;c=c||200;e.onPassive({keyup:function(){clearTimeout(g);g=setTimeout(function(){var a=e.val();a!=f&&(f=a,b())},c)},paste:function(){setTimeout(function(){e.trigger(\"keyup\")},0)}})},insertIntoEditor:function(a,b,c,e){return XF.modifyEditorContent(a,function(a){a.insertContent(b)},function(a){XF.insertIntoTextBox(a,c)},e)},replaceEditorContent:function(a,b,c,e){return XF.modifyEditorContent(a,function(a){a.replaceContent(b)},\nfunction(a){XF.replaceIntoTextBox(a,c)},e)},clearEditorContent:function(a,b){b=XF.replaceEditorContent(a,\"\",\"\",b);a.trigger(\"draft:sync\");return b},modifyEditorContent:function(a,b,c,e){a=XF.getEditorInContainer(a,e);return a?XF.Editor&&a instanceof XF.Editor?(a.isBbCodeView()?(b=a.ed.bbCode.getTextArea(),c(b),b.trigger(\"autosize\")):b(a),!0):a instanceof d&&a.is(\"textarea\")?(c(a),a.trigger(\"autosize\"),!0):!1:!1},getEditorInContainer:function(a,b){if(a.is(\".js-editor\")){if(b&&a.is(b))return null;b=\na}else{a=a.find(\".js-editor\");b&&(a=a.not(b));if(!a.length)return null;b=a.first()}return(a=XF.Element.getHandler(b,\"editor\"))?a:b.is(\"textarea\")?b:null},focusEditor:function(a,b){a=XF.getEditorInContainer(a,b);return a?XF.Editor&&a instanceof XF.Editor?(a.scrollToCursor(),!0):a instanceof d&&a.is(\"textarea\")?(a.autofocus(),!0):!1:!1},insertIntoTextBox:function(a,b){var c=a[0],e=c.scrollTop,d=c.selectionStart,g=c.selectionEnd,l=a.val(),m=l.substring(0,d);g=l.substring(g,l.length);a.val(m+b+g).trigger(\"autosize\");\nc.selectionStart=c.selectionEnd=d+b.length;c.scrollTop=e;a.autofocus()},replaceIntoTextBox:function(a,b){a.val(b).trigger(\"autosize\")},logRecentEmojiUsage:function(a){a=d.trim(a);var b=XF.Feature.has(\"hiddenscroll\")?12:11,c=XF.Cookie.get(\"emoji_usage\");c=c?c.split(\",\"):[];var e=c.indexOf(a);-1!==e&&c.splice(e,1);c.push(a);c.length>b&&(c=c.reverse().slice(0,b).reverse());XF.Cookie.set(\"emoji_usage\",c.join(\",\"),new Date((new Date).setFullYear((new Date).getFullYear()+1)));d(h).trigger(\"recent-emoji:logged\");\nreturn c},getRecentEmojiUsage:function(){var a=XF.Cookie.get(\"emoji_usage\");return(a?a.split(\",\"):[]).reverse()},getFixedOffsetParent:function(a){do{if(\"fixed\"==a.css(\"position\"))return a;a=a.parent()}while(a[0]&&1===a[0].nodeType);return d(h.documentElement)},getFixedOffset:function(a){var b=a.offset(),c=XF.getFixedOffsetParent(a);if(a.is(\"html\"))return b;a=c.offset();return{top:b.top-a.top,left:b.left-a.left}},autoFocusWithin:function(a,b,c){var e=a.find(b||\"[autofocus]\");e.length||(!e.length&&\nXF.NavDeviceWatcher.isKeyboardNav()&&(e=a.find(\"a, button, :input, [tabindex]\").filter(\":visible\").not(\":disabled, [data-no-auto-focus]\")),e.length||(b=a.is(\"form:not([data-no-auto-focus])\")?a:a.find(\"form:not([data-no-auto-focus])\").first(),b.length&&(e=b.find(\":input, button\").filter(\":visible\").not(\":disabled\"))),!e.length&&c&&c.length&&(e=c),e.length||(a.attr(\"tabindex\",\"-1\"),e=a));a=[];c=e[0].parentNode;do a.push({el:c,left:c.scrollLeft,top:c.scrollTop});while(c=c.parentNode);e.on(\"focus\",function(){d(k).on(\"resize\",\nfunction(){setTimeout(function(){XF.isElementVisible(e)||(e.get(0).scrollIntoView({behavior:\"smooth\",block:\"end\",inline:\"nearest\"}),d(k).off(\"resize\"))},50)})});e.first().autofocus();for(b=0;b<a.length;b++)c=a[b].el,c.scrollLeft!=a[b].left&&(c.scrollLeft=a[b].left),c.scrollTop!=a[b].top&&(c.scrollTop=a[b].top)},bottomFix:function(a){var b=d(\".js-bottomFixTarget\").first();b?b.append(a):d(a).css({position:\"fixed\",bottom:0}).appendTo(\"body\")},addFixedMessage:function(a,b){var c=d(d.parseHTML('<div class=\"fixedMessageBar\"><div class=\"fixedMessageBar-inner\"><div class=\"fixedMessageBar-message\"></div><a class=\"fixedMessageBar-close\" data-close=\"true\" role=\"button\" tabindex=\"0\" aria-label=\"'+\nXF.phrase(\"close\")+'\"></a></div></div>'));c.find(\".fixedMessageBar-message\").html(a);b&&(b.class&&(c.addClass(b.class),delete b.class),c.attr(b));c.on(\"click\",\"[data-close]\",function(){c.removeClassTransitioned(\"is-active\",function(){c.remove()})});XF.bottomFix(c);c.addClassTransitioned(\"is-active\")},_measureScrollBar:null,measureScrollBar:function(a,b){b=\"height\"==b||\"h\"==b?\"h\":\"w\";if(a||null===XF._measureScrollBar){var c=d('<div class=\"scrollMeasure\" />');c.appendTo(a||\"body\");var e=c[0];e={w:e.offsetWidth-\ne.clientWidth,h:e.offsetHeight-e.clientHeight};c.remove();a||(XF._measureScrollBar=e);return e[b]}return XF._measureScrollBar[b]},windowHeight:function(){return XF.browser.ios||XF.browser.android?k.innerHeight:d(k).height()},pageLoadScrollFix:function(){if(k.location.hash){var a=!1,b=function(){if(!a){var b=k.location.hash.replace(/[^a-zA-Z0-9_-]/g,\"\");b=b?d(\"#\"+b):d();b.length&&b.get(0).scrollIntoView(!0)}};\"complete\"==h.readyState?setTimeout(b,0):(setTimeout(function(){d(k).one(\"scroll\",function(b){a=\n!0})},100),d(k).one(\"load\",b))}},applyJsState:function(a,b){a=a||{};if(!b)return a;for(var c in b)b.hasOwnProperty(c)&&!a[c]&&XF.jsStates.hasOwnProperty(c)&&XF.jsStates[c]()&&(a[c]=!0);return a},jsStates:{fbSdk:function(){d(h.body).append(d('<div id=\"fb-root\" />'));k.fbAsyncInit=function(){FB.init({version:\"v2.7\",xfbml:!0})};XF.loadScript(\"https://connect.facebook.net/\"+XF.getLocale()+\"/sdk.js\");return!0},twitter:function(){k.twttr=function(){var a=k.twttr||{};XF.loadScript(\"https://platform.twitter.com/widgets.js\")&&\n(a._e=[],a.ready=function(b){a._e.push(b)});return a}();return!0},flickr:function(){XF.loadScript(\"https://embedr.flickr.com/assets/client-code.js\");return!0},instagram:function(){XF.loadScript(\"https://platform.instagram.com/\"+XF.getLocale()+\"/embeds.js\",function(){d(h).on(\"xf:reinit\",function(a,b){k.instgrm&&instgrm.Embeds.process(b instanceof d?b.get(0):b)})})},reddit:function(){XF.loadScript(\"https://embed.redditmedia.com/widgets/platform.js\");return!0},reddit_comment:function(){XF.loadScript(\"https://www.redditstatic.com/comment-embed.js\",\nfunction(){d(h).on(\"xf:reinit\",function(a,b){k.rembeddit&&rembeddit.init()})});return!0},imgur:function(){k.imgurEmbed||(k.imgurEmbed={tasks:d(\"blockquote.imgur-embed-pub\").length});XF.loadScript(\"//s.imgur.com/min/embed-controller.js\",function(){d(h).on(\"xf:reinit\",function(a,b){imgurEmbed.tasks+=d(\"blockquote.imgur-embed-pub\").length;for(a=0;a<imgurEmbed.tasks;a++)imgurEmbed.createIframe(),imgurEmbed.tasks--})});return!0},pinterest:function(){XF.loadScript(\"//assets.pinterest.com/js/pinit.js\",function(){d(h).on(\"xf:reinit\",\nfunction(a,b){PinUtils.build(b instanceof d?b.get(0):b)})});return!0}},getLocale:function(){var a=d(\"html\").attr(\"lang\").replace(\"-\",\"_\");a||(a=\"en_US\");return a},supportsPointerEvents:function(){return\"PointerEvent\"in k},isEventTouchTriggered:function(a){if(a){if(a.xfPointerType)return\"touch\"===a.xfPointerType;if(a=a.originalEvent){if(XF.supportsPointerEvents()&&a instanceof PointerEvent)return\"touch\"===a.pointerType;if(a.sourceCapabilities)return a.sourceCapabilities.firesTouchEvents}}return XF.Feature.has(\"touchevents\")},\ngetElEffectiveZIndex:function(a){var b=parseInt(a.css(\"z-index\"),10)||0;a.parents().each(function(a,e){a=parseInt(d(e).css(\"z-index\"),10);a>b&&(b=a)});return b},setRelativeZIndex:function(a,b,c,e){e||(e=6);var f=XF.getElEffectiveZIndex(b);e&&e>f&&(f=e);if(null===c||\"undefined\"===typeof c)c=0;f||c?a.each(function(){var a=d(this);\"undefined\"==typeof a.data(\"base-z-index\")&&a.data(\"base-z-index\",parseInt(a.css(\"z-index\"),10)||0);a.css(\"z-index\",a.data(\"base-z-index\")+c+f)}):a.css(\"z-index\",\"\")},adjustHtmlForRte:function(a){a=\na.replace(/<img[^>]+>/ig,function(a){if(a.match(/class=\"([^\"]* )?smilie( |\")/)){var b;if(b=a.match(/alt=\"([^\"]+)\"/))return b[1]}return a});a=a.replace(/([\\w\\W]|^)<a\\s[^>]*data-user-id=\"\\d+\"\\s+data-username=\"([^\"]+)\"[^>]*>([\\w\\W]+?)<\\/a>/gi,function(a,c,d,f){return c+(\"@\"==c?\"\":\"@\")+f.replace(/^@/,\"\")});return a=a.replace(/(<img\\s[^>]*)src=\"[^\"]*\"(\\s[^>]*)data-url=\"([^\"]+)\"/gi,function(a,c,d,f){return c+'src=\"'+f+'\"'+d})},requestAnimationTimeout:function(a,b){function c(){Date.now()-f>=b?a():g.id=\nd(c)}b||(b=0);var d=k.requestAnimationFrame||function(a){return k.setTimeout(a,1E3/60)},f=Date.now(),g={};g.id=d(c);g.cancel=function(){(k.cancelAnimationFrame||k.clearTimeout)(this.id)};return g},proxy:function(a,b){var c;if(\"string\"===typeof b){var d=a[b];b=a;a=d}if(\"function\"===typeof a)return(c=[].slice.call(arguments,2))?function(){return a.apply(b,c.concat([].slice.call(arguments)))}:a.bind(b,c)},_localLoadTime:null,getLocalLoadTime:function(){if(XF._localLoadTime)return XF._localLoadTime;var a=\nXF.config.time,b=d(\"#_xfClientLoadTime\"),c=b.val();if(c&&c.length){var e=c.split(\",\");if(2==e.length&&parseInt(e[1],10)==a.now){var f=parseInt(e[0],10);b.val(c)}}f||(k.performance&&k.performance.timing&&0!==k.performance.timing.requestStart?(f=k.performance.timing,f=Math.floor((f.requestStart+f.responseStart)/2E3)):f=Math.floor((new Date).getTime()/1E3)-1,b.val(f+\",\"+a.now));return XF._localLoadTime=f}}),\"function\"!=typeof Object.create&&(Object.create=function(){var a=function(){};return function(b){a.prototype=\nb;b=new a;a.prototype=null;return b}}()),XF.create=function(a){var b=function(){this.__construct.apply(this,arguments)};b.prototype=Object.create(a);b.prototype.__construct||(b.prototype.__construct=function(){});return b.prototype.constructor=b},XF.extend=function(a,b){var c=function(){this.__construct.apply(this,arguments)},d;c.prototype=Object.create(a.prototype);c.prototype.__construct||(c.prototype.__construct=function(){});c.prototype.constructor=c;if(\"object\"==typeof b){if(\"object\"==typeof b.__backup){a=\nb.__backup;for(d in a)if(a.hasOwnProperty(d)){if(c.prototype[a[d]])throw Error(\"Method \"+a[d]+\" already exists on object. Aliases must be unique.\");c.prototype[a[d]]=c.prototype[d]}delete b.__backup}for(d in b)b.hasOwnProperty(d)&&(c.prototype[d]=b[d])}return c},XF.classToConstructor=function(a){var b=k,c=a.split(\".\"),d;for(d=0;d<c.length;d++)b=b[c[d]];return\"function\"!=typeof b?(console.error(\"%s is not a function.\",a),!1):b},XF.Cookie={get:function(a){return(a=(new RegExp(\"(^| )\"+XF.config.cookie.prefix+\na+\"=([^;]+)(;|$)\")).exec(h.cookie))?decodeURIComponent(a[2]):null},set:function(a,b,c){var d=XF.config.cookie;h.cookie=d.prefix+a+\"=\"+encodeURIComponent(b)+(void 0===c?\"\":\";expires=\"+c.toUTCString())+(d.path?\";path=\"+d.path:\"\")+(d.domain?\";domain=\"+d.domain:\"\")+(d.secure?\";secure\":\"\")},getJson:function(a){a=this.get(a);if(!a)return{};try{return d.parseJSON(a)||{}}catch(b){return{}}},setJson:function(a,b,c){this.set(a,JSON.stringify(b),c)},remove:function(a){var b=XF.config.cookie;h.cookie=b.prefix+\na+\"=\"+(b.path?\"; path=\"+b.path:\"\")+(b.domain?\"; domain=\"+b.domain:\"\")+(b.secure?\"; secure\":\"\")+\"; expires=Thu, 01-Jan-70 00:00:01 GMT\"}},XF.LocalStorage={getKeyName:function(a){return XF.config.cookie.prefix+a},get:function(a){var b=null;try{b=k.localStorage.getItem(this.getKeyName(a))}catch(e){}if(null===b){var c=this.getFallbackValue();c&&c.hasOwnProperty(a)&&(b=c[a])}return b},getJson:function(a){a=this.get(a);if(!a)return{};try{return d.parseJSON(a)||{}}catch(b){return{}}},set:function(a,b,c){try{k.localStorage.setItem(this.getKeyName(a),\nb)}catch(e){c&&(c=this.getFallbackValue(),c[a]=b,this.updateFallbackValue(c))}},setJson:function(a,b,c){this.set(a,JSON.stringify(b),c)},remove:function(a){try{k.localStorage.removeItem(this.getKeyName(a))}catch(c){}var b=this.getFallbackValue();b&&b.hasOwnProperty(a)&&(delete b[a],this.updateFallbackValue(b))},getFallbackValue:function(){var a=XF.Cookie.get(\"ls\");if(a)try{a=d.parseJSON(a)}catch(b){a={}}return a||{}},updateFallbackValue:function(a){d.isEmptyObject(a)?XF.Cookie.remove(\"ls\"):XF.Cookie.set(\"ls\",\nJSON.stringify(a))}},XF.CrossTab=function(){function a(a){var c=XF.LocalStorage.getKeyName(\"__crossTab\");if(a.key===c){try{var f=d.parseJSON(a.newValue)}catch(m){return}if(f&&f.event&&(a=f.event,f=f.data||null,c=b[a])){e=a;for(a=0;a<c.length;a++)c[a](f);e=null}}}var b={},c=!1,e;return{on:function(d,g){b[d]||(b[d]=[]);b[d].push(g);c||(c=!0,k.addEventListener(\"storage\",a))},trigger:function(a,b,c){!c&&e&&e==a||XF.LocalStorage.setJson(\"__crossTab\",{event:a,data:b,_:new Date+Math.random()})}}}(),XF.Breakpoint=\nfunction(){function a(a){for(var b=0;b<f.length&&a!=f[b];b++)if(e==f[b])return!0;return!1}function b(a){for(var b=!1,c=0;c<f.length;c++)if(a==f[c])b=!0;else if(e==f[c])return b;return!1}function c(){var a=k.getComputedStyle(d(\"html\")[0],\":after\").getPropertyValue(\"content\").replace(/\"/g,\"\");if(e){if(a!=e){var b=e;e=a;d(h).trigger(\"breakpoint:change\",[b,a])}}else e=a;return e}var e=null,f=[\"narrow\",\"medium\",\"wide\",\"full\"];c();d(k).onPassive(\"resize\",c);return{current:function(){return e},refresh:c,\nisNarrowerThan:a,isAtOrNarrowerThan:function(b){return e==b||a(b)},isWiderThan:b,isAtOrWiderThan:function(a){return e==a||b(a)}}}(),XF.JobRunner=function(){var a=!1,b,c=null,e=0,f,g=null,l=function(){d.ajax({url:XF.canonicalizeUrl(\"job.php\"),type:\"post\",cache:!1,dataType:\"json\",global:!1}).always(function(a){a&&a.more&&setTimeout(l,100)})},m=function(a){f=XF.ajax(\"post\",XF.canonicalizeUrl(\"job.php\"),{only_ids:a},function(a){a.more&&a.ids&&a.ids.length?(a.status&&d(\"#xfAutoBlockingJobStatus\").text(a.status),\nsetTimeout(function(){m(a.ids)},0)):(p(),a.moreAuto&&setTimeout(l,100))},{skipDefault:!0}).fail(p)},p=function(){g&&g.hide();e--;0>e&&(e=0);0==e&&(d(h).trigger(\"job:auto-blocking-complete\"),v());f&&f.abort();f=null},k=function(){c&&c.hide();a=!1;d(h).trigger(\"job:manual-complete\");v();b&&b.abort();b=null},t=function(){c||(c=n(\"xfManualJobStatus\"));return c},n=function(a){a=XF.getOverlayHtml({title:XF.phrase(\"processing...\"),dismissible:!1,html:'<div class=\"blockMessage\"><span id=\"'+a+'\">'+XF.phrase(\"processing...\")+\n\"</span></div>\"});return new XF.Overlay(a,{backdropClose:!1,keyboard:!1})},v=function(){r()||d(h).trigger(\"job:blocking-complete\")},r=function(){return a||0<e};return{isBlockingJobRunning:r,runAuto:l,runAutoBlocking:function(a,b){if(\"number\"===typeof a)a=[a];else if(!Array.isArray(a))return;a.length&&(e++,g||(g=n(\"xfAutoBlockingJobStatus\")),g.show(),b||(b=XF.phrase(\"processing...\")),d(\"#xfAutoBlockingJobStatus\").text(b),m(a))},runManual:function(c){var e=XF.config.job.manualUrl;if(e){if(null===c)g=\nnull;else{var g=g||[];\"number\"===typeof c?g.push(c):Array.isArray(c)&&g.push.apply(g,c)}if(!a){a=!0;t().show();var f=function(a){b=XF.ajax(\"post\",e,a?{only_id:a}:null,function(b){b.jobRunner?(d(\"#xfManualJobStatus\").text(b.jobRunner.status||XF.phrase(\"processing...\")),setTimeout(function(){f(a)},0)):l()},{skipDefault:!0}).fail(k)},l=function(){Array.isArray(g)&&0==g.length?k():f(g?g.shift():null)};l()}}},stopManual:k,getManualOverlay:t}}(),XF.Loader=function(){var a=XF.config.css,b=XF.config.js,c=\nfunction(c,f,g){c=c||[];f=f||[];var e=[],m=[],p;for(p=0;p<c.length;p++)b.hasOwnProperty(c[p])||e.push(c[p]);for(p=0;p<f.length;p++)a.hasOwnProperty(f[p])||m.push(f[p]);var h=(e.length?1:0)+(m.length?1:0),k=function(){h--;0==h&&g&&g()};h?(e.length&&XF.loadScripts(e,function(){d.each(e,function(a,c){b[c]=!0});k()}),m.length&&((c=XF.config.url.css)?(c=c.replace(\"__SENTINEL__\",m.join(\",\")),d.ajax({type:\"GET\",url:c,cache:!0,global:!1,dataType:\"text\",success:function(a){var b=XF.config.url.basePath;b&&\n(a=a.replace(/(url\\((\"|')?)([^\"')]+)((\"|')?\\))/gi,function(a,c,d,g,e,f){g.match(/^([a-z]+:|\\/)/i)||(g=b+g);return c+g+e}));d(\"<style>\"+a+\"</style>\").appendTo(\"head\")}}).always(function(){d.each(m,function(b,c){a[c]=!0});k()})):(console.error(\"No CSS URL so cannot dynamically load CSS\"),k()))):g&&g()};return{load:c,loadCss:function(a,b){c([],a,b)},loadJs:function(a,b){c(a,[],b)}}}(),XF.ClassMapper=XF.create({_map:{},_toExtend:{},add:function(a,b){this._map[a]=b},extend:function(a,b){var c=this.getObjectFromIdentifier(a);\nc?(c=XF.extend(c,b),this._map[a]=c):(this._toExtend[a]||(this._toExtend[a]=[]),this._toExtend[a].push(b))},getObjectFromIdentifier:function(a){var b=this._map[a],c=this._toExtend[a];if(!b)return null;if(\"string\"==typeof b){b=XF.classToConstructor(b);if(c){for(var d=0;d<c.length;d++)b=XF.extend(b,c[d]);delete this._toExtend[a]}this._map[a]=b}return b}}),XF.ActionIndicator=function(){var a=0,b,c=function(){a++;1==a&&(b||(b=d('<span class=\"globalAction\"><span class=\"globalAction-bar\" /><span class=\"globalAction-block\"><i></i><i></i><i></i></span></span>').appendTo(\"body\")),\nb.addClassTransitioned(\"is-active\"))},e=function(){a--;0<a||(a=0,b.removeClassTransitioned(\"is-active\"))};return{initialize:function(){d(h).on({ajaxStart:c,\"xf:action-start\":c,ajaxStop:e,\"xf:action-stop\":e})},show:c,hide:e}}(),XF.DynamicDate=function(){var a,b,c,e,f,g,l,m=!1,p,k=function(){p=setInterval(function(){t(h)},2E4)},t=function(h){m||this.initialize();h=d(h).find(\"time[data-time]\");var p=h.length,k=Math.floor((new Date).getTime()/1E3)-a;if(b+k>c+86400){var q=Math.floor((b+k-c)/86400);c+=\n86400*q;e=(e+q)%7;f=c-86400;g=c+86400;l=c-518400}for(var t=0;t<p;t++){q=h[t];var n=d(q);var u=parseInt(q.getAttribute(\"data-time\"),10);var x=b-u+k;var w=q.xfDynType;-2>x?(x=u-(b+k),60>x?\"futureMoment\"!=w&&(n.text(XF.phrase(\"in_a_moment\")),q.xfDynType=\"futureMoment\"):120>x?\"futureMinute\"!=w&&(n.text(XF.phrase(\"in_a_minute\")),q.xfDynType=\"futureMinute\"):3600>x?(u=Math.floor(x/60),w!==\"futureMinutes\"+u&&(n.text(XF.phrase(\"in_x_minutes\",{\"{minutes}\":u})),q.xfDynType=\"futureMinutes\"+u)):u<g?\"latertoday\"!=\nw&&(n.text(XF.phrase(\"later_today_at_x\",{\"{time}\":n.attr(\"data-time-string\")})),q.xfDynType=\"latertoday\"):u<g+86400?\"tomorrow\"!=w&&(n.text(XF.phrase(\"tomorrow_at_x\",{\"{time}\":n.attr(\"data-time-string\")})),q.xfDynType=\"tomorrow\"):(604800>x||(n.attr(\"data-full-date\")?n.text(XF.phrase(\"date_x_at_time_y\",{\"{date}\":n.attr(\"data-date-string\"),\"{time}\":n.attr(\"data-time-string\")})):n.text(n.attr(\"data-date-string\"))),q.xfDynType=\"future\")):60>=x?\"moment\"!==w&&(n.text(XF.phrase(\"a_moment_ago\")),q.xfDynType=\n\"moment\"):120>=x?\"minute\"!==w&&(n.text(XF.phrase(\"one_minute_ago\")),q.xfDynType=\"minute\"):3600>x?(u=Math.floor(x/60),w!==\"minutes\"+u&&(n.text(XF.phrase(\"x_minutes_ago\",{\"{minutes}\":u})),q.xfDynType=\"minutes\"+u)):u>=c?\"today\"!==w&&(n.text(XF.phrase(\"today_at_x\",{\"{time}\":n.attr(\"data-time-string\")})),q.xfDynType=\"today\"):u>=f?\"yesterday\"!==w&&(n.text(XF.phrase(\"yesterday_at_x\",{\"{time}\":n.attr(\"data-time-string\")})),q.xfDynType=\"yesterday\"):u>=l?\"week\"!==w&&(w=e-Math.ceil((c-u)/86400),0>w&&(w+=7),\nn.text(XF.phrase(\"day_x_at_time_y\",{\"{day}\":XF.phrase(\"day\"+w),\"{time}\":n.attr(\"data-time-string\")})),q.xfDynType=\"week\"):\"old\"!==w&&(n.attr(\"data-full-date\")?n.text(XF.phrase(\"date_x_at_time_y\",{\"{date}\":n.attr(\"data-date-string\"),\"{time}\":n.attr(\"data-time-string\")})):n.text(n.attr(\"data-date-string\")),q.xfDynType=\"old\")}};return{initialize:function(){if(!m){m=!0;var q=XF.config.time;a=XF.getLocalLoadTime();b=q.now;c=q.today;e=q.todayDow;f=c-86400;g=c+86400;l=c-518400;void 0!==h.hidden?(h.hidden||\nk(),d(h).on(\"visibilitychange\",function(){h.hidden?clearInterval(p):(k(),t(h))})):k()}},refresh:t}}(),XF.KeepAlive=function(){var a,b,c=!1,e,f=function(){var a=3E3+(Math.floor(241*Math.random())+-120);120>a&&(a=120);e&&clearInterval(e);e=setInterval(m,1E3*a)},g=0,l,m=function(){c&&(!1===k.navigator.onLine&&(g++,5>=g&&(l=setTimeout(m,30))),g=0,clearTimeout(l),d.ajax({url:XF.canonicalizeUrl(a),data:{_xfResponseType:\"json\",_xfToken:XF.config.csrf},type:\"post\",cache:!1,dataType:\"json\",global:!1}).done(function(a){\"ok\"==\na.status&&(h(a),XF.CrossTab.trigger(b,a))}))},h=function(a){a.csrf&&(XF.config.csrf=a.csrf,d(\"input[name=_xfToken]\").val(a.csrf));if(\"undefined\"!==typeof a.user_id){var b=d(\".js-activeUserChangeMessage\");a.user_id==XF.config.userId||b.length||XF.addFixedMessage(XF.phrase(\"active_user_changed_reload_page\"),{\"class\":\"js-activeUserChangeMessage\"});a.user_id==XF.config.userId&&b.length&&b.remove()}f()};return{initialize:function(){if(!c&&XF.config.url.keepAlive&&XF.config.url.keepAlive.length){c=!0;a=\nXF.config.url.keepAlive;b=\"keepAlive\"+XF.stringHashCode(a);f();XF.CrossTab.on(b,h);if(k.performance&&k.performance.navigation){var d=k.performance.navigation.type;0!=d&&1!=d||XF.CrossTab.trigger(b,{csrf:XF.config.csrf,time:XF.config.time.now,user_id:XF.config.userId})}XF.Cookie.get(\"csrf\")||m()}},refresh:m}}(),XF.LinkWatcher=function(){var a=function(a){var b=d(this),c=b.data(\"proxy-href\"),g=b.data(\"proxy-handler-last\");!c||g&&g==a.timeStamp||(b.data(\"proxy-handler-last\",a.timeStamp),d.ajax({url:XF.canonicalizeUrl(c),\ndata:{_xfResponseType:\"json\",referrer:k.location.href.replace(/#.*$/,\"\")},type:\"post\",cache:!1,dataType:\"json\",global:!1}))},b=function(a){if(XF.config.enableRtnProtect&&!a.isDefaultPrevented()){var b=d(this),c=b.attr(\"href\"),g=b.data(\"blank-handler-last\");if(c&&(!c.match(/^[a-z]:/i)||c.match(/^https?:/i))){if(b.is(\"[rel~=noopener]\")){var l=XF.browser;if(l.chrome&&49<=l.version||l.mozilla&&52<=l.version||l.safari&&11<=l.version)return}if(!(b.closest(\"[contenteditable=true]\").length||(c=XF.canonicalizeUrl(c),\n(new RegExp(\"^[a-z]+://\"+location.host+\"(/|$|:)\",\"i\")).test(c)||g&&g==a.timeStamp||(b.data(\"blank-handler-last\",a.timeStamp),l=navigator.userAgent,b=-1!==l.indexOf(\"MSIE\"),g=-1!==l.indexOf(\"Safari\")&&-1==l.indexOf(\"Chrome\"),l=-1!==l.indexOf(\"Gecko/\"),a.shiftKey&&l||g&&(a.shiftKey||a.altKey)||b)))){if(g)b=d('<iframe style=\"display: none\" />').appendTo(h.body),g=b[0].contentDocument||b[0].contentWindow.document,g.__href=c,c=d(\"<script />\",g),c[0].text=\"window.opener=null;window.parent=null;window.top=null;window.frameElement=null;window.open(document.__href).opener = null;\",\ng.body.appendChild(c[0]),b.remove();else{c=k.open(c);try{c.opener=null}catch(m){}}a.preventDefault()}}}};return{initLinkProxy:function(){var b=\"a[data-proxy-href]:not(.link--internal)\";d(h).on(\"click\",b,a).on(\"focusin\",b,function(b){b=d(this);b.data(\"proxy-handler\")||b.data(\"proxy-handler\",!0).click(a)})},initExternalWatcher:function(){d(h).on(\"click\",\"a[target=_blank]\",b).on(\"focusin\",\"a[target=_blank]\",function(a){a=d(this);a.data(\"blank-handler\")||a.data(\"blank-handler\",!0).click(b)})}}}(),XF._IgnoredWatcher=\nXF.create({options:{container:\"body\",ignored:\".is-ignored\",link:\".js-showIgnored\"},$container:null,authors:[],shown:!1,__construct:function(a){this.options=d.extend(!0,{},this.options,a||{});this.$container=a=d(this.options.container);this.updateState();a.on(\"click\",this.options.link,XF.proxy(this,\"show\"))},refresh:function(a){this.$container.find(a).length&&(this.shown?this.show():this.updateState())},updateState:function(){if(!this.shown){var a=this.getIgnored(),b=[];if(a.length)if(a.each(function(){var a=\nd(this).data(\"author\");a&&-1===d.inArray(a,b)&&b.push(a)}),b.length){var c={names:b.join(\", \")};this.getLinks().each(function(){var a=d(this),b=a.attr(\"title\");b&&a.attr(\"title\",Mustache.render(b,c)).removeClass(\"is-hidden\")})}else this.getLinks().each(function(){d(this).removeAttr(\"title\").removeClass(\"is-hidden\")})}},getIgnored:function(){return this.$container.find(this.options.ignored)},getLinks:function(){return this.$container.find(this.options.link)},show:function(){this.shown=!0;this.getIgnored().removeClass(\"is-ignored\");\nthis.getLinks().addClass(\"is-hidden\")},initializeHash:function(){if(k.location.hash){var a=k.location.hash.replace(/[^\\w_#-]/g,\"\");if(\"#\"!==a){a=d(a);var b=this.options.ignored;(b=a.is(b)?a:a.closest(b))&&b.length&&(b.removeClass(\"is-ignored\"),a.get(0).scrollIntoView(!0))}}}}),XF.IgnoreWatcher=new XF._IgnoredWatcher,XF.MultiBar=XF.create({options:{role:null,focusShow:!1,className:\"\",fastReplace:!1},$container:null,$multiBar:null,shown:!1,__construct:function(a,b){this.options=d.extend(!0,{},this.options,\nb||{});this.$multiBar=a instanceof d?a:d(d.parseHTML(a));this.$multiBar.attr(\"role\",this.options.role||\"dialog\").attr(\"aria-hidden\",\"true\").on(\"multibar:hide\",XF.proxy(this,\"hide\")).on(\"multibar:show\",XF.proxy(this,\"show\"));this.$container=d('<div class=\"multiBar-container\" />');this.$container.html(this.$multiBar).data(\"multibar\",this).addClass(this.options.className);this.$container.xfUniqueId();this.$container.appendTo(\"body\");XF.activate(this.$container);XF.MultiBar.cache[this.$container.attr(\"id\")]=\nthis},show:function(){if(!this.shown){this.shown=!0;this.$multiBar.attr(\"aria-hidden\",\"false\");d(\".p-pageWrapper\").addClass(\"has-multiBar\");this.options.fastReplace&&this.$multiBar.css(\"transition-duration\",\"0s\");var a=this;this.$container.appendTo(\"body\");this.$multiBar.addClassTransitioned(\"is-active\",function(){if(a.options.focusShow){var b=a.$multiBar.find(\".js-multiBarClose\");XF.autoFocusWithin(a.$multiBar.find(\".multiBar-content\"),null,b)}a.$container.trigger(\"multibar:shown\");XF.layoutChange()});\nthis.options.fastReplace&&this.$multiBar.css(\"transition-duration\",\"\");this.$container.trigger(\"multibar:showing\");XF.layoutChange()}},hide:function(){if(this.shown){this.shown=!1;this.$multiBar.attr(\"aria-hidden\",\"true\");var a=this;this.$multiBar.removeClassTransitioned(\"is-active\",function(){d(\".p-pageWrapper\").removeClass(\"has-multiBar\");a.$container.trigger(\"multibar:hidden\");XF.layoutChange()});this.$container.trigger(\"multibar:hiding\");XF.layoutChange()}},toggle:function(a){(null===a?!this.shown:\na)?this.show():this.hide()},destroy:function(){var a=this.$container.attr(\"id\"),b=XF.MultiBar.cache;this.$container.remove();b.hasOwnProperty(a)&&delete b[a]},on:function(){this.$container.on.apply(this.$container,arguments)},getContainer:function(){return this.$container},getMultiBar:function(){return this.$multiBar}}),XF.MultiBar.cache={},XF.showMultiBar=function(a,b){a=new XF.MultiBar(a,b);a.show();return a},XF.loadMultiBar=function(a,b,c,e){d.isFunction(c)&&(c={init:c});c=d.extend({cache:!1,beforeShow:null,\nafterShow:null,onRedirect:null,init:null,show:!0},c||{});var f=function(a){if(c.beforeShow){var b=d.Event();c.beforeShow(a,b);if(b.isDefaultPrevented())return}c.show&&a.show();c.afterShow&&(b=d.Event(),c.afterShow(a,b),b.isDefaultPrevented())};if(c.cache&&XF.loadMultiBar.cache[a])f(XF.loadMultiBar.cache[a]);else{var g=function(b){if(b.redirect)if(c.onRedirect)c.onRedirect(b,g);else XF.ajax(\"get\",b.redirect,function(a){g(a)});b.html&&XF.setupHtmlInsert(b.html,function(b,d,g){var l=new XF.MultiBar(XF.getMultiBarHtml({html:b,\ntitle:d.title||d.h1}),e);c.init&&c.init(l);if(!c.cache)l.on(\"multibar:hidden\",function(){l.destroy()});g();c.cache&&(XF.loadMultiBar.cache[a]=l);f(l)})};return XF.ajax(\"post\",a,b,function(a){g(a)})}},XF.loadMultiBar.cache={},XF.Overlay=XF.create({options:{backdropClose:!0,escapeClose:!0,focusShow:!0,className:\"\"},$container:null,$overlay:null,shown:!1,__construct:function(a,b){this.options=d.extend(!0,{},this.options,b||{});this.$overlay=a instanceof d?a:d(d.parseHTML(a));this.$overlay.attr(\"role\",\nthis.options.role||\"dialog\").attr(\"aria-hidden\",\"true\");this.$container=d('<div class=\"overlay-container\" />').html(this.$overlay);this.$container.data(\"overlay\",this).xfUniqueId();var c=this;if(this.options.escapeClose)this.$container.on(\"keydown.overlay\",function(a){27===a.which&&c.hide()});this.options.backdropClose&&(this.$container.on(\"mousedown\",function(a){c.$container.data(\"block-close\",!1);d(a.target).is(c.$container)||c.$container.data(\"block-close\",!0)}),this.$container.on(\"click\",function(a){d(a.target).is(c.$container)&&\n(c.$container.data(\"block-close\")||c.hide());c.$container.data(\"block-close\",!1)}));this.options.className&&this.$container.addClass(this.options.className);this.$container.on(\"click\",\".js-overlayClose\",XF.proxy(this,\"hide\"));this.$container.appendTo(\"body\");XF.activate(this.$container);XF.Overlay.cache[this.$container.attr(\"id\")]=this;this.$overlay.on(\"overlay:hide\",XF.proxy(this,\"hide\"));this.$overlay.on(\"overlay:show\",XF.proxy(this,\"show\"))},show:function(){if(!this.shown){this.shown=!0;this.$overlay.attr(\"aria-hidden\",\n\"false\");var a=this;this.$container.appendTo(\"body\").addClassTransitioned(\"is-active\",function(){if(a.options.focusShow){var b=a.$overlay.find(\".js-overlayClose\");XF.autoFocusWithin(a.$overlay.find(\".overlay-content\"),null,b)}a.$container.trigger(\"overlay:shown\");XF.layoutChange()});this.$container.trigger(\"overlay:showing\");XF.ModalOverlay.open();XF.layoutChange()}},hide:function(){if(this.shown){this.shown=!1;this.$overlay.attr(\"aria-hidden\",\"true\");var a=this;this.$container.removeClassTransitioned(\"is-active\",\nfunction(){a.$container.trigger(\"overlay:hidden\");XF.ModalOverlay.close();XF.layoutChange()});this.$container.trigger(\"overlay:hiding\");XF.layoutChange()}},recalculate:function(){this.shown&&XF.Modal.updateScrollbarPadding()},toggle:function(){this.shown?this.hide():this.show()},destroy:function(){var a=this.$container.attr(\"id\"),b=XF.Overlay.cache;this.$container.remove();b.hasOwnProperty(a)&&delete b[a]},on:function(){this.$container.on.apply(this.$container,arguments)},getContainer:function(){return this.$container},\ngetOverlay:function(){return this.$overlay}}),XF.Overlay.cache={},XF.ModalOverlay=function(){var a=0,b=d(\"body\").first();return{getOpenCount:function(){return a},open:function(){XF.Modal.open();a++;1==a&&b.addClass(\"is-modalOverlayOpen\")},close:function(){XF.Modal.close();0<a&&(a--,0==a&&b.removeClass(\"is-modalOverlayOpen\"))}}}(),XF.Modal=function(){var a=0,b=d(\"body\").first(),c=d(\"html\"),e=function(){var a=\"right\",d=b.hasClass(\"is-modalOpen\")?XF.measureScrollBar()+\"px\":\"\";XF.isRtl()&&(XF.browser.chrome||\nXF.browser.mozilla||(a=\"left\"));c.css(\"margin-\"+a,d)};return{getOpenCount:function(){return a},open:function(){a++;1==a&&(b.addClass(\"is-modalOpen\"),e())},close:function(){0<a&&(a--,0==a&&(b.removeClass(\"is-modalOpen\"),e()))},updateScrollbarPadding:e}}(),XF.showOverlay=function(a,b){a=new XF.Overlay(a,b);a.show();return a},XF.loadOverlay=function(a,b,c){d.isFunction(b)&&(b={init:b});b=d.extend({cache:!1,beforeShow:null,afterShow:null,onRedirect:null,init:null,show:!0},b||{});var e=function(a){if(b.beforeShow){var c=\nd.Event();b.beforeShow(a,c);if(c.isDefaultPrevented())return}b.show&&a.show();b.afterShow&&(c=d.Event(),b.afterShow(a,c),c.isDefaultPrevented())};if(b.cache&&XF.loadOverlay.cache[a])e(XF.loadOverlay.cache[a]);else{var f=function(d){if(d.redirect)if(b.onRedirect)b.onRedirect(d,f);else XF.ajax(\"get\",d.redirect,function(a){f(a)});d.html&&XF.setupHtmlInsert(d.html,function(d,g,f){var l=new XF.Overlay(XF.getOverlayHtml({html:d,title:g.title||g.h1}),c);b.init&&b.init(l);if(!b.cache)l.on(\"overlay:hidden\",\nfunction(){l.destroy()});f();b.cache&&(XF.loadOverlay.cache[a]=l);e(l)})};return XF.ajax(\"get\",a,function(a){f(a)})}},XF.loadOverlay.cache={},XF.NavDeviceWatcher=function(){function a(a){a!=b&&(d(\"html\").toggleClass(\"has-pointer-nav\",!a),b=a)}var b=!0;return{initialize:function(){d(h).onPassive({mousedown:function(){a(!1)},keydown:function(b){switch(b.key){case \"Tab\":case \"Enter\":a(!0)}}})},toggle:a,isKeyboardNav:function(){return b}}}(),XF.ScrollButtons=function(){function a(a){if(!q){a=k.pageYOffset||\nh.documentElement.scrollTop;var c=v;v=a;if(a>c)\"down\"!=r&&(r=\"down\",B=c);else if(a<c)\"up\"!=r&&(r=\"up\",B=c);else return;if(t){if(\"up\"!==r||100>v){A&&(A.cancel(),A=null);return}if(30>B-a)return}A||(A=XF.requestAnimationTimeout(function(){A=null;b();e()},200))}}function b(){n||(y.addClassTransitioned(\"is-active\"),n=!0)}function c(){n&&(y.removeClassTransitioned(\"is-active\"),n=!1)}function e(){f();p=setTimeout(function(){c()},3E3)}function f(){clearTimeout(p)}function g(){f();b()}function l(){f()}function m(){q=\n!0;setTimeout(function(){q=!1},500);c()}var p=null,q=!1,t=!1,n=!1,v=k.pageYOffset||h.documentElement.scrollTop,r=null,B=null,A,y=null;return{initialize:function(){if(y&&y.length)return!1;y=d(\".js-scrollButtons\");if(!y.length)return!1;\"up\"===y.data(\"trigger-type\")&&(t=!0);y.on({\"mouseenter focus\":g,\"mouseleave blur\":l,click:m});d(k).onPassive(\"scroll\",a);return!0},show:b,hide:c,startHideTimer:e,clearHideTimer:f}}(),XF.KeyboardShortcuts=function(){function a(c){c=d(c);1<c.length?c.each(function(){a(this)}):\n(c.is(\"[data-xf-key]\")&&b(c[0]),c.find(\"[data-xf-key]\").each(function(){b(this)}))}function b(a){var b=String(d(a).data(\"xf-key\")),c=b.substr(b.lastIndexOf(\"+\")+1),g=\"#\"===c[0]?c.substr(1):c.toUpperCase().charCodeAt(0),e=b.toUpperCase().split(\"+\");var h=-1!==e.indexOf(\"CTRL\");var k=-1!==e.indexOf(\"ALT\");e=-1!==e.indexOf(\"META\");(h=0+h?1:0+k?2:0+e?4:0)?XF.Keyboard.isStandardKey(g)?(f[g]=f[g]||{},f[g][h]=a):console.warn(\"It is not possible to specify a keyboard shortcut using this key combination (%s)\",\nb):f[c]=a}function c(a){switch(a.key){case \"Escape\":XF.MenuWatcher.closeAll();XF.hideTooltips();return;case \"Shift\":case \"Control\":case \"Alt\":case \"Meta\":return}if(XF.Keyboard.isShortcutAllowed(h.activeElement)&&(!f.hasOwnProperty(a.key)||0!=(0+a.ctrlKey?1:0+a.altKey?2:0+a.metaKey?4:0)||!e(f[a.key]))&&f.hasOwnProperty(a.which)){var b=0+a.ctrlKey?1:0+a.altKey?2:0+a.metaKey?4:0;f[a.which].hasOwnProperty(b)&&e(f[a.which][b])}}function e(a){a=d(a).filter(\":visible\");return a.length?(XF.NavDeviceWatcher.toggle(!0),\na.is(XF.getKeyboardInputs())?a.autofocus():a.is(\"a[href]\")?a.get(0).click():a.click(),!0):!1}var f={};return{initialize:function(){d(h.body).onPassive(\"keyup\",c)},initializeElements:a}}(),XF.Keyboard={isShortcutAllowed:function(a){switch(a.tagName){case \"TEXTAREA\":case \"SELECT\":return!1;case \"INPUT\":switch(a.type){case \"checkbox\":case \"radio\":case \"submit\":case \"reset\":return!0;default:return!1}case \"BODY\":return!0;default:return XF.browser.msie&&d(a).parents(\".fr-element\").length?!1:\"true\"===a.contentEditable?\n!1:!0}},isStandardKey:function(a){return 48<=a&&90>=a}},XF.FormInputValidation=function(){function a(b){b=d(b);1<b.length?b.each(function(){a(this)}):b.is(\"form\")&&c(b)}function b(){f.length&&f.each(function(){c(d(this))})}function c(a){a.find(\":input\").on(\"invalid\",{form:a},e)}function e(a){var b=d(this);a=a.data.form;var c=a.find(\":invalid\").first();b[0]!==c[0]||XF.isElementVisible(b)||(a=a.closest(\".overlay-container.is-active\"),a.length?a.scrollTop(b.offset().top-a.offset().top+a.scrollTop()-\n100):(b[0].scrollIntoView(),k.scrollBy(0,-100)))}var f={};return{initialize:function(){f=d(\"form\").not(\"[novalidate]\");b()},initializeElements:a}}(),XF.NoticeWatcher=function(){return{initialize:function(){d(h).on(\"xf:notice-change xf:layout\",XF.proxy(this,\"checkNotices\"));this.checkNotices()},checkNotices:function(){var a=0;d(h).find(\".js-bottomFixTarget .notices--bottom_fixer .js-notice\").each(function(){var b=d(this);b.is(\":visible\")&&(a+=b.height())});d(h).find(\"footer.p-footer\").css(\"margin-bottom\",\na)}}}(),XF.Push=function(){function a(a,c){navigator.serviceWorker.register(XF.canonicalizeUrl(\"js/xf/service_worker.js\")).then(function(c){XF.Push.serviceWorkerReg=c;b();a&&a()}).catch(function(a){console.error(\"Service worker error\",a);c&&c()})}function b(){XF.Push.serviceWorkerReg.pushManager.getSubscription().then(function(a){XF.Push.isSubscribed=null!==a;XF.Push.isSubscribed?(d(h).trigger(\"push:init-subscribed\"),XF.config.userId&&e(a)?XF.Push.updateUserSubscription(a,\"update\"):(a.unsubscribe(),\nXF.Push.updateUserSubscription(a,\"unsubscribe\"))):d(h).trigger(\"push:init-unsubscribed\")})}function c(a){var b=\"=\".repeat((4-a.length%4)%4);a=(a+b).replace(/\\-/g,\"+\").replace(/_/g,\"/\");a=k.atob(a);b=new Uint8Array(a.length);for(var c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}function e(a){a instanceof PushSubscription&&(a=a.options.applicationServerKey);if(\"string\"===typeof a)return XF.config.pushAppServerKey===a;a.buffer&&a.BYTES_PER_ELEMENT&&(a=a.buffer);if(!(a instanceof ArrayBuffer))throw Error(\"input must be an array buffer or convertable to it\");\nvar b=c(XF.config.pushAppServerKey).buffer,d=b.byteLength;if(d!==a.byteLength)return!1;b=new DataView(b);a=new DataView(a);for(var e=0;e<d;e++)if(b.getUint8(e)!==a.getUint8(e))return!1;return!0}var f=null;return{serviceWorkerReg:null,isSubscribed:null,initialize:function(){XF.Push.isSupported()&&(XF.config.skipServiceWorkerRegistration||a())},registerWorker:a,getPushHistoryUserIds:function(){return XF.LocalStorage.getJson(\"push_history_user_ids\")||{}},setPushHistoryUserIds:function(a){XF.LocalStorage.setJson(\"push_history_user_ids\",\na||{})},hasUserPreviouslySubscribed:function(a){return XF.Push.getPushHistoryUserIds().hasOwnProperty(a||XF.config.userId)},addUserToPushHistory:function(a){var b=XF.Push.getPushHistoryUserIds();b[a||XF.config.userId]=!0;XF.Push.setPushHistoryUserIds(b)},removeUserFromPushHistory:function(a){var b=XF.Push.getPushHistoryUserIds();delete b[a||XF.config.userId];XF.Push.setPushHistoryUserIds(b)},handleUnsubscribeAction:function(a,b){XF.Push.isSubscribed&&XF.Push.serviceWorkerReg.pushManager.getSubscription().then(function(a){if(a)return f=\na,a.unsubscribe()}).catch(function(a){console.error(\"Error unsubscribing\",a);b&&b()}).then(function(){f&&XF.Push.updateUserSubscription(f,\"unsubscribe\");XF.Push.isSubscribed=!1;a&&a()})},handleSubscribeAction:function(a,b,c){XF.Push.isSubscribed||Notification.requestPermission().then(function(d){\"granted\"!==d?console.error(\"Permission was not granted\"):(d=XF.Push.base64ToUint8(XF.config.pushAppServerKey),XF.Push.serviceWorkerReg.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:d}).then(function(c){XF.Push.updateUserSubscription(c,\n\"insert\");XF.Push.isSubscribed=!0;c={body:XF.phrase(\"push_enable_notification_body\"),dir:XF.isRtl()?\"rtl\":\"ltr\"};XF.config.publicMetadataLogoUrl&&(c.icon=XF.config.publicMetadataLogoUrl);XF.config.publicPushBadgeUrl&&(c.badge=XF.config.publicPushBadgeUrl);a||XF.Push.serviceWorkerReg.showNotification(XF.phrase(\"push_enable_notification_title\"),c);XF.config.userId&&XF.Push.addUserToPushHistory();b&&b()}).catch(function(a){console.error(\"Failed to subscribe the user: \",a);c&&c()}))})},handleToggleAction:function(a,\nb,c,d){XF.Push.isSubscribed?XF.Push.handleUnsubscribeAction(a,b):XF.Push.handleSubscribeAction(!1,c,d)},updateUserSubscription:function(a,b){if(\"update\"!==b||!XF.Cookie.get(\"push_subscription_updated\")){var c=a.getKey(\"p256dh\"),e=a.getKey(\"auth\"),f=(PushManager.supportedContentEncodings||[\"aesgcm\"])[0];d.ajax({url:XF.canonicalizeUrl(\"index.php?misc/update-push-subscription\"),type:\"post\",data:{endpoint:a.endpoint,key:c?btoa(String.fromCharCode.apply(null,new Uint8Array(c))):null,token:e?btoa(String.fromCharCode.apply(null,\nnew Uint8Array(e))):null,encoding:f,unsubscribed:\"unsubscribe\"===b?1:0,_xfResponseType:\"json\",_xfToken:XF.config.csrf},cache:!1,dataType:\"json\",global:!1}).always(function(){\"update\"===b&&XF.Cookie.set(\"push_subscription_updated\",\"1\")})}},isSupported:function(){return XF.config.enablePush&&XF.config.pushAppServerKey&&\"public\"===XF.getApp()&&\"serviceWorker\"in navigator&&\"PushManager\"in k&&\"Notification\"in k},base64ToUint8:c,isExpectedServerKey:e}}(),XF.BbBlockExpand=function(){function a(a){d(a).find(\".bbCodeBlock--expandable:not(.is-expanded)\").each(function(){var a=\nd(this),b=a.find(\".bbCodeBlock-expandContent\")[0];if(b){var f,g=0,l=function(){var c=b.scrollHeight,d=b.offsetHeight;0==c||0==d?2E3<g||(f&&(clearTimeout(f),g+=200),f=setTimeout(l,g)):c>d+1?a.addClass(\"is-expandable\"):a.removeClass(\"is-expandable\")};l();if(!a.data(\"expand-check-triggered\")&&(a.data(\"expand-check-triggered\",!0),a.find(\"img\").one(\"load\",l),k.MutationObserver)){var h,p=!0,q=function(){p=!1;l();setTimeout(function(){p=!0},100)};var t=new MutationObserver(function(b){a.hasClass(\"is-expanded\")?\nt.disconnect():p&&(h&&clearTimeout(h),h=setTimeout(q,200))});t.observe(this,{attributes:!0,childList:!0,subtree:!0})}}})}return{watch:function(){d(h).on(\"click\",\".bbCodeBlock-expandLink\",function(a){d(a.target).closest(\".bbCodeBlock--expandable\").addClassTransitioned(\"is-expanded\",XF.layoutChange)});d(k).onPassive(\"resize\",function(){a(h)});d(h).on(\"embed:loaded\",function(){a(h)})},checkSizing:a}}(),XF.UnfurlLoader=function(){function a(){function d(a){var b=null===g?a:a.substring(g);var c=b.indexOf(\"\\n\");\n-1!==c&&(b=b.substring(0,c),g=null===g?b.length:g+b.length,g++,XF.UnfurlLoader.handleResponse(JSON.parse(b)),g<a.length&&d(a))}if(b.length&&!c){var g=null;c=!0;XF.ajax(\"post\",XF.canonicalizeUrl(\"unfurl.php\"),{result_ids:b},function(a){d(a)},{skipDefault:!0,dataType:\"text\",xhrFields:{onprogress:function(a){a=a.currentTarget.response;a.length&&d(a)}}}).always(function(){b=[];c=!1;g=null;e&&(b=e,e=[],c=!1,setTimeout(a,0))})}}var b=[],c=!1,e=[];return{activateContainer:function(f){f=d(f).find(\".js-unfurl\");\nf.length&&(f.each(function(){var a=d(this);if(!1===a.data(\"pending\")||a.data(\"pending-seen\"))return!0;a.data(\"pending-seen\",!0);a=a.data(\"result-id\");c?e.push(a):b.push(a)}),a())},unfurl:a,handleResponse:function(a){var b=d('.js-unfurl[data-result-id=\"'+a.result_id+'\"]');b.length&&(a.success?XF.setupHtmlInsert(a.html,function(a,c,d){b.replaceWith(a)}):(a=b.find(\".js-unfurl-title a\"),a.text(b.data(\"url\")).addClass(\"bbCodePlainUnfurl\").removeClass(\"fauxBlockLink-blockLink\"),b.replaceWith(a)))}}}(),\nXF.Event=function(){var a=new XF.ClassMapper,b={},c=function(b,c,e){b=d(b);var f=b.data(\"xf-\"+c).split(\" \")||[],g=b.data(\"xf-\"+c+\"-handlers\")||{},l;for(l=0;l<f.length;l++){var h=f[l];if(h.length){if(!g[h]){var k=a.getObjectFromIdentifier(h);if(!k){console.error(\"Could not find %s handler for %s\",c,h);continue}var v=b.data(\"xf-\"+h)||{};g[h]=new k(b,v)}if(e&&!1===g[h]._onEvent(e))break}}b.data(\"xf-\"+c+\"-handlers\",g);return g},e=XF.create({initialized:!1,eventType:\"click\",eventNameSpace:null,$target:null,\noptions:{},__construct:function(a,b){this.$target=a;this.options=XF.applyDataOptions(this.options,a.data(),b);this.eventType=this.eventType.toLowerCase();if(!this.eventNameSpace)throw Error(\"Please provide an eventNameSpace for your extended \"+this.eventType+\" handler class\");this._init()},_init:function(){var a=new d.Event(\"xf-\"+this.eventType+\":before-init.\"+this.eventNameSpace),b=!1;this.$target.trigger(a,[this]);a.isDefaultPrevented()||(b=this.init(),this.$target.trigger(\"xf-\"+this.eventType+\n\":after-init.\"+this.eventNameSpace,[this,b]));this.initialized=!0;return b},_onEvent:function(a){var b=new d.Event(\"xf-\"+this.eventType+\":before-\"+this.eventType+\".\"+this.eventNameSpace);this.$target.trigger(b,[this]);if(!b.isDefaultPrevented()){if(\"function\"==typeof this[this.eventType])b=this[this.eventType](a);else if(\"function\"==typeof this.onEvent)b=this.onEvent(a);else return console.error(\"You must provide a %1$s(e) method for your %1$s event handler\",this.eventType,this.eventNameSpace),a.preventDefault(),\n!1;this.$target.trigger(\"xf-\"+this.eventType+\":after-\"+this.eventType+\".\"+this.eventNameSpace,[this,b,a])}return null},init:function(){console.error(\"This is the abstract init method for XF.%s, which must be overridden.\",this.eventType,this.eventNameSpace)}});return{watch:function(a){function e(a,b){b||(b=a.currentTarget);if(!b||!b.getAttribute)return!1;b=d(b);return b.is(\"a\")&&!b.data(\"click-allow-modifier\")&&(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey||1<a.which)||b.closest(\"[contenteditable=true]\").length?\n!1:!0}a=String(a).toLowerCase();b.hasOwnProperty(a)||(b[a]=!0,d(h).on(a,\"[data-xf-\"+a+\"]\",function(b){var f=b.currentTarget;if(e(b,f)){var g=d(f).data(\"xf-pointer-type\");b.xfPointerType=b.pointerType||g||\"\";c(f,a,b)}}),d(h).on(\"pointerdown\",\"[data-xf-\"+a+\"]\",function(a){var b=a.currentTarget;e(a,b)&&d(b).data(\"xf-pointer-type\",a.pointerType)}))},initElement:c,getElementHandler:function(a,b,c){var d=a.data(\"xf-\"+c+\"-handlers\");d||(d=XF.Event.initElement(a[0],c));return d&&d[b]?d[b]:null},register:function(b,\nc,d){XF.Event.watch(b);a.add(c,d)},extend:function(b,c){a.extend(b,c)},newHandler:function(a){return XF.extend(e,a)},AbstractHandler:e}}(),XF.Click=function(){return{watch:function(){return XF.Event.watch(\"click\")},initElement:function(a,b){return XF.Event.initElement(a,\"click\",b)},getElementHandler:function(a,b){return XF.Event.getElementHandler(a,b,\"click\")},register:function(a,b){XF.Event.watch(\"click\");return XF.Event.register(\"click\",a,b)},extend:function(a,b){return XF.Event.extend(a,b)},newHandler:function(a){return XF.Event.newHandler(a)}}}(),\nXF.Element=function(){var a=[],b=new XF.ClassMapper,c=function(c,d,e){var f=c.data(\"xf-element-handlers\")||{};if(f[d])return f[d];var g=b.getObjectFromIdentifier(d);if(!g)return null;e=new g(c,e||{});f[d]=e;c.data(\"xf-element-handlers\",f);c=\"XF.Element.Handler.\"+d;a[c]=a[c]||[];a[c].push(e);e.init();return e},e=function(a){a instanceof d&&(a=a[0]);if(a&&a.getAttribute){var b=a.getAttribute(\"data-xf-init\");if(b){b=b.split(\" \");var e=b.length;a=d(a);for(var f,g=0;g<e;g++)(f=b[g])&&c(a,f,a.data(\"xf-\"+\nf))}}},f=function(a){a=d(a);1<a.length?a.each(function(){f(this)}):(a.is(\"[data-xf-init]\")&&e(a[0]),a.find(\"[data-xf-init]\").each(function(){e(this)}))},g=XF.create({$target:null,options:{},__construct:function(a,b){this.$target=a;this.options=XF.applyDataOptions(this.options,a.data(),b)},init:function(){console.error(\"This is the abstract init method for XF.Element, which should be overridden.\")},getOption:function(a){return this.options[a]}});return{register:function(a,c){b.add(a,c)},extend:function(a,\nc){b.extend(a,c)},initialize:f,initializeElement:e,applyHandler:c,getHandler:function(a,b){var c=a.data(\"xf-element-handlers\");void 0===c&&(e(a),c=a.data(\"xf-element-handlers\"));return c&&c[b]?c[b]:null},getHandlers:function(b){b=\"XF.Element.Handler.\"+b;return\"undefined\"!=typeof a[b]?a[b]:!1},newHandler:function(a){return XF.extend(g,a)},AbstractHandler:g}}(),XF.AutoCompleteResults=XF.create({selectedResult:0,$results:!1,$scrollWatchers:null,resultsVisible:!1,resizeBound:!1,options:{},__construct:function(a){this.options=\nd.extend({onInsert:null,clickAttacher:null,beforeInsert:null,insertMode:\"text\",displayTemplate:\"{{{icon}}}{{{text}}}\"},a)},isVisible:function(){return this.resultsVisible},hideResults:function(){this.resultsVisible=!1;this.$results&&this.$results.hide();this.stopScrollWatching()},stopScrollWatching:function(){this.$scrollWatchers&&(this.$scrollWatchers.off(\"scroll.autocomplete\"),this.$scrollWatchers=null)},showResults:function(a,b,c,e){var f;if(b){this.resultsVisible=!1;this.$results?this.$results.hide().empty():\n(this.$results=d(\"<ul />\").css({position:\"absolute\",display:\"none\"}).addClass(\"autoCompleteList\").attr(\"role\",\"listbox\").appendTo(h.body),XF.setRelativeZIndex(this.$results,c,1));a=new RegExp(\"(\"+XF.regexQuote(a)+\")\",\"i\");for(f in b)if(b.hasOwnProperty(f)){var g=b[f];var l=d(\"<li />\").css(\"cursor\",\"pointer\").attr(\"unselectable\",\"on\").attr(\"role\",\"option\").mouseenter(XF.proxy(this,\"resultMouseEnter\"));this.options.clickAttacher?this.options.clickAttacher(l,XF.proxy(this,\"resultClick\")):l.click(XF.proxy(this,\n\"resultClick\"));var m={icon:\"\",text:\"\",desc:\"\"};if(\"string\"==typeof g){var p=g;m.text=XF.htmlspecialchars(g)}else p=g.text,m.text=XF.htmlspecialchars(g.text),\"undefined\"!==typeof g.desc&&(m.desc=XF.htmlspecialchars(g.desc)),\"undefined\"!==typeof g.icon?m.icon=d('<img class=\"autoCompleteList-icon\" />').attr(\"src\",XF.htmlspecialchars(g.icon)):\"undefined\"!==typeof g.iconHtml&&(m.icon=d('<span class=\"autoCompleteList-icon\" />').html(g.iconHtml)),m.icon&&(m.icon=m.icon[0].outerHTML);l.data(\"insert-text\",\np);l.data(\"insert-html\",g.html||\"\");m.text=m.text.replace(a,\"<strong>$1</strong>\");m.desc=m.desc.replace(a,\"<strong>$1</strong>\");l.html(Mustache.render(this.options.displayTemplate,m)).appendTo(this.$results)}if(this.$results.children().length){this.selectResult(0,!0);if(!this.resizeBound)d(k).onPassive(\"resize\",XF.proxy(this,\"hideResults\"));this.$results.css({top:\"\",left:\"\",right:\"\",bottom:\"\"});var q=this.$results,t=function(a){d.isFunction(a)&&(a=a(q,c));if(!a){var b=c.offset();a={top:b.top+c.outerHeight(),\nleft:b.left};XF.isRtl()&&(a.right=d(\"html\").width()-b.left-c.outerWidth(),a.left=\"auto\")}return a};this.stopScrollWatching();(b=c.parents().filter(function(){switch(d(this).css(\"overflow-x\")){case \"scroll\":case \"auto\":return!0;default:return!1}}))&&b.length&&(b.on(\"scroll.autocomplete\",function(){q.css(t(e))}),this.$scrollWatchers=b);this.$results.css(t(e)).show();this.resultsVisible=!0}}else this.hideResults()},resultClick:function(a){a.stopPropagation();this.insertResult(this.getResultText(a.currentTarget));\nthis.hideResults()},resultMouseEnter:function(a){this.selectResult(d(a.currentTarget).index(),!0)},selectResult:function(a,b){if(this.$results){var c=this.selectedResult=b?a:this.selectedResult+a;a=this.$results.children();a.each(function(a){a==c?d(this).addClass(\"is-selected\"):d(this).removeClass(\"is-selected\")});if(0>c||c>=a.length)this.selectedResult=-1}},insertSelectedResult:function(){var a,b=!1;if(!this.resultsVisible)return!1;0<=this.selectedResult&&(a=this.$results.children().get(this.selectedResult))&&\n(b=this.getResultText(a),this.options.beforeInsert&&(b=this.options.beforeInsert(b,a)),this.insertResult(b),b=!0);this.hideResults();return b},insertResult:function(a){if(this.options.onInsert)this.options.onInsert(a)},getResultText:function(a){switch(this.options.insertMode){case \"text\":var b=d(a).data(\"insert-text\");break;case \"html\":b=d(a).data(\"insert-html\")}return b}}),XF.AutoCompleter=XF.create({options:{url:null,method:\"GET\",idleWait:200,minLength:2,at:\"@\",keepAt:!0,insertMode:\"text\",displayTemplate:\"{{{icon}}}{{{text}}}\",\nbeforeInsert:null},$input:null,ed:null,results:null,visible:!1,idleTimer:null,pendingQuery:\"\",__construct:function(a,b,c){this.options=d.extend(!0,{},this.options,b);this.$input=a;this.ed=c;this.options.url?((\"string\"!=typeof this.options.at||1<this.options.at.length)&&console.error(\"The 'at' option should be a single character string.\"),this.init()):console.error(\"No URL option passed in to XF.AutoCompleter.\")},init:function(){var a=this,b={onInsert:function(b){a.insertResult(b)},beforeInsert:this.options.beforeInsert,\ninsertMode:this.options.insertMode,displayTemplate:this.options.displayTemplate};this.ed&&(b.clickAttacher=function(b,d){a.ed.events.bindClick(b,b,d)});this.results=new XF.AutoCompleteResults(b);this.ed?(this.ed.events.on(\"keydown\",XF.proxy(this,\"keydown\"),!0),this.ed.events.on(\"keyup\",XF.proxy(this,\"keyup\"),!0),this.ed.events.on(\"click blur\",XF.proxy(this,\"blur\")),this.ed.$wp.onPassive(\"scroll\",XF.proxy(this,\"blur\"))):(this.$input.on(\"keydown\",XF.proxy(this,\"keydown\")),this.$input.on(\"keyup\",XF.proxy(this,\n\"keyup\")),this.$input.on(\"click blur\",XF.proxy(this,\"blur\")),d(h).onPassive(\"scroll\",XF.proxy(this,\"blur\")))},keydown:function(a){if(this.visible)switch(a.which){case 40:return this.results.selectResult(1),a.preventDefault(),!1;case 38:return this.results.selectResult(-1),a.preventDefault(),!1;case 27:return this.hide(),a.preventDefault(),!1;case 13:if(this.visible)return this.results.insertSelectedResult(),a.preventDefault(),!1}},keyup:function(a){if(this.visible)switch(a.which){case 40:case 38:case 13:return}this.hide();\nthis.idleTimer&&clearTimeout(this.idleTimer);this.idleTimer=setTimeout(XF.proxy(this,\"lookForMatch\"),this.options.idleWait)},blur:function(){this.visible&&setTimeout(XF.proxy(this,\"hide\"),250)},lookForMatch:function(){var a=this.getCurrentMatchInfo();a?this.foundMatch(a.query):this.hide()},getCurrentMatchInfo:function(){if(this.ed){var a=this.ed.selection.ranges(0);if(!a||!a.collapsed)return null;var b=a.endContainer;if(!b||3!==b.nodeType)return null;var c=b;b=b.nodeValue.substring(0,a.endOffset)}else{b=\nthis.$input;b.autofocus();a=b.getSelection();if(!a||1>=a.end)return!1;b=b.val().substring(0,a.end)}var d=b.lastIndexOf(this.options.at);if(-1===d)return null;if(0===d||b.substr(d-1,1).match(/(\\s|[\\](,]|--)/)){var f=b.substr(d+1);if(!f.match(/\\s/)||15>=f.length)return{text:b,textNode:c,start:d,query:f.replace(new RegExp(String.fromCharCode(160),\"g\"),\" \"),range:a}}return null},foundMatch:function(a){this.pendingQuery!==a&&(this.pendingQuery=a,a.length>=this.options.minLength&&\"[\"!==a.substr(0,1)&&this.getPendingQueryOptions())},\ngetPendingQueryOptions:function(){XF.ajax(this.options.method,this.options.url,{q:this.pendingQuery},XF.proxy(this,\"handlePendingQueryOptions\"),{global:!1,error:!1})},handlePendingQueryOptions:function(a){var b=this.getCurrentMatchInfo();a.q&&b&&a.q===b.query&&(a.results&&a.results.length?this.show(a.q,a.results):this.hide())},insertResult:function(a){this.hide();var b=this.getCurrentMatchInfo();if(b){var c=b.start+1,e=b.range;if(this.ed){this.ed.selection.save();XF.EditorHelpers.focus(this.ed);e=\nb.textNode;var f=e.nodeValue,g=e.splitText(this.options.keepAt?c:c-1);g.textContent=f.substr(c+b.query.length);a=\"html\"===this.options.insertMode?d.parseHTML(a+\"\\u00a0\"):h.createTextNode(a+\"\\u00a0\");d(g).before(a);e.parentNode.normalize();this.ed.selection.restore()}else g=this.$input,g.autofocus(),-1!==c&&(g.setSelection(b.start,e.end),g.replaceSelectedText((this.options.keepAt?this.options.at:\"\")+a+\" \",\"collapseToEnd\"))}},show:function(a,b){var c=this.getCurrentMatchInfo(),e=this.$input,f=e.dimensions(),\ng=this;if(c)if(this.visible=!0,this.ed){var l=c.range;this.results.showResults(a,b,e,function(a){if(!l||!l.getBoundingClientRect)return a=l.startContainer,{top:(3===a.nodeType?d(a.parentNode):d(a)).dimensions().bottom+3,left:f.left+5};var b=l.cloneRange();b.setStart(c.textNode,c.start);b.setEnd(c.textNode,c.start+1);b=b.getBoundingClientRect();return g.getResultPositionForSelection(b.left,b.bottom,l.getBoundingClientRect().left,a,f)})}else this.results.showResults(a,b,e,function(a){for(var b=d(\"<div />\"),\nl=k.getComputedStyle(e[0]),m,n=\"\",v=0;v<l.length;v++)m=l[v],n+=m+\": \"+l.getPropertyValue(m)+\"; \";b[0].style.cssText=n;b.css({position:\"absolute\",height:\"\",width:e.outerWidth(),opacity:0,top:0,left:\"-9999px\"});b[0].textContent=e.val();b.appendTo(h.body);n=h.createRange();n.setStart(b[0].firstChild,c.start);n.setEnd(b[0].firstChild,c.start+1);v=n.getBoundingClientRect();var r=b.dimensions();l=f.left+(v.left-r.left);m=f.top+(v.bottom-r.top);n.setStart(b[0].firstChild,c.start+1+c.query.length);n.setEnd(b[0].firstChild,\nc.start+1+c.query.length);v=n.getBoundingClientRect();n=f.left+(v.left-r.left);b.remove();return g.getResultPositionForSelection(l,m,n,a,f)})},getResultPositionForSelection:function(a,b,c,e,f){e=e.width();b=b+d(k).scrollTop()+3;a+e>f.right&&(a=c-e);a<f.left&&(a=f.left);return{top:b,left:a}},hide:function(){this.visible&&(this.visible=!1,this.results.hideResults())}}),XF.pageDisplayTime=Date.now(),d(XF.onPageLoad),d(k).on(\"pageshow\",function(){if(!XF.pageDisplayTime||Date.now()>XF.pageDisplayTime)XF.pageDisplayTime=\nDate.now()}))}(window.jQuery,window,document);\n\nvar $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,e,g){c instanceof String&&(c=String(c));for(var h=c.length,a=0;a<h;a++){var b=c[a];if(e.call(g,b,a,c))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(c,e,g){c!=Array.prototype&&c!=Object.prototype&&(c[e]=g.value)};\n$jscomp.getGlobal=function(c){return\"undefined\"!=typeof window&&window===c?c:\"undefined\"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,e,g,h){if(e){g=$jscomp.global;c=c.split(\".\");for(h=0;h<c.length-1;h++){var a=c[h];a in g||(g[a]={});g=g[a]}c=c[c.length-1];h=g[c];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(g,c,{configurable:!0,writable:!0,value:e})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(c){return c?c:function(c,g){return $jscomp.findInternal(this,c,g).v}},\"es6\",\"es3\");\n!function(c,e,g,h){XF.AttributionClick=XF.Event.newHandler({eventType:\"click\",eventNameSpace:\"XFAttributionClick\",options:{contentSelector:null},init:function(){},click:function(a){var b=this.options.contentSelector,d=c(b);if(d.length){try{var f=d.offset().top;\"pushState\"in e.history&&e.history.pushState({},\"\",e.location.toString().replace(/#.*$/,\"\")+b);c(\"html, body\").animate({scrollTop:f},XF.config.speed.normal,function(){e.history.pushState||(e.location.hash=b)})}catch(l){e.location.hash=b}a.preventDefault()}}});\nXF.LikeClick=XF.Event.newHandler({eventType:\"click\",eventNameSpace:\"XFLikeClick\",options:{likeList:null,container:null},processing:!1,container:null,init:function(){this.options.container&&(this.$container=XF.findRelativeIf(this.options.container,this.$target))},click:function(a){a.preventDefault();if(!this.processing){this.processing=!0;a=this.$target.attr(\"href\");var b=this;XF.ajax(\"POST\",a,{},XF.proxy(this,\"handleAjax\"),{skipDefaultSuccess:!0}).always(function(){setTimeout(function(){b.processing=\n!1},250)})}},handleAjax:function(a){var b=this.$target;a.addClass&&b.addClass(a.addClass);a.removeClass&&b.removeClass(a.removeClass);if(a.text){var d=b.find(\".label\");d.length||(d=b);d.text(a.text)}a.hasOwnProperty(\"isLiked\")&&(b.toggleClass(\"is-liked\",a.isLiked),this.$container&&this.$container.toggleClass(\"is-liked\",a.isLiked));var f=this.options.likeList?XF.findRelativeIf(this.options.likeList,b):c([]);\"undefined\"!==typeof a.html&&f.length&&(a.html.content?XF.setupHtmlInsert(a.html,function(a,\nb){f.html(a).addClassTransitioned(\"is-active\")}):f.removeClassTransitioned(\"is-active\",function(){f.empty()}))}});XF.PreviewClick=XF.Event.newHandler({eventType:\"click\",eventNameSpace:\"XFPreviewClick\",options:{previewUrl:\"\"},$form:null,href:null,loading:!1,init:function(){this.$form=this.$target.closest(\"form\");var a=this.$form.data(\"preview-url\")||this.options.previewUrl||this.$target.attr(\"href\");if(a)if(this.href=a,this.getCurrentContainer())this.$form.on(\"preview:hide\",XF.proxy(this,\"onPreviewHide\"));\nelse console.error(\"Preview form must have a .js-previewContainer element\");else console.error(\"Preview button must have a href\")},click:function(a){if(this.href&&(a.preventDefault(),!this.loading)){this.loading=!0;(a=XF.Element.getHandler(this.$form,\"draft\"))&&a.triggerSave();var b=this;a=XF.getDefaultFormData(this.$form);XF.ajax(\"post\",this.href,a,XF.proxy(this,\"onLoad\")).always(function(){b.loading=!1})}},onLoad:function(a){if(a.html){var b=this.getCurrentContainer();a.html.content?XF.setupHtmlInsert(a.html,\nfunction(a,c,e){b.removeClassTransitioned(\"is-active\",function(){b.replaceWith(a);e();a.addClassTransitioned(\"is-active\")});return!1}):b.xfFadeUp(XF.config.speed.fast)}},onPreviewHide:function(a){this.getCurrentContainer().removeClassTransitioned(\"is-active\")},getCurrentContainer:function(){return this.$form.find(\".js-previewContainer\").first()}});XF.handleSwitchResponse=function(a,b,d){if(b.switchKey){var f=a.data(\"sk-\"+b.switchKey);if(f){for(var e,g;e=f.match(/(\\s*,)?\\s*(addClass|removeClass):([^,]+)(,|$)/);)if(f=\nf.substring(e[0].length),g=c.trim(e[3]),g.length)switch(e[2]){case \"addClass\":a.addClass(g);break;case \"removeClass\":a.removeClass(g)}f=c.trim(f);f.length&&!b.text&&(b.text=f)}}b.addClass&&a.addClass(b.addClass);b.removeClass&&a.removeClass(b.removeClass);b.text&&(f=a.find(a.data(\"label\")),f.length||(f=a),f.text(b.text));if(b.message){var h=d&&b.redirect;XF.flashMessage(b.message,h?1E3:3E3,function(){h&&XF.redirect(b.redirect)})}};XF.ScrollToClick=XF.Event.newHandler({eventType:\"click\",eventNameSpace:\"XFScrollToClick\",\noptions:{target:null,silent:!1,hash:null,speed:300},$scroll:null,init:function(){var a,b=this.options.hash,d=this.$target.attr(\"href\");this.options.target&&(a=XF.findRelativeIf(this.options.target,this.$target));if(!a||!a.length)if(d&&d.length&&\"#\"==d.charAt(0))a=c(d);else if(this.options.silent)return;if(a&&a.length)if(this.$scroll=a,!0===b||\"true\"===b)a=a.attr(\"id\"),this.options.hash=a&&a.length?a:null;else{if(!1===b||\"false\"===b)this.options.hash=null}else console.error(\"No scroll target could be found\")},\nclick:function(a){if(this.$scroll){a.preventDefault();var b=this.options.hash;c(\"html, body\").animate({scrollTop:this.$scroll.offset().top},this.options.speed,null,function(){b&&(e.location.hash=b)})}}});XF.SwitchClick=XF.Event.newHandler({eventType:\"click\",eventNameSpace:\"XFSwitchClick\",options:{redirect:!1,label:\".js-label\"},processing:!1,init:function(){this.$target.data(\"label\",this.options.label)},click:function(a){a.preventDefault();if(!this.processing){this.processing=!0;a=this.$target.attr(\"href\");\nvar b=this;XF.ajax(\"POST\",a,{},XF.proxy(this,\"handleAjax\"),{skipDefaultSuccess:!0}).always(function(){setTimeout(function(){b.processing=!1},250)})}},handleAjax:function(a){var b=this.$target,d=c.Event(\"switchclick:complete\");b.trigger(d,a,this);d.isDefaultPrevented()||XF.handleSwitchResponse(b,a,this.options.redirect)}});XF.SwitchOverlayClick=XF.Event.newHandler({eventType:\"click\",eventNameSpace:\"XFSwitchOverlayClick\",options:{redirect:!1},overlay:null,init:function(){},click:function(a){a.preventDefault();\nthis.overlay?this.overlay.show():(a=this.$target.attr(\"href\"),XF.loadOverlay(a,{cache:!1,init:XF.proxy(this,\"setupOverlay\")}))},setupOverlay:function(a){this.overlay=a;a.getOverlay().find(\"form\").on(\"ajax-submit:response\",XF.proxy(this,\"handleOverlaySubmit\"));var b=this;a.on(\"overlay:hidden\",function(){b.overlay=null});return a},handleOverlaySubmit:function(a,b){\"ok\"==b.status&&(a.preventDefault(),(a=this.overlay)&&a.hide(),XF.handleSwitchResponse(this.$target,b,this.options.redirect))}});XF.Draft=\nXF.Element.newHandler({options:{draftAutosave:60,draftName:\"message\",draftUrl:null,saveButton:\".js-saveDraft\",deleteButton:\".js-deleteDraft\",actionIndicator:\".draftStatus\"},lastActionContent:null,autoSaveRunning:!1,init:function(){if(this.options.draftUrl){var a=this;this.$target.on(this.options.saveButton,\"click\",function(b){b.preventDefault();a.triggerSave()});this.$target.on(this.options.deleteButton,\"click\",function(b){b.preventDefault();a.triggerDelete()});var b=XF.proxy(this,\"syncState\");this.syncState();\nsetTimeout(b,500);this.$target.on(\"draft:sync\",b);setInterval(XF.proxy(this,\"triggerSave\"),1E3*this.options.draftAutosave)}else console.error(\"No draft URL specified.\")},triggerSave:function(){if(!XF.isRedirecting){var a=c.Event(\"draft:beforesave\");this.$target.trigger(a);a.isDefaultPrevented()||this._executeDraftAction(this.getSaveData())}},triggerDelete:function(){this.lastActionContent=this.getSaveData();this._sendDraftAction(\"delete=1\")},_executeDraftAction:function(a){if(a!=this.lastActionContent){if(this.autoSaveRunning)return!1;\nthis.lastActionContent=a;this._sendDraftAction(a)}},_sendDraftAction:function(a){this.autoSaveRunning=!0;var b=this;return XF.ajax(\"post\",this.options.draftUrl,a,XF.proxy(this,\"completeAction\"),{skipDefault:!0,skipError:!0,global:!1}).always(function(){b.autoSaveRunning=!1})},completeAction:function(a){var b=c.Event(\"draft:complete\");this.$target.trigger(b,a);if(!b.isDefaultPrevented()){var d=this.$target.find(this.options.actionIndicator);d.removeClass(\"is-active\").text(a.complete).addClass(\"is-active\");\nsetTimeout(function(){d.removeClass(\"is-active\")},2E3)}},syncState:function(){this.lastActionContent=this.getSaveData()},getSaveData:function(){var a=this.$target;a.trigger(\"draft:beforesync\");return a.serialize().replace(/(^|&)_xfToken=[^&]+(?=&|$)/g,\"\").replace(/^&+/,\"\")}});XF.FocusTrigger=XF.Element.newHandler({options:{display:null,activeClass:\"is-active\"},init:function(){if(this.$target.attr(\"autofocus\"))this.trigger();else this.$target.one(\"focusin\",XF.proxy(this,\"trigger\"))},trigger:function(){var a=\nthis.options.display;a&&(a=XF.findRelativeIf(a,this.$target),a.length&&a.addClassTransitioned(this.options.activeClass))}});XF.PollBlock=XF.Element.newHandler({options:{},init:function(){this.$target.on(\"ajax-submit:response\",XF.proxy(this,\"afterSubmit\"))},afterSubmit:function(a,b){if(!b.errors&&!b.exception){a.preventDefault();b.redirect&&XF.redirect(b.redirect);var c=this;XF.setupHtmlInsert(b.html,function(a,b){a.hide();a.insertAfter(c.$target);c.$target.xfFadeUp(null,function(){c.$target.remove();\na.xfFadeDown()})})}}});XF.Preview=XF.Element.newHandler({options:{previewUrl:null,previewButton:\"button.js-previewButton\"},previewing:null,init:function(){var a=this.$target,b=XF.findRelativeIf(this.options.previewButton,a);if(this.options.previewUrl)if(b.length)b.on({click:XF.proxy(this,\"preview\")});else console.warn(\"Preview form has no preview button: %o\",a);else console.warn(\"Preview form has no data-preview-url: %o\",a)},preview:function(a){a.preventDefault();if(this.previewing)return!1;this.previewing=\n!0;(a=XF.Element.getHandler(this.$target,\"draft\"))&&a.triggerSave();var b=this;XF.ajax(\"post\",this.options.previewUrl,this.$target.serializeArray(),function(a){a.html&&XF.setupHtmlInsert(a.html,function(a,b,c){XF.overlayMessage(b.title,a)})}).always(function(){b.previewing=!1})}});XF.ShareButtons=XF.Element.newHandler({options:{buttons:\".shareButtons-button\",iconic:\".shareButtons--iconic\",pageUrl:null,pageTitle:null,pageDesc:null},pageTitle:null,pageDesc:null,pageUrl:null,clipboard:null,init:function(){var a=\nthis.options.buttons,b=this.options.iconic;this.$target.on(\"focus mouseenter\",a,XF.proxy(this,\"focus\")).on(\"click\",a,XF.proxy(this,\"click\"));\"string\"==typeof b&&(b=this.$target.is(b));this.$target.find(a).each(function(){var a=c(this);b&&XF.Element.applyHandler(a,\"element-tooltip\",{element:\"> span\"});a.data(\"clipboard\")&&Clipboard.isSupported()&&a.removeClass(\"is-hidden\")})},setupPageData:function(){this.options.pageTitle&&this.options.pageTitle.length?this.pageTitle=this.options.pageTitle:(this.pageTitle=\nc('meta[property=\"og:title\"]').attr(\"content\"),this.pageTitle||(this.pageTitle=c(\"title\").text()));this.options.pageUrl&&this.options.pageUrl.length?this.pageUrl=this.options.pageUrl:(this.pageUrl=c('meta[property=\"og:url\"]').attr(\"content\"),this.pageUrl||(this.pageUrl=e.location.href));if(this.options.pageDesc&&this.options.pageDesc.length)this.pageDesc=this.options.pageDesc;else if(this.pageDesc=c('meta[property=\"og:description\"]').attr(\"content\"))this.pageDesc=c(\"meta[name=description]\").attr(\"content\")||\n\"\"},focus:function(a){var b=c(a.currentTarget);if(!b.attr(\"href\")){this.pageUrl||this.setupPageData();var d=b.data(\"href\");if(d)d=d.replace(\"{url}\",encodeURIComponent(this.pageUrl)).replace(\"{title}\",encodeURIComponent(this.pageTitle)),b.attr(\"href\",d);else if(!b.data(\"clipboard\"))console.error(\"No data-href on share button %o\",a.currentTarget);else if(!this.clipboard){var f=this;this.clipboard=new Clipboard(b[0],{text:function(a){return c(a).data(\"clipboard\").replace(\"{url}\",f.pageUrl).replace(\"{title}\",\nf.pageTitle)}});this.clipboard.on(\"success\",function(){XF.flashMessage(XF.phrase(\"link_copied_to_clipboard\"),3E3)})}}},click:function(a){var b=c(a.currentTarget).attr(\"href\");!b||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||!b.match(/^https?:/i)||(a.preventDefault(),e.open(b,\"share\",\"toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=400,left=\"+(screen.width-600)/2+\",top=\"+(screen.height-400)/2))}});XF.ShareInput=XF.Element.newHandler({options:{button:\".js-shareButton\",\ninput:\".js-shareInput\",successText:\"\"},init:function(){var a=this.$target.find(this.options.button),b=this.$target.find(this.options.input);Clipboard.isSupported()&&a.removeClass(\"is-hidden\");(new Clipboard(a[0],{target:function(a){return b[0]}})).on(\"success\",XF.proxy(this,\"success\"));b.on(\"click\",XF.proxy(this,\"click\"))},success:function(){XF.flashMessage(this.options.successText?this.options.successText:XF.phrase(\"text_copied_to_clipboard\"),3E3)},click:function(a){c(a.target).select()}});XF.CopyToClipboard=\nXF.Element.newHandler({options:{copyText:\"\",copyTarget:\"\",success:\"\"},copyText:null,init:function(){if(this.options.copyText)this.copyText=this.options.copyText;else if(this.options.copyTarget){var a=c(this.options.copyTarget);a.is('input[type=\"text\"], textarea')?this.copyText=a.val():this.copyText=a.text()}this.copyText||console.error(\"No text to copy to clipboard\");var b=this;(new Clipboard(this.$target[0],{text:function(a){return b.copyText}})).on(\"success\",function(){if(b.options.success)XF.flashMessage(b.options.success,\n3E3);else{var a=XF.phrase(\"text_copied_to_clipboard\");b.copyText.match(/^[a-z0-9-]+:\\/\\/[^\\s\"<>{}`]+$/i)&&(a=XF.phrase(\"link_copied_to_clipboard\"));XF.flashMessage(a,3E3)}})}});XF.PushToggle=XF.Element.newHandler({options:{},isSubscribed:!1,cancellingSub:null,init:function(){XF.Push.isSupported()?\"denied\"===Notification.permission?(this.updateButton(XF.phrase(\"push_blocked_label\"),!1),console.error(\"Notification.permission === denied\")):this.registerWorker():(this.updateButton(XF.phrase(\"push_not_supported_label\"),\n!1),console.error(\"XF.Push.isSupported() returned false\"))},registerWorker:function(){var a=this;XF.Push.registerWorker(function(){a.$target.on(\"click\",XF.proxy(a,\"buttonClick\"));c(g).on(\"push:init-subscribed\",function(){a.updateButton(XF.phrase(\"push_disable_label\"),!0)});c(g).on(\"push:init-unsubscribed\",function(){a.updateButton(XF.phrase(\"push_enable_label\"),!0)})},function(){a.updateButton(XF.phrase(\"push_not_supported_label\"),!1);console.error(\"navigator.serviceWorker.register threw an error.\")})},\nbuttonClick:function(a){var b=this;XF.Push.handleToggleAction(function(){b.updateButton(XF.phrase(\"push_enable_label\"),!0);XF.Cookie.set(\"push_notice_dismiss\",\"1\");XF.config.userId&&XF.Push.removeUserFromPushHistory()},!1,function(){b.updateButton(XF.phrase(\"push_disable_label\"),!0)},function(){b.updateButton(XF.phrase(\"push_not_supported_label\"),!1)})},updateButton:function(a,b){this.$target.find(\".button-text\").text(a);b?this.$target.removeClass(\"is-disabled\"):this.$target.addClass(\"is-disabled\")}});\nXF.PushCta=XF.Element.newHandler({options:{},init:function(){XF.config.skipPushNotificationCta||XF.Push.isSupported()&&\"denied\"!==Notification.permission&&this.registerWorker()},registerWorker:function(){var a=this;XF.Push.registerWorker(function(){c(g).on(\"push:init-unsubscribed\",function(){if(XF.Push.hasUserPreviouslySubscribed())try{XF.Push.handleSubscribeAction(!0)}catch(b){XF.Push.removeUserFromPushHistory()}else a.getDismissCookie()||a.$target.closest(\".js-enablePushContainer\").xfFadeDown(XF.config.speed.fast,\nXF.proxy(a,\"initLinks\"))})})},initLinks:function(){var a=this.$target;a.find(\".js-enablePushLink\").on(\"click\",XF.proxy(this,\"linkClick\"));a.siblings(\".js-enablePushDismiss\").on(\"click\",XF.proxy(this,\"dismissClick\"))},linkClick:function(a){a.preventDefault();this.hidePushContainer();this.setDismissCookie(!0,432E5);XF.Push.handleSubscribeAction(!1)},dismissClick:function(a){a.preventDefault();c(a.currentTarget).hide();this.$target.closest(\".js-enablePushContainer\").addClass(\"notice--accent\").removeClass(\"notice--primary\");\nthis.$target.find(\".js-initialMessage\").hide();a=this.$target.find(\".js-dismissMessage\");a.show();a.find(\".js-dismissTemp\").on(\"click\",XF.proxy(this,\"dismissTemp\"));a.find(\".js-dismissPerm\").on(\"click\",XF.proxy(this,\"dismissPerm\"))},dismissTemp:function(a){a.preventDefault();this.hidePushContainer();this.setDismissCookie(!1)},dismissPerm:function(a){a.preventDefault();this.hidePushContainer();this.setDismissCookie(!0)},setDismissCookie:function(a,b){a?(b||(b=31536E7),XF.Cookie.set(\"push_notice_dismiss\",\n\"1\",new Date(Date.now()+b))):XF.Cookie.set(\"push_notice_dismiss\",\"1\")},getDismissCookie:function(){return XF.Cookie.get(\"push_notice_dismiss\")},hidePushContainer:function(){this.$target.closest(\".js-enablePushContainer\").xfFadeUp(XF.config.speed.fast)}});XF.Reaction=XF.Element.newHandler({options:{delay:200,reactionList:null},$tooltipHtml:null,trigger:null,tooltip:null,href:null,init:function(){if(this.$target.is(\"a\")&&this.$target.attr(\"href\")){this.href=this.$target.attr(\"href\");var a=c(\"#xfReactTooltipTemplate\");\na.length&&(this.$tooltipHtml=c(c.parseHTML(a.html())),this.tooltip=new XF.TooltipElement(XF.proxy(this,\"getContent\"),{extraClass:\"tooltip--reaction\",html:!0}),this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,delayIn:this.options.delay,trigger:\"hover focus touchhold\",onShow:XF.proxy(this,\"onShow\"),onHide:XF.proxy(this,\"onHide\")}),this.trigger.init());this.$target.on(\"click\",XF.proxy(this,\"actionClick\"))}},getContent:function(){var a=this.href;a=a.replace(/(\\?|&)reaction_id=[^&]*(&|$)/,\n\"$1reaction_id=\");this.$tooltipHtml.find(\".reaction\").each(function(){var b=c(this),d=b.data(\"reaction-id\");b.attr(\"href\",d?a+parseInt(d,10):!1)});this.$tooltipHtml.find('[data-xf-init~=\"tooltip\"]').attr(\"data-delay-in\",50).attr(\"data-delay-out\",50);this.$tooltipHtml.on(\"click\",\".reaction\",XF.proxy(this,\"actionClick\"));return this.$tooltipHtml},onShow:function(){var a=XF.Reaction.activeTooltip;a&&a!==this&&a.hide();XF.Reaction.activeTooltip=this},onHide:function(){XF.Reaction.activeTooltip===this&&\n(XF.Reaction.activeTooltip=null);this.$target.removeData(\"tooltip:taphold\")},show:function(){this.trigger&&this.trigger.show()},hide:function(){this.trigger&&this.trigger.hide()},actionClick:function(a){a.preventDefault();this.$target.data(\"tooltip:taphold\")&&this.$target.is(a.currentTarget)?this.$target.removeData(\"tooltip:taphold\"):XF.ajax(\"post\",c(a.currentTarget).attr(\"href\"),XF.proxy(this,\"actionComplete\"))},actionComplete:function(a){if(a.html){var b=this.$target,d=b.data(\"reaction-id\"),f=a.reactionId,\ne=a.linkReactionId,g=this;XF.setupHtmlInsert(a.html,function(a,c,h){g.hide();c=a.find(\".js-reaction\");h=a.find(\".js-reactionText\");var l=b.find(\".js-reaction\"),m=b.find(\".js-reactionText\"),k=b.attr(\"href\");e&&(k=k.replace(/(\\?|&)reaction_id=\\d+(?=&|$)/,\"$1reaction_id=\"+e),b.attr(\"href\",k));f?(b.addClass(\"has-reaction\"),b.removeClass(\"reaction--imageHidden\"),d&&b.removeClass(\"reaction--\"+d),b.addClass(\"reaction--\"+f),b.data(\"reaction-id\",f)):(b.removeClass(\"has-reaction\"),b.addClass(\"reaction--imageHidden\"),\nd&&(b.removeClass(\"reaction--\"+d),b.addClass(\"reaction--\"+a.data(\"reaction-id\")),b.data(\"reaction-id\",0)));l.replaceWith(c);m&&h&&m.replaceWith(h)});var h=this.options.reactionList?XF.findRelativeIf(this.options.reactionList,b):c([]);\"undefined\"!==typeof a.reactionList&&h.length&&(a.reactionList.content?XF.setupHtmlInsert(a.reactionList,function(a,b){h.html(a).addClassTransitioned(\"is-active\")}):h.removeClassTransitioned(\"is-active\",function(){h.empty()}))}}});XF.Reaction.activeTooltip=null;XF.BookmarkClick=\nXF.Event.newHandler({eventType:\"click\",eventNameSpace:\"XFBookmarkClick\",processing:!1,href:null,tooltip:null,trigger:null,$tooltipHtml:null,clickE:null,init:function(){this.href=this.$target.attr(\"href\");this.tooltip=new XF.TooltipElement(XF.proxy(this,\"getTooltipContent\"),{extraClass:\"tooltip--bookmark\",html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,trigger:\"\"});this.trigger.init()},click:function(a){if(!(0<a.button||a.ctrlKey||a.shiftKey||a.metaKey||\na.altKey))if(a.preventDefault(),this.clickE=a,this.$target.hasClass(\"is-bookmarked\"))this.trigger.clickShow(a);else if(!this.processing){this.processing=!0;var b=this;XF.ajax(\"POST\",this.href,{tooltip:1},XF.proxy(this,\"handleSwitchClick\"),{skipDefaultSuccess:!0}).always(function(){setTimeout(function(){b.processing=!1},250)})}},handleSwitchClick:function(a){var b=this,c=function(){XF.handleSwitchResponse(b.$target,a);b.trigger.clickShow(b.clickE)};a.html?XF.setupHtmlInsert(a.html,function(a,d,e){b.tooltip.requiresLoad()&&\n(b.$tooltipHtml=a,b.tooltip.setLoadRequired(!1));c()}):c()},getTooltipContent:function(a){if(this.$tooltipHtml&&!this.tooltip.requiresLoad())return this.initializeTooltip(this.$tooltipHtml),this.$tooltipHtml;var b=this,c={skipDefault:!0,skipError:!0,global:!1};this.trigger.wasClickTriggered()&&(c.global=!0);XF.ajax(\"get\",this.href,{tooltip:1},function(c){b.tooltipLoaded(c,a)},c)},tooltipLoaded:function(a,b){var c=this;XF.setupHtmlInsert(a.html,function(a,d,e){c.initializeTooltip(a);b(a)})},initializeTooltip:function(a){a.find(\"form\").on(\"ajax-submit:response\",\nXF.proxy(this,\"handleOverlaySubmit\"))},handleOverlaySubmit:function(a,b){\"ok\"==b.status&&(a.preventDefault(),this.trigger&&this.trigger.hide(),XF.handleSwitchResponse(this.$target,b),\"bookmarkremoved\"==b.switchKey&&a.currentTarget.reset())}});XF.BookmarkLabelFilter=XF.Element.newHandler({options:{target:null},loading:!1,$filterTarget:null,init:function(){this.$filterTarget=XF.findRelativeIf(this.options.target,this.$target);if(this.$filterTarget.length){var a=this;this.$target.on(\"select2:select\",\nXF.proxy(this,\"loadResults\"));this.$target.on(\"select2:unselect\",function(b){a.loadResults()})}else console.error(\"No filter target found.\")},loadResults:function(){if(!this.loading){this.loading=!0;var a=this.$target.find(\".js-labelFilter\").val(),b=this;XF.ajax(\"get\",XF.canonicalizeUrl(\"account/bookmarks-popup\"),{label:a},function(a){a.html&&XF.setupHtmlInsert(a.html,function(a,c){b.$target.find(\".js-tokenSelect\").select2(\"close\");b.$filterTarget.empty();b.$filterTarget.append(a)})}).always(function(){b.loading=\n!1})}}});XF.Event.register(\"click\",\"attribution\",\"XF.AttributionClick\");XF.Event.register(\"click\",\"like\",\"XF.LikeClick\");XF.Event.register(\"click\",\"preview-click\",\"XF.PreviewClick\");XF.Event.register(\"click\",\"scroll-to\",\"XF.ScrollToClick\");XF.Event.register(\"click\",\"switch\",\"XF.SwitchClick\");XF.Event.register(\"click\",\"switch-overlay\",\"XF.SwitchOverlayClick\");XF.Element.register(\"draft\",\"XF.Draft\");XF.Element.register(\"focus-trigger\",\"XF.FocusTrigger\");XF.Element.register(\"poll-block\",\"XF.PollBlock\");\nXF.Element.register(\"preview\",\"XF.Preview\");XF.Element.register(\"share-buttons\",\"XF.ShareButtons\");XF.Element.register(\"share-input\",\"XF.ShareInput\");XF.Element.register(\"copy-to-clipboard\",\"XF.CopyToClipboard\");XF.Element.register(\"push-toggle\",\"XF.PushToggle\");XF.Element.register(\"push-cta\",\"XF.PushCta\");XF.Element.register(\"reaction\",\"XF.Reaction\");XF.Element.register(\"bookmark-click\",\"XF.BookmarkClick\");XF.Element.register(\"bookmark-label-filter\",\"XF.BookmarkLabelFilter\")}(jQuery,window,document);\n\nvar $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,g,d){c instanceof String&&(c=String(c));for(var a=c.length,b=0;b<a;b++){var e=c[b];if(g.call(d,e,b,c))return{i:b,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(c,g,d){c!=Array.prototype&&c!=Object.prototype&&(c[g]=d.value)};\n$jscomp.getGlobal=function(c){return\"undefined\"!=typeof window&&window===c?c:\"undefined\"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,g,d,a){if(g){d=$jscomp.global;c=c.split(\".\");for(a=0;a<c.length-1;a++){var b=c[a];b in d||(d[b]={});d=d[b]}c=c[c.length-1];a=d[c];g=g(a);g!=a&&null!=g&&$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:g})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(c){return c?c:function(c,d){return $jscomp.findInternal(this,c,d).v}},\"es6\",\"es3\");$jscomp.SYMBOL_PREFIX=\"jscomp_symbol_\";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(g){return $jscomp.SYMBOL_PREFIX+(g||\"\")+c++}}();\n$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol(\"iterator\"));\"function\"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};\n$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol(\"asyncIterator\"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var g=0;return $jscomp.iteratorPrototype(function(){return g<c.length?{done:!1,value:c[g++]}:{done:!0}})};\n$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,g){$jscomp.initSymbolIterator();c instanceof String&&(c+=\"\");var d=0,a={next:function(){if(d<c.length){var b=d++;return{value:g(b,c[b]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a};\n$jscomp.polyfill(\"Array.prototype.values\",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,d){return d})}},\"es8\",\"es3\");\n!function(c,g,d){XF.SubmitClick=XF.Event.newHandler({eventNameSpace:\"XFSubmitClick\",options:{target:null,container:null,timeout:500,uncheckedValue:\"0\",disable:null},$input:null,$form:null,init:function(){var a=this.$target;if(a.is(\"label\")&&(a=a.find(\"input:radio, input:checkbox\"),!a.length))return;this.$input=a;a=a.closest(\"form\");this.$form=a.length?a:null},click:function(a){var b=this.$input,c=this.$form,f=this.options.target,k=this.options.container;if(b)if(f){var h=this.options.uncheckedValue;\nsetTimeout(function(){var a={};k?a=b.closest(k).find(\"input, select, textarea\").serializeArray():a[b.attr(\"name\")]=b.prop(\"checked\")?b.attr(\"value\"):h;XF.ajax(\"POST\",f,a)},0)}else c?((a=c.data(\"submit-click-timer\"))&&clearTimeout(a),c.one(\"ajax-submit:complete\",function(a,c,e){if(c.errors)b.prop(\"checked\",b.prop(\"checked\")?\"\":\"checked\");else if(\"checkbox\"==b.attr(\"type\")&&null!==b.closest(\"tr.dataList-row\"))b.closest(\"tr.dataList-row\")[b.prop(\"checked\")?\"removeClass\":\"addClass\"](\"dataList-row--disabled\")}),\na=setTimeout(function(){c.submit()},this.options.timeout),c.data(\"submit-click-timer\",a)):console.error(\"No target or form to submit on click\")}});XF.AjaxSubmit=XF.Element.newHandler({options:{redirect:!0,skipOverlayRedirect:!1,forceFlashMessage:!1,resetComplete:!1,hideOverlay:!0,disableSubmit:\".button, :submit, :reset, [data-disable-submit]\",jsonName:null,jsonOptIn:null,replace:null,showReplacement:!0},submitPending:!1,$submitButton:null,init:function(){var a=this.$target;a.is(\"form\")?(a.on({submit:XF.proxy(this,\n\"submit\"),keyup:XF.proxy(this,\"cmdEnterKey\"),\"draft:beforesave\":XF.proxy(this,\"draftCheck\")}),a.on(\"click\",\"input[type=submit], button:not([type]), button[type=submit]\",XF.proxy(this,\"submitButtonClicked\"))):console.error(\"%o is not a form\",a[0])},submit:function(a){var b=this.$submitButton,e=this.$target,f=\"multipart/form-data\"==e.attr(\"enctype\");if(f){if(this.options.jsonName){a.preventDefault();console.error(\"JSON serialized forms do not support the file upload-style enctype.\");XF.alert(XF.phrase(\"oops_we_ran_into_some_problems_more_details_console\"));\nreturn}if(!g.FormData)return}if(!(this.$submitButton&&this.$submitButton.data(\"prevent-ajax\")||XF.debug.disableAjaxSubmit))if(this.submitPending)a&&a.preventDefault();else{var k={skipDefault:!0};f&&(k.timeout=0);var h=c.Event(\"ajax-submit:before\"),l={form:e,handler:this,method:e.attr(\"method\")||\"get\",action:e.attr(\"action\"),submitButton:b,preventSubmit:!1,successCallback:XF.proxy(this,\"submitResponse\"),ajaxOptions:k};e.trigger(h,l);if(l.preventSubmit)return!1;if(h.isDefaultPrevented())return!0;a&&\na.preventDefault();var d=this;setTimeout(function(){d.submitPending=!0;var a=XF.getDefaultFormData(e,b,d.options.jsonName,d.options.jsonOptIn);d.disableButtons();XF.ajax(l.method,l.action,a,l.successCallback,l.ajaxOptions).always(function(){d.$submitButton=null;setTimeout(function(){d.submitPending=!1;d.enableButtons()},300);h=c.Event(\"ajax-submit:always\");e.trigger(h,e,d)})},0)}},disableButtons:function(){this.$target.find(this.options.disableSubmit).prop(\"disabled\",!0)},enableButtons:function(){this.$target.find(this.options.disableSubmit).prop(\"disabled\",\n!1)},submitResponse:function(a,b,e){if(\"object\"!=typeof a)XF.alert(\"Response was not JSON.\");else{b=this.$target;e=this.$submitButton;var f=c.Event(\"ajax-submit:response\");b.trigger(f,a,this);if(!f.isDefaultPrevented()){f=c.Event(\"ajax-submit:error\");var k=!1,h=a.redirect&&this.options.redirect,d=b.closest(\".overlay\");d.length&&this.options.hideOverlay||(d=null);h&&this.options.skipOverlayRedirect&&d&&(h=!1);e&&e.attr(\"data-ajax-redirect\")&&(h=e.data(\"ajax-redirect\"));if(a.errorHtml)b.trigger(f,a,\nthis),f.isDefaultPrevented()||XF.setupHtmlInsert(a.errorHtml,function(a,b){b=b.h1||b.title||XF.phrase(\"oops_we_ran_into_some_problems\");XF.overlayMessage(b,a)}),k=!0;else if(a.errors)b.trigger(f,a,this),f.isDefaultPrevented()||XF.alert(a.errors),k=!0;else if(a.exception)XF.alert(a.exception);else if(\"ok\"==a.status&&a.message)h?this.options.forceFlashMessage?XF.flashMessage(a.message,1E3,function(){XF.redirect(a.redirect)}):XF.redirect(a.redirect):XF.flashMessage(a.message,3E3),d&&d.trigger(\"overlay:hide\");\nelse if(a.html){var g=this;XF.setupHtmlInsert(a.html,function(a,b,c){if(g.options.replace&&g.doSubmitReplace(a,c))return!1;d&&d.trigger(\"overlay:hide\");a=XF.getOverlayHtml({html:a,title:b.h1||b.title});XF.showOverlay(a)})}else\"ok\"==a.status&&(h&&XF.redirect(a.redirect),d&&d.trigger(\"overlay:hide\"));a.errors&&f.isDefaultPrevented();f=c.Event(\"ajax-submit:complete\");b.trigger(f,a,this);f.isDefaultPrevented()||this.options.resetComplete&&!k&&b[0].reset()}}},doSubmitReplace:function(a,b){var e=this.options.replace;\nif(!e)return!1;var f=e.split(\" with \");e=c.trim(f[0]);f=f[1]?c.trim(f[1]):e;if(\"self\"==e||this.$target.is(e))var d=this.$target;else d=this.$target.find(e).first(),d.length||(d=c(e).first());if(!d.length)return console.error(\"Could not find old selector '\"+e+\"'\"),!1;var h=a.is(f)?a:a.find(f).first();if(!h.length)return console.error(\"Could not find new selector '\"+f+\"'\"),!1;this.options.showReplacement?(h.hide().insertAfter(d),d.xfFadeUp(null,function(){d.remove();h.length&&(XF.activate(h),b(!1));\nh.xfFadeDown(null,XF.layoutChange)})):(h.insertAfter(d),d.remove(),h.length&&(XF.activate(h),b(!1)),XF.layoutChange());return!0},submitButtonClicked:function(a){this.$submitButton=c(a.currentTarget)},draftCheck:function(a){this.submitPending&&a.preventDefault()}});XF.ChangeSubmit=XF.Element.newHandler({options:{toggleElement:null},formInitialized:!1,hasChanges:!1,$toggle:null,init:function(){this.$target.find(\":input\").on(\"change\",XF.proxy(this,\"change\"));this.$target.find(\".js-revert\").on(\"click\",\nXF.proxy(this,\"revert\"))},initForm:function(){this.formInitialized||(XF.Element.applyHandler(this.$target,\"ajax-submit\",{redirect:!1,forceFlashMessage:!1}),XF.Element.getHandler(this.$target,\"ajax-submit\").options.redirect=!1);this.formInitialized=!0},change:function(a){this.initForm();this.$target.trigger(\"submit\");this.hasChanges=!0},revert:function(a){this.hasChanges&&(this.$target.trigger(\"reset\").trigger(\"submit\"),this.hasChanges=!1)},complete:function(a){}});XF.AutoComplete=XF.Element.newHandler({loadTimer:null,\nloadVal:\"\",results:null,options:{single:!1,multiple:\",\",acurl:\"\",minLength:2,queryKey:\"q\",extraFields:\"\",extraParams:{},jsonContainer:\"results\",autosubmit:!1},init:function(){var a=this.$target;this.options.autosubmit&&(this.options.single=!0);this.options.acurl||(this.options.acurl=XF.getAutoCompleteUrl());this.results=new XF.AutoCompleteResults({onInsert:XF.proxy(this,\"addValue\")});a.attr(\"autocomplete\",\"off\").on({keydown:XF.proxy(this,\"keydown\"),keyup:XF.proxy(this,\"keyup\"),\"blur click\":XF.proxy(this,\n\"blur\"),paste:function(){setTimeout(function(){a.trigger(\"keydown\")},0)}});a.closest(\"form\").submit(XF.proxy(this,\"hideResults\"))},keydown:function(a){if(this.results.isVisible()){var b=this.results,c=function(){a.preventDefault();return!1};switch(a.key){case \"ArrowDown\":return b.selectResult(1),c();case \"ArrowUp\":return b.selectResult(-1),c();case \"Escape\":return this.hide(),c();case \"Enter\":return b.insertSelectedResult(),c()}}},keyup:function(a){if(this.results.isVisible())switch(a.key){case \"ArrowDown\":case \"ArrowUp\":case \"Enter\":return}this.hideResults();\nthis.loadTimer&&clearTimeout(this.loadTimer);this.loadTimer=setTimeout(XF.proxy(this,\"load\"),200)},blur:function(a){clearTimeout(this.loadTimer);setTimeout(XF.proxy(this,\"hideResults\"),250);this.xhr&&(this.xhr.abort(),this.xhr=!1)},load:function(){var a=this.loadVal,b=this.options.extraParams;this.loadTimer&&clearTimeout(this.loadTimer);this.loadVal=this.getPartialValue();\"\"==this.loadVal?this.hideResults():this.loadVal==a||this.loadVal.length<this.options.minLength||(b[this.options.queryKey]=this.loadVal,\n\"\"!=this.options.extraFields&&c(this.options.extraFields).each(function(){b[this.name]=c(this).val()}),this.xhr&&this.xhr.abort(),this.xhr=XF.ajax(\"get\",this.options.acurl,b,XF.proxy(this,\"showResults\"),{global:!1,error:!1}))},hideResults:function(){this.results.hideResults()},showResults:function(a){this.xhr&&(this.xhr=!1);this.options.jsonContainer&&a&&(a=a[this.options.jsonContainer]);this.results.showResults(this.getPartialValue(),a,this.$target)},addValue:function(a){if(this.options.single)this.$target.val(a);\nelse{var b=this.getFullValues();\"\"!=a&&(b.length&&(a=\" \"+a),b.push(a+this.options.multiple+\" \"));this.$target.val(b.join(this.options.multiple))}this.$target.trigger(\"change\").trigger(\"auto-complete:insert\",{inserted:c.trim(a),current:this.$target.val()});this.options.autosubmit?this.$target.closest(\"form\").submit():this.$target.autofocus()},getFullValues:function(){var a=this.$target.val();if(\"\"==a)return[];if(this.options.single)return[a];var b=a.lastIndexOf(this.options.multiple);if(-1==b)return[];\na=a.substr(0,b);return a.split(this.options.multiple)},getPartialValue:function(){var a=this.$target.val();if(this.options.single)return c.trim(a);var b=a.lastIndexOf(this.options.multiple);return-1==b?c.trim(a):c.trim(a.substr(b+this.options.multiple.length))}});XF.UserMentioner=XF.Element.newHandler({options:{},handler:null,init:function(){this.handler=new XF.AutoCompleter(this.$target,{url:XF.getAutoCompleteUrl()})}});XF.EmojiCompleter=XF.Element.newHandler({options:{insertTemplate:\"${text}\"},\nhandler:null,init:function(){if(XF.config.shortcodeToEmoji){var a={url:XF.canonicalizeUrl(\"index.php?misc/find-emoji\"),at:\":\",keepAt:!1,insertMode:\"text\",displayTemplate:'<div class=\"contentRow\"><div class=\"contentRow-figure contentRow-figure--emoji\">{{{icon}}}</div><div class=\"contentRow-main contentRow-main--close\">{{{text}}}<div class=\"contentRow-minor contentRow-minor--smaller\">{{{desc}}}</div></div></div>',beforeInsert:function(a){XF.logRecentEmojiUsage(a);return a}};this.handler=new XF.AutoCompleter(this.$target,\na)}}});XF.AutoSubmit=XF.Element.newHandler({options:{hide:!0,progress:!0},init:function(){this.$target.submit();this.options.hide&&this.$target.find(\":submit\").hide();this.options.progress&&c(d).trigger(\"xf:action-start\")}});XF.ChangedFieldNotifier=XF.Element.newHandler({options:{hide:!0,progress:!0},init:function(){this.$target.find(\"input, select, textarea\").each(function(){var a=c(this);a.data(\"orig-val\",a.val());a.change(function(){a.toggleClass(\"is-changed\",a.val()!=a.data(\"orig-val\"))})})}});\nXF.CheckAll=XF.Element.newHandler({options:{container:\"< form\",match:\"input:checkbox\"},$container:null,updating:!1,init:function(){this.$container=XF.findRelativeIf(this.options.container,this.$target);var a=this;this.$container.on(\"click\",this.options.match,function(b){a.updating||c(b.target).is(a.$target)||a.updateState()});this.$target.closest(\"form\").on(\"selectplus:redrawSelected\",XF.proxy(this,\"updateState\"));this.updateState();this.$target.click(XF.proxy(this,\"click\"))},click:function(a){this.updating=\n!0;this.getCheckBoxes().prop(\"checked\",a.target.checked).triggerHandler(\"click\");this.updating=!1},updateState:function(){var a=this.getCheckBoxes(),b=0<a.length;a.each(function(){if(!c(this).prop(\"checked\"))return b=!1});this.$target.prop(\"checked\",b)},getCheckBoxes:function(){return this.$container.find(this.options.match).not(this.$target)}});XF.SelectPlus=XF.Element.newHandler({options:{spCheckbox:null,spContainer:\".js-spContainer\",activeClass:\"is-spActive\",checkedClass:\"is-spChecked\",hoverClass:\"is-spHovered\",\nspMultiBarUrl:null,spDebug:!0},$containers:null,$checkboxes:null,$multiBar:null,isActive:!1,isShifted:!1,lastSelected:null,lastEntered:null,init:function(){this.$checkboxes=this.$target.find(this.options.spCheckbox?this.options.spCheckbox:\"input:checkbox\");this.$containers=this.$checkboxes.closest(this.options.spContainer);this.debug(\"init; containers: %o, checkboxes: %o\",this.$containers.length,this.$checkboxes.length);if(this.$containers.length!=this.$checkboxes.length)console.error(\"There must be an equal number of checkboxes and containers\");\nelse{this.$checkboxes.on(\"click\",XF.proxy(this,\"checkboxClick\")).closest(\"label\").hover(XF.proxy(this,\"checkboxEnter\"),XF.proxy(this,\"checkboxExit\"));c(d).onPassive({keydown:XF.proxy(this,\"keydown\"),keyup:XF.proxy(this,\"keyup\")});var a=this;this.$containers.on(\"mousedown\",function(b){if(a.isActive&&(b.ctrlKey||b.shiftKey)&&(b.preventDefault(),-1!==navigator.userAgent.indexOf(\"MSIE\"))){this.onselectstart=function(){return!1};var c=this;g.setTimeout(function(){c.onselectstart=null},0)}});this.setActive();\nthis.redrawSelected()}},checkboxClick:function(a){if(!this.ignoreClick){this.debug(\"checkboxClick; delegateTarget: %o\",a.delegateTarget);var b=this.$checkboxes.index(a.delegateTarget);a.delegateTarget.checked&&this.isShifted&&null!==this.lastSelected?(this.ignoreClick=!0,this.getShiftItems(this.$checkboxes,b).not(\":checked\").trigger(\"click\"),this.ignoreClick=!1):this.lastSelected=a.delegateTarget.checked?b:null;this.setActive(a.delegateTarget.checked);this.redrawSelected()}},checkboxExit:function(a){this.lastEntered=\nnull},checkboxEnter:function(a){this.isActive&&(this.lastEntered=this.$checkboxes.index(c(a.delegateTarget).find(\"input:checkbox\").eq(0)),this.isShifted&&this.redrawHover())},keydown:function(a){\"Shift\"==a.key&&XF.Keyboard.isShortcutAllowed(d.activeElement)&&(this.isShifted=!0,this.redrawHover())},keyup:function(a){\"Shift\"==a.key&&this.isShifted&&(this.isShifted=!1,this.redrawHover())},getShiftItems:function(a,b){return null!==b&&null!==this.lastSelected?(a=a.slice(Math.min(b,this.lastSelected),Math.max(b,\nthis.lastSelected)+1),this.debug(\"shiftItems: %o\",a),a):c()},setActive:function(a){var b=this.isActive;this.isActive=a?!0:0<this.$checkboxes.filter(\":checked\").length;this.deployMultiBar();this.isActive!=b&&(this.debug(\"setActive: %s\",this.isActive),this.$target.trigger(this.isActive?\"selectplus:activate\":\"selectplus:deactivate\",[this]).toggleClassTransitioned(this.options.activeClass,this.isActive),c(d.body).toggleClassTransitioned(\"is-spDocTriggered\",this.isActive))},redrawSelected:function(){this.$target.trigger(\"selectplus:redraw-selected\",\n[this]);var a=this;this.$checkboxes.each(function(b){var e=c(this),f=e.is(\":checked\");b=a.$containers.eq(b);b.toggleClassTransitioned(a.options.checkedClass,f);e.data(\"check-state\")!=f&&b.trigger(\"selectplus:toggle-item\",[this,f]);e.data(\"check-state\",f)})},redrawHover:function(){this.$target.trigger(\"selectplus:redraw-hover\",[this]);if(null!==this.lastSelected&&null!==this.lastEntered&&this.isShifted){var a=this.getShiftItems(this.$containers,this.lastEntered);this.debug(\"redrawHover: lastSelected: %s, lastEntered: %s\",\nthis.lastSelected,this.lastEntered);this.$containers.not(a).toggleClass(this.options.hoverClass,!1);a.toggleClassTransitioned(this.options.hoverClass,!0)}else this.$containers.toggleClassTransitioned(this.options.hoverClass,!1)},deployMultiBar:function(){if(this.isActive&&this.options.spMultiBarUrl){var a=this;XF.loadMultiBar(this.options.spMultiBarUrl,this.$checkboxes.serializeArray(),{cache:!1,init:function(b){a.MultiBar&&a.MultiBar.destroy();a.MultiBar=b}},{fastReplace:a.MultiBar?!0:!1})}else!this.active&&\nthis.MultiBar&&this.MultiBar.hide()},debug:function(){this.options.spDebug&&(arguments[0]=\"SelectPlus:\"+arguments[0],console.log.apply(null,arguments))}});XF.DateInput=XF.Element.newHandler({options:{weekStart:0,minDate:null,maxDate:null,disableWeekends:!1,yearRange:null,showWeekNumber:!1,showDaysInNextAndPreviousMonths:!0},picker:null,init:function(){var a=this.options.minDate,b=this.options.maxDate;if(a){var c=Date.parse(a.replace(/-/g,\"/\"));a=new Date(c)}b&&(c=Date.parse(b.replace(/-/g,\"/\")),b=\nnew Date(c));var f=this,d=this.$target;c=d.val();a={onSelect:function(){var a=this._d,b=String(a.getDate()),c=String(a.getMonth()+1);a=String(a.getFullYear());f.$target.val(a+\"-\"+(10>c?\"0\"+c:c)+\"-\"+(10>b?\"0\"+b:b))},onOpen:function(){d.prop(\"readonly\")&&this.hide()},showTime:!1,firstDay:this.options.weekStart,minDate:a,maxDate:b,disableWeekends:this.options.disableWeekends,yearRange:this.options.yearRange,showWeekNumber:this.options.showWeekNumber,showDaysInNextAndPreviousMonths:this.options.showDaysInNextAndPreviousMonths,\ni18n:{previousMonth:\"\",nextMonth:\"\",weekdays:[0,1,2,3,4,5,6].map(function(a){return XF.phrase(\"day\"+a)}),weekdaysShort:[0,1,2,3,4,5,6].map(function(a){return XF.phrase(\"dayShort\"+a)}),months:[0,1,2,3,4,5,6,7,8,9,10,11].map(function(a){return XF.phrase(\"month\"+a)})},isRTL:XF.isRtl(),field:this.$target[0]};c&&(b=c.match(/^(\\d{4})-(\\d\\d?)-(\\d\\d?)$/))&&(a.defaultDate=new Date(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3])),a.setDefaultDate=!0);this.picker=new Pikaday(a);this.$target.val(c);c=this.$target.parent().find(\".js-dateTrigger\");\nif(c.length)c.on(\"click\",function(){f.picker.show()})}});XF.DescLoader=XF.Element.newHandler({options:{descUrl:null},$container:null,changeTimer:null,xhr:null,init:function(){if(this.options.descUrl){var a=this.$target.parent().find(\".js-descTarget\");a.length?(this.$container=a,this.$target.on(\"change\",XF.proxy(this,\"change\"))):console.error(\"Target element must have a .js-descTarget sibling\")}else console.error(\"Element must have a data-desc-url value\")},change:function(){this.changeTimer&&clearTimeout(this.changeTimer);\nthis.xhr&&(this.xhr.abort(),this.xhr=null);this.changeTimer=setTimeout(XF.proxy(this,\"onTimer\"),200)},onTimer:function(){var a=this.$target.val();a?this.xhr=XF.ajax(\"post\",this.options.descUrl,{id:a},XF.proxy(this,\"onLoad\")):this.$container.xfFadeUp(XF.config.speed.fast)},onLoad:function(a){var b=this.$container;a.description?XF.setupHtmlInsert(a.description,function(a,c,d){b.xfFadeUp(XF.config.speed.fast,function(){b.html(a);b.xfFadeDown(XF.config.speed.normal)})}):b.xfFadeUp(XF.config.speed.fast);\nthis.xhr=null}});XF.Disabler=XF.Element.newHandler({options:{container:\"< li | ul, ol, dl\",controls:\"input, select, textarea, button, .js-attachmentUpload\",hide:!1,optional:!1,invert:!1,autofocus:!0},$container:null,init:function(){this.$container=XF.findRelativeIf(this.options.container,this.$target);this.$container.length||this.options.optional||console.error(\"Could not find the disabler control container\");var a=this.$target,b=a.closest(\"form\");if(b.length)b.on(\"reset\",XF.proxy(this,\"formReset\"));\nif(a.is(\":radio\")){var e=b,f=a.attr(\"name\");b.length||(e=c(d.body));e.on(\"click\",'input:radio[name=\"'+f+'\"]',XF.proxy(this,\"click\"))}else if(a.is(\"option\")){var g=this;a.closest(\"select\").on(\"change\",function(a){a=c(this);var b=XF.Element.getHandler(a.find(\"option:selected\").first(),\"disabler\");!a.find(\"option:selected\").first().is(g.$target)&&b&&b.getOption(\"container\")===g.options.container||g.recalculate(!1)})}else a.click(XF.proxy(this,\"click\"));a.on(\"control:enabled control:disabled\",XF.proxy(this,\n\"recalculateAfter\"));this.$container.one(\"editor:init\",XF.proxy(this,\"recalculateAfter\"));this.recalculate(!0)},click:function(a,b){this.recalculateAfter(!1,b&&b.triggered)},formReset:function(a){this.recalculateAfter(!1,!0)},recalculateAfter:function(a,b){var c=this;setTimeout(function(){c.recalculate(a,b)},0)},recalculate:function(a,b){var e=this.$container,f=this.$target,d=e.find(this.options.controls).not(f),h=a?0:XF.config.speed.fast,g=this,m=function(){!b&&g.options.autofocus&&e.find(\"input:not([type=hidden], [type=file]), textarea, select, button\").not(f).first().autofocus()};\nf.is(\":enabled\")&&(f.is(\":checked\")&&!this.options.invert||this.options.invert&&!f.is(\":checked\"))?(e.prop(\"disabled\",!1).removeClass(\"is-disabled\"),d.prop(\"disabled\",!1).removeClass(\"is-disabled\").each(function(a,b){a=c(b);a.is(\"select.is-readonly\")&&a.prop(\"disabled\",!0)}).trigger(\"control:enabled\"),this.options.hide?(a?e.show():e.slideDown(h,function(){XF.layoutChange();m()}),XF.layoutChange()):a||m()):(this.options.hide&&(a?e.hide():e.slideUp(h,XF.layoutChange),XF.layoutChange()),e.prop(\"disabled\",\n!0).addClass(\"is-disabled\"),d.prop(\"disabled\",!0).addClass(\"is-disabled\").trigger(\"control:disabled\").each(function(a,b){a=c(b);b=a.data(\"disabled\");null!==b&&\"undefined\"!=typeof b&&a.val(b)}))}});XF.FieldAdder=XF.Element.newHandler({options:{incrementFormat:null,formatCaret:!0,removeClass:null,remaining:-1},$clone:null,cloned:!1,created:!1,init:function(){this.$target.find(\"input:not(:checkbox), select, textarea\").each(function(){var a=c(this);a.is(\"select\")?a.find(\"option\").each(function(){c(this).prop(\"selected\",\nthis.defaultSelected)}):a.val(a.data(\"default-value\")||this.defaultValue||\"\")});this.$clone=this.$target.clone();var a=this;this.$target.on(\"keypress change paste input\",function(b){c(b.target).prop(\"readonly\")||a.cloned||(a.cloned=!0,a.$target.off(b),a.create())})},create:function(){if(!this.created&&(this.created=!0,0!=this.options.remaining)){var a=this.options.incrementFormat,b=this.options.formatCaret?\"^\":\"\";if(this.options.incrementFormat){var e=new RegExp(b+XF.regexQuote(a).replace(\"\\\\{counter\\\\}\",\n\"(\\\\d+)\"));this.$clone.find(\"input, select, textarea\").each(function(){var b=c(this),d=b.attr(\"name\");d=d.replace(e,function(b,c){return a.replace(\"{counter}\",parseInt(c,10)+1)});b.attr(\"name\",d)})}0<this.options.remaining&&this.$clone.attr(\"data-remaining\",this.options.remaining-1);this.$clone.find(\"input, select, textarea\").each(function(){var a=c(this);a.is(\"select\")?a.find(\"option\").each(function(){c(this).prop(\"selected\",this.defaultSelected)}):\"string\"===typeof this.defaultValue&&a.val(this.defaultValue)});\nthis.$clone.insertAfter(this.$target);this.options.removeClass&&this.$target.removeClass(this.options.removeClass);XF.activate(this.$clone);XF.layoutChange()}}});XF.FormSubmitRow=XF.Element.newHandler({options:{container:\".block-container\",fixedChild:\".formSubmitRow-main\",stickyClass:\"is-sticky\",topOffset:100,minWindowHeight:281},$container:null,$fixedParent:null,$fixEl:null,fixElHeight:0,winHeight:0,containerTop:0,containerBorderLeftWidth:0,topOffset:0,elBottom:0,state:\"normal\",windowTooSmall:!1,\ninit:function(){if(XF.config.enableFormSubmitSticky){var a=this.$target,b=a.closest(this.options.container);b.length?(this.$container=b,this.topOffset=this.options.topOffset,this.$fixEl=a.find(this.options.fixedChild),c(g).on(\"scroll\",XF.proxy(this,\"onScroll\")).on(\"resize\",XF.proxy(this,\"recalcAndUpdate\")),b=XF.getFixedOffsetParent(a),b.is(\"html\")||(this.$fixedParent=b,b.on(\"scroll\",XF.proxy(this,\"onScroll\"))),c(d.body).on(\"xf:layout\",XF.proxy(this,\"recalcAndUpdate\")),a.height()||setTimeout(XF.proxy(this,\n\"recalcAndUpdate\"),250),this.recalcAndUpdate()):console.error(\"Cannot float submit row, no container\")}},recalc:function(){var a=this.$target;this.winHeight=c(g).height();this.elBottom=this.getTargetTop()+a.height();this.fixElHeight=this.$fixEl.height();this.containerTop=XF.getFixedOffset(this.$container).top;this.containerBorderLeftWidth=parseInt(this.$container.css(\"border-left-width\"),10)},recalcAndUpdate:function(){this.state=\"normal\";this.resetTarget();this.recalc();this.update()},getTargetTop:function(){var a=\nthis.$target.offset().top;return this.$fixedParent?a-this.$fixedParent.offset().top:a},getScrollTop:function(){return this.$fixedParent?this.$fixedParent.scrollTop():c(g).scrollTop()},update:function(){var a=XF.browser.ios||XF.browser.android?g.innerHeight:this.winHeight;if(a<this.options.minWindowHeight)\"normal\"!=this.state&&(this.resetTarget(),this.state=\"normal\");else{var b=c(\".js-bottomFixTarget\").height()||0;a=this.getScrollTop()+a-b;if(a>=this.elBottom)\"normal\"!=this.state&&(this.resetTarget(),\nthis.state=\"normal\");else{var d=this.containerTop+this.topOffset+this.fixElHeight;a<=d?d>=this.elBottom||\"absolute\"==this.state||(a=this.$container.offset(),\"stuck\"==this.state?(b=this.$fixEl.parent(),\"static\"==b.css(\"position\")&&(b=b.offsetParent())):b=this.$fixEl.offsetParent(),b=b.offset(),this.$fixEl.css({position:\"absolute\",top:a.top-b.top+this.topOffset,right:\"auto\",bottom:\"auto\",left:a.left-b.left+this.containerBorderLeftWidth,width:this.$container.width()}),this.setTargetSticky(!0),this.state=\n\"absolute\"):\"stuck\"!=this.state&&(a=this.$container.offset(),this.$fixEl.css({position:\"\",top:\"\",right:\"\",bottom:b,left:a.left+this.containerBorderLeftWidth,width:this.$container.width()}),this.setTargetSticky(!0),this.state=\"stuck\")}}},resetTarget:function(){this.$fixEl.css({position:\"\",top:\"\",right:\"\",bottom:\"\",left:\"\",width:\"\"});this.setTargetSticky(!1)},setTargetSticky:function(a){this.$target.toggleClass(this.options.stickyClass,a).css(\"height\",this.$fixEl.height())},onScroll:function(){this.update()}});\nXF.GuestUsername=XF.Element.newHandler({init:function(){var a=this.$target;a.val(XF.LocalStorage.get(\"guestUsername\"));a.on(\"keyup\",XF.proxy(this,\"change\"))},change:function(){var a=this.$target;a.val().length?XF.LocalStorage.set(\"guestUsername\",a.val(),!0):XF.LocalStorage.remove(\"guestUsername\")}});XF.MinLength=XF.Element.newHandler({options:{minLength:0,allowEmpty:!1,disableSubmit:!0,toggleTarget:null},met:null,$form:null,$toggleTarget:null,init:function(){var a=this;this.$form=this.$target.closest(\"form\");\nthis.$toggleTarget=this.options.toggleTarget?XF.findRelativeIf(this.options.toggleTarget,this.$target):c([]);this.$target.on(\"change keypress keydown paste\",function(){setTimeout(XF.proxy(a,\"checkLimits\"),0)});this.checkLimits()},checkLimits:function(){var a=c.trim(this.$target.val()).length,b=this.options;a=a>=b.minLength||0==a&&b.allowEmpty;a!==this.met&&((this.met=a)?(b.disableSubmit&&this.$form.find(\":submit\").prop(\"disabled\",!1).removeClass(\"is-disabled\"),this.$toggleTarget.hide()):(b.disableSubmit&&\nthis.$form.find(\":submit\").prop(\"disabled\",!0).addClass(\"is-disabled\"),this.$toggleTarget.show()))}});XF.TextAreaHandler=XF.Element.newHandler({options:{autoSize:!0,keySubmit:!0,singleLine:null},initialized:!1,init:function(){this.options.autoSize&&(this.$target[0].scrollHeight?this.setupAutoSize():(this.$target.one(\"focus control:enabled control:disabled\",XF.proxy(this,\"setupDelayed\")),this.$target.onWithin(\"toggle:shown overlay:shown tab:shown quick-edit:shown\",XF.proxy(this,\"setupDelayed\"))),this.$target.on(\"autosize\",\nXF.proxy(this,\"update\")));if(this.options.keySubmit||this.options.singleLine)this.$target.on(\"keydown\",XF.proxy(this,\"keySubmit\"))},setupAutoSize:function(){this.initialized||(this.initialized=!0,autosize(this.$target),this.$target.on(\"autosize:resized\",function(){XF.layoutChange()}))},setupDelayed:function(){if(this.initialized)this.update();else{var a=this,b=function(){a.setupAutoSize();XF.layoutChange()};this.$target[0].scrollHeight?b():setTimeout(b,100)}},update:function(){this.initialized?autosize.update(this.$target[0]):\nthis.setupDelayed()},keySubmit:function(a){if(\"Enter\"==a.key&&(this.options.singleLine||this.options.keySubmit&&(XF.isMac()?a.metaKey:a.ctrlKey))){switch(String(this.options.singleLine).toLowerCase()){case \"next\":this.$target.focusNext();break;case \"blur\":this.$target.blur();break;default:this.$target.closest(\"form\").submit()}a.preventDefault();return!1}}});XF.TextEdit=XF.Event.newHandler({eventType:\"focus\",eventNameSpace:\"XFTextEdit\",options:{editUrl:null,escapeRevert:!0},processing:!1,init:function(){null===\nthis.options.editUrl?console.warn(\"TextEdit must specify data-edit-url\"):(this.options.escapeRevert&&(this.$target.data(\"original-text\",this.$target.val()),this.$target.onPassive(\"keyup\",XF.proxy(this,\"keyEscape\"))),this.$target.on(\"change\",XF.proxy(this,\"save\")))},focus:function(a){},save:function(a){if(!this.processing){this.processing=!0;var b=this;a={};a[this.$target.attr(\"name\")]=this.$target.val();XF.ajax(\"POST\",this.options.editUrl,a,XF.proxy(this,\"success\")).always(function(){setTimeout(function(){b.processing=\n!1},250)})}},success:function(a){a=a[this.$target.attr(\"name\")];this.$target.val(a).data(\"original-text\",a)},keyEscape:function(a){\"Escape\"==a.key&&this.$target.val(this.$target.data(\"original-text\"))}});XF.PermissionMatrix=XF.Element.newHandler({options:{inputSelector:'input[type=\"radio\"]',parentSelector:\"dl.formRow\",classPrefix:\"formRow--permissionType-\",permissionType:\"user\"},values:[\"allow\",\"unset\",\"deny\",\"content_allow\",\"reset\"],currentClass:null,init:function(){this.$parentRow=this.$target.closest(this.options.parentSelector);\nthis.$target.find(this.options.inputSelector).on(\"click\",XF.proxy(this,\"update\"));this.update()},update:function(){this.currentClass&&this.$parentRow.removeClass(this.currentClass);var a=this.$target.find(this.options.inputSelector+\":checked\").val();-1<c.inArray(a,this.values)&&(this.currentClass=this.options.classPrefix+this.options.permissionType+\"-\"+a,this.$parentRow.addClass(this.currentClass))}});XF.MultiCheck=XF.Event.newHandler({eventNameSpace:\"XFMultiCheck\",options:{target:null,values:\"allow,unset,deny\"},\n$target:null,values:null,currentValue:null,init:function(){this.$target=c(this.options.target);this.values=this.options.values.split(\",\");var a=this.$target.filter(\":checked\").first().val();this.currentValue=0<c.inArray(a,this.values)?this.values[-1]:this.values[0]},click:function(a){var b=this.values[c.inArray(this.currentValue,this.values)+1];void 0===b&&(b=this.values[0]);this.$target.each(function(){c(this).val()==b&&c(this).prop(\"checked\",!0).trigger(\"click\")});this.currentValue=b}});XF.NumberBox=\nXF.Element.newHandler({options:{textInput:\".js-numberBoxTextInput\",buttonSmaller:!1,step:null},$textInput:null,holdTimeout:null,holdInterval:null,init:function(){var a=this.$target,b=a.find(this.options.textInput);if(b.length){this.$textInput=b;a.addClass(\"inputGroup--joined\");var c=a.find(\".js-up\");a=a.find(\".js-down\");c.length||(c=this.createButton(\"up\"));a.length||(a=this.createButton(\"down\"));this.setupButton(c,b);this.setupButton(a,c);if(!this.supportsStepFunctions())b.on(\"keydown\",XF.proxy(this,\n\"stepFallback\"))}else console.error(\"Cannot initialize, no text input.\")},createButton:function(a){a=c(\"<button />\").attr(\"type\",\"button\").attr(\"tabindex\",\"-1\").addClass(\"inputGroup-text\").addClass(\"inputNumber-button\").addClass(\"inputNumber-button--\"+a).addClass(\"js-\"+a).attr(\"data-dir\",a);this.$textInput.prop(\"disabled\")&&a.addClass(\"is-disabled\").prop(\"disabled\",!0);this.options.buttonSmaller&&a.addClass(\"inputNumber-button--smaller\");return a},setupButton:function(a,b){a.on(\"focus\",XF.proxy(this,\n\"buttonFocus\")).on(\"click\",XF.proxy(this,\"buttonClick\")).on(\"mousedown touchstart\",XF.proxy(this,\"buttonMouseDown\")).on(\"mouseleave mouseup touchend\",XF.proxy(this,\"buttonMouseUp\")).on(\"touchend\",function(a){a.preventDefault();c(this).click()}).insertAfter(b)},buttonFocus:function(a){return!1},buttonClick:function(a){this.step(c(a.target).data(\"dir\"))},step:function(a){var b=this.$textInput,c=\"step\"+a.charAt(0).toUpperCase()+a.slice(1);if(!b.prop(\"readonly\"))if(this.supportsStepFunctions())try{\"\"===\nb.val()&&b.val(b.attr(\"min\")||0),b[0][c](),b.trigger(\"change\").trigger(\"input\")}catch(f){}else this.stepFallback(a)},stepFallback:function(a){if(!this.$textInput.prop(\"readonly\")){if(\"object\"===typeof a&&a.keyCode){var b=a;switch(b.keyCode){case 38:a=\"up\";b.preventDefault();break;case 40:a=\"down\";b.preventDefault();break;default:return}}b=this.$textInput;var c=b.val(),d=\"down\"===a?-1:1;a=b.attr(\"min\")||null;var g=b.attr(\"max\")||null,h=this.options.step||b.attr(\"step\")||1,l=\"any\"==h;l&&(h=1);h=parseFloat(h);\nd=parseFloat(c)+h*d;if(Math.round(d)!==d){var m=0;c=c.split(\".\");l?m=c[1]?c[1].length:0:Math.floor(h)!==h&&(m=h.toString().split(\".\")[1].length||0);d=d.toFixed(m)}null!==a&&d<a&&(d=a);null!==g&&d>g&&(d=g);isNaN(d)&&(d=0);b.val(d);b.trigger(\"change\").trigger(\"input\")}},buttonMouseDown:function(a){this.buttonMouseUp(a);this.holdTimeout=setTimeout(XF.proxy(function(){this.holdInterval=setInterval(XF.proxy(function(){this.step(c(a.target).data(\"dir\"))},this),75)},this),500)},buttonMouseUp:function(a){clearTimeout(this.holdTimeout);\nclearInterval(this.holdInterval)},supportsStepFunctions:function(){var a=this.$textInput;return XF.browser.msie||a.prop(\"disabled\")||a.prop(\"readonly\")||this.$target.data(\"step\")||\"any\"===a.attr(\"step\")?!1:\"function\"===typeof a[0].stepUp&&\"function\"===typeof a[0].stepDown}});XF.PasswordHideShow=XF.Element.newHandler({options:{showText:null,hideText:null},$password:null,$checkbox:null,$label:null,init:function(){this.$password=this.$target.find(\".js-password\");var a=this.$target.find(\".js-hideShowContainer\");\nthis.$checkbox=a.find('input[type=\"checkbox\"]');this.$label=a.find(\".iconic-label\");this.$checkbox.on(\"change\",XF.proxy(this,\"toggle\"))},toggle:function(a){a=this.$password;var b=this.$label;this.$checkbox.is(\":checked\")?(a.attr(\"type\",\"text\"),b.html(this.options.hideText)):(a.attr(\"type\",\"password\"),b.html(this.options.showText))}});XF.CheckboxSelectDisabler=XF.Element.newHandler({options:{select:null},$select:null,$checkboxes:null,init:function(){(this.$select=XF.findRelativeIf(this.options.select,\nthis.$target))&&this.$select.length?(this.$checkboxes=this.$target.find(\":checkbox\").on(\"click\",XF.proxy(this,\"update\")),this.update()):console.warn(\"No select element found using %s\",this.options.select)},update:function(){var a=this.$select;this.$checkboxes.each(function(){var b=a.find(\"option[value=\"+this.value+\"]\").prop(\"disabled\",!this.checked);!this.checked&&b.is(\":selected\")&&a.find(\"option:enabled\").first().prop(\"selected\",!0)})}});XF.focusNext=function(a){!a instanceof c&&(a=c(a));var b=\nc(\"a, button, :input, [tabindex]\");a=b.index(a)+1;b.eq(a>=b.length?0:a).focus()};XF.Event.register(\"click\",\"submit\",\"XF.SubmitClick\");XF.Event.register(\"click\",\"multi-check\",\"XF.MultiCheck\");XF.Event.register(\"focus\",\"text-edit\",\"XF.TextEdit\");XF.Element.register(\"ajax-submit\",\"XF.AjaxSubmit\");XF.Element.register(\"auto-complete\",\"XF.AutoComplete\");XF.Element.register(\"user-mentioner\",\"XF.UserMentioner\");XF.Element.register(\"emoji-completer\",\"XF.EmojiCompleter\");XF.Element.register(\"auto-submit\",\"XF.AutoSubmit\");\nXF.Element.register(\"changed-field-notifier\",\"XF.ChangedFieldNotifier\");XF.Element.register(\"check-all\",\"XF.CheckAll\");XF.Element.register(\"select-plus\",\"XF.SelectPlus\");XF.Element.register(\"date-input\",\"XF.DateInput\");XF.Element.register(\"desc-loader\",\"XF.DescLoader\");XF.Element.register(\"disabler\",\"XF.Disabler\");XF.Element.register(\"field-adder\",\"XF.FieldAdder\");XF.Element.register(\"form-submit-row\",\"XF.FormSubmitRow\");XF.Element.register(\"guest-username\",\"XF.GuestUsername\");XF.Element.register(\"min-length\",\n\"XF.MinLength\");XF.Element.register(\"textarea-handler\",\"XF.TextAreaHandler\");XF.Element.register(\"permission-matrix\",\"XF.PermissionMatrix\");XF.Element.register(\"number-box\",\"XF.NumberBox\");XF.Element.register(\"checkbox-select-disabler\",\"XF.CheckboxSelectDisabler\");XF.Element.register(\"password-hide-show\",\"XF.PasswordHideShow\");XF.Element.register(\"change-submit\",\"XF.ChangeSubmit\")}(jQuery,window,document);\n\nvar $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,h,k){d instanceof String&&(d=String(d));for(var a=d.length,b=0;b<a;b++){var c=d[b];if(h.call(k,c,b,d))return{i:b,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(d,h,k){d!=Array.prototype&&d!=Object.prototype&&(d[h]=k.value)};\n$jscomp.getGlobal=function(d){return\"undefined\"!=typeof window&&window===d?d:\"undefined\"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,h,k,a){if(h){k=$jscomp.global;d=d.split(\".\");for(a=0;a<d.length-1;a++){var b=d[a];b in k||(k[b]={});k=k[b]}d=d[d.length-1];a=k[d];h=h(a);h!=a&&null!=h&&$jscomp.defineProperty(k,d,{configurable:!0,writable:!0,value:h})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(d){return d?d:function(d,k){return $jscomp.findInternal(this,d,k).v}},\"es6\",\"es3\");\n!function(d,h,k){XF._baseInserterOptions={after:null,append:null,before:null,prepend:null,replace:null,removeOldSelector:!0,animateReplace:!0,scrollTarget:null,href:null};XF.InserterClick=XF.Event.newHandler({eventNameSpace:\"XFInserterClick\",options:d.extend(!0,{},XF._baseInserterOptions),inserter:null,init:function(){this.inserter=new XF.Inserter(this.$target,this.options)},click:function(a){this.inserter.onEvent(a)}});XF.InserterFocus=XF.Element.newHandler({options:d.extend(!0,{},XF._baseInserterOptions),\ninserter:null,init:function(){this.inserter=new XF.Inserter(this.$target,this.options);this.$target.one(\"focus\",XF.proxy(this.inserter,\"onEvent\"))}});XF.Inserter=XF.create({options:d.extend(!0,{},XF._baseInserterOptions),$target:null,href:null,loading:!1,__construct:function(a,b){this.$target=a;this.options=d.extend(!0,{},this.options,b);(a=this.options.href||this.$target.data(\"inserter-href\")||this.$target.attr(\"href\"))?this.href=a:console.error(\"Target must have href\")},onEvent:function(a){a.preventDefault();\nif(!this.loading){this.loading=!0;a=d(this.options.replace);a.length&&a.addClassTransitioned(\"is-active\");var b=this;XF.ajax(\"get\",this.href,{},XF.proxy(this,\"onLoad\")).always(function(){b.loading=!1})}},onLoad:function(a){if(a.html){var b=this,c=this.options,e=c.scrollTarget,d;e&&(d=XF.findRelativeIf(e,this.$target));XF.setupHtmlInsert(a.html,function(a,e,d){b._applyChange(a,c.after,XF.proxy(b,\"_applyAfter\"));b._applyChange(a,c.append,XF.proxy(b,\"_applyAppend\"));b._applyChange(a,c.before,XF.proxy(b,\n\"_applyBefore\"));b._applyChange(a,c.prepend,XF.proxy(b,\"_applyPrepend\"));b._applyChange(a,c.replace,XF.proxy(b,\"_applyReplace\"));d(!0);return!1});XF.layoutChange();d&&d.length&&d[0].scrollIntoView(!0)}},_applyChange:function(a,b,c){if(b&&b.length){b=b.split(\",\");for(var e,f,g,h=0;h<b.length;h++)e=b[h].split(\" with \"),f=d.trim(e[0]),g=e[1]?d.trim(e[1]):f,f.length&&g.length&&(e=d(f).first(),g=a.is(g)?a:a.find(g).first(),c(f,e,g))}},_applyAfter:function(a,b,c){b.length&&c.length&&(c.insertAfter(b),XF.activate(c),\nthis._removeOldSelector(a,b))},_applyAppend:function(a,b,c){b.length&&c.length&&(a=c.children(),a.appendTo(b),XF.activate(a))},_applyBefore:function(a,b,c){b.length&&c.length&&(c.insertBefore(b),XF.activate(c),this._removeOldSelector(a,b))},_applyPrepend:function(a,b,c){b.length&&c.length&&(a=c.children(),a.prependTo(b),XF.activate(a))},_applyReplace:function(a,b,c){b.length&&(a=this.options.animateReplace,XF.isIOS()&&(a=!1),c.length&&(a&&c.hide(),c.insertAfter(b)),a?b.xfFadeUp(null,function(){b.remove();\nc.length&&XF.activate(c);c.xfFadeDown(null,XF.layoutChange)}):(b.remove(),c.length&&XF.activate(c)))},_removeOldSelector:function(a,b){if(this.options.removeOldSelector){var c;(c=a.match(/^\\.([a-z0-9_-]+)/i))&&b.removeClass(c[1])}}});XF.MenuClick=XF.Event.newHandler({eventNameSpace:\"XFMenuClick\",options:{menu:null,targetOpenClass:\"is-menuOpen\",openClass:\"is-active\",completeClass:\"is-complete\",zIndexRef:null,menuPosRef:null,arrowPosRef:null,directionThreshold:.6},$menu:null,$menuPosRef:null,menuRef:null,\n$arrowPosRef:null,arrowRef:null,pauseRepositioning:!1,scrollFunction:null,isPotentiallyFixed:!1,menuIsUp:!1,menuWidth:0,menuHeight:0,init:function(){this.options.menu&&(this.$menu=XF.findRelativeIf(this.options.menu,this.$target));this.$menu&&this.$menu.length||(this.$menu=this.$target.nextAll(\"[data-menu]\").first());if(this.$menu.length){this.$arrowPosRef=this.$menuPosRef=this.$target;if(this.options.menuPosRef){var a=XF.findRelativeIf(this.options.menuPosRef,this.$target);if(a.length&&(this.$menuPosRef=\na,this.options.arrowPosRef)){var b=XF.findRelativeIf(this.options.arrowPosRef,this.$target);b.closest(a).length&&(this.$arrowPosRef=b)}}this.$target.attr(\"aria-controls\",this.$menu.xfUniqueId());this.$menu.find(\".menu-arrow\").length||this.$menu.prepend('<span class=\"menu-arrow\" />');var c=this;this.$menu.data(\"menu-trigger\",this).on(\"click\",\"[data-menu-closer]\",function(){c.close()}).on({\"menu:open\":function(){c.open(XF.Feature.has(\"touchevents\"))},\"menu:close\":function(){c.close()},\"menu:reposition\":function(){c.isOpen()&&\nc.reposition()},keydown:XF.proxy(this,\"keyboardEvent\")});if(XF.isIOS()&&this.$target.hasFixableParent()){var e,f;this.$menu.on({touchstart:function(a){clearTimeout(e);clearTimeout(f);c.enableIOSInputFix(d(a.currentTarget));f=setTimeout(function(){c.resetIOSInputFix()},500)},focus:function(a){clearTimeout(e);clearTimeout(f);c.enableIOSInputFixFocus(d(a.currentTarget))},blur:function(a){clearTimeout(e);e=setTimeout(function(){c.isOpen()&&c.resetIOSInputFix()},200)}},XF.getKeyboardInputs())}a=this.$menu.closest(\".tooltip\");\nif(a.length)a.on(\"tooltip:hidden\",XF.proxy(this,\"close\"));if(a=this.$menu.data(\"menu-builder\"))if(XF.MenuBuilder[a])XF.MenuBuilder[a](this.$menu,this.$target,this);else console.error(\"No menu builder \"+a+\" found\")}else console.error(\"No menu found for %o\",this.$target[0])},click:function(a){if(!(a.ctrlKey||a.shiftKey||a.altKey)||!this.$target.attr(\"href\")){var b=XF.isEventTouchTriggered(a),c=!0;!b&&this.isOpen()&&(c=!1);c&&a.preventDefault();this.toggle(b,XF.NavDeviceWatcher.isKeyboardNav())}},isOpen:function(){return this.$target.hasClass(this.options.targetOpenClass)},\ntoggle:function(a){this.isOpen()?this.close():this.open(a)},open:function(a){var b=this.$menu,c=this.$target,e=this.$menuPosRef,f=0;if(!this.isOpen()&&!b.hasClass(\"is-disabled\")){this.pauseRepositioning=!1;b.appendTo(\"body\");this.updateMenuDimensions();this.updatePositionReferences();var g=this;this.$target.hasFixableParent()&&(this.scrollFunction=function(){c.is(\":hidden\")?g.close():g.repositionFixed(!0)},b.addClass(\"menu--potentialFixed\"),d(h).onPassive(\"scroll\",this.scrollFunction));if(this.options.zIndexRef){var l=\nXF.findRelativeIf(this.options.zIndexRef,c);l.length&&(f=XF.getElEffectiveZIndex(l))}XF.setRelativeZIndex(b,c,0,f);XF.MenuWatcher.onOpen(b,a);this.reposition();c.attr(\"aria-expanded\",\"true\").addClassTransitioned(this.options.targetOpenClass);b.attr(\"aria-hidden\",\"false\").addClassTransitioned(this.options.openClass,XF.proxy(function(){b.addClassTransitioned(this.options.completeClass)},this));e.addClassTransitioned(this.options.targetOpenClass);this.$target.trigger(\"menu:opened\",[b]);b.trigger(\"menu:opened\");\nif(!XF.isIOS()||!this.isPotentiallyFixed)b.on(\"menu:complete\",function(){XF.autoFocusWithin(b,\"[autofocus], [data-menu-autofocus]\")});if(b.data(\"href\")){if(!b.data(\"menu-loading\")){b.data(\"menu-loading\",!0);var m=b.data(\"nocache\")?!1:!0;XF.ajax(\"get\",b.data(\"href\"),{},function(a){m&&b.data(\"href\",!1);a.html&&XF.setupHtmlInsert(a.html,function(a,c,e){(c=b.data(\"load-target\"))?b.find(c).first().empty().html(a):b.html(a);g.$target.trigger(\"menu:loaded\",[a,b]);g.updateMenuDimensions();e();setTimeout(XF.proxy(g,\n\"reposition\"),0);g.$target.trigger(\"menu:complete\",[b]);b.trigger(\"menu:complete\")})},{cache:m}).always(function(){b.data(\"menu-loading\",!1)})}}else this.$target.trigger(\"menu:complete\",[b]),b.trigger(\"menu:complete\")}},reposition:function(a,b){if(!this.pauseRepositioning||a)if(!this.$menu.data(\"ios-scroll-timeout\")||a){this.updatePositionReferences();this.$menu.css({visibility:\"hidden\",display:\"block\",position:\"\",top:\"\",bottom:\"\",left:\"\",right:\"\"});a=d(h).viewport();var c={};c=this.getHorizontalPosition(a,\nc);c=this.getVerticalPosition(a,c,b);c.display=\"\";c.visibility=\"\";this.$menu.css(c)}},repositionFixed:function(a){if(!this.pauseRepositioning){var b=this.$menu;if(a&&XF.isIOS()){a=b.data(\"ios-scroll-timeout\");var c=this;clearTimeout(a);a=setTimeout(function(){b.removeData(\"ios-scroll-timeout\");c.reposition()},300);b.data(\"ios-scroll-timeout\",a)}else{this.updatePositionReferences();var e=this.$target.data(\"menu-h\");a=b.data(\"menu-reset-timer\");if(e&&this.menuRef.left==e[0]&&this.menuRef.width==e[1]){e=\nd(h).viewport();var f=this.$target.hasFixedParent()?\"fixed\":\"absolute\",g={top:parseInt(b.css(\"top\"),10)};this.menuIsUp=this.$menu.hasClass(\"menu--up\");a&&clearTimeout(a);\"fixed\"==f&&f!=b.css(\"position\")?(g={\"transition-property\":\"none\"},g=this.getVerticalFixedPosition(e,g)):\"absolute\"==f&&(g={\"transition-property\":\"none\"},g=this.getVerticalAbsolutePosition(e,g));b.css(g).toggleClass(\"menu--up\",this.menuIsUp);a=setTimeout(function(){b.css(\"transition-property\",\"\")},250);b.data(\"menu-reset-timer\",a)}else this.reposition()}}},\ngetHorizontalPosition:function(a,b){var c=!1,e=0;this.menuWidth>a.width?e=this.menuRef.left-a.left:this.menuRef.left+this.menuRef.width/2>a.width*this.options.directionThreshold?(e=0-this.menuWidth+this.menuRef.width,c=!0):this.menuRef.width>this.menuWidth&&(e=Math.floor((this.menuRef.width-this.menuWidth)/2));e=Math.min(e,a.right-this.menuWidth-this.menuRef.left-5);e=Math.max(e,a.left-this.menuRef.left+5);b.left=this.menuRef.left+e;this.$target.data(\"menu-h\",[this.menuRef.left,this.menuRef.width,\ne]);this.$menu.toggleClass(\"menu--left\",!c).toggleClass(\"menu--right\",c);a=Math.min(this.arrowRef.left-this.menuRef.left+this.arrowRef.width/2-e,this.menuWidth-20);this.$menu.find(\".menu-arrow\").css({top:\"\",left:a});return b},getVerticalPosition:function(a,b,c){this.menuIsUp=!1;b=!c&&this.$target.hasFixedParent()?this.getVerticalFixedPosition(a,b):this.getVerticalAbsolutePosition(a,b);this.$menu.toggleClass(\"menu--up\",this.menuIsUp);return b},getVerticalFixedPosition:function(a,b){b.top=Math.max(0,\nMath.round(this.menuRef.bottom)-a.top)-this.getTopShift();b.position=\"fixed\";b.top+this.menuHeight+a.top>a.bottom&&this.menuRef.top-this.menuHeight>a.top?(b.top=\"\",b.bottom=a.bottom-this.menuRef.top+5,this.menuIsUp=!0):this.menuIsUp=!1;return b},getVerticalAbsolutePosition:function(a,b){b.top=this.menuRef.bottom-this.getTopShift();b.position=\"\";b.top+this.menuHeight>a.bottom&&this.menuRef.top-this.menuHeight>a.top?(b.top=\"\",b.bottom=a.height-this.menuRef.top+5,this.menuIsUp=!0):this.menuIsUp=!1;return b},\ngetTopShift:function(){return this.$menu.hasClass(\"menu--structural\")?parseInt(XF.config.borderSizeFeature,10):0},updateMenuDimensions:function(){this.menuWidth=this.$menu.outerWidth(!0);this.menuHeight=this.$menu.outerHeight(!0);return{menuWidth:this.menuWidth,menuHeight:this.menuHeight}},updatePositionReferences:function(){this.menuRef=this.$menuPosRef.dimensions(!0);this.arrowRef=this.$arrowPosRef==this.$menuPosRef?this.menuRef:this.$arrowPosRef.dimensions(!0);return{menuRef:this.menuRef,arrowRef:this.arrowRef}},\nclose:function(){if(this.isOpen()){var a=this.$menu;this.$target.attr(\"aria-expanded\",\"false\").removeClassTransitioned(this.options.targetOpenClass);a.attr(\"aria-hidden\",\"true\").removeClass(this.options.completeClass).removeClassTransitioned(this.options.openClass);this.$menuPosRef.removeClassTransitioned(this.options.targetOpenClass);d(h).offPassive(\"scroll\",this.scrollFunction);XF.MenuWatcher.onClose(a);this.$target.trigger(\"menu:closed\",[a]);a.trigger(\"menu:closed\");this.resetIOSInputFix()}},enableIOSInputFix:function(a){XF.isIOS()&&\n(this.reposition(!1,!0),this.pauseRepositioning=!0)},enableIOSInputFixFocus:function(a){if(this.$target.hasFixedParent()){var b=h.scrollY,c=this.$menu,e=d(\"body\");\"relative\"!=e.css(\"position\")&&(this.pauseRepositioning=!0,c.css({position:\"absolute\",top:b,\"transition-property\":\"none\"}),setTimeout(function(){c.css(\"transition-property\",\"\")},200),d(\"html\").css(\"overflow\",\"hidden\"),e.css({position:\"relative\",top:-b,\"margin-bottom\":-b}),a[0].scrollIntoView(),h.scrollBy(0,-100))}},resetIOSInputFix:function(){if(XF.isIOS()){var a=\nd(\"body\");if(\"relative\"==a.css(\"position\")){var b=(-1*parseInt(a.css(\"top\"),10)||0)+h.scrollY;a.css({position:\"\",top:\"\",\"margin-bottom\":\"\"});d(\"html\").css(\"overflow\",\"\");h.scrollTo(0,b)}this.pauseRepositioning=!1;this.isOpen()&&this.reposition()}},keyboardEvent:function(a){if((\"ArrowUp\"==a.key||\"ArrowDown\"==a.key)&&XF.Keyboard.isShortcutAllowed(k.activeElement)&&d(k.activeElement).closest(\".menu\").get(0)==this.$menu.get(0)){var b=d(k.activeElement),c=b.closest(\".menu\").find(\"a\");b=c.index(b)+(\"ArrowUp\"==\na.key?-1:1);0>b?b=c.length-1:b>=c.length&&(b=0);d(c.get(b)).focus();a.preventDefault();return!1}}});XF.MenuWatcher=function(){var a=d([]),b=null,c=!1,e=!1,f=function(a){e||l(a.target)},g=function(b){a.trigger(\"menu:reposition\")},l=function(b){if(!c){c=!0;var e=d(b);a.each(function(){var a=d(this).data(\"menu-trigger\"),b=a?a.$target:null;e.closest(this).length||b&&e.closest(b).length||a&&a.close()});c=!1}};return{onOpen:function(c,e){b||(b=d('<div class=\"menuOutsideClicker\" />').on(\"click\",f).insertBefore(c));\na.length||(d(k).on(\"click\",f),d(h).onPassive(\"resize\",g),e&&b.addClass(\"is-active\"));a=a.add(c)},onClose:function(c){a=a.not(c);a.length||(d(k).off(\"click\",f),d(h).offPassive(\"resize\",g),b&&b.removeClass(\"is-active\"));l(c)},closeAll:function(){c=!0;a.trigger(\"menu:close\");c=!1},closeUnrelated:l,preventDocClick:function(){e=!0},allowDocClick:function(){e=!1}}}();XF.MenuBuilder={actionBar:function(a,b,c){var e=a.find(\".js-menuBuilderTarget\");b.closest(\".actionBar-set\").find(\".actionBar-action--menuItem\").each(function(){var a=\nd(this).clone();a.removeClass().addClass(\"menu-linkRow\");e.append(a)});XF.activate(e)},dataList:function(a,b,c){var e=a.find(\".js-menuBuilderTarget\");b.closest(\".dataList-row\").find(\".dataList-cell--responsiveMenuItem\").each(function(){d(this).clone().children().each(function(){var a=d(this);a.is(\"a\")?a.removeClass().addClass(\"menu-linkRow\"):a.wrap('<div class=\"menu-row\"></div>');e.append(a)})});XF.activate(e)}};XF.MenuProxy=XF.Event.newHandler({eventNameSpace:\"XFMenuProxy\",options:{trigger:null},\n$trigger:null,init:function(){this.$trigger=XF.findRelativeIf(this.options.trigger,this.$target);if(!this.$trigger||!this.$trigger.length)throw Error(\"Specified menu trigger not found\");},click:function(a){setTimeout(XF.proxy(function(){this.$trigger.trigger(\"click\",[a])},this),0)}});XF.OffCanvasClick=XF.Event.newHandler({eventNameSpace:\"XFOffCanvasClick\",options:{menu:null,openClass:\"is-active\"},$menu:null,init:function(){this.options.menu&&(this.$menu=XF.findRelativeIf(this.options.menu,this.$target));\nthis.$menu&&this.$menu.length||(this.$menu=this.$target.nextAll(\"[data-menu]\").first());if(this.$menu.length){this.$menu.on(\"click\",\"[data-menu-close]\",XF.proxy(this,\"closeTrigger\")).on(\"off-canvas:close\",XF.proxy(this,\"closeTrigger\")).on(\"off-canvas:open\",XF.proxy(this,\"openTrigger\"));var a=this.$menu.data(\"ocm-builder\");if(a)if(XF.OffCanvasBuilder[a])XF.OffCanvasBuilder[a](this.$menu,this);else console.error(\"No off canvas builder \"+a+\" found\")}else console.error(\"No menu found for %o\",this.$target[0])},\nclick:function(a){a.preventDefault();this.toggle()},isOpen:function(){return this.$menu.hasClass(this.options.openClass)},toggle:function(){this.isOpen()?this.close():this.open()},openTrigger:function(a){a.preventDefault();this.open()},open:function(){if(!this.isOpen()){var a=this.$menu;this.addOcmClasses(a);a.attr(\"aria-hidden\",\"false\").trigger(\"off-canvas:opening\");a.addClassTransitioned(this.options.openClass,function(){a.trigger(\"off-canvas:opened\")});XF.Modal.open()}},addOcmClasses:function(a){var b=\na.attr(\"data-ocm-class\");b&&a.addClass(b);a.find(\"[data-ocm-class]\").each(function(){var a=d(this);a.addClass(a.attr(\"data-ocm-class\"))})},removeOcmClasses:function(a){var b=a.attr(\"data-ocm-class\");b&&a.removeClass(b);a.find(\"[data-ocm-class]\").each(function(){var a=d(this);a.removeClass(a.attr(\"data-ocm-class\"))})},closeTrigger:function(a,b){a.preventDefault();this.close(b&&b.instant)},close:function(a){if(this.isOpen()){var b=this.$menu,c=this;b.attr(\"aria-hidden\",\"true\").trigger(\"off-canvas:closing\");\nb.removeClassTransitioned(this.options.openClass,function(){b.trigger(\"off-canvas:closed\");c.removeOcmClasses(b)},a);XF.Modal.close()}}});XF.OffCanvasBuilder={navigation:function(a,b){a.appendTo(\"body\");var c=d('<ul class=\"offCanvasMenu-list\" />');d(\".js-offCanvasNavSource .p-navEl\").each(function(){var a=d(this),b=a.hasClass(\"is-selected\"),g=a.find(\".p-navEl-link\"),h=a.find(\"[data-menu]\");a.data(\"has-children\")&&!h.length&&(a=a.find('[data-xf-click~=\"menu\"]').first().data(\"xf-click-handlers\"))&&\na.menu&&(h=a.menu.$menu);if(g.length){a=d('<div class=\"offCanvasMenu-linkHolder\" />');var k=g.clone();g=d(\"<li />\");k.removeClass(\"p-navEl-link p-navEl-link--menuTrigger p-navEl-link--splitMenu\").addClass(\"offCanvasMenu-link\");a.html(k);b&&(g.addClass(\"is-selected\"),a.addClass(\"is-selected\"));g.html(a);if(h.length){k=d('<a class=\"offCanvasMenu-link offCanvasMenu-link--splitToggle\" data-xf-click=\"toggle\" data-target=\"< :up :next\" role=\"button\" tabindex=\"0\" />');b&&k.addClass(\"is-active\");a.append(k);\nvar n=d('<ul class=\"offCanvasMenu-subList\" />');b&&n.addClass(\"is-active\");h.find(\".menu-linkRow\").each(function(){var a=d(this),b=d(\"<li />\");b.html(a.clone().removeClass(\"menu-linkRow\").addClass(\"offCanvasMenu-link\"));n.append(b)});g.append(n)}c.append(g)}});a=a.find(\".js-offCanvasNavTarget\").append(c);XF.activate(a)},sideNav:function(a,b){var c=a.find(\".offCanvasMenu-content\"),e=b.$target;c.find(\"[data-menu-close]\").length||(b=c.find(\".block-header:first\"),b.length||(b=d('<div class=\"offCanvasMenu-header offCanvasMenu-header--separated offCanvasMenu-shown\" />'),\nb.html(e.html()),c.prepend(b)),b.append('<a class=\"offCanvasMenu-closer\" data-menu-close=\"true\" role=\"button\" tabindex=\"0\" />'));d(h).onPassive(\"resize\",function(){e.is(\":visible\")||a.trigger(\"off-canvas:close\")})}};XF.OverlayClick=XF.Event.newHandler({eventNameSpace:\"XFOverlayClick\",options:{cache:!0,overlayConfig:{},forceFlashMessage:!1,followRedirects:!1,closeMenus:!0},overlay:null,loadUrl:null,loading:!1,visible:!1,init:function(){var a=this.getOverlayHtml();if(a)this.setupOverlay(new XF.Overlay(a,\nthis.options.overlayConfig));else{a=this.getLoadUrl();if(!a)throw Error(\"Could not find an overlay for target\");this.loadUrl=a}this.options.closeMenus&&XF.MenuWatcher.closeAll()},click:function(a){a.preventDefault();this.toggle()},toggle:function(){this.overlay?this.overlay.toggle():this.show()},show:function(){if(this.overlay)this.overlay.show();else if(!this.loading){this.loading=!0;var a=this,b={cache:this.options.cache,beforeShow:function(b){a.overlay=b},init:XF.proxy(this,\"setupOverlay\")};this.options.followRedirects&&\n(b.onRedirect=function(b,e){a.options.forceFlashMessage?XF.flashMessage(b.message,1E3,function(){XF.redirect(b.redirect)}):XF.redirect(b.redirect)});(b=XF.loadOverlay(this.loadUrl,b,this.options.overlayConfig))?b.always(function(){setTimeout(function(){a.loading=!1},300)}):this.loading=!1}},hide:function(){this.overlay&&this.overlay.hide()},getOverlayHtml:function(){var a=this.$target,b=a.data(\"target\");if(b){var c=a.find(b).eq(0);c.length||(c=d(b).eq(0))}c&&c.length||(a=a.attr(\"href\"))&&\"#\"==a.substr(0,\n1)&&(c=d(a).eq(0));c&&c.length&&!c.is(\".overlay\")&&(c=XF.getOverlayHtml(c));return c&&c.length?c:null},getLoadUrl:function(){var a=this.$target;return a.data(\"href\")||a.attr(\"href\")||null},setupOverlay:function(a){this.overlay=a;var b=this;a.on({\"overlay:shown\":function(){b.visible=!0},\"overlay:hidden\":function(){b.visible=!1}});if(!this.options.cache&&this.loadUrl)a.on(\"overlay:hidden\",function(){b.overlay=null});return this.overlay}});XF.OverlayClick.overlayCache={};XF.ToggleClick=XF.Event.newHandler({eventNameSpace:\"XFToggleClick\",\noptions:{target:null,container:null,hide:null,activeClass:\"is-active\",activateParent:null,scrollTo:null},$toggleTarget:null,$toggleParent:null,toggleUrl:null,ajaxLoaded:!1,loading:!1,init:function(){this.$toggleTarget=XF.getToggleTarget(this.options.target,this.$target);if(!this.$toggleTarget)return!1;this.options.activateParent&&(this.$toggleParent=this.$target.parent());this.toggleUrl=this.getToggleUrl()},click:function(a){a.preventDefault();this.$toggleTarget&&this.toggle()},isVisible:function(){return this.$toggleTarget.hasClass(this.options.activeClass)},\nisTransitioning:function(){return this.$toggleTarget.hasClass(\"is-transitioning\")},toggle:function(){this.isVisible()?this.hide():this.show();this.$target.blur()},load:function(){var a=this.toggleUrl,b=this;a&&!this.loading&&(this.loading=!0,XF.ajax(\"get\",a,function(a){a.html&&XF.setupHtmlInsert(a.html,function(a,c,d){if(c=b.$toggleTarget.data(\"load-selector\"))c=a.find(c).first(),c.length&&(a=c);b.ajaxLoaded=!0;b.$toggleTarget.append(a);XF.activate(a);d(!0);b.show();return!1})}).always(function(){b.ajaxLoaded=\n!0;b.loading=!1}))},hide:function(a){if(this.isVisible()&&!this.isTransitioning()){var b=this.options.activeClass;this.$toggleParent&&this.$toggleParent.removeClassTransitioned(b,XF.proxy(this,\"inactiveTransitionComplete\"),a);this.$toggleTarget&&this.$toggleTarget.removeClassTransitioned(b,XF.proxy(this,\"inactiveTransitionComplete\"),a);this.$target.removeClassTransitioned(b,XF.proxy(this,\"inactiveTransitionComplete\"),a)}},show:function(a){if(!this.isVisible()&&!this.isTransitioning()&&!this.getOtherToggles().filter(\".is-transitioning\").length)if(this.toggleUrl&&\n!this.ajaxLoaded)this.load();else{this.closeOthers();var b=this.options.activeClass;this.$toggleParent&&this.$toggleParent.addClassTransitioned(b,this.activeTransitionComplete,a);this.$toggleTarget&&this.$toggleTarget.addClassTransitioned(b,this.activeTransitionComplete,a);this.$target.addClassTransitioned(b,this.activeTransitionComplete,a);this.hideSpecified();this.scrollTo();XF.autoFocusWithin(this.$toggleTarget,\"[autofocus], [data-toggle-autofocus]\")}},activeTransitionComplete:function(a){d(this).trigger(\"toggle:shown\");\nXF.layoutChange()},inactiveTransitionComplete:function(a){d(this).trigger(\"toggle:hidden\");XF.layoutChange()},closeOthers:function(){this.getOtherToggles().each(function(){var a=d(this).data(\"xf-click-handlers\");a||(a=XF.Event.initElement(this,\"click\"));a&&a.toggle&&a.toggle.hide(!0)})},hideSpecified:function(){var a=d(this.options.hide);a&&a.length&&a.hide()},scrollTo:function(){if(this.options.scrollTo){var a=this.$toggleTarget,b=a.offset().top;a=a.height();var c=d(h).height();b=a<c?b-(c/2-a/2):\nb;d(\"html, body\").animate({scrollTop:b},XF.config.speed.fast)}},getToggleUrl:function(){var a=this.$toggleTarget,b;return a&&(b=a.data(\"href\"))?\"trigger-href\"==b?this.$target.attr(\"href\"):b:null},getContainer:function(){if(this.options.container){var a=this.$target.closest(this.options.container);if(a.length)return a;console.error(\"Container parent not found: \"+this.options.container)}return null},getOtherToggles:function(){var a=this.getContainer();return a&&a.length?a.find(\"[data-xf-click~=toggle]\").not(this.$target[0]):\nd([])}});XF.getToggleTarget=function(a,b){a=a?XF.findRelativeIf(a,b):b.next();if(!a.length)throw Error(\"No toggle target for %o\",b);return a};XF.ToggleStorage=XF.Element.newHandler({options:{storageType:\"local\",storageContainer:\"toggle\",storageKey:null,target:null,container:null,hide:null,activeClass:\"is-active\",activateParent:null},targetId:null,storage:null,init:function(){var a=this.options.storageContainer;if(!a)throw Error(\"Storage container not specified for ToggleStorage handler\");var b=this.options.storageKey;\nif(!b)throw Error(\"Storage key not specified for ToggleStorage handler\");this.storage=XF.ToggleStorageData.getInstance(this.options.storageType);if(!this.storage)throw Error(\"Invalid storage type \"+this.options.storageType);b=this.storage.get(a,b);if(null!==b){var c=XF.getToggleTarget(this.options.target,this.$target);if(c.length){var e=this.options.activeClass;this.$target.toggleClass(e,b);c.toggleClass(e,b)}}this.storage.prune(a);this.$target.on(\"xf-click:after-click.XFToggleClick\",XF.proxy(this,\n\"updateStorage\"))},updateStorage:function(){var a=this.options;this.storage.set(a.storageContainer,a.storageKey,this.$target.hasClass(a.activeClass))}});XF.ToggleStorageDataInstance=XF.create({storage:null,dataCache:{},syncTimers:{},pruneTimers:{},__construct:function(a){this.storage=a},getStorage:function(){return this.storage},get:function(a,b,c){c||(c={});var e=c.allowExpired||!0;c=c.touch||!0;this.dataCache[a]||(this.dataCache[a]=this.storage.getJson(a));var d=this.dataCache[a];if(!d.hasOwnProperty(b))return null;\nd=d[b];var g=Math.floor(Date.now()/1E3);if(!e&&d[0]+d[1]<g)return delete this.dataCache[a][b],this.scheduleSync(a),null;c&&(d[0]=g,this.dataCache[a][b]=d,this.scheduleSync(a));return d[2]},set:function(a,b,c,e){this.dataCache[a]||(this.dataCache[a]={});e||(e=14400);var d=Math.floor(Date.now()/1E3);this.dataCache[a][b]=[d,e,c];this.scheduleSync(a)},remove:function(a,b){this.dataCache[a]||(this.dataCache[a]={});delete this.dataCache[a][b];this.scheduleSync(a)},prune:function(a,b){var c=this.pruneTimers[a],\nd=this,f=function(){clearTimeout(c);d.pruneTimers[a]=null;d.pruneInternal(a)};b?f():c||(this.pruneTimers[a]=setTimeout(f,100))},pruneInternal:function(a){this.dataCache[a]||(this.dataCache[a]=this.storage.getJson(a));var b=this.dataCache[a],c=Math.floor(Date.now()/1E3),d=!1,f;for(f in b)if(b.hasOwnProperty(f)){var g=b[f];g[0]+g[1]<c&&(delete b[f],d=!0)}d&&(this.dataCache[a]=b,this.scheduleSync(a))},scheduleSync:function(a,b){var c=this.syncTimers[a],d=this,f=function(){clearTimeout(c);d.syncTimers[a]=\nnull;d.syncToStorage(a)};b?f():c||(d.syncTimers[a]=setTimeout(f,100))},syncToStorage:function(a){if(this.dataCache[a]){var b=this.dataCache[a];d.isEmptyObject(b)?this.storage.remove(a):this.storage.setJson(a,b)}}});XF.ToggleStorageData=function(){var a={local:new XF.ToggleStorageDataInstance(XF.LocalStorage),cookie:new XF.ToggleStorageDataInstance(XF.Cookie)},b=a.local;return{getInstance:function(b){return a[b]},get:function(a,d,f){return b.get(a,d,f)},set:function(a,d,f,g){return b.set(a,d,f,g)},\nremove:function(a,d){return b.remove(a,d)},prune:function(a,d){return b.prune(a,d)}}}();XF.ToggleClassClick=XF.Event.newHandler({eventNameSpace:\"XFToggleClassClick\",options:{class:null},init:function(){},click:function(a){this.options.class&&this.toggle()},toggle:function(){this.$target.toggleClass(this.options.class)}});XF.HScroller=XF.Element.newHandler({options:{scrollerClass:\"hScroller-scroll\",actionClass:\"hScroller-action\",autoScroll:\".tabs-tab.is-active\"},$scrollTarget:null,$goStart:null,$goEnd:null,\ninit:function(){var a=this.$target.find(\".\"+this.options.scrollerClass).first();if(a.length){this.$scrollTarget=a;var b,c,e=this;a.on(\"mousedown.horizontalScroller\",function(a){a.button||(b=a.clientX,c=!1,a.preventDefault(),XF.isEventTouchTriggered(a)&&(a=d(k.activeElement),a.is(\":input\")&&a.blur()),d(h).on(\"mouseup.horizontalScroller\",function(a){d(h).off(\".horizontalScroller\");c&&a.preventDefault()}).on(\"mousemove.horizontalScroller\",function(a){var d=b-a.clientX;0!=d&&(e.move(d)&&(c=!0),b=a.clientX)}))}).on(\"click.horizontalScroller\",\nfunction(a){c&&(a.preventDefault(),a.stopImmediatePropagation(),c=!1)}).on(\"scroll.horizontalScroller\",XF.proxy(this,\"updateScroll\")).on(\"tab:click.horizontalScroller\",function(a){c&&a.preventDefault()});var f=XF.measureScrollBar(null,\"height\");a.addClass(\"is-calculated\");0!=f&&a.css(\"margin-bottom\",parseInt(a.css(\"margin-bottom\"),10)-f+\"px\");f=this.options.actionClass;this.$goStart=d('<i class=\"'+f+\" \"+f+'--start\" aria-hidden=\"true\" />').click(function(){e.step(-1)}).insertAfter(a);this.$goEnd=d('<i class=\"'+\nf+\" \"+f+'--end\" aria-hidden=\"true\" />').click(function(){e.step(1)}).insertAfter(a);this.updateScroll();d(k.body).on(\"xf:layout\",XF.proxy(this,\"updateScroll\"));var g;d(h).on(\"resize\",function(){g&&clearTimeout(g);g=setTimeout(XF.proxy(e,\"updateScroll\"),100)});var l=a.find(this.options.autoScroll).first();if(l.length){f=this.$target.width();var m=l.position();l=l.outerWidth();m=m.left;l=m+l;XF.isRtl()?80>m&&a.normalizedScrollLeft(-l+f-50):l>f&&(l+80>f?a.normalizedScrollLeft(m-50):a.normalizedScrollLeft(m-\n80))}}else console.error(\"no scroll target\")},move:function(a){var b=this.$scrollTarget,c=b.normalizedScrollLeft();XF.isRtl()&&(a*=-1);b.normalizedScrollLeft(c+a);return b.normalizedScrollLeft()!==c},step:function(a){var b=Math.max(125,Math.floor(.25*this.$scrollTarget.width())),c=\"+=\";switch(d.support.scrollLeftType){case \"inverted\":case \"negative\":c=\"-=\"}this.$scrollTarget.animate({scrollLeft:c+a*b},150)},updateScroll:function(){var a=this.$scrollTarget[0],b=this.$scrollTarget.normalizedScrollLeft();\na=a.offsetWidth+b+1<a.scrollWidth;this.$goStart[0<b?\"addClass\":\"removeClass\"](\"is-active\");this.$goEnd[a?\"addClass\":\"removeClass\"](\"is-active\")}});XF.ResponsiveDataList=XF.Element.newHandler({options:{headerRow:\".dataList-row--header\",headerCells:\"th, td\",rows:\".dataList-row:not(.dataList-row--subSection, .dataList-row--header)\",rowCells:\"td\",triggerWidth:\"narrow\"},$headerRow:null,headerText:[],$rows:null,isResponsive:!1,init:function(){var a=this.$target.find(this.options.headerRow).first(),b=[];\na.find(this.options.headerCells).each(function(){var a=d(this),e=a.text();a=parseInt(a.attr(\"colspan\"),10);b.push(d.trim(e));if(1<a)for(e=1;e<a;e++)b.push(\"\")});this.$headerRow=a;this.headerText=b;this.$rows=this.$target.find(this.options.rows);this.process();d(k).on(\"breakpoint:change\",XF.proxy(this,\"process\"))},process:function(){var a=XF.Breakpoint.isAtOrNarrowerThan(this.options.triggerWidth);a&&this.isResponsive||!a&&!this.isResponsive||(a?this.apply():this.remove())},apply:function(){var a=\nthis;this.$rows.each(function(){a.processRow(d(this),!0)});this.$target.addClass(\"dataList--responsive\");this.$headerRow.addClass(\"dataList-row--headerResponsive\");this.isResponsive=!0},remove:function(){var a=this;this.$rows.each(function(){a.processRow(d(this),!1)});this.$target.removeClass(\"dataList--responsive\");this.$headerRow.removeClass(\"dataList-row--headerResponsive\");this.isResponsive=!1},processRow:function(a,b){var c=0,e=this.headerText;a.find(this.options.rowCells).each(function(){var a=\nd(this);if(b){var g=e[c];g&&g.length&&!a.data(\"hide-label\")?a.attr(\"data-cell-label\",g):a.removeAttr(\"data-cell-label\")}else a.removeAttr(\"data-cell-label\");c++})}});XF.Sticky=XF.Element.newHandler({options:{parent:null,inner_scrolling:!0,sticky_class:\"is-sticky\",offset_top:null,spacer:null,bottoming:null,recalc_every:null},init:function(){\"false\"==this.options.spacer&&(this.options.spacer=!1);this.$target.stick_in_parent(this.options)}});XF.StickyHeader=XF.Element.newHandler({options:{stickyClass:\"is-sticky\",\nstickyBrokenClass:\"is-sticky-broken\",stickyDisabledClass:\"is-sticky-disabled\",minWindowHeight:251},active:null,supportsSticky:!1,stickyBroken:!1,windowTooSmall:!1,init:function(){var a=this.$target.css(\"position\");a=\"sticky\"==a||\"-webkit-sticky\"==a;var b=!1;if(a){var c=h.navigator.userAgent,e=c.match(/Chrome\\/(\\d+)/);e&&60>parseInt(e[1],10)&&(b=!0,a=!1);(e=c.match(/ Edge\\/(\\d+)/))&&17<=parseInt(e[1],10)&&XF.isRtl()&&(b=!0,a=!1)}this.supportsSticky=a;this.stickyBroken=b;this.update();d(h).on(\"resize.sticky-header\",\nXF.proxy(this,\"update\"))},update:function(){(this.windowTooSmall=d(h).height()<this.options.minWindowHeight)?!1!==this.active&&this._disable():this.active||this._enable()},_enable:function(){this.active=!0;var a=this.$target,b=this.options.stickyClass,c=this.options.stickyBrokenClass;a.removeClass(this.options.stickyDisabledClass);if(this.supportsSticky){var e=!1,f=parseInt(a.css(\"top\"),10),g=XF.isIOS(),k,m=function(c){var d=Math.floor(a[0].getBoundingClientRect().top);d<f||d==f&&0<h.scrollY?e||(a.addClass(b),\ne=!0):e&&(g&&c?(clearTimeout(k),k=setTimeout(function(){m(!1)},200)):(a.removeClass(b),e=!1))};d(h).on(\"scroll.sticky-header\",function(){m(!0)});m(!1)}else this.stickyBroken&&setTimeout(function(){a.addClass(c)},0),a.stick_in_parent({sticky_class:b})},_disable:function(){this.active=!1;var a=this.$target,b=this.options.stickyClass,c=this.options.stickyBrokenClass,e=this.options.stickyDisabledClass;this.supportsSticky?d(h).off(\"scroll.sticky-header\"):a.trigger(\"sticky_kit:detach\").removeData(\"sticky_kit\");\na.removeClass(b).removeClass(c).addClass(e)}});XF.Tabs=XF.Element.newHandler({options:{tabs:\".tabs-tab\",panes:null,activeClass:\"is-active\",state:null,preventDefault:!0},initial:0,$tabs:null,$panes:null,$activeTab:null,$activePane:null,init:function(){var a=this.$target;var b=this.$tabs=a.find(this.options.tabs);a=this.options.panes?XF.findRelativeIf(this.options.panes,a):a.next();a.is(\"ol, ul\")&&(a=a.find(\"> li\"));this.$panes=a;if(b.length!=a.length)console.error(\"Tabs and panes contain different totals: %d tabs, %d panes\",\nb.length,a.length),console.error(\"Tabs: %o, Panes: %o\",b,a);else{for(a=0;a<b.length;a++)if(b.eq(a).hasClass(this.options.activeClass)){this.initial=a;break}b.on(\"click\",XF.proxy(this,\"tabClick\"));d(h).on(\"hashchange\",XF.proxy(this,\"onHashChange\"));d(h).on(\"popstate\",XF.proxy(this,\"onPopState\"));this.reactToHash()}},getSelectorFromHash:function(){var a=\"\";if(1<h.location.hash.length){var b=h.location.hash.replace(/[^a-zA-Z0-9_-]/g,\"\");b&&b.length&&(a=\"#\"+b)}return a},reactToHash:function(){var a=this.getSelectorFromHash();\na?this.activateTarget(a):this.activateTab(this.initial)},onHashChange:function(a){this.reactToHash()},onPopState:function(a){(a=a.originalEvent.state)&&a.id?this.activateTarget(\"#\"+a.id,!1):a&&a.offset?this.activateTab(a.offset):this.activateTab(this.initial)},activateTarget:function(a){var b=this.$tabs,c=!1,e=!1;if(a){try{var f=d(a);c=f&&0<f.length}catch(g){c=!1}if(c)for(c=0;c<b.length;c++)b.eq(c).is(a)&&(this.activateTab(c),e=!0)}e||this.activateTab(this.initial)},activateTab:function(a){var b=\nthis.$tabs.eq(a),c=this.$panes.eq(a),d=this.options.activeClass;b.length&&c.length?(this.$tabs.filter(\".\"+d).removeClass(d).attr(\"aria-selected\",\"false\").trigger(\"tab:hidden\"),this.$panes.filter(\".\"+d).removeClass(d).attr(\"aria-expanded\",\"false\").trigger(\"tab:hidden\"),b.addClass(d).attr(\"aria-selected\",\"true\").trigger(\"tab:shown\"),c.addClass(d).attr(\"aria-expanded\",\"true\").trigger(\"tab:shown\"),XF.layoutChange(),c.data(\"href\")&&!c.data(\"tab-loading\")&&(c.data(\"tab-loading\",!0),XF.ajax(\"get\",c.data(\"href\"),\n{},function(a){c.data(\"href\",!1);if(a.html){var b=c.data(\"load-target\");b?XF.setupHtmlInsert(a.html,c.find(b)):XF.setupHtmlInsert(a.html,c)}}).always(function(){c.data(\"tab-loading\",!1)}))):console.error(\"Selected invalid tab \"+a)},tabClick:function(a){var b=a.currentTarget,c=this.$tabs.index(b);if(-1==c)console.error(\"Did not find clicked element (%o) in tabs\",b);else{b=this.$tabs.eq(c);var e=d.Event(\"tab:click\");b.trigger(e,this);if(!e.isDefaultPrevented()){this.options.preventDefault&&a.preventDefault();\nif(this.options.state)switch(a=h.location.href.split(\"#\")[0],b.attr(\"id\")?(a=a+\"#\"+b.attr(\"id\"),b={id:b.attr(\"id\")}):b={offset:c},this.options.state){case \"replace\":h.history.replaceState(b,\"\",a);break;case \"push\":h.history.pushState(b,\"\",a)}this.activateTab(c)}}}});XF.PageJump=XF.Element.newHandler({options:{pageUrl:null,pageInput:\"| .js-pageJumpPage\",pageSubmit:\"| .js-pageJumpGo\",sentinel:\"%page%\"},$input:null,init:function(){var a=this;this.options.pageUrl?(this.$input=XF.findRelativeIf(this.options.pageInput,\nthis.$target),this.$input.length?(this.$input.on(\"keyup\",function(b){\"Enter\"==b.key&&(b.preventDefault(),a.go())}),XF.findRelativeIf(this.options.pageSubmit,this.$target).on(\"click\",function(b){b.preventDefault();a.go()}),this.$target.closest(\".menu\").on(\"menu:opened\",function(){a.shown()})):console.error(\"No input provided to page jump\")):console.error(\"No page-url provided to page jump\")},shown:function(){this.$input.select()},go:function(){var a=parseInt(this.$input.val(),10);1>a&&(a=1);var b=\nthis.options.pageUrl,c=this.options.sentinel,d=b.replace(c,a);d==b&&(d=b.replace(encodeURIComponent(c),a));XF.redirect(d)}});XF.QuickSearch=XF.Element.newHandler({options:{select:\"| .js-quickSearch-constraint\"},$select:null,init:function(){this.$select=XF.findRelativeIf(this.options.select,this.$target);this.$select.on(\"change\",XF.proxy(this,\"updateSelectWidth\"));this.updateSelectWidth()},updateSelectWidth:function(){if(this.$select.length){var a=d(\"<span />\").addClass(this.$select.attr(\"class\")).addClass(\"input--select\"),\nb=this.$select.find(\"option:selected\");b.length||(b=this.$select.find(\"option:first\"));a.text(b.text());a.css(\"display\",\"inline\");b=d(\"<div />\");b.css({position:\"absolute\",top:-200,visibility:\"hidden\"});b.css(XF.isRtl()?\"right\":\"left\",-9999);a.appendTo(b);b.appendTo(\"body\");this.$select.css({width:a.outerWidth()+8,\"flex-grow\":0,\"flex-shrink\":0});b.remove()}}});XF.TouchProxy=XF.Element.newHandler({options:{allowed:\":input, :checkbox, a, label, [data-tp-clickable], [data-tp-primary]\"},active:!0,timer:null,\n$proxy:null,init:function(){var a=this;if(\"InputDeviceCapabilities\"in h||\"sourceCapabilities\"in UIEvent.prototype)this.$target.click(function(b){var c=b.originalEvent;c&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents&&a.handleTapEvent(b)});else if(XF.Feature.has(\"touchevents\")){var b=!1;this.$target.on(\"touchstart\",function(){b=!1}).on(\"touchmove\",function(){b=!0}).on(\"touchend\",function(c){b||a.handleTapEvent(c)})}},isClickable:function(a){a=d(a).closest(this.options.allowed);return!(!a.length||\n!this.$target.find(a).length)},handleTapEvent:function(a){this.getProxy().length&&this.active&&!this.isClickable(a.target)&&(a.preventDefault(),this.trigger())},getProxy:function(){if(!this.$proxy){var a=this.$target.find(\"[data-tp-primary]\").first();a.length||(a=this.$target.find(\"a[href]\").first());this.$proxy=a}return this.$proxy},trigger:function(a){a=this.getProxy();if(a.length){this.timer&&clearTimeout(this.timer);this.active=!1;a[0].click?a[0].click():a.click();var b=this;this.timer=setTimeout(function(){b.active=\n!0},500)}}});XF.ShifterClick=XF.Event.newHandler({eventNameSpace:\"XFShifterClick\",options:{selector:null,dir:\"up\"},$element:null,init:function(){this.$element=this.$target.closest(this.options.selector)},click:function(a){\"down\"==this.options.dir?this.$element.insertAfter(this.$element.next()):this.$element.insertBefore(this.$element.prev())}});XF.VideoInit=XF.Element.newHandler({options:{},video:null,loaded:!1,init:function(){XF.isIOS()&&(this.video=this.$target[0].cloneNode(!0),this.video.load(),\nthis.video.addEventListener(\"loadeddata\",XF.proxy(this,\"hasLoaded\")),this.video.addEventListener(\"seeked\",XF.proxy(this,\"hasSeeked\")))},hasLoaded:function(){this.loaded||(this.loaded=!0,this.video.currentTime=0)},hasSeeked:function(){var a=d(\"<canvas />\")[0],b=this.$target.width(),c=this.$target.height(),e=a.getContext(\"2d\");a.width=b;a.height=c;e.drawImage(this.video,0,0,b,c);if(a){var f=this;a.toBlob(function(a){a&&(a=URL.createObjectURL(a),f.$target.attr(\"poster\",a))})}}});XF.Event.register(\"click\",\n\"inserter\",\"XF.InserterClick\");XF.Event.register(\"click\",\"menu\",\"XF.MenuClick\");XF.Event.register(\"click\",\"menu-proxy\",\"XF.MenuProxy\");XF.Event.register(\"click\",\"off-canvas\",\"XF.OffCanvasClick\");XF.Event.register(\"click\",\"overlay\",\"XF.OverlayClick\");XF.Event.register(\"click\",\"toggle\",\"XF.ToggleClick\");XF.Event.register(\"click\",\"toggle-class\",\"XF.ToggleClassClick\");XF.Event.register(\"click\",\"shifter\",\"XF.ShifterClick\");XF.Element.register(\"focus-inserter\",\"XF.InserterFocus\");XF.Element.register(\"h-scroller\",\n\"XF.HScroller\");XF.Element.register(\"page-jump\",\"XF.PageJump\");XF.Element.register(\"quick-search\",\"XF.QuickSearch\");XF.Element.register(\"responsive-data-list\",\"XF.ResponsiveDataList\");XF.Element.register(\"sticky\",\"XF.Sticky\");XF.Element.register(\"sticky-header\",\"XF.StickyHeader\");XF.Element.register(\"tabs\",\"XF.Tabs\");XF.Element.register(\"toggle-storage\",\"XF.ToggleStorage\");XF.Element.register(\"touch-proxy\",\"XF.TouchProxy\");XF.Element.register(\"video-init\",\"XF.VideoInit\");d(k).on(\"xf:page-load-complete\",\nfunction(){var a=h.location.hash.replace(/[^a-zA-Z0-9_-]/g,\"\");a&&(a=a?d(\"#\"+a):d(),a.length&&(a=a.closest(\"[data-toggle-wrapper]\"),a.length&&(a=a.find('[data-xf-click~=\"toggle\"]').first(),a.length&&(a=XF.Event.getElementHandler(a,\"toggle\",\"click\"))&&a.show(!0))))})}(jQuery,window,document);\n\nvar $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,k,e){d instanceof String&&(d=String(d));for(var a=d.length,b=0;b<a;b++){var c=d[b];if(k.call(e,c,b,d))return{i:b,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(d,k,e){d!=Array.prototype&&d!=Object.prototype&&(d[k]=e.value)};\n$jscomp.getGlobal=function(d){return\"undefined\"!=typeof window&&window===d?d:\"undefined\"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,k,e,a){if(k){e=$jscomp.global;d=d.split(\".\");for(a=0;a<d.length-1;a++){var b=d[a];b in e||(e[b]={});e=e[b]}d=d[d.length-1];a=e[d];k=k(a);k!=a&&null!=k&&$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:k})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(d){return d?d:function(d,e){return $jscomp.findInternal(this,d,e).v}},\"es6\",\"es3\");\n!function(d,k,e){XF.TooltipElement=XF.create({options:{baseClass:\"tooltip\",extraClass:\"tooltip--basic\",html:!1,inViewport:!0,loadRequired:!1,loadParams:null,placement:\"top\"},content:null,$tooltip:null,shown:!1,shownFully:!1,placement:null,positioner:null,loadRequired:!1,loading:!1,contentApplied:!1,setupCallbacks:null,__construct:function(a,b,c){this.setupCallbacks=[];this.options=d.extend(!0,{},this.options,b);this.content=a;this.loadRequired=this.options.loadRequired;c&&this.setPositioner(c)},setPositioner:function(a){this.positioner=\na},setLoadRequired:function(a){this.loadRequired=a},addSetupCallback:function(a){this.$tooltip?a(this.$tooltip):this.setupCallbacks.push(a)},show:function(){if(!this.shown)if(this.shown=!0,this.loadRequired)this.loadContent();else{var a=this.getTooltip(),b=this;this.reposition();d(k).on(\"resize.tooltip-\"+a.xfUniqueId(),XF.proxy(this,\"reposition\"));a.trigger(\"tooltip:shown\").stop().css({visibility:\"\",display:\"none\"}).fadeIn(\"fast\",function(){b.shownFully=!0})}},hide:function(){if(this.shown){this.shownFully=\nthis.shown=!1;var a=this.$tooltip;a&&(a.stop().fadeOut(\"fast\").trigger(\"tooltip:hidden\"),d(k).off(\"resize.tooltip-\"+a.xfUniqueId()))}},toggle:function(){this.shown?this.hide():this.show()},destroy:function(){this.$tooltip&&this.$tooltip.remove()},isShown:function(){return this.shown},isShownFully:function(){return this.shown&&this.shownFully},requiresLoad:function(){return this.loadRequired},getPlacement:function(){return XF.rtlFlipKeyword(this.options.placement)},reposition:function(){var a=this.positioner;\nif(!a)console.error(\"No tooltip positioner\");else if(!this.loadRequired){var b=this.options.inViewport;if(a instanceof d){var c=a.dimensions(!0);a.closest(\".overlay\").length&&(b=!0)}else\"undefined\"!==typeof a[0]&&\"undefined\"!==typeof a[1]?c={top:a[1],right:a[0],bottom:a[1],left:a[0]}:\"undefined\"!==typeof a.right&&\"undefined\"!==typeof a.bottom?c=a:console.error(\"Positioner is not in correct format\",a);c.width=c.right-c.left;c.height=c.bottom-c.top;a=this.getTooltip();var g=this.getPlacement(),n=this.options.baseClass,\ne=g;if(b){var m=d(k);b=m.height();var f=m.width();var l=m.scrollTop();m=m.scrollLeft();var h;(h=XF.Element.getHandlers(\"sticky-header\"))&&h[0].$target.hasClass(h[0].options.stickyClass)&&(l+=h[0].$target.outerHeight());f={top:l,left:m,right:m+f,bottom:l+b,width:f,height:b}}else f=d(\"body\").dimensions();this.placement&&a.removeClass(n+\"--\"+this.placement);a.addClass(n+\"--\"+g).css({visibility:\"hidden\",display:\"block\",top:\"\",bottom:\"\",left:\"\",right:\"\",\"padding-left\":\"\",\"padding-right\":\"\",\"padding-top\":\"\",\n\"padding-bottom\":\"\"});h=a.outerWidth();b=a.outerHeight();\"top\"==g&&c.top-b<f.top?g=\"bottom\":\"bottom\"==g&&c.bottom+b>f.bottom?c.top-b>=f.top&&(g=\"top\"):\"left\"==g&&c.left-h<f.left?g=c.right+h>f.right?c.top-b<f.top?\"bottom\":\"top\":\"right\":\"right\"==g&&c.right+h>f.right&&(g=c.left-h<f.left?c.top-b<f.top?\"bottom\":\"top\":\"left\");g!=e&&a.removeClass(n+\"--\"+e).addClass(n+\"--\"+g);e={top:\"\",right:\"\",bottom:\"\",left:\"\"};switch(g){case \"top\":e.bottom=d(k).height()-c.top;e.left=c.left+c.width/2-h/2;break;case \"bottom\":e.top=\nc.bottom;e.left=c.left+c.width/2-h/2;break;case \"left\":e.top=c.top+c.height/2-b/2;e.right=d(k).width()-c.left;break;default:e.top=c.top+c.height/2-b/2,e.left=c.right}a.css(e);l=a.dimensions(!0);b=c=0;n=a.find(\".\"+n+\"-arrow\");if(\"left\"==g||\"right\"==g)l.top<f.top?c=f.top-l.top:l.bottom>f.bottom&&(c=f.bottom-l.bottom),n.css({left:\"\",top:50-100*c/l.top+\"%\"});else{l.left<f.left?b=f.left-l.left:l.left+h>f.right&&(b=f.right-(l.left+h));f=parseInt(h/100*(50-100*b/h),0);var p=f+parseInt(n.css(\"margin-left\")),\nq=p+n.outerWidth();l=parseInt(a.css(\"padding-left\"),10);m=parseInt(a.css(\"padding-right\"),10);p<l?(h=l-p,a.css({\"padding-left\":Math.max(0,l-h),\"padding-right\":m+h})):q>h-m&&(h=q-(h-m),a.css({\"padding-left\":m+h,\"padding-right\":Math.max(0,m-h)}));n.css({top:\"\",left:f})}b?a.css(\"left\",e.left+b):c&&a.css(\"top\",e.top+c);this.placement=g;this.shown&&!this.loadRequired&&a.css(\"visibility\",\"\")}},attach:function(){this.getTooltip()},getTooltip:function(){if(!this.$tooltip){var a=this.getTemplate();a.appendTo(\"body\");\nthis.$tooltip=a;this.loadRequired||this.applyTooltipContent()}return this.$tooltip},applyTooltipContent:function(){if(this.contentApplied||this.loadRequired)return!1;var a=this.getTooltip(),b=a.find(\".\"+this.options.baseClass+\"-content\"),c=this.content;d.isFunction(c)&&(c=c());this.options.html?(b.html(c),b.find(\"img\").on(\"load\",XF.proxy(this,\"reposition\"))):b.text(c);b=this.setupCallbacks;for(c=0;c<b.length;c++)b[c](a);XF.activate(a);return this.contentApplied=!0},loadContent:function(){if(this.loadRequired&&\n!this.loading){var a=this.content,b=this,c=function(a){b.content=a;b.loadRequired=!1;b.loading=!1;b.applyTooltipContent();b.shown&&(b.shown=!1,b.show())};d.isFunction(a)?(this.loading=!0,a(c,this.options.loadParams)):c(\"\")}},getTemplate:function(){var a=this.options.baseClass;return d(d.parseHTML('<div class=\"'+a+(this.options.extraClass?\" \"+this.options.extraClass:\"\")+'\" role=\"tooltip\"><div class=\"'+a+'-arrow\"></div><div class=\"'+a+'-content\"></div></div>'))}});XF.TooltipTrigger=XF.create({options:{delayIn:200,\ndelayInLoading:800,delayOut:200,trigger:\"hover focus\",maintain:!1,clickHide:null,onShow:null,onHide:null},$target:null,tooltip:null,delayTimeout:null,delayTimeoutType:null,stopFocusBefore:null,clickTriggered:!1,$covers:null,__construct:function(a,b,c){this.options=d.extend(!0,{},this.options,c);this.$target=a;this.tooltip=b;\"auto\"==this.options.trigger&&(this.options.trigger=\"hover focus\"+(a.is(\"span\")?\" touchclick\":\"\"));b.setPositioner(a);b.addSetupCallback(XF.proxy(this,\"onTooltipSetup\"));a.xfUniqueId();\nXF.TooltipTrigger.cache[a.attr(\"id\")]=this},init:function(){var a=this.$target,b=!1,c=!1,d=this,e=XF.supportsPointerEvents(),k=e?\"pointerenter\":\"mouseenter\";e=e?\"pointerleave\":\"mouseleave\";null===this.options.clickHide&&(this.options.clickHide=a.is(\"a\"));for(var m=this.options.trigger.split(\" \"),f=0;f<m.length;f++)switch(m[f]){case \"hover\":a.on(k+\".tooltip\",XF.proxy(this,\"mouseEnter\")).on(e+\".tooltip\",XF.proxy(this,\"leave\"));break;case \"focus\":a.on({\"focusin.tooltip\":XF.proxy(this,\"focusEnter\"),\"focusout.tooltip\":XF.proxy(this,\n\"leave\")});break;case \"click\":b=!0;a.onPointer(\"click.tooltip\",XF.proxy(this,\"click\"));a.onPointer(\"auxclick.tooltip contextmenu.tooltip\",function(){d.cancelShow();d.stopFocusBefore=Date.now()+2E3});break;case \"touchclick\":c=!0;a.onPointer(\"click.tooltip\",function(a){XF.isEventTouchTriggered(a)&&d.click(a)});break;case \"touchhold\":c=!0,a.data(\"threshold\",this.options.delayIn),a.onPointer({\"touchstart.tooltip\":function(b){a.data(\"tooltip:touching\",!0)},\"touchend.tooltip\":function(b){setTimeout(function(){a.removeData(\"tooltip:touching\")},\n50)},\"taphold.tooltip\":function(b){a.data(\"tooltip:taphold\",!0);XF.isEventTouchTriggered(b)&&d.click(b)},\"contextmenu.tooltip\":function(b){a.data(\"tooltip:touching\")&&b.preventDefault()}})}b&&c&&console.error(\"Cannot have touchclick and click triggers\");if(!b&&this.options.clickHide)a.onPointer(\"click.tooltip auxclick.tooltip contextmenu.tooltip\",function(a){c&&XF.isEventTouchTriggered(a)||(d.hide(),d.stopFocusBefore=Date.now()+2E3)});a.on({\"tooltip:show\":XF.proxy(this,\"show\"),\"tooltip:hide\":XF.proxy(this,\n\"hide\"),\"tooltip:reposition\":XF.proxy(this,\"reposition\")})},reposition:function(){this.tooltip.reposition()},click:function(a){0<a.button||a.ctrlKey||a.shiftKey||a.metaKey||a.altKey?this.cancelShow():this.tooltip.isShown()?this.tooltip.isShownFully()?this.hide():(a.preventDefault(),this.clickShow(a)):(a.preventDefault(),this.clickShow(a))},clickShow:function(a){this.clickTriggered=!0;var b=this;setTimeout(function(){var c=b.addCovers();if(XF.isEventTouchTriggered(a))c.addClass(\"is-active\");else d(e).on(\"click.tooltip-\"+\nb.$target.xfUniqueId(),XF.proxy(b,\"docClick\"))},0);this.show()},addCovers:function(){this.$covers&&this.$covers.remove();var a=this.$target.dimensions(!0),b=[];b.push({top:0,height:a.top,left:0,right:0});b.push({top:a.top,height:a.height,left:0,width:a.left});b.push({top:a.top,height:a.height,left:a.right,right:0});b.push({top:a.bottom,height:d(\"html\").height()-a.bottom,left:0,right:0});a=d();for(var c,g=0;g<b.length;g++)c=d('<div class=\"tooltipCover\" />').css(b[g]),a=a.add(c);a.on(\"click\",XF.proxy(this,\n\"hide\"));this.tooltip.getTooltip().before(a);this.$covers=a;XF.setRelativeZIndex(a,this.$target);return a},docClick:function(a){var b=this.$covers;var c=a.pageX;var g=a.pageY,n=d(k);b&&(0==a.screenX&&0==a.screenY&&(a=d(a.target).dimensions(),c=a.left,g=a.top),b.addClass(\"is-active\"),c=d(e.elementFromPoint(c-n.scrollLeft(),g-n.scrollTop())),b.removeClass(\"is-active\"),c.is(b)&&this.hide())},mouseEnter:function(a){XF.isEventTouchTriggered(a)||this.enter()},focusEnter:function(a){100>Date.now()-XF.pageDisplayTime||\nXF.isEventTouchTriggered(a)||(!this.stopFocusBefore||Date.now()>=this.stopFocusBefore)&&this.enter()},enter:function(){if(!this.isShown()||!this.clickTriggered){this.clickTriggered=!1;var a=this.tooltip.requiresLoad()?this.options.delayInLoading:this.options.delayIn;if(a){if(\"enter\"!==this.delayTimeoutType&&this.resetDelayTimer(),!this.delayTimeoutType&&!this.isShown()){this.delayTimeoutType=\"enter\";var b=this;this.delayTimeout=setTimeout(function(){b.delayTimeoutType=null;b.show()},a)}}else this.show()}},\nleave:function(){if(!this.clickTriggered){var a=this.options.delayOut;if(a){if(\"leave\"!==this.delayTimeoutType&&this.resetDelayTimer(),!this.delayTimeoutType&&this.isShown()){this.delayTimeoutType=\"leave\";var b=this;this.delayTimeout=setTimeout(function(){b.delayTimeoutType=null;b.hide()},a)}}else this.hide()}},show:function(){var a=this;d(k).off(\"focus.tooltip-\"+this.$target.xfUniqueId()).on(\"focus.tooltip-\"+this.$target.xfUniqueId(),function(b){a.stopFocusBefore=Date.now()+250});XF.setRelativeZIndex(this.tooltip.getTooltip(),\nthis.$target);if(this.options.onShow){var b=this.options.onShow;b(this,this.tooltip)}this.tooltip.show()},cancelShow:function(){\"enter\"===this.delayTimeoutType?this.resetDelayTimer():this.tooltip.isShownFully()||this.hide()},hide:function(){this.tooltip.hide();this.resetDelayTimer();this.clickTriggered=!1;this.$covers&&(this.$covers.remove(),this.$covers=null);d(e).off(\"click.tooltip-\"+this.$target.xfUniqueId());if(this.options.onHide){var a=this.options.onHide;a(this,this.tooltip)}},toggle:function(){this.isShown()?\nthis.hide():this.show()},isShown:function(){return this.tooltip.isShown()},wasClickTriggered:function(){return this.clickTriggered},resetDelayTimer:function(){this.delayTimeoutType&&(clearTimeout(this.delayTimeout),this.delayTimeoutType=null)},addMaintainElement:function(a){if(!a.data(\"tooltip-maintain\")){for(var b=this.options.trigger.split(\" \"),c=0;c<b.length;c++)switch(b[c]){case \"hover\":a.on(\"mouseenter.tooltip\",XF.proxy(this,\"enter\"));a.on(\"mouseleave.tooltip\",XF.proxy(this,\"leave\"));break;case \"focus\":a.on(\"focusin.tooltip\",\nXF.proxy(this,\"enter\")),a.on(\"focusout.tooltip\",XF.proxy(this,\"leave\"))}a.data(\"tooltip-maintain\",!0)}},removeMaintainElement:function(a){a.off(\".tooltip\");a.data(\"tooltip-maintain\",!1)},onTooltipSetup:function(a){if(this.options.maintain){this.addMaintainElement(a);var b=this;a.on(\"menu:opened\",function(a,d){b.addMaintainElement(d)});a.on(\"menu:closed\",function(a,d){b.removeMaintainElement(d)})}}});XF.TooltipTrigger.cache={};XF.TooltipOptions={base:{baseClass:\"tooltip\",extraClass:\"tooltip--basic\",\nhtml:!1,inViewport:!0,placement:\"top\",clickHide:null,delayIn:200,delayOut:200,maintain:!1,trigger:\"hover focus\"},tooltip:[\"baseClass\",\"extraClass\",\"html\",\"placement\"],trigger:[\"clickHide\",\"delayIn\",\"delayOut\",\"maintain\",\"trigger\"],extract:function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d]]=b[a[d]];return c},extractTooltip:function(a){return this.extract(this.tooltip,a)},extractTrigger:function(a){return this.extract(this.trigger,a)}};XF.Tooltip=XF.Element.newHandler({options:d.extend(!0,{},XF.TooltipOptions.base,\n{content:null}),trigger:null,tooltip:null,init:function(){var a=this.getContent(),b=XF.TooltipOptions.extractTooltip(this.options),c=XF.TooltipOptions.extractTrigger(this.options);this.tooltip=new XF.TooltipElement(a,b);this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,c);this.trigger.init()},getContent:function(){if(this.options.content)return this.options.content;var a=this.$target,b=a.attr(\"data-original-title\")||a.attr(\"title\")||\"\";a.attr(\"data-original-title\",b).removeAttr(\"title\");\nreturn b}});XF.ElementTooltip=XF.extend(XF.Tooltip,{__backup:{getContent:\"_getContent\",init:\"_init\"},options:d.extend({},XF.Tooltip.prototype.options,{element:null,showError:!0,noTouch:!0,shortcut:null}),$element:null,init:function(){this.options.shortcut&&this.setupShortcut(this.options.shortcut);if(!this.options.noTouch||!XF.Feature.has(\"touchevents\")){var a=this.options.element,b=this.options.showError;if(a){var c=XF.findRelativeIf(a,this.$target);c.length?(this.$element=c,this.$target.removeAttr(\"title\"),\nthis.options.html=!0,this._init()):b&&console.error(\"Element tooltip could not find \"+a)}else b&&console.error(\"No element specified for the element tooltip\")}},setupShortcut:function(a){\"node-description\"==a&&(this.options.element||(this.options.element=\"< .js-nodeMain | .js-nodeDescTooltip\"),this.options.showError=!1,this.options.maintain=!0,this.options.placement=\"right\",this.options.extraClass=\"tooltip--basic tooltip--description\")},getContent:function(){return this.$element.clone().contents()}});\nXF.PreviewTooltip=XF.Element.newHandler({options:{delay:600,previewUrl:null},trigger:null,tooltip:null,init:function(){this.options.previewUrl?(this.tooltip=new XF.TooltipElement(XF.proxy(this,\"getContent\"),{extraClass:\"tooltip--preview\",html:!0,loadRequired:!0}),this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay}),this.trigger.init()):console.error(\"No preview URL\")},getContent:function(a){var b=this;XF.ajax(\"get\",\nthis.options.previewUrl,{},function(c){b.loaded(c,a)},{skipDefault:!0,skipError:!0,global:!1})},loaded:function(a,b){a.html&&XF.setupHtmlInsert(a.html,function(a,d,e){b(a)})}});XF.MemberTooltipCache={};XF.MemberTooltip=XF.Element.newHandler({options:{delay:600},trigger:null,tooltip:null,userId:null,init:function(){this.userId=this.$target.data(\"user-id\");this.tooltip=new XF.TooltipElement(XF.proxy(this,\"getContent\"),{extraClass:\"tooltip--member\",html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.$target,\nthis.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay,trigger:\"hover focus click\",onShow:XF.proxy(this,\"onShow\"),onHide:XF.proxy(this,\"onHide\")});this.trigger.init()},getContent:function(a){var b=XF.MemberTooltipCache[this.userId];if(b)b=d(d.parseHTML(b)),a(b);else{var c=this;b={skipDefault:!0,skipError:!0,global:!1};this.trigger.wasClickTriggered()&&(b.global=!0);XF.ajax(\"get\",this.$target.attr(\"href\"),{tooltip:!0},function(b){c.loaded(b,a)},b)}},loaded:function(a,\nb){if(a.html){var c=this.userId;XF.setupHtmlInsert(a.html,function(d,e,k){XF.MemberTooltipCache[c]=a.html.content;b(d)})}},onShow:function(){var a=XF.MemberTooltip.activeTooltip;a&&a!==this&&a.hide();XF.MemberTooltip.activeTooltip=this},onHide:function(){XF.MemberTooltip.activeTooltip===this&&(XF.MemberTooltip.activeTooltip=null)},show:function(){this.trigger.show()},hide:function(){this.trigger.hide()}});XF.MemberTooltip.activeTooltip=null;XF.ShareTooltip=XF.Element.newHandler({options:{delay:300},\ntrigger:null,tooltip:null,url:null,init:function(){this.url=this.$target.attr(\"href\");this.tooltip=new XF.TooltipElement(XF.proxy(this,\"getContent\"),{extraClass:\"tooltip--share\",html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay,trigger:\"hover focus click\",onShow:XF.proxy(this,\"onShow\"),onHide:XF.proxy(this,\"onHide\")});this.trigger.init()},getContent:function(a){var b=this,c={skipDefault:!0,\nskipError:!0,global:!1};this.trigger.wasClickTriggered()&&(c.global=!0);XF.ajax(\"get\",this.$target.data(\"href\"),{},function(c){b.loaded(c,a)},c)},loaded:function(a,b){a.html&&XF.setupHtmlInsert(a.html,function(a,d,e){b(a)})},onShow:function(){var a=XF.ShareTooltip.activeTooltip;a&&a!==this&&a.hide();XF.ShareTooltip.activeTooltip=this},onHide:function(){XF.ShareTooltip.activeTooltip===this&&(XF.ShareTooltip.activeTooltip=null)},show:function(){this.trigger.show()},hide:function(){this.trigger.hide()}});\nXF.ShareTooltip.activeTooltip=null;XF.Element.register(\"element-tooltip\",\"XF.ElementTooltip\");XF.Element.register(\"member-tooltip\",\"XF.MemberTooltip\");XF.Element.register(\"preview-tooltip\",\"XF.PreviewTooltip\");XF.Element.register(\"share-tooltip\",\"XF.ShareTooltip\");XF.Element.register(\"tooltip\",\"XF.Tooltip\")}(jQuery,window,document);"
"/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(e,t){\"use strict\";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return\"function\"==typeof t&&\"number\"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement(\"script\");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[c.call(e)]||\"object\":typeof e}var b=\"3.3.1\",w=function(e,t){return new w.fn.init(e,t)},T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;w.fn=w.prototype={jquery:\"3.3.1\",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:\"jQuery\"+(\"3.3.1\"+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==c.call(e))&&(!(t=i(e))||\"function\"==typeof(n=f.call(t,\"constructor\")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?\"\":(e+\"\").replace(T,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,\"string\"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),\"function\"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){l[\"[object \"+t+\"]\"]=t.toLowerCase()});function C(e){var t=!!e&&\"length\"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b=\"sizzle\"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",R=\"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",I=\"\\\\[\"+M+\"*(\"+R+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+R+\"))|)\"+M+\"*\\\\]\",W=\":(\"+R+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+I+\")*)|.*)\\\\)|)\",$=new RegExp(M+\"+\",\"g\"),B=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),F=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),_=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),z=new RegExp(\"=\"+M+\"*([^\\\\]'\\\"]*?)\"+M+\"*\\\\]\",\"g\"),X=new RegExp(W),U=new RegExp(\"^\"+R+\"$\"),V={ID:new RegExp(\"^#(\"+R+\")\"),CLASS:new RegExp(\"^\\\\.(\"+R+\")\"),TAG:new RegExp(\"^(\"+R+\"|[*])\"),ATTR:new RegExp(\"^\"+I),PSEUDO:new RegExp(\"^\"+W),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+P+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\\d$/i,Q=/^[^{]+\\{\\s*\\[native \\w/,J=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,K=/[+~]/,Z=new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+M+\"?|(\"+M+\")|.)\",\"ig\"),ee=function(e,t,n){var r=\"0x\"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ne=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&(\"form\"in e||\"label\"in e)},{dir:\"parentNode\",next:\"legend\"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],\"string\"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+\" \"]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if(\"object\"!==t.nodeName.toLowerCase()){(c=t.getAttribute(\"id\"))?c=c.replace(te,ne):t.setAttribute(\"id\",c=b),s=(h=a(e)).length;while(s--)h[s]=\"#\"+c+\" \"+ve(h[s]);v=h.join(\",\"),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute(\"id\")}}}return u(e.replace(B,\"$1\"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+\" \")>r.cacheLength&&delete t[e.shift()],t[n+\" \"]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split(\"|\"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return\"input\"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function de(e){return function(t){return\"form\"in t?t.parentNode&&!1===t.disabled?\"label\"in t?\"label\"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:\"label\"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&\"HTML\"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener(\"unload\",re,!1):i.attachEvent&&i.attachEvent(\"onunload\",re)),n.attributes=ue(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute(\"id\")===t}},r.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return n&&n.value===t}},r.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML=\"<a id='\"+b+\"'></a><select id='\"+b+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&y.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||y.push(\"\\\\[\"+M+\"*(?:value|\"+P+\")\"),e.querySelectorAll(\"[id~=\"+b+\"-]\").length||y.push(\"~=\"),e.querySelectorAll(\":checked\").length||y.push(\":checked\"),e.querySelectorAll(\"a#\"+b+\"+*\").length||y.push(\".#.+[+~]\")}),ue(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=d.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&y.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&y.push(\":enabled\",\":disabled\"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&y.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),y.push(\",.*:\")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,\"*\"),m.call(e,\"[s!='']:x\"),v.push(\"!=\",W)}),y=y.length&&new RegExp(y.join(\"|\")),v=v.length&&new RegExp(v.join(\"|\")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,\"='$1']\"),n.matchesSelector&&g&&!S[t+\" \"]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+\"\").replace(te,ne)},oe.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n=\"\",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||\"\").replace(Z,ee),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&E(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?\"!=\"===t:!t||(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i.replace($,\" \")+\" \").indexOf(n)>-1:\"|=\"===t&&(i===n||i.slice(0,n.length+1)===n+\"-\"))}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error(\"unsupported pseudo: \"+e);return i[b]?i(t):i.length>1?(n=[e,e,\"\",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,\"$1\"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||\"\")||oe.error(\"unsupported lang: \"+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"))return(n=n.toLowerCase())===e||0===n.indexOf(e+\"-\")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+\" \"];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B,\" \")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&\"parentNode\"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||\"*\",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[\" \"],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:\" \"===e[u-2].type?\"*\":\"\"})).replace(B,\"$1\"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m=\"0\",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG(\"*\",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+\" \"];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p=\"function\"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&\"ID\"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split(\"\").sort(D).join(\"\")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement(\"fieldset\"))}),ue(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||le(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||le(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute(\"disabled\")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[\":\"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):\"string\"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,\"string\"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,\"string\"==typeof e){if(!(i=\"<\"===e[0]&&\">\"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,\"parentNode\")},parentsUntil:function(e,t,n){return k(e,\"parentNode\",n)},next:function(e){return P(e,\"nextSibling\")},prev:function(e){return P(e,\"previousSibling\")},nextAll:function(e){return k(e,\"nextSibling\")},prevAll:function(e){return k(e,\"previousSibling\")},nextUntil:function(e,t,n){return k(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return k(e,\"previousSibling\",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,\"iframe\")?e.contentDocument:(N(e,\"template\")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return\"Until\"!==e.slice(-5)&&(r=n),r&&\"string\"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e=\"string\"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:\"\")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&\"string\"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n=\"\",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=\"\"),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[[\"notify\",\"progress\",w.Callbacks(\"memory\"),w.Callbacks(\"memory\"),2],[\"resolve\",\"done\",w.Callbacks(\"once memory\"),w.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",w.Callbacks(\"once memory\"),w.Callbacks(\"once memory\"),1,\"rejected\"]],r=\"pending\",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},\"catch\":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+\"With\"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError(\"Thenable self-resolution\");l=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+\"With\"](this===o?void 0:this,arguments),this},o[t[0]+\"With\"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),\"pending\"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn(\"jQuery.Deferred exception: \"+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener(\"DOMContentLoaded\",_),e.removeEventListener(\"load\",_),w.ready()}\"complete\"===r.readyState||\"loading\"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener(\"DOMContentLoaded\",_),e.addEventListener(\"load\",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,\"ms-\").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,ee=/[A-Z]/g;function te(e){return\"true\"===e||\"false\"!==e&&(\"null\"===e?null:e===+e+\"\"?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(ee,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,\"hasDataAttrs\"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf(\"data-\")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks(\"once memory\").add(function(){J.remove(e,[t+\"queue\",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return\"string\"!=typeof e&&(t=e,e=\"fx\",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=J.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,ie=new RegExp(\"^(?:([+-])=|)(\"+re+\")([a-z%]*)$\",\"i\"),oe=[\"Top\",\"Right\",\"Bottom\",\"Left\"],ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&w.contains(e.ownerDocument,e)&&\"none\"===w.css(e,\"display\")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,\"\")},u=s(),l=n&&n[3]||(w.cssNumber[t]?\"\":\"px\"),c=(w.cssNumber[t]||\"px\"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,\"display\"),t.parentNode.removeChild(t),\"none\"===i&&(i=\"block\"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?(\"none\"===n&&(i[o]=J.get(r,\"display\")||null,i[o]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(i[o]=ce(r))):\"none\"!==n&&(i[o]=\"none\",J.set(r,\"display\",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i,he=/^$|^module$|\\/(?:java|ecma)script/i,ge={option:[1,\"<select multiple='multiple'>\",\"</select>\"],thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],\"globalEval\",!t||J.get(t[n],\"globalEval\"))}var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),\"script\"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement(\"div\")),t=r.createElement(\"input\");t.setAttribute(\"type\",\"radio\"),t.setAttribute(\"checked\",\"checked\"),t.setAttribute(\"name\",\"t\"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML=\"<textarea>x</textarea>\",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){\"string\"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return\"undefined\"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||\"\").match(M)||[\"\"]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||\"\").match(M)||[\"\"]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||\"\").split(\".\").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,\"handle events\")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,\"events\")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:\"focusin\"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:\"focusout\"},click:{trigger:function(){if(\"checkbox\"===this.type&&this.click&&N(this,\"input\"))return this.click(),!1},_default:function(e){return N(e.target,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,Ae=/<script|<style|<link/i,je=/checked\\s*(?:[^=]|=\\s*.checked.)/i,qe=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function Le(e,t){return N(e,\"table\")&&N(11!==t.nodeType?t:t.firstChild,\"tr\")?w(e).children(\"tbody\")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function Oe(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();\"input\"===n&&pe.test(e.type)?t.checked=e.checked:\"input\"!==n&&\"textarea\"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&\"string\"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,\"script\"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,\"script\"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||\"\")&&!J.access(l,\"globalEval\")&&w.contains(c,l)&&(l.src&&\"module\"!==(l.type||\"\").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,\"\"),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,\"script\")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,\"<$1></$2>\")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,\"script\")).length>0&&ve(a,!u&&ye(e,\"script\")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp(\"^(\"+re+\")(?!px)[a-z%]+$\",\"i\"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join(\"|\"),\"i\");!function(){function t(){if(c){l.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",c.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i=\"1%\"!==t.top,u=12===n(t.marginLeft),c.style.right=\"60%\",s=36===n(t.right),o=36===n(t.width),c.style.position=\"absolute\",a=36===c.offsetWidth||\"absolute\",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement(\"div\"),c=r.createElement(\"div\");c.style&&(c.style.backgroundClip=\"content-box\",c.cloneNode(!0).style.backgroundClip=\"\",h.clearCloneStyle=\"content-box\"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Ve={letterSpacing:\"0\",fontWeight:\"400\"},Ge=[\"Webkit\",\"Moz\",\"ms\"],Ye=r.createElement(\"div\").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Ze(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?(\"content\"===n&&(u-=w.css(e,\"padding\"+oe[a],!0,i)),\"margin\"!==n&&(u-=w.css(e,\"border\"+oe[a]+\"Width\",!0,i))):(u+=w.css(e,\"padding\"+oe[a],!0,i),\"padding\"!==n?u+=w.css(e,\"border\"+oe[a]+\"Width\",!0,i):s+=w.css(e,\"border\"+oe[a]+\"Width\",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o=\"border-box\"===w.css(e,\"boxSizing\",!1,r),a=o;if(We.test(i)){if(!n)return i;i=\"auto\"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),(\"auto\"===i||!parseFloat(i)&&\"inline\"===w.css(e,\"display\",!1,r))&&(i=e[\"offset\"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?\"border\":\"content\"),a,r,i)+\"px\"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o=\"number\"),null!=n&&n===n&&(\"number\"===o&&(n+=i&&i[3]||(w.cssNumber[s]?\"\":\"px\")),h.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),\"normal\"===i&&t in Ve&&(i=Ve[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each([\"height\",\"width\"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a=\"border-box\"===w.css(e,\"boxSizing\",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,\"border\",!1,o)-.5)),s&&(i=ie.exec(n))&&\"px\"!==(i[3]||\"px\")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,\"marginLeft\"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),w.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o=\"string\"==typeof n?n.split(\" \"):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},\"margin\"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?\"\":\"px\")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=oe[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,\"fxshow\");n.queue||(null==(a=w._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,\"fx\").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,\"display\")),\"none\"===(c=w.css(e,\"display\"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,\"display\"),fe([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===w.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?\"hidden\"in y&&(g=y.hidden):y=J.access(e,\"fxshow\",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,\"fxshow\");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&\"expand\"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=[\"*\"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&\"object\"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,\"finish\"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return\"string\"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,i=null!=e&&e+\"queueHooks\",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||\"fx\"),this.each(function(){var t,n=J.get(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut(\"show\"),slideUp:ut(\"hide\"),slideToggle:ut(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||\"fx\",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement(\"input\"),t=r.createElement(\"select\").appendChild(r.createElement(\"option\"));e.type=\"checkbox\",h.checkOn=\"\"!==e.value,h.optSelected=t.selected,(e=r.createElement(\"input\")).value=\"t\",e.type=\"radio\",h.radioValue=\"t\"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&\"radio\"===t&&N(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,\"tabindex\");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(\" \")}function mt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function xt(e){return Array.isArray(e)?e:\"string\"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=t[a++])r.indexOf(\" \"+o+\" \")<0&&(r+=o+\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=t[a++])while(r.indexOf(\" \"+o+\" \")>-1)r=r.replace(\" \"+o+\" \",\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},toggleClass:function(e,t){var n=typeof e,r=\"string\"===n||Array.isArray(e);return\"boolean\"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&\"boolean\"!==n||((t=mt(this))&&J.set(this,\"__className__\",t),this.setAttribute&&this.setAttribute(\"class\",t||!1===e?\"\":J.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&(\" \"+vt(mt(n))+\" \").indexOf(t)>-1)return!0;return!1}});var bt=/\\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i=\"\":\"number\"==typeof i?i+=\"\":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?\"\":e+\"\"})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&\"set\"in t&&void 0!==t.set(this,i,\"value\")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&\"get\"in t&&void 0!==(n=t.get(i,\"value\"))?n:\"string\"==typeof(n=i.value)?n.replace(bt,\"\"):null==n?\"\":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,\"value\");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,\"optgroup\"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each([\"radio\",\"checkbox\"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),h.focusin=\"onfocusin\"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,\"type\")?t.type:t,x=f.call(t,\"namespace\")?t.namespace.split(\".\"):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(\".\")>-1&&(m=(x=m.split(\".\")).shift(),x.sort()),c=m.indexOf(\":\")<0&&\"on\"+m,t=t[w.expando]?t:new w.Event(m,\"object\"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join(\".\"),t.rnamespace=t.namespace?new RegExp(\"(^|\\\\.)\"+x.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,\"events\")||{})[t.type]&&J.get(s,\"handle\"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\\?/;w.parseXML=function(t){var n;if(!t||\"string\"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,\"text/xml\")}catch(e){n=void 0}return n&&!n.getElementsByTagName(\"parsererror\").length||w.error(\"Invalid XML: \"+t),n};var St=/\\[\\]$/,Dt=/\\r?\\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+\"[\"+(\"object\"==typeof i&&null!=i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==x(t))r(e,t);else for(i in t)jt(e+\"[\"+i+\"]\",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join(\"&\")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,\"elements\");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(\":disabled\")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,\"\\r\\n\")}}):{name:t.name,value:n.replace(Dt,\"\\r\\n\")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\\/\\//,It={},Wt={},$t=\"*/\".concat(\"*\"),Bt=r.createElement(\"a\");Bt.href=Ct.href;function Ft(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])\"+\"===r[0]?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return\"string\"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i[\"*\"]&&a(\"*\")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:\"GET\",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":$t,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){\"object\"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks(\"once memory\"),x=h.statusCode||{},b={},T={},C=\"canceled\",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+\"\").replace(Rt,Ct.protocol+\"//\"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||\"*\").toLowerCase().match(M)||[\"\"],null==h.crossDomain){l=r.createElement(\"a\");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+\"//\"+Bt.host!=l.protocol+\"//\"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&\"string\"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger(\"ajaxStart\"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,\"\"),h.hasContent?h.data&&h.processData&&0===(h.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(h.data=h.data.replace(qt,\"+\")):(d=h.url.slice(o.length),h.data&&(h.processData||\"string\"==typeof h.data)&&(o+=(kt.test(o)?\"&\":\"?\")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,\"$1\"),d=(kt.test(o)?\"&\":\"?\")+\"_=\"+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader(\"If-Modified-Since\",w.lastModified[o]),w.etag[o]&&E.setRequestHeader(\"If-None-Match\",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader(\"Content-Type\",h.contentType),E.setRequestHeader(\"Accept\",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(\"*\"!==h.dataTypes[0]?\", \"+$t+\"; q=0.01\":\"\"):h.accepts[\"*\"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C=\"abort\",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger(\"ajaxSend\",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort(\"timeout\")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,\"No Transport\");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||\"\",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader(\"Last-Modified\"))&&(w.lastModified[o]=T),(T=E.getResponseHeader(\"etag\"))&&(w.etag[o]=T)),204===t||\"HEAD\"===h.type?C=\"nocontent\":304===t?C=\"notmodified\":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C=\"error\",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+\"\",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?\"ajaxSuccess\":\"ajaxError\",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger(\"ajaxComplete\",[E,h]),--w.active||w.event.trigger(\"ajaxStop\")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,\"json\")},getScript:function(e,t){return w.get(e,void 0,t,\"script\")}}),w.each([\"get\",\"post\"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,\"throws\":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&\"withCredentials\"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,\"abort\"===e?s.abort():\"error\"===e?\"number\"!=typeof s.status?o(0,\"error\"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,\"text\"!==(s.responseType||\"text\")||\"string\"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n(\"error\"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n(\"abort\");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),w.ajaxTransport(\"script\",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w(\"<script>\").prop({charset:e.scriptCharset,src:e.url}).on(\"load error\",n=function(e){t.remove(),n=null,e&&o(\"error\"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\\?(?=&|$)|\\?\\?/;w.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Yt.pop()||w.expando+\"_\"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter(\"json jsonp\",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?\"url\":\"string\"==typeof t.data&&0===(t.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Qt.test(t.data)&&\"data\");if(s||\"jsonp\"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,\"$1\"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?\"&\":\"?\")+t.jsonp+\"=\"+i),t.converters[\"script json\"]=function(){return a||w.error(i+\" was not called\"),a[0]},t.dataTypes[0]=\"json\",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),\"script\"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument(\"\").body;return e.innerHTML=\"<form></form><form></form>\",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if(\"string\"!=typeof e)return[];\"boolean\"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),a.length>0&&w.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?w(\"<div>\").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,\"position\"),f=w(e),p={};\"static\"===c&&(e.style.position=\"relative\"),s=f.offset(),o=w.css(e,\"top\"),u=w.css(e,\"left\"),(l=(\"absolute\"===c||\"fixed\"===c)&&(o+u).indexOf(\"auto\")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),\"using\"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===w.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===w.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,\"borderTopWidth\",!0),i.left+=w.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-w.css(r,\"marginTop\",!0),left:t.left-i.left-w.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===w.css(e,\"position\"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,t){var n=\"pageYOffset\"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each([\"top\",\"left\"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+\"px\":n})}),w.each({Height:\"height\",Width:\"width\"},function(e,t){w.each({padding:\"inner\"+e,content:t,\"\":\"outer\"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||\"boolean\"!=typeof i),s=n||(!0===i||!0===o?\"margin\":\"border\");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf(\"outer\")?t[\"inner\"+e]:t.document.documentElement[\"client\"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body[\"scroll\"+e],o[\"scroll\"+e],t.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)}}),w.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});\n"
"/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(n){\"function\"==typeof define&&define.amd?define([\"jquery\"],n):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),n(t)}:n(window.jQuery)}(function(w){var s=function(e,t){this.id=++w.FE.ID;var n={};t&&t.documentReady&&(n.toolbarButtons=[\"fullscreen\",\"undo\",\"redo\",\"getPDF\",\"print\",\"|\",\"bold\",\"italic\",\"underline\",\"color\",\"clearFormatting\",\"|\",\"alignLeft\",\"alignCenter\",\"alignRight\",\"alignJustify\",\"|\",\"formatOL\",\"formatUL\",\"indent\",\"outdent\",\"-\",\"paragraphFormat\",\"|\",\"fontFamily\",\"|\",\"fontSize\",\"|\",\"insertLink\",\"insertImage\",\"quote\"],n.paragraphFormatSelection=!0,n.fontFamilySelection=!0,n.fontSizeSelection=!0,n.placeholderText=\"\",n.quickInsertEnabled=!1,n.charCounterCount=!1),this.opts=w.extend(!0,{},w.extend({},s.DEFAULTS,n,\"object\"==typeof t&&t));var r=JSON.stringify(this.opts);w.FE.OPTS_MAPPING[r]=w.FE.OPTS_MAPPING[r]||this.id,this.sid=w.FE.OPTS_MAPPING[r],w.FE.SHARED[this.sid]=w.FE.SHARED[this.sid]||{},this.shared=w.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=w(e),this.$oel.data(\"froala.editor\",this),this.o_doc=e.ownerDocument,this.o_win=\"defaultView\"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var o=w(this.o_win).scrollTop();this.$oel.on(\"froala.doInit\",w.proxy(function(){this.$oel.off(\"froala.doInit\"),this.doc=this.$el.get(0).ownerDocument,this.win=\"defaultView\"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=w(this.doc),this.$win=w(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(w.FE.PLUGINS)),this.opts.initOnClick?(this.load(w.FE.MODULES),this.$el.on(\"touchstart.init\",function(){w(this).data(\"touched\",!0)}),this.$el.on(\"touchmove.init\",function(){w(this).removeData(\"touched\")}),this.$el.on(\"mousedown.init touchend.init dragenter.init focus.init\",w.proxy(function(e){if(\"touchend\"==e.type&&!this.$el.data(\"touched\"))return!0;if(1===e.which||!e.which){this.$el.off(\"mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init\"),this.load(w.FE.MODULES),this.load(w.FE.PLUGINS);var t=e.originalEvent&&e.originalEvent.originalTarget;t&&\"IMG\"==t.tagName&&w(t).trigger(\"mousedown\"),\"undefined\"==typeof this.ul&&this.destroy(),\"touchend\"==e.type&&this.image&&e.originalEvent&&e.originalEvent.target&&w(e.originalEvent.target).is(\"img\")&&setTimeout(w.proxy(function(){this.image.edit(w(e.originalEvent.target))},this),100),this.ready=!0,this.events.trigger(\"initialized\")}},this)),this.events.trigger(\"initializationDelayed\")):(this.load(w.FE.MODULES),this.load(w.FE.PLUGINS),w(this.o_win).scrollTop(o),\"undefined\"==typeof this.ul&&this.destroy(),this.ready=!0,this.events.trigger(\"initialized\"))},this)),this._init()};s.DEFAULTS={initOnClick:!1,pluginsEnabled:null},s.MODULES={},s.PLUGINS={},s.VERSION=\"2.9.5\",s.INSTANCES=[],s.OPTS_MAPPING={},s.SHARED={},s.ID=0,s.prototype._init=function(){var e=this.$oel.prop(\"tagName\");1<=this.$oel.closest(\"label\").length&&console.warn(\"Note! It is not recommended to initialize the Froala Editor within a label tag.\");var t=w.proxy(function(){\"TEXTAREA\"!=e&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=w('<iframe src=\"about:blank\" frameBorder=\"0\">'),this.$wp=w(\"<div></div>\"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write(\"<!DOCTYPE html>\"),this.$iframe.get(0).contentWindow.document.write(\"<html><head></head><body></body></html>\"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find(\"body\"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find(\"head\"),this.$html=this.$iframe.contents().find(\"html\"),this.iframe_document=this.$iframe.get(0).contentWindow.document):(this.$el=w(\"<div></div>\"),this.el=this.$el.get(0),this.$wp=w(\"<div></div>\").append(this.$el),this.$box.html(this.$wp)),this.$oel.trigger(\"froala.doInit\")},this),n=w.proxy(function(){this.$box=w(\"<div>\"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents(\"form\").on(\"submit.\"+this.id,w.proxy(function(){this.events.trigger(\"form.submit\")},this)),this.$oel.parents(\"form\").on(\"reset.\"+this.id,w.proxy(function(){this.events.trigger(\"form.reset\")},this)),t()},this),r=w.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr(\"contenteditable\",!0).css(\"outline\",\"none\").css(\"display\",\"inline-block\"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger(\"froala.doInit\")},this),o=w.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger(\"froala.doInit\")},this),i=w.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on(\"click.popup\",function(e){e.preventDefault()}),this.$oel.trigger(\"froala.doInit\")},this);this.opts.editInPopup?i():\"TEXTAREA\"==e?n():\"A\"==e?r():\"IMG\"==e?o():\"BUTTON\"==e||\"INPUT\"==e?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,i()):t()},s.prototype.load=function(e){for(var t in e)if(e.hasOwnProperty(t)){if(this[t])continue;if(w.FE.PLUGINS[t]&&this.opts.pluginsEnabled.indexOf(t)<0)continue;if(this[t]=new e[t](this),this[t]._init&&(this[t]._init(),this.opts.initOnClick&&\"core\"==t))return!1}},s.prototype.destroy=function(){this.destroying=!0,this.shared.count--,this.events.$off();var e=this.html.get();if(this.opts.iframe&&(this.events.disableBlur(),this.win.focus(),this.events.enableBlur()),this.events.trigger(\"destroy\",[],!0),this.events.trigger(\"shared.destroy\",undefined,!0),0===this.shared.count){for(var t in this.shared)this.shared.hasOwnProperty(t)&&(this.shared[t],w.FE.SHARED[this.sid][t]=null);delete w.FE.SHARED[this.sid]}this.$oel.parents(\"form\").off(\".\"+this.id),this.$oel.off(\"click.popup\"),this.$oel.removeData(\"froala.editor\"),this.$oel.off(\"froalaEditor\"),this.core.destroy(e),w.FE.INSTANCES.splice(w.FE.INSTANCES.indexOf(this),1)},w.fn.froalaEditor=function(o){for(var i=[],e=0;e<arguments.length;e++)i.push(arguments[e]);if(\"string\"==typeof o){var a=[];return this.each(function(){var e,t,n=w(this).data(\"froala.editor\");if(!n)return console.warn(\"Editor should be initialized before calling the \"+o+\" method.\");if(0<o.indexOf(\".\")&&n[o.split(\".\")[0]]?(n[o.split(\".\")[0]]&&(e=n[o.split(\".\")[0]]),t=o.split(\".\")[1]):(e=n,t=o.split(\".\")[0]),!e[t])return w.error(\"Method \"+o+\" does not exist in Froala Editor.\");var r=e[t].apply(n,i.slice(1));r===undefined?a.push(this):0===a.length&&a.push(r)}),1==a.length?a[0]:a}if(\"object\"==typeof o||!o)return this.each(function(){if(!w(this).data(\"froala.editor\")){new s(this,o)}})},w.fn.froalaEditor.Constructor=s,w.FroalaEditor=s,w.FE=s,w.FE.XS=0,w.FE.SM=1,w.FE.MD=2,w.FE.LG=3;w.FE.LinkRegExCommon=\"[a-z\\\\u0080-\\\\u009f\\\\u00a1-\\\\uffff0-9-_.]{1,}\",w.FE.LinkRegExEnd=\"((:[0-9]{1,5})|)(((\\\\/|\\\\?|#)[a-z\\\\u00a1-\\\\uffff0-9@?\\\\|!^=%&amp;/~+#-\\\\'*-_{}]*)|())\",w.FE.LinkRegExTLD=\"((\"+w.FE.LinkRegExCommon+\")(\\\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))\",w.FE.LinkRegExHTTP=\"((ftp|http|https):\\\\/\\\\/\"+w.FE.LinkRegExCommon+\")\",w.FE.LinkRegExAuth=\"((ftp|http|https):\\\\/\\\\/[\\\\u0021-\\\\uffff]{1,}@\"+w.FE.LinkRegExCommon+\")\",w.FE.LinkRegExWWW=\"(www\\\\.\"+w.FE.LinkRegExCommon+\"\\\\.[a-z0-9-]{2,24})\",w.FE.LinkRegEx=\"(\"+w.FE.LinkRegExTLD+\"|\"+w.FE.LinkRegExHTTP+\"|\"+w.FE.LinkRegExWWW+\"|\"+w.FE.LinkRegExAuth+\")\"+w.FE.LinkRegExEnd,w.FE.LinkProtocols=[\"mailto\",\"tel\",\"sms\",\"notes\",\"data\"],w.FE.MAIL_REGEX=/.+@.+\\..+/i,w.FE.MODULES.helpers=function(i){function e(){var e,t,n={},r=(t=-1,\"Microsoft Internet Explorer\"==navigator.appName?(e=navigator.userAgent,null!==new RegExp(\"MSIE ([0-9]{1,}[\\\\.0-9]{0,})\").exec(e)&&(t=parseFloat(RegExp.$1))):\"Netscape\"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp(\"Trident/.*rv:([0-9]{1,}[\\\\.0-9]{0,})\").exec(e)&&(t=parseFloat(RegExp.$1))),t);if(0<r)n.msie=!0;else{var o=navigator.userAgent.toLowerCase(),i=/(edge)[ \\/]([\\w.]+)/.exec(o)||/(chrome)[ \\/]([\\w.]+)/.exec(o)||/(webkit)[ \\/]([\\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(o)||/(msie) ([\\w.]+)/.exec(o)||o.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(o)||[],a=i[1]||\"\";i[2];i[1]&&(n[a]=!0),n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0)}return n.msie&&(n.version=r),n}function t(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!o()}function n(){return/(Android)/g.test(navigator.userAgent)&&!o()}function r(){return/(Blackberry)/g.test(navigator.userAgent)}function o(){return/(Windows Phone)/gi.test(navigator.userAgent)}function a(e){return parseInt(e,10)||0}var s;var l=null;return{_init:function(){i.browser=e(),function(){function e(e,t){var i=e[t];e[t]=function(e){var t,n=!1,r=!1;if(e&&e.match(s)){e=e.replace(s,\"\"),this.parentNode||(a.appendChild(this),r=!0);var o=this.parentNode;return this.id||(this.id=\"rootedQuerySelector_id_\"+(new Date).getTime(),n=!0),t=i.call(o,\"#\"+this.id+\" \"+e),n&&(this.id=\"\"),r&&a.removeChild(this),t}return i.call(this,e)}}var a=i.o_doc.createElement(\"div\");try{a.querySelectorAll(\":scope *\")}catch(t){var s=/^\\s*:scope/gi;e(Element.prototype,\"querySelector\"),e(Element.prototype,\"querySelectorAll\"),e(HTMLElement.prototype,\"querySelector\"),e(HTMLElement.prototype,\"querySelectorAll\")}}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!t)return null;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null})},isIOS:t,isMac:function(){return null==l&&(l=0<=navigator.platform.toUpperCase().indexOf(\"MAC\")),l},isAndroid:n,isBlackberry:r,isWindowsPhone:o,isMobile:function(){return n()||t()||r()},isEmail:function(e){return!/^(https?:|ftps?:|)\\/\\//i.test(e)&&w.FE.MAIL_REGEX.test(e)},requestAnimationFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},getPX:a,screenSize:function(){var e=w('<div class=\"fr-visibility-helper\"></div>').appendTo(\"body:first\");try{var t=a(e.css(\"margin-left\"));return e.remove(),t}catch(n){return w.FE.LG}},isTouch:function(){return\"ontouchstart\"in window||window.DocumentTouch&&document instanceof DocumentTouch},sanitizeURL:function(e){return/^(https?:|ftps?:|)\\/\\//i.test(e)?e:/^([A-Za-z]:(\\\\){1,2}|[A-Za-z]:((\\\\){1,2}[^\\\\]+)+)(\\\\)?$/i.test(e)?e:new RegExp(\"^(\"+w.FE.LinkProtocols.join(\"|\")+\"):\\\\/\\\\/\",\"i\").test(e)?e:e=encodeURIComponent(e).replace(/%23/g,\"#\").replace(/%2F/g,\"/\").replace(/%25/g,\"%\").replace(/mailto%3A/gi,\"mailto:\").replace(/file%3A/gi,\"file:\").replace(/sms%3A/gi,\"sms:\").replace(/tel%3A/gi,\"tel:\").replace(/notes%3A/gi,\"notes:\").replace(/data%3Aimage/gi,\"data:image\").replace(/blob%3A/gi,\"blob:\").replace(/%3A(\\d)/gi,\":$1\").replace(/webkit-fake-url%3A/gi,\"webkit-fake-url:\").replace(/%3F/g,\"?\").replace(/%3D/g,\"=\").replace(/%26/g,\"&\").replace(/&amp;/g,\"&\").replace(/%2C/g,\",\").replace(/%3B/g,\";\").replace(/%2B/g,\"+\").replace(/%40/g,\"@\").replace(/%5B/g,\"[\").replace(/%5D/g,\"]\").replace(/%7B/g,\"{\").replace(/%7D/g,\"}\")},isArray:function(e){return e&&!e.propertyIsEnumerable(\"length\")&&\"object\"==typeof e&&\"number\"==typeof e.length},RGBToHex:function(e){function t(e){return(\"0\"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&\"transparent\"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(\"#\"+t((e=e.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/))[1])+t(e[2])+t(e[3])).toUpperCase():\"\"}catch(n){return null}},HEXtoRGB:function(e){e=e.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i,function(e,t,n,r){return t+t+n+n+r+r});var t=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(e);return t?\"rgb(\"+parseInt(t[1],16)+\", \"+parseInt(t[2],16)+\", \"+parseInt(t[3],16)+\")\":\"\"},isURL:function(e){return!!/^(https?:|ftps?:|)\\/\\//i.test(e)&&(e=String(e).replace(/</g,\"%3C\").replace(/>/g,\"%3E\").replace(/\"/g,\"%22\").replace(/ /g,\"%20\"),new RegExp(\"^\"+w.FE.LinkRegExHTTP+w.FE.LinkRegExEnd+\"$\",\"gi\").test(e))},getAlignment:function(e){var t=(e.css(\"text-align\")||\"\").replace(/-(.*)-/g,\"\");if([\"left\",\"right\",\"justify\",\"center\"].indexOf(t)<0){if(!s){var n=w('<div dir=\"'+(\"rtl\"==i.opts.direction?\"rtl\":\"auto\")+'\" style=\"text-align: '+i.$el.css(\"text-align\")+'; position: fixed; left: -3000px;\"><span id=\"s1\">.</span><span id=\"s2\">.</span></div>');w(\"body:first\").append(n);var r=n.find(\"#s1\").get(0).getBoundingClientRect().left,o=n.find(\"#s2\").get(0).getBoundingClientRect().left;n.remove(),s=r<o?\"left\":\"right\"}t=s}return t},scrollTop:function(){return i.o_win.pageYOffset?i.o_win.pageYOffset:i.o_doc.documentElement&&i.o_doc.documentElement.scrollTop?i.o_doc.documentElement.scrollTop:i.o_doc.body.scrollTop?i.o_doc.body.scrollTop:0},scrollLeft:function(){return i.o_win.pageXOffset?i.o_win.pageXOffset:i.o_doc.documentElement&&i.o_doc.documentElement.scrollLeft?i.o_doc.documentElement.scrollLeft:i.o_doc.body.scrollLeft?i.o_doc.body.scrollLeft:0},isInViewPort:function(e){var t=e.getBoundingClientRect();return 0<=(t={top:Math.round(t.top),bottom:Math.round(t.bottom)}).top&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)||t.top<=0&&t.bottom>=(window.innerHeight||document.documentElement.clientHeight)}}},w.FE.MODULES.events=function(l){var e,a={};function t(e,t,n){f(e,t,n)}function n(e){if(void 0===e&&(e=!0),!l.$wp)return!1;if(l.helpers.isIOS()){l.$win.get(0).focus();var t=0===l.$win.scrollTop()?1:l.$win.scrollTop();window.scrollTo(0,t)}if(l.core.hasFocus())return!1;if(!l.core.hasFocus()&&e){var n=l.$win.scrollTop();if(l.browser.msie&&l.$box&&l.$box.css(\"position\",\"fixed\"),l.browser.msie&&l.$wp&&l.$wp.css(\"overflow\",\"visible\"),l.browser.msie&&l.$sc&&l.$sc.css(\"position\",\"fixed\"),s(),l.$el.focus(),l.events.trigger(\"focus\"),i(),l.browser.msie&&l.$sc&&l.$sc.css(\"position\",\"\"),l.browser.msie&&l.$box&&l.$box.css(\"position\",\"\"),l.browser.msie&&l.$wp&&l.$wp.css(\"overflow\",\"auto\"),n!=l.$win.scrollTop()&&l.$win.scrollTop(n),!l.selection.info(l.el).atStart)return!1}if(!l.core.hasFocus()||0<l.$el.find(\".fr-marker\").length)return!1;if(l.selection.info(l.el).atStart&&l.selection.isCollapsed()&&null!=l.html.defaultTag()){var r=l.markers.insert();if(r&&!l.node.blockParent(r)){w(r).remove();var o=l.$el.find(l.html.blockTagsQuery()).get(0);o&&(w(o).prepend(w.FE.MARKERS),l.selection.restore())}else r&&w(r).remove()}}var r=!1;function i(){e=!0}function s(){e=!1}function o(){return e}function d(e,t,n){var r,o=e.split(\" \");if(1<o.length){for(var i=0;i<o.length;i++)d(o[i],t,n);return!0}void 0===n&&(n=!1),r=0!==e.indexOf(\"shared.\")?a[e]=a[e]||[]:l.shared._events[e]=l.shared._events[e]||[],n?r.unshift(t):r.push(t)}var c=[];function f(e,t,n,r,o){\"function\"==typeof n&&(o=r,r=n,n=!1);var i,a=o?l.shared.$_events:c,s=o?l.sid:l.id;i=r,r=function(){if(!l.destroying)return i.apply(this,arguments)},n?e.on(t.split(\" \").join(\".ed\"+s+\" \")+\".ed\"+s,n,r):e.on(t.split(\" \").join(\".ed\"+s+\" \")+\".ed\"+s,r),a.push([e,t.split(\" \").join(\".ed\"+s+\" \")+\".ed\"+s])}function p(e){for(var t=0;t<e.length;t++)e[t][0].off(e[t][1])}function u(e,t,n){if(!l.edit.isDisabled()||n){var r,o;if(0!==e.indexOf(\"shared.\"))r=a[e];else{if(0<l.shared.count)return!1;r=l.shared._events[e]}if(r)for(var i=0;i<r.length;i++)if(!1===(o=r[i].apply(l,t)))return!1;return!1!==(o=l.$oel.triggerHandler(\"froalaEditor.\"+e,w.merge([l],t||[])))&&o}}function g(){for(var e in a)a.hasOwnProperty(e)&&delete a[e]}function h(){for(var e in l.shared._events)l.shared._events.hasOwnProperty(e)&&delete l.shared._events[e]}return{_init:function(){l.shared.$_events=l.shared.$_events||[],l.shared._events={},l.helpers.isMobile()?(l._mousedown=\"touchstart\",l._mouseup=\"touchend\",l._move=\"touchmove\",l._mousemove=\"touchmove\"):(l._mousedown=\"mousedown\",l._mouseup=\"mouseup\",l._move=\"\",l._mousemove=\"mousemove\"),t(l.$el,\"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart\",function(e){u(e.type,[e])}),d(\"mousedown\",function(){for(var e=0;e<w.FE.INSTANCES.length;e++)w.FE.INSTANCES[e]!=l&&w.FE.INSTANCES[e].popups&&w.FE.INSTANCES[e].popups.areVisible()&&w.FE.INSTANCES[e].$el.find(\".fr-marker\").remove()}),t(l.$win,l._mousedown,function(e){u(\"window.mousedown\",[e]),i()}),t(l.$win,l._mouseup,function(e){u(\"window.mouseup\",[e])}),t(l.$win,\"cut copy keydown keyup touchmove touchend\",function(e){u(\"window.\"+e.type,[e])}),t(l.$doc,\"dragend drop\",function(e){u(\"document.\"+e.type,[e])}),t(l.$el,\"keydown keypress keyup input\",function(e){u(e.type,[e])}),t(l.$el,\"focus\",function(e){o()&&(n(!1),!1===r&&u(e.type,[e]))}),t(l.$el,\"blur\",function(e){o()&&!0===r&&(u(e.type,[e]),i())}),f(l.$el,\"mousedown\",'[contenteditable=\"true\"]',function(){s(),l.$el.blur()}),d(\"focus\",function(){r=!0}),d(\"blur\",function(){r=!1}),i(),t(l.$el,\"cut copy paste beforepaste\",function(e){u(e.type,[e])}),d(\"destroy\",g),d(\"shared.destroy\",h)},on:d,trigger:u,bindClick:function(e,t,n){f(e,l._mousedown,t,function(e){var t,n;l.edit.isDisabled()||(n=w((t=e).currentTarget),l.edit.isDisabled()||l.node.hasClass(n.get(0),\"fr-disabled\")?t.preventDefault():\"mousedown\"===t.type&&1!==t.which||(l.helpers.isMobile()||t.preventDefault(),(l.helpers.isAndroid()||l.helpers.isWindowsPhone())&&0===n.parents(\".fr-dropdown-menu\").length&&(t.preventDefault(),t.stopPropagation()),n.addClass(\"fr-selected\"),l.events.trigger(\"commands.mousedown\",[n])))},!0),f(e,l._mouseup+\" \"+l._move,t,function(e){l.edit.isDisabled()||function(e,t){var n=w(e.currentTarget);if(l.edit.isDisabled()||l.node.hasClass(n.get(0),\"fr-disabled\"))return e.preventDefault();if((\"mouseup\"!==e.type||1===e.which)&&l.node.hasClass(n.get(0),\"fr-selected\"))if(\"touchmove\"!=e.type){if(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!l.node.hasClass(n.get(0),\"fr-selected\"))return l.button.getButtons(\".fr-selected\",!0).removeClass(\"fr-selected\");if(l.button.getButtons(\".fr-selected\",!0).removeClass(\"fr-selected\"),n.data(\"dragging\")||n.attr(\"disabled\"))return n.removeData(\"dragging\");var r=n.data(\"timeout\");r&&(clearTimeout(r),n.removeData(\"timeout\")),t.apply(l,[e])}else n.data(\"timeout\")||n.data(\"timeout\",setTimeout(function(){n.data(\"dragging\",!0)},100))}(e,n)},!0),f(e,\"mousedown click mouseup\",t,function(e){l.edit.isDisabled()||e.stopPropagation()},!0),d(\"window.mouseup\",function(){l.edit.isDisabled()||(e.find(t).removeClass(\"fr-selected\"),i())}),f(e,\"mouseenter\",t,function(){w(this).hasClass(\"fr-options\")&&w(this).prev(\".fr-btn\").addClass(\"fr-btn-hover\"),w(this).next(\".fr-btn\").hasClass(\"fr-options\")&&w(this).next(\".fr-btn\").addClass(\"fr-btn-hover\")}),f(e,\"mouseleave\",t,function(){w(this).hasClass(\"fr-options\")&&w(this).prev(\".fr-btn\").removeClass(\"fr-btn-hover\"),w(this).next(\".fr-btn\").hasClass(\"fr-options\")&&w(this).next(\".fr-btn\").removeClass(\"fr-btn-hover\")})},disableBlur:s,enableBlur:i,blurActive:o,focus:n,chainTrigger:function(e,t,n){if(!l.edit.isDisabled()||n){var r,o;if(0!==e.indexOf(\"shared.\"))r=a[e];else{if(0<l.shared.count)return!1;r=l.shared._events[e]}if(r)for(var i=0;i<r.length;i++)void 0!==(o=r[i].apply(l,[t]))&&(t=o);return void 0!==(o=l.$oel.triggerHandler(\"froalaEditor.\"+e,w.merge([l],[t])))&&(t=o),t}},$on:f,$off:function(){p(c),c=[],0===l.shared.count&&(p(l.shared.$_events),l.shared.$_events=[])}}},w.FE.MODULES.node=function(a){function s(e){return e&&\"IFRAME\"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function l(e){return!!e&&(e.nodeType==Node.ELEMENT_NODE&&0<=w.FE.BLOCK_TAGS.indexOf(e.tagName.toLowerCase()))}function d(e){var t={},n=e.attributes;if(n)for(var r=0;r<n.length;r++){var o=n[r];t[o.nodeName]=o.value}return t}function t(e){for(var t=\"\",n=d(e),r=Object.keys(n).sort(),o=0;o<r.length;o++){var i=r[o],a=n[i];a.indexOf(\"'\")<0&&0<=a.indexOf('\"')?t+=\" \"+i+\"='\"+a+\"'\":0<=a.indexOf('\"')&&0<=a.indexOf(\"'\")?t+=\" \"+i+'=\"'+(a=a.replace(/\"/g,\"&quot;\"))+'\"':t+=\" \"+i+'=\"'+a+'\"'}return t}function n(e){return e===a.el}return{isBlock:l,isEmpty:function(e,t){if(!e)return!0;if(e.querySelector(\"table\"))return!1;var n=s(e);1==n.length&&l(n[0])&&(n=s(n[0]));for(var r=!1,o=0;o<n.length;o++){var i=n[o];if(!(t&&a.node.hasClass(i,\"fr-marker\")||i.nodeType==Node.TEXT_NODE&&0===i.textContent.length)){if(\"BR\"!=i.tagName&&0<(i.textContent||\"\").replace(/\\u200B/gi,\"\").replace(/\\n/g,\"\").length)return!1;if(r)return!1;\"BR\"==i.tagName&&(r=!0)}}return!(e.querySelectorAll(w.FE.VOID_ELEMENTS.join(\",\")).length-e.querySelectorAll(\"br\").length||e.querySelector(a.opts.htmlAllowedEmptyTags.join(\":not(.fr-marker),\")+\":not(.fr-marker)\")||1<e.querySelectorAll(w.FE.BLOCK_TAGS.join(\",\")).length||e.querySelector(a.opts.htmlDoNotWrapTags.join(\":not(.fr-marker),\")+\":not(.fr-marker)\"))},blockParent:function(e){for(;e&&e.parentNode!==a.el&&(!e.parentNode||!a.node.hasClass(e.parentNode,\"fr-inner\"));)if(l(e=e.parentNode))return e;return null},deepestParent:function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!0),t.push(a.el),0<=t.indexOf(e.parentNode)||e.parentNode&&a.node.hasClass(e.parentNode,\"fr-inner\")||e.parentNode&&0<=w.FE.SIMPLE_ENTER_TAGS.indexOf(e.parentNode.tagName)&&n)return null;for(;t.indexOf(e.parentNode)<0&&e.parentNode&&!a.node.hasClass(e.parentNode,\"fr-inner\")&&(w.FE.SIMPLE_ENTER_TAGS.indexOf(e.parentNode.tagName)<0||!n)&&(!l(e)||!l(e.parentNode)||!n);)e=e.parentNode;return e},rawAttributes:d,attributes:t,clearAttributes:function(e){for(var t=e.attributes,n=t.length-1;0<=n;n--){var r=t[n];e.removeAttribute(r.nodeName)}},openTagString:function(e){return\"<\"+e.tagName.toLowerCase()+t(e)+\">\"},closeTagString:function(e){return\"</\"+e.tagName.toLowerCase()+\">\"},isFirstSibling:function e(t,n){void 0===n&&(n=!0);for(var r=t.previousSibling;r&&n&&a.node.hasClass(r,\"fr-marker\");)r=r.previousSibling;return!r||r.nodeType==Node.TEXT_NODE&&\"\"===r.textContent&&e(r)},isLastSibling:function e(t,n){void 0===n&&(n=!0);for(var r=t.nextSibling;r&&n&&a.node.hasClass(r,\"fr-marker\");)r=r.nextSibling;return!r||r.nodeType==Node.TEXT_NODE&&\"\"===r.textContent&&e(r)},isList:function(e){return!!e&&0<=[\"UL\",\"OL\"].indexOf(e.tagName)},isLink:function(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&\"a\"==e.tagName.toLowerCase()},isElement:n,contents:s,isVoid:function(e){return e&&e.nodeType==Node.ELEMENT_NODE&&0<=w.FE.VOID_ELEMENTS.indexOf((e.tagName||\"\").toLowerCase())},hasFocus:function(e){return e===a.doc.activeElement&&(!a.doc.hasFocus||a.doc.hasFocus())&&!!(n(e)||e.type||e.href||~e.tabIndex)},isEditable:function(e){return(!e.getAttribute||\"false\"!=e.getAttribute(\"contenteditable\"))&&[\"STYLE\",\"SCRIPT\"].indexOf(e.tagName)<0},isDeletable:function(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute(\"class\")&&0<=(e.getAttribute(\"class\")||\"\").indexOf(\"fr-deletable\")},hasClass:function(e,t){return e instanceof w&&(e=e.get(0)),e&&e.classList&&e.classList.contains(t)},filter:function(e){return a.browser.msie?e:{acceptNode:e}}}},w.FE.INVISIBLE_SPACE=\"&#8203;\",w.FE.START_MARKER='<span class=\"fr-marker\" data-id=\"0\" data-type=\"true\" style=\"display: none; line-height: 0;\">'+w.FE.INVISIBLE_SPACE+\"</span>\",w.FE.END_MARKER='<span class=\"fr-marker\" data-id=\"0\" data-type=\"false\" style=\"display: none; line-height: 0;\">'+w.FE.INVISIBLE_SPACE+\"</span>\",w.FE.MARKERS=w.FE.START_MARKER+w.FE.END_MARKER,w.FE.MODULES.markers=function(d){function l(){if(!d.$wp)return null;try{var e=d.selection.ranges(0),t=e.commonAncestorContainer;if(d.core.isEmpty()&&t.textContent!==w(\"<span>\").html(w.FE.INVISIBLE_SPACE).text())return d.selection.setAtStart(d.el),d.$el.find(\".fr-marker:first\").replaceWith('<span class=\"fr-single-marker\" style=\"display: none; line-height: 0;\">'+w.FE.INVISIBLE_SPACE+\"</span>\"),d.$el.find(\".fr-marker\").remove(),d.$el.find(\".fr-single-marker\").removeClass(\"fr-single-marker\").addClass(\"fr-marker\").get(0);if(t!=d.el&&0===d.$el.find(t).length)return null;var n=e.cloneRange(),r=e.cloneRange();n.collapse(!0);var o=w('<span class=\"fr-marker\" style=\"display: none; line-height: 0;\">'+w.FE.INVISIBLE_SPACE+\"</span>\",d.doc)[0];if(n.insertNode(o),o=d.$el.find(\"span.fr-marker\").get(0)){for(var i=o.nextSibling;i&&i.nodeType===Node.TEXT_NODE&&0===i.textContent.length;)w(i).remove(),i=d.$el.find(\"span.fr-marker\").get(0).nextSibling;return d.selection.clear(),d.selection.get().addRange(r),o}return null}catch(a){console.warn(\"MARKER\",a)}}function c(){d.$el.find(\".fr-marker\").remove()}return{place:function(e,t,n){var r,o,i;try{var a=e.cloneRange();if(a.collapse(t),a.insertNode(w('<span class=\"fr-marker\" data-id=\"'+n+'\" data-type=\"'+t+'\" style=\"display: '+(d.browser.safari?\"none\":\"inline-block\")+'; line-height: 0;\">'+w.FE.INVISIBLE_SPACE+\"</span>\",d.doc)[0]),!0===t)for(i=(r=d.$el.find('span.fr-marker[data-type=\"true\"][data-id=\"'+n+'\"]').get(0)).nextSibling;i&&i.nodeType===Node.TEXT_NODE&&0===i.textContent.length;)w(i).remove(),i=r.nextSibling;if(!0===t&&!e.collapsed){for(;!d.node.isElement(r.parentNode)&&!i;)w(r.parentNode).after(r),i=r.nextSibling;if(i&&i.nodeType===Node.ELEMENT_NODE&&d.node.isBlock(i)&&\"HR\"!==i.tagName){for(o=[i];i=o[0],(o=d.node.contents(i))[0]&&d.node.isBlock(o[0]););w(i).prepend(w(r))}}if(!1===t&&!e.collapsed){if((i=(r=d.$el.find('span.fr-marker[data-type=\"false\"][data-id=\"'+n+'\"]').get(0)).previousSibling)&&i.nodeType===Node.ELEMENT_NODE&&d.node.isBlock(i)&&\"HR\"!==i.tagName){for(o=[i];i=o[o.length-1],(o=d.node.contents(i))[o.length-1]&&d.node.isBlock(o[o.length-1]););w(i).append(w(r))}(r.parentNode&&0<=[\"TD\",\"TH\"].indexOf(r.parentNode.tagName)||!r.previousSibling&&d.node.isBlock(r.parentElement))&&r.parentNode.previousSibling&&!r.previousSibling&&w(r.parentNode.previousSibling).append(r)}var s=d.$el.find('span.fr-marker[data-type=\"'+t+'\"][data-id=\"'+n+'\"]').get(0);return s&&(s.style.display=\"none\"),s}catch(l){return null}},insert:l,split:function(){d.selection.isCollapsed()||d.selection.remove();var e=d.$el.find(\".fr-marker\").get(0);if(null==e&&(e=l()),null==e)return null;var t=d.node.deepestParent(e);if(t||(t=d.node.blockParent(e))&&\"LI\"!=t.tagName&&(t=null),t)if(d.node.isBlock(t)&&d.node.isEmpty(t))\"LI\"!=t.tagName||t.parentNode.firstElementChild!=t||d.node.isEmpty(t.parentNode)?w(t).replaceWith('<span class=\"fr-marker\"></span>'):w(t).append('<span class=\"fr-marker\"></span>');else if(d.cursor.isAtStart(e,t))w(t).before('<span class=\"fr-marker\"></span>'),w(e).remove();else if(d.cursor.isAtEnd(e,t))w(t).after('<span class=\"fr-marker\"></span>'),w(e).remove();else{for(var n=e,r=\"\",o=\"\";n=n.parentNode,r+=d.node.closeTagString(n),o=d.node.openTagString(n)+o,n!=t;);w(e).replaceWith('<span id=\"fr-break\"></span>');var i=d.node.openTagString(t)+w(t).html()+d.node.closeTagString(t);i=i.replace(/<span id=\"fr-break\"><\\/span>/g,r+'<span class=\"fr-marker\"></span>'+o),w(t).replaceWith(i)}return d.$el.find(\".fr-marker\").get(0)},insertAtPoint:function(e){var t,n=e.clientX,r=e.clientY;c();var o=null;if(\"undefined\"!=typeof d.doc.caretPositionFromPoint?(t=d.doc.caretPositionFromPoint(n,r),(o=d.doc.createRange()).setStart(t.offsetNode,t.offset),o.setEnd(t.offsetNode,t.offset)):\"undefined\"!=typeof d.doc.caretRangeFromPoint&&(t=d.doc.caretRangeFromPoint(n,r),(o=d.doc.createRange()).setStart(t.startContainer,t.startOffset),o.setEnd(t.startContainer,t.startOffset)),null!==o&&\"undefined\"!=typeof d.win.getSelection){var i=d.win.getSelection();i.removeAllRanges(),i.addRange(o)}else if(\"undefined\"!=typeof d.doc.body.createTextRange)try{(o=d.doc.body.createTextRange()).moveToPoint(n,r);var a=o.duplicate();a.moveToPoint(n,r),o.setEndPoint(\"EndToEnd\",a),o.select()}catch(s){return!1}l()},remove:c}},w.FE.MODULES.selection=function(S){function s(){var e=\"\";return S.win.getSelection?e=S.win.getSelection():S.doc.getSelection?e=S.doc.getSelection():S.doc.selection&&(e=S.doc.selection.createRange().text),e.toString()}function T(){return S.win.getSelection?S.win.getSelection():S.doc.getSelection?S.doc.getSelection():S.doc.selection.createRange()}function c(e){var t=T(),n=[];if(t&&t.getRangeAt&&t.rangeCount){n=[];for(var r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r))}else n=S.doc.createRange?[S.doc.createRange()]:[];return void 0!==e?n[e]:n}function y(){var e=T();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(t){}}function f(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&0<n.childNodes.length&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function N(){if(S.$wp){S.markers.remove();var e,t,n=c(),r=[];for(t=0;t<n.length;t++)if(n[t].startContainer!==S.doc||S.browser.msie){var o=(e=n[t]).collapsed,i=S.markers.place(e,!0,t),a=S.markers.place(e,!1,t);if(void 0!==i&&i||!o||(w(\".fr-marker\").remove(),S.selection.setAtEnd(S.el)),S.el.normalize(),S.browser.safari&&!o)try{(e=S.doc.createRange()).setStartAfter(i),e.setEndBefore(a),r.push(e)}catch(s){}}if(S.browser.safari&&r.length)for(S.selection.clear(),t=0;t<r.length;t++)S.selection.get().addRange(r[t])}}function C(){var e,t=S.el.querySelectorAll('.fr-marker[data-type=\"true\"]');if(!S.$wp)return S.markers.remove(),!1;if(0===t.length)return!1;if(S.browser.msie||S.browser.edge)for(e=0;e<t.length;e++)t[e].style.display=\"inline-block\";S.core.hasFocus()||S.browser.msie||S.browser.webkit||S.$el.focus(),y();var n=T();for(e=0;e<t.length;e++){var r=w(t[e]).data(\"id\"),o=t[e],i=S.doc.createRange(),a=S.$el.find('.fr-marker[data-type=\"false\"][data-id=\"'+r+'\"]');(S.browser.msie||S.browser.edge)&&a.css(\"display\",\"inline-block\");var s=null;if(0<a.length){a=a[0];try{for(var l,d=!1,c=o.nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;)c=(l=c).nextSibling,w(l).remove();for(var f,p,u=a.nextSibling;u&&u.nodeType==Node.TEXT_NODE&&0===u.textContent.length;)u=(l=u).nextSibling,w(l).remove();if(o.nextSibling==a||a.nextSibling==o){for(var g=o.nextSibling==a?o:a,h=g==o?a:o,m=g.previousSibling;m&&m.nodeType==Node.TEXT_NODE&&0===m.length;)m=(l=m).previousSibling,w(l).remove();if(m&&m.nodeType==Node.TEXT_NODE)for(;m&&m.previousSibling&&m.previousSibling.nodeType==Node.TEXT_NODE;)m.previousSibling.textContent=m.previousSibling.textContent+m.textContent,m=m.previousSibling,w(m.nextSibling).remove();for(var E=h.nextSibling;E&&E.nodeType==Node.TEXT_NODE&&0===E.length;)E=(l=E).nextSibling,w(l).remove();if(E&&E.nodeType==Node.TEXT_NODE)for(;E&&E.nextSibling&&E.nextSibling.nodeType==Node.TEXT_NODE;)E.nextSibling.textContent=E.textContent+E.nextSibling.textContent,E=E.nextSibling,w(E.previousSibling).remove();if(m&&(S.node.isVoid(m)||S.node.isBlock(m))&&(m=null),E&&(S.node.isVoid(E)||S.node.isBlock(E))&&(E=null),m&&E&&m.nodeType==Node.TEXT_NODE&&E.nodeType==Node.TEXT_NODE){w(o).remove(),w(a).remove();var v=m.textContent.length;m.textContent=m.textContent+E.textContent,w(E).remove(),S.opts.htmlUntouched||S.spaces.normalize(m),i.setStart(m,v),i.setEnd(m,v),d=!0}else!m&&E&&E.nodeType==Node.TEXT_NODE?(w(o).remove(),w(a).remove(),S.opts.htmlUntouched||S.spaces.normalize(E),s=w(S.doc.createTextNode(\"\\u200b\")),w(E).before(s),i.setStart(E,0),i.setEnd(E,0),d=!0):!E&&m&&m.nodeType==Node.TEXT_NODE&&(w(o).remove(),w(a).remove(),S.opts.htmlUntouched||S.spaces.normalize(m),s=w(S.doc.createTextNode(\"\\u200b\")),w(m).after(s),i.setStart(m,m.textContent.length),i.setEnd(m,m.textContent.length),d=!0)}if(!d)(S.browser.chrome||S.browser.edge)&&o.nextSibling==a?(f=A(a,i,!0)||i.setStartAfter(a),p=A(o,i,!1)||i.setEndBefore(o)):(o.previousSibling==a&&(a=(o=a).nextSibling),a.nextSibling&&\"BR\"===a.nextSibling.tagName||!a.nextSibling&&S.node.isBlock(o.previousSibling)||o.previousSibling&&\"BR\"==o.previousSibling.tagName||(o.style.display=\"inline\",a.style.display=\"inline\",s=w(S.doc.createTextNode(\"\\u200b\"))),f=A(o,i,!0)||w(o).before(s)&&i.setStartBefore(o),p=A(a,i,!1)||w(a).after(s)&&i.setEndAfter(a)),\"function\"==typeof f&&f(),\"function\"==typeof p&&p()}catch(b){console.warn(\"RESTORE RANGE\",b)}}s&&s.remove();try{n.addRange(i)}catch(b){console.warn(\"ADD RANGE\",b)}}S.markers.remove()}function A(e,t,n){var r,o=e.previousSibling,i=e.nextSibling;return o&&i&&o.nodeType==Node.TEXT_NODE&&i.nodeType==Node.TEXT_NODE?(r=o.textContent.length,n?(i.textContent=o.textContent+i.textContent,w(o).remove(),w(e).remove(),S.opts.htmlUntouched||S.spaces.normalize(i),function(){t.setStart(i,r)}):(o.textContent=o.textContent+i.textContent,w(i).remove(),w(e).remove(),S.opts.htmlUntouched||S.spaces.normalize(o),function(){t.setEnd(o,r)})):o&&!i&&o.nodeType==Node.TEXT_NODE?(r=o.textContent.length,n?(S.opts.htmlUntouched||S.spaces.normalize(o),function(){t.setStart(o,r)}):(S.opts.htmlUntouched||S.spaces.normalize(o),function(){t.setEnd(o,r)})):!(!i||o||i.nodeType!=Node.TEXT_NODE)&&(n?(S.opts.htmlUntouched||S.spaces.normalize(i),function(){t.setStart(i,0)}):(S.opts.htmlUntouched||S.spaces.normalize(i),function(){t.setEnd(i,0)}))}function x(){for(var e=c(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function o(e){var t,n,r=!1,o=!1;if(S.win.getSelection){var i=S.win.getSelection();i.rangeCount&&((n=(t=i.getRangeAt(0)).cloneRange()).selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),r=\"\"===n.toString(),n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),o=\"\"===n.toString())}else S.doc.selection&&\"Control\"!=S.doc.selection.type&&((n=(t=S.doc.selection.createRange()).duplicate()).moveToElementText(e),n.setEndPoint(\"EndToStart\",t),r=\"\"===n.text,n.moveToElementText(e),n.setEndPoint(\"StartToEnd\",t),o=\"\"===n.text);return{atStart:r,atEnd:o}}function $(e,t){void 0===t&&(t=!0);var n=w(e).html();n&&n.replace(/\\u200b/g,\"\").length!=n.length&&w(e).html(n.replace(/\\u200b/g,\"\"));for(var r=S.node.contents(e),o=0;o<r.length;o++)r[o].nodeType!=Node.ELEMENT_NODE?w(r[o]).remove():($(r[o],0===o),0===o&&(t=!1));e.nodeType==Node.TEXT_NODE?w(e).replaceWith('<span data-first=\"true\" data-text=\"true\"></span>'):t&&w(e).attr(\"data-first\",!0)}function O(){return 0===w(this).find(\"fr-inner\").length}function p(){try{if(!S.$wp)return!1;for(var e=c(0).commonAncestorContainer;e&&!S.node.isElement(e);)e=e.parentNode;return!!S.node.isElement(e)}catch(t){return!1}}function r(e,t){if(!e||0<e.getElementsByClassName(\"fr-marker\").length)return!1;for(var n=e.firstChild;n&&(S.node.isBlock(n)||t&&!S.node.isVoid(n)&&n.nodeType==Node.ELEMENT_NODE);)n=(e=n).firstChild;e.innerHTML=w.FE.MARKERS+e.innerHTML}function i(e,t){if(!e||0<e.getElementsByClassName(\"fr-marker\").length)return!1;for(var n=e.lastChild;n&&(S.node.isBlock(n)||t&&!S.node.isVoid(n)&&n.nodeType==Node.ELEMENT_NODE);)n=(e=n).lastChild;var r=S.doc.createElement(\"SPAN\");for(r.setAttribute(\"id\",\"fr-sel-markers\"),r.innerHTML=w.FE.MARKERS;e.parentNode&&S.opts.htmlAllowedEmptyTags&&0<=S.opts.htmlAllowedEmptyTags.indexOf(e.tagName.toLowerCase());)e=e.parentNode;e.appendChild(r);var o=e.querySelector(\"#fr-sel-markers\");o.outerHTML=o.innerHTML}return{text:s,get:T,ranges:c,clear:y,element:function(){var e=T();try{if(e.rangeCount){var t,n=c(0),r=n.startContainer;if(S.node.isElement(r)&&0===n.startOffset&&r.childNodes.length)for(;r.childNodes.length&&r.childNodes[0].nodeType===Node.ELEMENT_NODE;)r=r.childNodes[0];if(r.nodeType==Node.TEXT_NODE&&n.startOffset==(r.textContent||\"\").length&&r.nextSibling&&(r=r.nextSibling),r.nodeType==Node.ELEMENT_NODE){var o=!1;if(0<r.childNodes.length&&r.childNodes[n.startOffset]){for(t=r.childNodes[n.startOffset];t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;)t=t.nextSibling;if(t&&t.textContent.replace(/\\u200B/g,\"\")===s().replace(/\\u200B/g,\"\")&&(r=t,o=!0),!o&&1<r.childNodes.length&&0<n.startOffset&&r.childNodes[n.startOffset-1]){for(t=r.childNodes[n.startOffset-1];t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;)t=t.nextSibling;t&&t.textContent.replace(/\\u200B/g,\"\")===s().replace(/\\u200B/g,\"\")&&(r=t,o=!0)}}else!n.collapsed&&r.nextSibling&&r.nextSibling.nodeType==Node.ELEMENT_NODE&&(t=r.nextSibling)&&t.textContent.replace(/\\u200B/g,\"\")===s().replace(/\\u200B/g,\"\")&&(r=t,o=!0);!o&&0<r.childNodes.length&&w(r.childNodes[0]).text().replace(/\\u200B/g,\"\")===s().replace(/\\u200B/g,\"\")&&[\"BR\",\"IMG\",\"HR\"].indexOf(r.childNodes[0].tagName)<0&&(r=r.childNodes[0])}for(;r.nodeType!=Node.ELEMENT_NODE&&r.parentNode;)r=r.parentNode;for(var i=r;i&&\"HTML\"!=i.tagName;){if(i==S.el)return r;i=w(i).parent()[0]}}}catch(a){}return S.el},endElement:function(){var e=T();try{if(e.rangeCount){var t,n=c(0),r=n.endContainer;if(r.nodeType==Node.ELEMENT_NODE){var o=!1;0<r.childNodes.length&&r.childNodes[n.endOffset]&&w(r.childNodes[n.endOffset]).text()===s()?(r=r.childNodes[n.endOffset],o=!0):!n.collapsed&&r.previousSibling&&r.previousSibling.nodeType==Node.ELEMENT_NODE?(t=r.previousSibling)&&t.textContent.replace(/\\u200B/g,\"\")===s().replace(/\\u200B/g,\"\")&&(r=t,o=!0):!n.collapsed&&0<r.childNodes.length&&r.childNodes[n.endOffset]&&(t=r.childNodes[n.endOffset].previousSibling).nodeType==Node.ELEMENT_NODE&&t&&t.textContent.replace(/\\u200B/g,\"\")===s().replace(/\\u200B/g,\"\")&&(r=t,o=!0),!o&&0<r.childNodes.length&&w(r.childNodes[r.childNodes.length-1]).text()===s()&&[\"BR\",\"IMG\",\"HR\"].indexOf(r.childNodes[r.childNodes.length-1].tagName)<0&&(r=r.childNodes[r.childNodes.length-1])}for(r.nodeType==Node.TEXT_NODE&&0===n.endOffset&&r.previousSibling&&r.previousSibling.nodeType==Node.ELEMENT_NODE&&(r=r.previousSibling);r.nodeType!=Node.ELEMENT_NODE&&r.parentNode;)r=r.parentNode;for(var i=r;i&&\"HTML\"!=i.tagName;){if(i==S.el)return r;i=w(i).parent()[0]}}}catch(a){}return S.el},save:N,restore:C,isCollapsed:x,isFull:function(){if(x())return!1;S.selection.save();var e,t=S.el.querySelectorAll(\"td, th, img, br\");for(e=0;e<t.length;e++)t[e].nextSibling&&(t[e].innerHTML='<span class=\"fr-mk\">'+w.FE.INVISIBLE_SPACE+\"</span>\"+t[e].innerHTML);var n=!1,r=o(S.el);for(r.atStart&&r.atEnd&&(n=!0),t=S.el.querySelectorAll(\".fr-mk\"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);return S.selection.restore(),n},inEditor:p,remove:function(){if(x())return!0;var t;N();var n=function(e){for(var t=e.previousSibling;t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;){var n=t;t=t.previousSibling,w(n).remove()}return t},r=function(e){for(var t=e.nextSibling;t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;){var n=t;t=t.nextSibling,w(n).remove()}return t},o=S.$el.find('.fr-marker[data-type=\"true\"]');for(t=0;t<o.length;t++)for(var i=o[t];!(n(i)||S.node.isBlock(i.parentNode)||S.$el.is(i.parentNode)||S.node.hasClass(i.parentNode,\"fr-inner\"));)w(i.parentNode).before(i);var a=S.$el.find('.fr-marker[data-type=\"false\"]');for(t=0;t<a.length;t++){for(var s=a[t];!(r(s)||S.node.isBlock(s.parentNode)||S.$el.is(s.parentNode)||S.node.hasClass(s.parentNode,\"fr-inner\"));)w(s.parentNode).after(s);s.parentNode&&S.node.isBlock(s.parentNode)&&S.node.isEmpty(s.parentNode)&&!S.$el.is(s.parentNode)&&!S.node.hasClass(s.parentNode,\"fr-inner\")&&S.opts.keepFormatOnDelete&&w(s.parentNode).after(s)}if(function(){for(var e=S.$el.find(\".fr-marker\"),t=0;t<e.length;t++)if(w(e[t]).parentsUntil('.fr-element, [contenteditable=\"true\"]','[contenteditable=\"false\"]').length)return!1;return!0}()){!function e(t,n){var r=S.node.contents(t.get(0));0<=[\"TD\",\"TH\"].indexOf(t.get(0).tagName)&&1==t.find(\".fr-marker\").length&&S.node.hasClass(r[0],\"fr-marker\")&&t.attr(\"data-del-cell\",!0);for(var o=0;o<r.length;o++){var i=r[o];S.node.hasClass(i,\"fr-marker\")?n=(n+1)%2:n?0<w(i).find(\".fr-marker\").length?n=e(w(i),n):[\"TD\",\"TH\"].indexOf(i.tagName)<0&&!S.node.hasClass(i,\"fr-inner\")?!S.opts.keepFormatOnDelete||0<S.$el.find(\"[data-first]\").length||S.node.isVoid(i)?w(i).remove():$(i):S.node.hasClass(i,\"fr-inner\")?0===w(i).find(\".fr-inner\").length?w(i).html(\"<br>\"):w(i).find(\".fr-inner\").filter(O).html(\"<br>\"):(w(i).empty(),w(i).attr(\"data-del-cell\",!0)):0<w(i).find(\".fr-marker\").length&&(n=e(w(i),n))}return n}(S.$el,0);var l=S.$el.find('[data-first=\"true\"]');if(l.length)S.$el.find(\".fr-marker\").remove(),l.append(w.FE.INVISIBLE_SPACE+w.FE.MARKERS).removeAttr(\"data-first\"),l.attr(\"data-text\")&&l.replaceWith(l.html());else for(S.$el.find(\"table\").filter(function(){return 0<w(this).find(\"[data-del-cell]\").length&&w(this).find(\"[data-del-cell]\").length==w(this).find(\"td, th\").length}).remove(),S.$el.find(\"[data-del-cell]\").removeAttr(\"data-del-cell\"),o=S.$el.find('.fr-marker[data-type=\"true\"]'),t=0;t<o.length;t++){var d=o[t],c=d.nextSibling,f=S.$el.find('.fr-marker[data-type=\"false\"][data-id=\"'+w(d).data(\"id\")+'\"]').get(0);if(f){if(d&&(!c||c!=f)){var p=S.node.blockParent(d),u=S.node.blockParent(f),g=!1,h=!1;if(p&&0<=[\"UL\",\"OL\"].indexOf(p.tagName)&&(g=!(p=null)),u&&0<=[\"UL\",\"OL\"].indexOf(u.tagName)&&(h=!(u=null)),w(d).after(f),p!=u)if(null!=p||g)if(null!=u||h||0!==w(p).parentsUntil(S.$el,\"table\").length)p&&u&&0===w(p).parentsUntil(S.$el,\"table\").length&&0===w(u).parentsUntil(S.$el,\"table\").length&&0===w(p).find(u).length&&0===w(u).find(p).length&&(w(p).append(w(u).html()),w(u).remove());else{for(c=p;!c.nextSibling&&c.parentNode!=S.el;)c=c.parentNode;for(c=c.nextSibling;c&&\"BR\"!=c.tagName;){var m=c.nextSibling;w(p).append(c),c=m}c&&\"BR\"==c.tagName&&w(c).remove()}else{var E=S.node.deepestParent(d);E?(w(E).after(w(u).html()),w(u).remove()):0===w(u).parentsUntil(S.$el,\"table\").length&&(w(d).next().after(w(u).html()),w(u).remove())}}}else f=w(d).clone().attr(\"data-type\",!1),w(d).after(f)}}S.$el.find(\"li:empty\").remove(),S.opts.keepFormatOnDelete||S.html.fillEmptyBlocks(),S.html.cleanEmptyTags(!0),S.opts.htmlUntouched||(S.clean.lists(),S.$el.find(\"li:empty\").append(\"<br>\"),S.spaces.normalize());var v=S.$el.find(\".fr-marker:last\").get(0),b=S.$el.find(\".fr-marker:first\").get(0);void 0!==v&&void 0!==b&&!v.nextSibling&&b.previousSibling&&\"BR\"==b.previousSibling.tagName&&S.node.isElement(v.parentNode)&&S.node.isElement(b.parentNode)&&S.$el.append(\"<br>\"),C()},blocks:function(){var e,t=[],n=T();if(p()&&n.rangeCount){var r=c();for(e=0;e<r.length;e++){var o,i=r[e],a=f(i.startContainer,i.startOffset),s=f(i.endContainer,i.endOffset);(S.node.isBlock(a)||S.node.hasClass(a,\"fr-inner\"))&&t.indexOf(a)<0&&t.push(a),(o=S.node.blockParent(a))&&t.indexOf(o)<0&&t.push(o);for(var l=[],d=a;d!==s&&d!==S.el;)l.indexOf(d)<0&&d.children&&d.children.length?(l.push(d),d=d.children[0]):d.nextSibling?d=d.nextSibling:d.parentNode&&(d=d.parentNode,l.push(d)),S.node.isBlock(d)&&l.indexOf(d)<0&&t.indexOf(d)<0&&(d!==s||0<i.endOffset)&&t.push(d);S.node.isBlock(s)&&t.indexOf(s)<0&&0<i.endOffset&&t.push(s),(o=S.node.blockParent(s))&&t.indexOf(o)<0&&t.push(o)}}for(e=t.length-1;0<e;e--)w(t[e]).find(t).length&&t.splice(e,1);return t},info:o,setAtEnd:i,setAtStart:r,setBefore:function(e,t){void 0===t&&(t=!0);for(var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;)n=n.previousSibling;return n?(S.node.isBlock(n)?i(n):\"BR\"==n.tagName?w(n).before(w.FE.MARKERS):w(n).after(w.FE.MARKERS),!0):!!t&&(S.node.isBlock(e)?r(e):w(e).before(w.FE.MARKERS),!0)},setAfter:function(e,t){void 0===t&&(t=!0);for(var n=e.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;)n=n.nextSibling;return n?(S.node.isBlock(n)?r(n):w(n).before(w.FE.MARKERS),!0):!!t&&(S.node.isBlock(e)?i(e):w(e).after(w.FE.MARKERS),!0)},rangeElement:f}},w.extend(w.FE.DEFAULTS,{htmlAllowedTags:[\"a\",\"abbr\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"base\",\"bdi\",\"bdo\",\"blockquote\",\"br\",\"button\",\"canvas\",\"caption\",\"cite\",\"code\",\"col\",\"colgroup\",\"datalist\",\"dd\",\"del\",\"details\",\"dfn\",\"dialog\",\"div\",\"dl\",\"dt\",\"em\",\"embed\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"hgroup\",\"hr\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"keygen\",\"label\",\"legend\",\"li\",\"link\",\"main\",\"map\",\"mark\",\"menu\",\"menuitem\",\"meter\",\"nav\",\"noscript\",\"object\",\"ol\",\"optgroup\",\"option\",\"output\",\"p\",\"param\",\"pre\",\"progress\",\"queue\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"script\",\"style\",\"section\",\"select\",\"small\",\"source\",\"span\",\"strike\",\"strong\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"tr\",\"track\",\"u\",\"ul\",\"var\",\"video\",\"wbr\"],htmlRemoveTags:[\"script\",\"style\"],htmlAllowedAttrs:[\"accept\",\"accept-charset\",\"accesskey\",\"action\",\"align\",\"allowfullscreen\",\"allowtransparency\",\"alt\",\"aria-.*\",\"async\",\"autocomplete\",\"autofocus\",\"autoplay\",\"autosave\",\"background\",\"bgcolor\",\"border\",\"charset\",\"cellpadding\",\"cellspacing\",\"checked\",\"cite\",\"class\",\"color\",\"cols\",\"colspan\",\"content\",\"contenteditable\",\"contextmenu\",\"controls\",\"coords\",\"data\",\"data-.*\",\"datetime\",\"default\",\"defer\",\"dir\",\"dirname\",\"disabled\",\"download\",\"draggable\",\"dropzone\",\"enctype\",\"for\",\"form\",\"formaction\",\"frameborder\",\"headers\",\"height\",\"hidden\",\"high\",\"href\",\"hreflang\",\"http-equiv\",\"icon\",\"id\",\"ismap\",\"itemprop\",\"keytype\",\"kind\",\"label\",\"lang\",\"language\",\"list\",\"loop\",\"low\",\"max\",\"maxlength\",\"media\",\"method\",\"min\",\"mozallowfullscreen\",\"multiple\",\"muted\",\"name\",\"novalidate\",\"open\",\"optimum\",\"pattern\",\"ping\",\"placeholder\",\"playsinline\",\"poster\",\"preload\",\"pubdate\",\"radiogroup\",\"readonly\",\"rel\",\"required\",\"reversed\",\"rows\",\"rowspan\",\"sandbox\",\"scope\",\"scoped\",\"scrolling\",\"seamless\",\"selected\",\"shape\",\"size\",\"sizes\",\"span\",\"src\",\"srcdoc\",\"srclang\",\"srcset\",\"start\",\"step\",\"summary\",\"spellcheck\",\"style\",\"tabindex\",\"target\",\"title\",\"type\",\"translate\",\"usemap\",\"value\",\"valign\",\"webkitallowfullscreen\",\"width\",\"wrap\"],htmlAllowedStyleProps:[\".*\"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),w.FE.HTML5Map={B:\"STRONG\",I:\"EM\",STRIKE:\"S\"},w.FE.MODULES.clean=function(f){var p,u,g,h;function o(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute(\"class\")&&0<=e.getAttribute(\"class\").indexOf(\"fr-marker\"))return!1;var t,n=f.node.contents(e),r=[];for(t=0;t<n.length;t++)n[t].nodeType!=Node.ELEMENT_NODE||f.node.isVoid(n[t])?n[t].nodeType==Node.TEXT_NODE&&(n[t].textContent=n[t].textContent.replace(/\\u200b/g,\"\")):n[t].textContent.replace(/\\u200b/g,\"\").length!=n[t].textContent.length&&o(n[t]);if(e.nodeType==Node.ELEMENT_NODE&&!f.node.isVoid(e)&&(e.normalize(),n=f.node.contents(e),r=e.querySelectorAll(\".fr-marker\"),n.length-r.length==0)){for(t=0;t<n.length;t++)if(n[t].nodeType==Node.ELEMENT_NODE&&(n[t].getAttribute(\"class\")||\"\").indexOf(\"fr-marker\")<0)return!1;for(t=0;t<r.length;t++)e.parentNode.insertBefore(r[t].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function s(e,t){if(e.nodeType==Node.COMMENT_NODE)return\"\\x3c!--\"+e.nodeValue+\"--\\x3e\";if(e.nodeType==Node.TEXT_NODE)return t?e.textContent.replace(/\\&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\"):e.textContent.replace(/\\&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\\u00A0/g,\"&nbsp;\").replace(/\\u0009/g,\"\");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&0<=[\"STYLE\",\"SCRIPT\",\"NOSCRIPT\"].indexOf(e.tagName))return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&\"svg\"==e.tagName){var n=document.createElement(\"div\"),r=e.cloneNode(!0);return n.appendChild(r),n.innerHTML}if(\"IFRAME\"==e.tagName)return e.outerHTML.replace(/\\&lt;/g,\"<\").replace(/\\&gt;/g,\">\");var o=e.childNodes;if(0===o.length)return e.outerHTML;for(var i=\"\",a=0;a<o.length;a++)\"PRE\"==e.tagName&&(t=!0),i+=s(o[a],t);return f.node.openTagString(e)+i+f.node.closeTagString(e)}var a=[];function m(e){var t=e.replace(/;;/gi,\";\");return\";\"!=(t=t.replace(/^;/gi,\"\")).charAt(t.length)&&(t+=\";\"),t}function l(e){var t;for(t in e)if(e.hasOwnProperty(t)){var n=t.match(g),r=null;\"style\"==t&&f.opts.htmlAllowedStyleProps.length&&(r=e[t].match(h)),n&&r?e[t]=m(r.join(\";\")):n&&(\"style\"!=t||r)||delete e[t]}for(var o=\"\",i=Object.keys(e).sort(),a=0;a<i.length;a++)e[t=i[a]].indexOf('\"')<0?o+=\" \"+t+'=\"'+e[t]+'\"':o+=\" \"+t+\"='\"+e[t]+\"'\";return o}function d(e,t){var n,r=document.implementation.createHTMLDocument(\"Froala DOC\").createElement(\"DIV\");w(r).append(e);var o=\"\";if(r){var i=f.node.contents(r);for(n=0;n<i.length;n++)t(i[n]);for(i=f.node.contents(r),n=0;n<i.length;n++)o+=s(i[n])}return o}function c(e,t,n){a=[];var r=e=e.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,function(e){return a.push(e),\"[FROALA.EDITOR.SCRIPT \"+(a.length-1)+\"]\"}).replace(/<noscript\\b[^<]*(?:(?!<\\/noscript>)<[^<]*)*<\\/noscript>/gi,function(e){return a.push(e),\"[FROALA.EDITOR.NOSCRIPT \"+(a.length-1)+\"]\"}).replace(/<meta((?:[\\w\\W]*?)) http-equiv=\"/g,'<meta$1 data-fr-http-equiv=\"').replace(/<img((?:[\\w\\W]*?)) src=\"/g,'<img$1 data-fr-src=\"'),o=null;f.opts.fullPage&&(r=f.html.extractNode(e,\"body\")||(0<=e.indexOf(\"<body\")?\"\":e),n&&(o=f.html.extractNode(e,\"head\")||\"\")),r=d(r,t),o&&(o=d(o,t));var i=function(e,t,n){if(f.opts.fullPage){var r=f.html.extractDoctype(n),o=l(f.html.extractNodeAttrs(n,\"html\"));return t=null==t?f.html.extractNode(n,\"head\")||\"<title></title>\":t,r+\"<html\"+o+\"><head\"+l(f.html.extractNodeAttrs(n,\"head\"))+\">\"+t+\"</head><body\"+l(f.html.extractNodeAttrs(n,\"body\"))+\">\"+e+\"</body></html>\"}return e}(r,o,e);return i.replace(/\\[FROALA\\.EDITOR\\.SCRIPT ([\\d]*)\\]/gi,function(e,t){return 0<=f.opts.htmlRemoveTags.indexOf(\"script\")?\"\":a[parseInt(t,10)]}).replace(/\\[FROALA\\.EDITOR\\.NOSCRIPT ([\\d]*)\\]/gi,function(e,t){return 0<=f.opts.htmlRemoveTags.indexOf(\"noscript\")?\"\":a[parseInt(t,10)].replace(/\\&lt;/g,\"<\").replace(/\\&gt;/g,\">\")}).replace(/<img((?:[\\w\\W]*?)) data-fr-src=\"/g,'<img$1 src=\"')}function E(e){var t=f.doc.createElement(\"DIV\");return t.innerText=e,t.textContent}function v(e){for(var t=f.node.contents(e),n=0;n<t.length;n++)t[n].nodeType!=Node.TEXT_NODE&&v(t[n]);!function(e){if(\"SPAN\"==e.tagName&&0<=(e.getAttribute(\"class\")||\"\").indexOf(\"fr-marker\"))return;var t,n;if(\"PRE\"==e.tagName&&0<=(n=(t=e).innerHTML).indexOf(\"\\n\")&&(t.innerHTML=n.replace(/\\n/g,\"<br>\")),e.nodeType==Node.ELEMENT_NODE&&(e.getAttribute(\"data-fr-src\")&&0!==e.getAttribute(\"data-fr-src\").indexOf(\"blob:\")&&e.setAttribute(\"data-fr-src\",f.helpers.sanitizeURL(E(e.getAttribute(\"data-fr-src\")))),e.getAttribute(\"href\")&&e.setAttribute(\"href\",f.helpers.sanitizeURL(E(e.getAttribute(\"href\")))),e.getAttribute(\"src\")&&e.setAttribute(\"src\",f.helpers.sanitizeURL(E(e.getAttribute(\"src\")))),e.getAttribute(\"data\")&&e.setAttribute(\"data\",f.helpers.sanitizeURL(E(e.getAttribute(\"data\")))),0<=[\"TABLE\",\"TBODY\",\"TFOOT\",\"TR\"].indexOf(e.tagName)&&(e.innerHTML=e.innerHTML.trim())),!f.opts.pasteAllowLocalImages&&e.nodeType==Node.ELEMENT_NODE&&\"IMG\"==e.tagName&&e.getAttribute(\"data-fr-src\")&&0===e.getAttribute(\"data-fr-src\").indexOf(\"file://\"))return e.parentNode.removeChild(e);if(e.nodeType==Node.ELEMENT_NODE&&w.FE.HTML5Map[e.tagName]&&\"\"===f.node.attributes(e)){var r=w.FE.HTML5Map[e.tagName],o=\"<\"+r+\">\"+e.innerHTML+\"</\"+r+\">\";e.insertAdjacentHTML(\"beforebegin\",o),(e=e.previousSibling).parentNode.removeChild(e.nextSibling)}if(f.opts.htmlAllowComments||e.nodeType!=Node.COMMENT_NODE)if(e.tagName&&e.tagName.match(u))e.parentNode.removeChild(e);else if(e.tagName&&!e.tagName.match(p)){if(\"svg\"===e.tagName)e.parentNode.removeChild(e);else if(!f.browser.safari||\"path\"!=e.tagName||!e.parentNode||\"svg\"!=e.parentNode.tagName)try{e.outerHTML=e.innerHTML}catch(c){}}else{var i=e.attributes;if(i)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.nodeName.match(g),d=null;\"style\"==s.nodeName&&f.opts.htmlAllowedStyleProps.length&&(d=s.value.match(h)),l&&d?s.value=m(d.join(\";\")):l&&(\"style\"!=s.nodeName||d)||e.removeAttribute(s.nodeName)}}else 0!==e.data.indexOf(\"[FROALA.EDITOR\")&&e.parentNode.removeChild(e)}(e)}return{_init:function(){f.opts.fullPage&&w.merge(f.opts.htmlAllowedTags,[\"head\",\"title\",\"style\",\"link\",\"base\",\"body\",\"html\",\"meta\"])},html:function(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=!1);var o,i=w.merge([],f.opts.htmlAllowedTags);for(o=0;o<t.length;o++)0<=i.indexOf(t[o])&&i.splice(i.indexOf(t[o]),1);var a=w.merge([],f.opts.htmlAllowedAttrs);for(o=0;o<n.length;o++)0<=a.indexOf(n[o])&&a.splice(a.indexOf(n[o]),1);return a.push(\"data-fr-.*\"),a.push(\"fr-.*\"),p=new RegExp(\"^\"+i.join(\"$|^\")+\"$\",\"gi\"),g=new RegExp(\"^\"+a.join(\"$|^\")+\"$\",\"gi\"),u=new RegExp(\"^\"+f.opts.htmlRemoveTags.join(\"$|^\")+\"$\",\"gi\"),h=f.opts.htmlAllowedStyleProps.length?new RegExp(\"((^|;|\\\\s)\"+f.opts.htmlAllowedStyleProps.join(\":.+?(?=;|$))|((^|;|\\\\s)\")+\":.+?(?=(;)|$))\",\"gi\"):null,e=c(e,v,!0)},toHTML5:function(){var e=f.el.querySelectorAll(Object.keys(w.FE.HTML5Map).join(\",\"));if(e.length){var t=!1;f.el.querySelector(\".fr-marker\")||(f.selection.save(),t=!0);for(var n=0;n<e.length;n++)\"\"===f.node.attributes(e[n])&&w(e[n]).replaceWith(\"<\"+w.FE.HTML5Map[e[n].tagName]+\">\"+e[n].innerHTML+\"</\"+w.FE.HTML5Map[e[n].tagName]+\">\");t&&f.selection.restore()}},tables:function(){!function(){for(var e=f.el.querySelectorAll(\"tr\"),t=0;t<e.length;t++){for(var n=e[t].children,r=!0,o=0;o<n.length;o++)if(\"TH\"!=n[o].tagName){r=!1;break}if(!1!==r&&0!==n.length){for(var i=e[t];i&&\"TABLE\"!=i.tagName&&\"THEAD\"!=i.tagName;)i=i.parentNode;var a=i;\"THEAD\"!=a.tagName&&(a=f.doc.createElement(\"THEAD\"),i.insertBefore(a,i.firstChild)),a.appendChild(e[t])}}}()},lists:function(){!function(){var e,t=[];do{if(t.length){var n=t[0],r=f.doc.createElement(\"ul\");n.parentNode.insertBefore(r,n);do{var o=n;n=n.nextSibling,r.appendChild(o)}while(n&&\"LI\"==n.tagName)}t=[];for(var i=f.el.querySelectorAll(\"li\"),a=0;a<i.length;a++)e=i[a],f.node.isList(e.parentNode)||t.push(i[a])}while(0<t.length)}(),function(){for(var e=f.el.querySelectorAll(\"ol + ol, ul + ul\"),t=0;t<e.length;t++){var n=e[t];if(f.node.isList(n.previousSibling)&&f.node.openTagString(n)==f.node.openTagString(n.previousSibling)){for(var r=f.node.contents(n),o=0;o<r.length;o++)n.previousSibling.appendChild(r[o]);n.parentNode.removeChild(n)}}}(),function(){for(var e=f.el.querySelectorAll(\"ul, ol\"),t=0;t<e.length;t++)for(var n=f.node.contents(e[t]),r=null,o=n.length-1;0<=o;o--)\"LI\"!=n[o].tagName&&\"UL\"!=n[o].tagName&&\"OL\"!=n[o].tagName?(r||(r=w(\"<li>\")).insertBefore(n[o]),r.prepend(n[o])):r=null}(),function(){var e,t,n;do{t=!1;var r=f.el.querySelectorAll(\"li:empty\");for(e=0;e<r.length;e++)r[e].parentNode.removeChild(r[e]);var o=f.el.querySelectorAll(\"ul, ol\");for(e=0;e<o.length;e++)(n=o[e]).querySelector(\"LI\")||(t=!0,n.parentNode.removeChild(n))}while(!0===t)}(),function(){for(var e=f.el.querySelectorAll(\"ul > ul, ol > ol, ul > ol, ol > ul\"),t=0;t<e.length;t++){var n=e[t],r=n.previousSibling;r&&(\"LI\"==r.tagName?r.appendChild(n):w(n).wrap(\"<li></li>\"))}}(),function(){for(var e=f.el.querySelectorAll(\"li > ul, li > ol\"),t=0;t<e.length;t++){var n=e[t];if(n.nextSibling){var r=n.nextSibling,o=w(\"<li>\");w(n.parentNode).after(o);do{var i=r;r=r.nextSibling,o.append(i)}while(r)}}}(),function(){for(var e=f.el.querySelectorAll(\"li > ul, li > ol\"),t=0;t<e.length;t++){var n=e[t];if(f.node.isFirstSibling(n))w(n).before(\"<br/>\");else if(n.previousSibling&&\"BR\"==n.previousSibling.tagName){for(var r=n.previousSibling.previousSibling;r&&f.node.hasClass(r,\"fr-marker\");)r=r.previousSibling;r&&\"BR\"!=r.tagName&&w(n.previousSibling).remove()}}}(),function(){for(var e=f.el.querySelectorAll(\"li:empty\"),t=0;t<e.length;t++)w(e[t]).remove()}()},invisibleSpaces:function(e){return e.replace(/\\u200b/g,\"\").length==e.length?e:f.clean.exec(e,o)},exec:c}},w.FE.MODULES.spaces=function(l){function r(e,t){var n=e.previousSibling,r=e.nextSibling,o=e.textContent,i=e.parentNode;if(!l.html.isPreformatted(i)){t&&(o=o.replace(/[\\f\\n\\r\\t\\v ]{2,}/g,\" \"),r&&\"BR\"!==r.tagName&&!l.node.isBlock(r)||!(l.node.isBlock(i)||l.node.isLink(i)&&!i.nextSibling||l.node.isElement(i))||(o=o.replace(/[\\f\\n\\r\\t\\v ]{1,}$/g,\"\")),n&&\"BR\"!==n.tagName&&!l.node.isBlock(n)||!(l.node.isBlock(i)||l.node.isLink(i)&&!i.previousSibling||l.node.isElement(i))||(o=o.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g,\"\")),(l.node.isBlock(r)||l.node.isBlock(n))&&(o=o.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g,\"\")),\" \"===o&&(n&&l.node.isVoid(n)||r&&l.node.isVoid(r))&&!(n&&r&&l.node.isVoid(n)||r&&n&&l.node.isVoid(r))&&(o=\"\")),(!n&&l.node.isBlock(r)||!r&&l.node.isBlock(n))&&l.node.isBlock(i)&&i!==l.el&&(o=o.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g,\"\")),t||(o=o.replace(new RegExp(w.FE.UNICODE_NBSP,\"g\"),\" \"));for(var a=\"\",s=0;s<o.length;s++)32!=o.charCodeAt(s)||0!==s&&32!=a.charCodeAt(s-1)||n&&r&&l.node.isVoid(n)||n&&r&&l.node.isVoid(r)?a+=o[s]:a+=w.FE.UNICODE_NBSP;(!r||r&&l.node.isBlock(r)||r&&r.nodeType==Node.ELEMENT_NODE&&l.win.getComputedStyle(r)&&\"block\"==l.win.getComputedStyle(r).display)&&(l.node.isVoid(n)||(a=a.replace(/ $/,w.FE.UNICODE_NBSP))),!n||l.node.isVoid(n)||l.node.isBlock(n)||1!==(a=a.replace(/^\\u00A0([^ $])/,\" $1\")).length||160!==a.charCodeAt(0)||!r||l.node.isVoid(r)||l.node.isBlock(r)||l.node.hasClass(n,\"fr-marker\")&&l.node.hasClass(r,\"fr-marker\")||(a=\" \"),t||(a=a.replace(/([^ \\u00A0])\\u00A0([^ \\u00A0])/g,\"$1 $2\")),e.textContent!=a&&(e.textContent=a)}}function d(e,t){if(void 0!==e&&e||(e=l.el),void 0===t&&(t=!1),!e.getAttribute||\"false\"!=e.getAttribute(\"contenteditable\"))if(e.nodeType==Node.TEXT_NODE)r(e,t);else if(e.nodeType==Node.ELEMENT_NODE)for(var n=l.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,l.node.filter(function(e){for(var t=e.parentNode;t&&t!==l.el;){if(\"STYLE\"==t.tagName||\"IFRAME\"==t.tagName)return!1;if(\"PRE\"===t.tagName)return!1;t=t.parentNode}return null!=e.textContent.match(/([ \\u00A0\\f\\n\\r\\t\\v]{2,})|(^[ \\u00A0\\f\\n\\r\\t\\v]{1,})|([ \\u00A0\\f\\n\\r\\t\\v]{1,}$)/g)&&!l.node.hasClass(e.parentNode,\"fr-marker\")}),!1);n.nextNode();)r(n.currentNode,t)}return{normalize:d,normalizeAroundCursor:function(){for(var e=[],t=l.el.querySelectorAll(\".fr-marker\"),n=0;n<t.length;n++){for(var r=null,o=l.node.blockParent(t[n]),i=(r=o||t[n]).nextSibling,a=r.previousSibling;i&&\"BR\"==i.tagName;)i=i.nextSibling;for(;a&&\"BR\"==a.tagName;)a=a.previousSibling;r&&e.indexOf(r)<0&&e.push(r),a&&e.indexOf(a)<0&&e.push(a),i&&e.indexOf(i)<0&&e.push(i)}for(var s=0;s<e.length;s++)d(e[s])}}},w.FE.UNICODE_NBSP=String.fromCharCode(160),w.FE.VOID_ELEMENTS=[\"area\",\"base\",\"br\",\"col\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"menuitem\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"],w.FE.BLOCK_TAGS=[\"address\",\"article\",\"aside\",\"audio\",\"blockquote\",\"canvas\",\"details\",\"dd\",\"div\",\"dl\",\"dt\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"hgroup\",\"hr\",\"li\",\"main\",\"nav\",\"noscript\",\"ol\",\"output\",\"p\",\"pre\",\"section\",\"table\",\"tbody\",\"td\",\"tfoot\",\"th\",\"thead\",\"tr\",\"ul\",\"video\"],w.extend(w.FE.DEFAULTS,{htmlAllowedEmptyTags:[\"textarea\",\"a\",\"iframe\",\"object\",\"video\",\"style\",\"script\",\".fa\",\".fr-emoticon\",\".fr-inner\",\"path\",\"line\"],htmlDoNotWrapTags:[\"script\",\"style\"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),w.FE.MODULES.html=function(F){function c(){return F.opts.enter==w.FE.ENTER_P?\"p\":F.opts.enter==w.FE.ENTER_DIV?\"div\":F.opts.enter==w.FE.ENTER_BR?null:void 0}function s(e,t){return!(!e||e===F.el)&&(t?-1!=[\"PRE\",\"SCRIPT\",\"STYLE\"].indexOf(e.tagName)||s(e.parentNode,t):-1!=[\"PRE\",\"SCRIPT\",\"STYLE\"].indexOf(e.tagName))}function i(e){var t,n=[],r=[];if(e){var o=F.el.querySelectorAll(\".fr-marker\");for(t=0;t<o.length;t++){var i=F.node.blockParent(o[t])||o[t];if(i){var a=i.nextSibling,s=i.previousSibling;i&&r.indexOf(i)<0&&F.node.isBlock(i)&&r.push(i),s&&F.node.isBlock(s)&&r.indexOf(s)<0&&r.push(s),a&&F.node.isBlock(a)&&r.indexOf(a)<0&&r.push(a)}}}else r=F.el.querySelectorAll(p());var l=p();for(l+=\",\"+w.FE.VOID_ELEMENTS.join(\",\"),l+=\", .fr-inner\",l+=\",\"+F.opts.htmlAllowedEmptyTags.join(\":not(.fr-marker),\")+\":not(.fr-marker)\",t=r.length-1;0<=t;t--)if(!(r[t].textContent&&0<r[t].textContent.replace(/\\u200B|\\n/g,\"\").length||0<r[t].querySelectorAll(l).length)){for(var d=F.node.contents(r[t]),c=!1,f=0;f<d.length;f++)if(d[f].nodeType!=Node.COMMENT_NODE&&d[f].textContent&&0<d[f].textContent.replace(/\\u200B|\\n/g,\"\").length){c=!0;break}c||n.push(r[t])}return n}function p(){return w.FE.BLOCK_TAGS.join(\", \")}function e(e){var t,n,r=w.merge([],w.FE.VOID_ELEMENTS);r=w.merge(r,F.opts.htmlAllowedEmptyTags),r=void 0===e?w.merge(r,w.FE.BLOCK_TAGS):w.merge(r,w.FE.NO_DELETE_TAGS),t=F.el.querySelectorAll(\"*:empty:not(\"+r.join(\"):not(\")+\"):not(.fr-marker)\");do{n=!1;for(var o=0;o<t.length;o++)0!==t[o].attributes.length&&void 0===t[o].getAttribute(\"href\")||(t[o].parentNode.removeChild(t[o]),n=!0);t=F.el.querySelectorAll(\"*:empty:not(\"+r.join(\"):not(\")+\"):not(.fr-marker)\")}while(t.length&&n)}function a(e,t){var n=c();if(t&&(n=\"div\"),n){for(var r=F.doc.createDocumentFragment(),o=null,i=!1,a=e.firstChild,s=!1;a;){var l=a.nextSibling;if(a.nodeType==Node.ELEMENT_NODE&&(F.node.isBlock(a)||0<=F.opts.htmlDoNotWrapTags.indexOf(a.tagName.toLowerCase())&&!F.node.hasClass(a,\"fr-marker\")))o=null,r.appendChild(a.cloneNode(!0));else if(a.nodeType!=Node.ELEMENT_NODE&&a.nodeType!=Node.TEXT_NODE)o=null,r.appendChild(a.cloneNode(!0));else if(\"BR\"==a.tagName)null==o?(o=F.doc.createElement(n),s=!0,t&&(o.setAttribute(\"class\",\"fr-temp-div\"),o.setAttribute(\"data-empty\",!0)),o.appendChild(a.cloneNode(!0)),r.appendChild(o)):!1===i&&(o.appendChild(F.doc.createElement(\"br\")),t&&(o.setAttribute(\"class\",\"fr-temp-div\"),o.setAttribute(\"data-empty\",!0))),o=null;else{var d=a.textContent;a.nodeType!==Node.TEXT_NODE||0<d.replace(/\\n/g,\"\").replace(/(^ *)|( *$)/g,\"\").length||d.replace(/(^ *)|( *$)/g,\"\").length&&d.indexOf(\"\\n\")<0?(null==o&&(o=F.doc.createElement(n),s=!0,t&&o.setAttribute(\"class\",\"fr-temp-div\"),r.appendChild(o),i=!1),o.appendChild(a.cloneNode(!0)),i||F.node.hasClass(a,\"fr-marker\")||a.nodeType==Node.TEXT_NODE&&0===d.replace(/ /g,\"\").length||(i=!0)):s=!0}a=l}s&&(e.innerHTML=\"\",e.appendChild(r))}}function l(e,t){for(var n=e.length-1;0<=n;n--)a(e[n],t)}function t(e,t,n,r,o){if(!F.$wp)return!1;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1);var i=F.$wp.scrollTop();a(F.el,e),r&&l(F.el.querySelectorAll(\".fr-inner\"),e),t&&l(F.el.querySelectorAll(\"td, th\"),e),n&&l(F.el.querySelectorAll(\"blockquote\"),e),o&&l(F.el.querySelectorAll(\"li\"),e),i!=F.$wp.scrollTop()&&F.$wp.scrollTop(i)}function n(e){if(void 0===e&&(e=F.el),e&&0<=[\"SCRIPT\",\"STYLE\",\"PRE\"].indexOf(e.tagName))return!1;for(var t=F.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,F.node.filter(function(e){return null!=e.textContent.match(/([ \\n]{2,})|(^[ \\n]{1,})|([ \\n]{1,}$)/g)}),!1);t.nextNode();){var n=t.currentNode;if(!s(n.parentNode,!0)){var r=F.node.isBlock(n.parentNode)||F.node.isElement(n.parentNode),o=n.textContent.replace(/(?!^)( ){2,}(?!$)/g,\" \").replace(/\\n/g,\" \").replace(/^[ ]{2,}/g,\" \").replace(/[ ]{2,}$/g,\" \");if(r){var i=n.previousSibling,a=n.nextSibling;i&&a&&\" \"==o?o=F.node.isBlock(i)&&F.node.isBlock(a)?\"\":\" \":(i||(o=o.replace(/^ */,\"\")),a||(o=o.replace(/ *$/,\"\")))}n.textContent=o}}}function r(e,t,n){var r=new RegExp(t,\"gi\").exec(e);return r?r[n]:null}function k(e){var t=e.doctype,n=\"<!DOCTYPE html>\";return t&&(n=\"<!DOCTYPE \"+t.name+(t.publicId?' PUBLIC \"'+t.publicId+'\"':\"\")+(!t.publicId&&t.systemId?\" SYSTEM\":\"\")+(t.systemId?' \"'+t.systemId+'\"':\"\")+\">\"),n}function d(e){var t=e.parentNode;if(t&&(F.node.isBlock(t)||F.node.isElement(t))&&[\"TD\",\"TH\"].indexOf(t.tagName)<0){for(var n=e.previousSibling,r=e.nextSibling;n&&(n.nodeType==Node.TEXT_NODE&&0===n.textContent.replace(/\\n|\\r/g,\"\").length||F.node.hasClass(n,\"fr-tmp\"));)n=n.previousSibling;if(r)return!1;n&&t&&\"BR\"!=n.tagName&&!F.node.isBlock(n)&&!r&&0<t.textContent.replace(/\\u200B/g,\"\").length&&0<n.textContent.length&&!F.node.hasClass(n,\"fr-marker\")&&(F.el==t&&!r&&F.opts.enter==w.FE.ENTER_BR&&F.browser.msie||e.parentNode.removeChild(e))}else!t||F.node.isBlock(t)||F.node.isElement(t)||e.previousSibling||e.nextSibling||!F.node.isDeletable(e.parentNode)||d(e.parentNode)}function u(){F.opts.htmlUntouched||(e(),t(),n(),F.spaces.normalize(null,!0),F.html.fillEmptyBlocks(),F.clean.lists(),F.clean.tables(),F.clean.toHTML5(),F.html.cleanBRs()),F.selection.restore(),o(),F.placeholder.refresh()}function o(){F.node.isEmpty(F.el)&&(null!=c()?F.el.querySelector(p())||F.el.querySelector(F.opts.htmlDoNotWrapTags.join(\":not(.fr-marker),\")+\":not(.fr-marker)\")||(F.core.hasFocus()?(F.$el.html(\"<\"+c()+\">\"+w.FE.MARKERS+\"<br/></\"+c()+\">\"),F.selection.restore()):F.$el.html(\"<\"+c()+\"><br/></\"+c()+\">\")):F.el.querySelector(\"*:not(.fr-marker):not(br)\")||(F.core.hasFocus()?(F.$el.html(w.FE.MARKERS+\"<br/>\"),F.selection.restore()):F.$el.html(\"<br/>\")))}function g(e,t){return r(e,\"<\"+t+\"[^>]*?>([\\\\w\\\\W]*)</\"+t+\">\",1)}function h(e,t){var n=w(\"<div \"+(r(e,\"<\"+t+\"([^>]*?)>\",1)||\"\")+\">\");return F.node.rawAttributes(n.get(0))}function m(e){return(r(e,\"<!DOCTYPE([^>]*?)>\",0)||\"<!DOCTYPE html>\").replace(/\\n/g,\" \").replace(/ {2,}/g,\" \")}function E(e,t){F.opts.htmlExecuteScripts?e.html(t):e.get(0).innerHTML=t}function D(e){var t;(t=/:not\\(([^\\)]*)\\)/g).test(e)&&(e=e.replace(t,\"     $1 \"));var n=100*(e.match(/(#[^\\s\\+>~\\.\\[:]+)/g)||[]).length+10*(e.match(/(\\[[^\\]]+\\])/g)||[]).length+10*(e.match(/(\\.[^\\s\\+>~\\.\\[:]+)/g)||[]).length+10*(e.match(/(:[\\w-]+\\([^\\)]*\\))/gi)||[]).length+10*(e.match(/(:[^\\s\\+>~\\.\\[:]+)/g)||[]).length+(e.match(/(::[^\\s\\+>~\\.\\[:]+|:first-line|:first-letter|:before|:after)/gi)||[]).length;return n+=((e=(e=e.replace(/[\\*\\s\\+>~]/g,\" \")).replace(/[#\\.]/g,\" \")).match(/([^\\s\\+>~\\.\\[:]+)/g)||[]).length}function M(e){if(F.events.trigger(\"html.processGet\",[e]),e&&e.getAttribute&&\"\"===e.getAttribute(\"class\")&&e.removeAttribute(\"class\"),e&&e.getAttribute&&\"\"===e.getAttribute(\"style\")&&e.removeAttribute(\"style\"),e&&e.nodeType==Node.ELEMENT_NODE){var t,n=e.querySelectorAll('[class=\"\"],[style=\"\"]');for(t=0;t<n.length;t++){var r=n[t];\"\"===r.getAttribute(\"class\")&&r.removeAttribute(\"class\"),\"\"===r.getAttribute(\"style\")&&r.removeAttribute(\"style\")}if(\"BR\"===e.tagName)d(e);else{var o=e.querySelectorAll(\"br\");for(t=0;t<o.length;t++)d(o[t])}}}function _(e,t){return e[3]-t[3]}function f(e){var t=F.doc.createElement(\"div\");return t.innerHTML=e,null!==t.querySelector(p())}function v(e){var t=null;if(void 0===e&&(t=F.selection.element()),F.opts.keepFormatOnDelete)return!1;var n,r,o=t?(t.textContent.match(/\\u200B/g)||[]).length-t.querySelectorAll(\".fr-marker\").length:0;if((F.el.textContent.match(/\\u200B/g)||[]).length-F.el.querySelectorAll(\".fr-marker\").length==o)return!1;do{r=!1,n=F.el.querySelectorAll(\"*:not(.fr-marker)\");for(var i=0;i<n.length;i++){var a=n[i];if(t!=a){var s=a.textContent;0===a.children.length&&1===s.length&&8203==s.charCodeAt(0)&&\"TD\"!==a.tagName&&(w(a).remove(),r=!0)}}}while(r)}return{defaultTag:c,isPreformatted:s,emptyBlocks:i,emptyBlockTagsQuery:function(){return w.FE.BLOCK_TAGS.join(\":empty, \")+\":empty\"},blockTagsQuery:p,fillEmptyBlocks:function(e){var t=i(e);F.node.isEmpty(F.el)&&F.opts.enter===w.FE.ENTER_BR&&t.push(F.el);for(var n=0;n<t.length;n++){var r=t[n];\"false\"===r.getAttribute(\"contenteditable\")||r.querySelector(F.opts.htmlAllowedEmptyTags.join(\":not(.fr-marker),\")+\":not(.fr-marker)\")||F.node.isVoid(r)||\"TABLE\"!=r.tagName&&\"TBODY\"!=r.tagName&&\"TR\"!=r.tagName&&\"UL\"!=r.tagName&&\"OL\"!=r.tagName&&r.appendChild(F.doc.createElement(\"br\"))}if(F.browser.msie&&F.opts.enter==w.FE.ENTER_BR){var o=F.node.contents(F.el);o.length&&o[o.length-1].nodeType==Node.TEXT_NODE&&F.$el.append(\"<br>\")}},cleanEmptyTags:e,cleanWhiteTags:v,cleanBlankSpaces:n,blocks:function(){return F.$el.get(0).querySelectorAll(p())},getDoctype:k,set:function(e){var t,n,r,o=F.clean.html((e||\"\").trim(),[],[],F.opts.fullPage);if(F.opts.fullPage){var i=g(o,\"body\")||(0<=o.indexOf(\"<body\")?\"\":o),a=h(o,\"body\"),s=g(o,\"head\")||\"<title></title>\",l=h(o,\"head\"),d=w(\"<div>\").append(s).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||0<=[\"BASE\",\"LINK\",\"META\",\"NOSCRIPT\",\"SCRIPT\",\"STYLE\",\"TEMPLATE\",\"TITLE\"].indexOf(this.tagName))&&this.parentNode.removeChild(this)}).end().html().trim();s=w(\"<div>\").append(s).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?\"\\x3c!--\"+this.nodeValue+\"--\\x3e\":0<=[\"BASE\",\"LINK\",\"META\",\"NOSCRIPT\",\"SCRIPT\",\"STYLE\",\"TEMPLATE\",\"TITLE\"].indexOf(this.tagName)?this.outerHTML:\"\"}).toArray().join(\"\");var c=m(o),f=h(o,\"html\");E(F.$el,d+\"\\n\"+i),F.node.clearAttributes(F.el),F.$el.attr(a),F.$el.addClass(\"fr-view\"),F.$el.attr(\"spellcheck\",F.opts.spellcheck),F.$el.attr(\"dir\",F.opts.direction),E(F.$head,s),F.node.clearAttributes(F.$head.get(0)),F.$head.attr(l),F.node.clearAttributes(F.$html.get(0)),F.$html.attr(f),F.iframe_document.doctype.parentNode.replaceChild((t=c,n=F.iframe_document,(r=t.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?\"?([^\"]*)\"? ?\"?([^\"]*)\"?>/i))?n.implementation.createDocumentType(r[1],r[3],r[4]):n.implementation.createDocumentType(\"html\")),F.iframe_document.doctype)}else E(F.$el,o);var p=F.edit.isDisabled();F.edit.on(),F.core.injectStyle(F.opts.iframeDefaultStyle+F.opts.iframeStyle),u(),F.opts.useClasses||(F.$el.find(\"[fr-original-class]\").each(function(){this.setAttribute(\"class\",this.getAttribute(\"fr-original-class\")),this.removeAttribute(\"fr-original-class\")}),F.$el.find(\"[fr-original-style]\").each(function(){this.setAttribute(\"style\",this.getAttribute(\"fr-original-style\")),this.removeAttribute(\"fr-original-style\")})),p&&F.edit.off(),F.events.trigger(\"html.set\")},get:function(e,t){if(!F.$wp)return F.$oel.clone().removeClass(\"fr-view\").removeAttr(\"contenteditable\").get(0).outerHTML;var n=\"\";F.events.trigger(\"html.beforeGet\");var r,o,i=[],a={},s=[],l=F.el.querySelectorAll(\"input, textarea\");for(r=0;r<l.length;r++)l[r].setAttribute(\"value\",l[r].value);if(!F.opts.useClasses&&!t){var d=new RegExp(\"^\"+F.opts.htmlIgnoreCSSProperties.join(\"$|^\")+\"$\",\"gi\");for(r=0;r<F.doc.styleSheets.length;r++){var c,f=0;try{c=F.doc.styleSheets[r].cssRules,F.doc.styleSheets[r].ownerNode&&\"STYLE\"==F.doc.styleSheets[r].ownerNode.nodeType&&(f=1)}catch(w){}if(c)for(var p=0,u=c.length;p<u;p++)if(c[p].selectorText&&0<c[p].style.cssText.length){var g,h=c[p].selectorText.replace(/body |\\.fr-view /g,\"\").replace(/::/g,\":\");try{g=F.el.querySelectorAll(h)}catch(w){g=[]}for(o=0;o<g.length;o++){!g[o].getAttribute(\"fr-original-style\")&&g[o].getAttribute(\"style\")?(g[o].setAttribute(\"fr-original-style\",g[o].getAttribute(\"style\")),i.push(g[o])):g[o].getAttribute(\"fr-original-style\")||(g[o].setAttribute(\"fr-original-style\",\"\"),i.push(g[o])),a[g[o]]||(a[g[o]]={});for(var m=1e3*f+D(c[p].selectorText),E=c[p].style.cssText.split(\";\"),v=0;v<E.length;v++){var b=E[v].trim().split(\":\")[0];if(b&&!b.match(d)&&(a[g[o]][b]||(a[g[o]][b]=0)<=(g[o].getAttribute(\"fr-original-style\")||\"\").indexOf(b+\":\")&&(a[g[o]][b]=1e4),m>=a[g[o]][b]&&(a[g[o]][b]=m,E[v].trim().length))){var S=E[v].trim().split(\":\");S.splice(0,1),s.push([g[o],b.trim(),S.join(\":\").trim(),m])}}}}}for(s.sort(_),r=0;r<s.length;r++){var T=s[r];T[0].style[T[1]]=T[2]}for(r=0;r<i.length;r++)if(i[r].getAttribute(\"class\")&&(i[r].setAttribute(\"fr-original-class\",i[r].getAttribute(\"class\")),i[r].removeAttribute(\"class\")),0<(i[r].getAttribute(\"fr-original-style\")||\"\").trim().length){var y=i[r].getAttribute(\"fr-original-style\").split(\";\");for(o=0;o<y.length;o++)if(0<y[o].indexOf(\":\")){var N=y[o].split(\":\"),C=N[0];N.splice(0,1),i[r].style[C.trim()]=N.join(\":\").trim()}}}if(F.node.isEmpty(F.el))F.opts.fullPage&&(n=k(F.iframe_document),n+=\"<html\"+F.node.attributes(F.$html.get(0))+\">\"+F.$html.find(\"head\").get(0).outerHTML+\"<body></body></html>\");else if(void 0===e&&(e=!1),F.opts.fullPage){n=k(F.iframe_document),F.$el.removeClass(\"fr-view\");var A=F.opts.heightMin,x=F.opts.height,$=F.opts.heightMax;F.opts.heightMin=null,F.opts.height=null,F.opts.heightMax=null,F.size.refresh(),n+=\"<html\"+F.node.attributes(F.$html.get(0))+\">\"+F.$html.html()+\"</html>\",F.opts.heightMin=A,F.opts.height=x,F.opts.heightMax=$,F.size.refresh(),F.$el.addClass(\"fr-view\")}else n=F.$el.html();if(!F.opts.useClasses&&!t)for(r=0;r<i.length;r++)i[r].getAttribute(\"fr-original-class\")&&(i[r].setAttribute(\"class\",i[r].getAttribute(\"fr-original-class\")),i[r].removeAttribute(\"fr-original-class\")),null!=i[r].getAttribute(\"fr-original-style\")&&void 0!==i[r].getAttribute(\"fr-original-style\")?(0!==i[r].getAttribute(\"fr-original-style\").length?i[r].setAttribute(\"style\",i[r].getAttribute(\"fr-original-style\")):i[r].removeAttribute(\"style\"),i[r].removeAttribute(\"fr-original-style\")):i[r].removeAttribute(\"style\");F.opts.fullPage&&(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/<style data-fr-style=\"true\">(?:[\\w\\W]*?)<\\/style>/g,\"\")).replace(/<link([^>]*)data-fr-style=\"true\"([^>]*)>/g,\"\")).replace(/<style(?:[\\w\\W]*?)class=\"firebugResetStyles\"(?:[\\w\\W]*?)>(?:[\\w\\W]*?)<\\/style>/g,\"\")).replace(/<body((?:[\\w\\W]*?)) spellcheck=\"true\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g,\"<body$1$2>$3</body>\")).replace(/<body((?:[\\w\\W]*?)) contenteditable=\"(true|false)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g,\"<body$1$3>$4</body>\")).replace(/<body((?:[\\w\\W]*?)) dir=\"([\\w]*)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g,\"<body$1$3>$4</body>\")).replace(/<body((?:[\\w\\W]*?))class=\"([\\w\\W]*?)(fr-rtl|fr-ltr)([\\w\\W]*?)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g,'<body$1class=\"$2$4\"$5>$6</body>')).replace(/<body((?:[\\w\\W]*?)) class=\"\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g,\"<body$1$2>$3</body>\")),F.opts.htmlSimpleAmpersand&&(n=n.replace(/\\&amp;/gi,\"&\")),F.events.trigger(\"html.afterGet\"),e||(n=n.replace(/<span[^>]*? class\\s*=\\s*[\"']?fr-marker[\"']?[^>]+>\\u200b<\\/span>/gi,\"\")),n=F.clean.invisibleSpaces(n),n=F.clean.exec(n,M);var O=F.events.chainTrigger(\"html.get\",n);return\"string\"==typeof O&&(n=O),n=(n=n.replace(/<pre(?:[\\w\\W]*?)>(?:[\\w\\W]*?)<\\/pre>/g,function(e){return e.replace(/<br>/g,\"\\n\")})).replace(/<meta((?:[\\w\\W]*?)) data-fr-http-equiv=\"/g,'<meta$1 http-equiv=\"')},getSelected:function(){var e,t,n=function(e,t){for(;t&&(t.nodeType==Node.TEXT_NODE||!F.node.isBlock(t))&&!F.node.isElement(t)&&!F.node.hasClass(t,\"fr-inner\");)t&&t.nodeType!=Node.TEXT_NODE&&w(e).wrapInner(F.node.openTagString(t)+F.node.closeTagString(t)),t=t.parentNode;t&&e.innerHTML==t.innerHTML&&(e.innerHTML=t.outerHTML)},r=\"\";if(\"undefined\"!=typeof F.win.getSelection){F.browser.mozilla&&(F.selection.save(),1<F.$el.find('.fr-marker[data-type=\"false\"]').length&&(F.$el.find('.fr-marker[data-type=\"false\"][data-id=\"0\"]').remove(),F.$el.find('.fr-marker[data-type=\"false\"]:last').attr(\"data-id\",\"0\"),F.$el.find(\".fr-marker\").not('[data-id=\"0\"]').remove()),F.selection.restore());for(var o=F.selection.ranges(),i=0;i<o.length;i++){var a=document.createElement(\"div\");a.appendChild(o[i].cloneContents()),n(a,(t=e=void 0,t=null,F.win.getSelection?(e=F.win.getSelection())&&e.rangeCount&&(t=e.getRangeAt(0).commonAncestorContainer).nodeType!=Node.ELEMENT_NODE&&(t=t.parentNode):(e=F.doc.selection)&&\"Control\"!=e.type&&(t=e.createRange().parentElement()),null!=t&&(0<=w.inArray(F.el,w(t).parents())||t==F.el)?t:null)),0<w(a).find(\".fr-element\").length&&(a=F.el),r+=a.innerHTML}}else\"undefined\"!=typeof F.doc.selection&&\"Text\"==F.doc.selection.type&&(r=F.doc.selection.createRange().htmlText);return r},insert:function(e,t,n){var r,o,i;if(F.selection.isCollapsed()||F.selection.remove(),r=t?e:F.clean.html(e),e.indexOf('class=\"fr-marker\"')<0&&(o=r,(i=F.doc.createElement(\"div\")).innerHTML=o,F.selection.setAtEnd(i,!0),r=i.innerHTML),F.node.isEmpty(F.el)&&!F.opts.keepFormatOnDelete&&f(r))F.el.innerHTML=r;else{var a=F.markers.insert();if(a){F.node.isLastSibling(a)&&w(a).parent().hasClass(\"fr-deletable\")&&w(a).insertAfter(w(a).parent());var s=F.node.blockParent(a);if((f(r)||n)&&(F.node.deepestParent(a)||s&&\"LI\"==s.tagName)){if(s&&\"LI\"==s.tagName&&(r=function(e){if(!F.html.defaultTag())return e;var t=F.doc.createElement(\"div\");t.innerHTML=e;for(var n=t.querySelectorAll(\":scope > \"+F.html.defaultTag()),r=n.length-1;0<=r;r--){var o=n[r];F.node.isBlock(o.previousSibling)||(o.previousSibling&&!F.node.isEmpty(o)&&w(\"<br>\").insertAfter(o.previousSibling),o.outerHTML=o.innerHTML)}return t.innerHTML}(r)),!(a=F.markers.split()))return!1;a.outerHTML=r}else a.outerHTML=r}else F.el.innerHTML=F.el.innerHTML+r}u(),F.keys.positionCaret(),F.events.trigger(\"html.inserted\")},wrap:t,unwrap:function(){F.$el.find(\"div.fr-temp-div\").each(function(){this.previousSibling&&this.previousSibling.nodeType===Node.TEXT_NODE&&w(this).before(\"<br>\"),w(this).attr(\"data-empty\")||!this.nextSibling||F.node.isBlock(this.nextSibling)&&!w(this.nextSibling).hasClass(\"fr-temp-div\")?w(this).replaceWith(w(this).html()):w(this).replaceWith(w(this).html()+\"<br>\")}),F.$el.find(\".fr-temp-div\").removeClass(\"fr-temp-div\").filter(function(){return\"\"===w(this).attr(\"class\")}).removeAttr(\"class\")},escapeEntities:function(e){return e.replace(/</gi,\"&lt;\").replace(/>/gi,\"&gt;\").replace(/\"/gi,\"&quot;\").replace(/'/gi,\"&#39;\")},checkIfEmpty:o,extractNode:g,extractNodeAttrs:h,extractDoctype:m,cleanBRs:function(){for(var e=F.el.getElementsByTagName(\"br\"),t=0;t<e.length;t++)d(e[t])},_init:function(){if(F.$wp){var e=function(){v(),F.placeholder&&setTimeout(F.placeholder.refresh,0)};F.events.on(\"mouseup\",e),F.events.on(\"keydown\",e),F.events.on(\"contentChanged\",o)}}}},w.extend(w.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),w.FE.MODULES.size=function(e){function t(){n(),e.opts.height&&e.$el.css(\"minHeight\",e.opts.height-e.helpers.getPX(e.$el.css(\"padding-top\"))-e.helpers.getPX(e.$el.css(\"padding-bottom\"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css(\"minHeight\",e.opts.heightMin):e.$el.css(\"minHeight\",\"\"),e.opts.heightMax?(e.$wp.css(\"maxHeight\",e.opts.heightMax),e.$wp.css(\"overflow\",\"auto\")):(e.$wp.css(\"maxHeight\",\"\"),e.$wp.css(\"overflow\",\"\")),e.opts.height?(e.$wp.height(e.opts.height),e.$wp.css(\"overflow\",\"auto\"),e.$el.css(\"minHeight\",e.opts.height-e.helpers.getPX(e.$el.css(\"padding-top\"))-e.helpers.getPX(e.$el.css(\"padding-bottom\")))):(e.$wp.css(\"height\",\"\"),e.opts.heightMin||e.$el.css(\"minHeight\",\"\"),e.opts.heightMax||e.$wp.css(\"overflow\",\"\")),e.opts.width&&e.$box.width(e.opts.width)}return{_init:function(){if(!e.$wp)return!1;n(),e.$iframe&&(e.events.on(\"keyup keydown\",function(){setTimeout(t,0)},!0),e.events.on(\"commands.after html.set init initialized paste.after\",t))},syncIframe:t,refresh:n}},w.extend(w.FE.DEFAULTS,{language:null}),w.FE.LANGUAGE={},w.FE.MODULES.language=function(e){var t;return{_init:function(){w.FE.LANGUAGE&&(t=w.FE.LANGUAGE[e.opts.language]),t&&t.direction&&(e.opts.direction=t.direction)},translate:function(e){return t&&t.translation[e]&&t.translation[e].length?t.translation[e]:e}}},w.extend(w.FE.DEFAULTS,{placeholderText:\"Type something\"}),w.FE.MODULES.placeholder=function(f){function e(){f.$placeholder||(f.$placeholder=w('<span class=\"fr-placeholder\"></span>'),f.$wp.append(f.$placeholder));var e=f.opts.iframe?f.$iframe.prev().outerHeight(!0):f.$el.prev().outerHeight(!0),t=0,n=0,r=0,o=0,i=0,a=0,s=f.node.contents(f.el),l=w(f.selection.element()).css(\"text-align\");if(s.length&&s[0].nodeType==Node.ELEMENT_NODE){var d=w(s[0]);(!f.opts.toolbarInline||0<f.$el.prev().length)&&f.ready&&(t=f.helpers.getPX(d.css(\"margin-top\")),o=f.helpers.getPX(d.css(\"padding-top\")),n=f.helpers.getPX(d.css(\"margin-left\")),r=f.helpers.getPX(d.css(\"margin-right\")),i=f.helpers.getPX(d.css(\"padding-left\")),a=f.helpers.getPX(d.css(\"padding-right\"))),f.$placeholder.css(\"font-size\",d.css(\"font-size\")),f.$placeholder.css(\"line-height\",d.css(\"line-height\"))}else f.$placeholder.css(\"font-size\",f.$el.css(\"font-size\")),f.$placeholder.css(\"line-height\",f.$el.css(\"line-height\"));if(f.$wp.addClass(\"show-placeholder\"),f.$placeholder.css({marginTop:Math.max(f.helpers.getPX(f.$el.css(\"margin-top\")),t)+(e||0),paddingTop:Math.max(f.helpers.getPX(f.$el.css(\"padding-top\")),o),paddingLeft:Math.max(f.helpers.getPX(f.$el.css(\"padding-left\")),i),marginLeft:Math.max(f.helpers.getPX(f.$el.css(\"margin-left\")),n),paddingRight:Math.max(f.helpers.getPX(f.$el.css(\"padding-right\")),a),marginRight:Math.max(f.helpers.getPX(f.$el.css(\"margin-right\")),r),textAlign:l}).text(f.language.translate(f.opts.placeholderText||f.$oel.attr(\"placeholder\")||\"\")),f.$placeholder.html(f.$placeholder.text().replace(/\\n/g,\"<br>\")),f.size.refresh(),f.$placeholder.outerHeight()>f.$el.height()){var c=f.opts.heightMin;f.opts.heightMin=f.$placeholder.outerHeight()+(f.$tb?f.$tb.height():0),f.size.refresh(),f.opts.heightMin=c}}function t(){f.$wp.removeClass(\"show-placeholder\"),f.size.refresh()}function n(){if(!f.$wp)return!1;f.core.isEmpty()?e():t()}return{_init:function(){if(!f.$wp)return!1;f.events.on(\"init input keydown keyup contentChanged initialized\",n)},show:e,hide:t,refresh:n,isVisible:function(){return!!f.$wp&&f.node.hasClass(f.$wp.get(0),\"show-placeholder\")}}},w.FE.MODULES.edit=function(t){function e(){if(t.browser.mozilla)try{t.doc.execCommand(\"enableObjectResizing\",!1,\"false\"),t.doc.execCommand(\"enableInlineTableEditing\",!1,\"false\")}catch(e){}if(t.browser.msie)try{t.doc.body.addEventListener(\"mscontrolselect\",function(e){return e.preventDefault(),!1})}catch(e){}}var n=!1;function r(){return n}return{_init:function(){t.events.on(\"focus\",function(){r()?t.edit.off():t.edit.on()})},on:function(){t.$wp?(t.$el.attr(\"contenteditable\",!0),t.$el.removeClass(\"fr-disabled\").attr(\"aria-disabled\",!1),t.$tb&&t.$tb.removeClass(\"fr-disabled\").removeAttr(\"aria-disabled\"),e()):t.$el.is(\"a\")&&t.$el.attr(\"contenteditable\",!0),n=!1},off:function(){t.events.disableBlur(),t.$wp?(t.$el.attr(\"contenteditable\",!1),t.$el.addClass(\"fr-disabled\").attr(\"aria-disabled\",!0),t.$tb&&t.$tb.addClass(\"fr-disabled\").attr(\"aria-disabled\",!0)):t.$el.is(\"a\")&&t.$el.attr(\"contenteditable\",!1),t.events.enableBlur(),n=!0},disableDesign:e,isDisabled:r}},w.extend(w.FE.DEFAULTS,{documentReady:!1,editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeDefaultStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:\"\";display:block;clear:both;}body::-moz-selection{background:#b5d6fd;color:#000;}body::selection{background:#b5d6fd;color:#000;}',iframeStyle:\"\",iframeStyleFiles:[],direction:\"auto\",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:\"body\",keepFormatOnDelete:!1,theme:null}),w.FE.MODULES.core=function(d){var c;function t(){if(d.$box.addClass(\"fr-box\"+(d.opts.editorClass?\" \"+d.opts.editorClass:\"\")),d.$box.attr(\"role\",\"application\"),d.$wp.addClass(\"fr-wrapper\"),d.opts.documentReady&&d.$box.addClass(\"fr-document\"),d.opts.iframe||d.$el.addClass(\"fr-element fr-view\"),d.opts.iframe){c=[],d.$iframe.addClass(\"fr-iframe\"),d.$el.addClass(\"fr-view\");for(var e=0;e<d.o_doc.styleSheets.length;e++){var t;try{t=d.o_doc.styleSheets[e].cssRules}catch(o){}if(t)for(var n=0,r=t.length;n<r;n++)!t[n].selectorText||0!==t[n].selectorText.indexOf(\".fr-view\")&&0!==t[n].selectorText.indexOf(\".fr-element\")||0<t[n].style.cssText.length&&(0===t[n].selectorText.indexOf(\".fr-view\")?c.push({selector:t[n].selectorText.replace(/\\.fr-view/g,\"body\"),style:t[n].style}):c.push({selector:t[n].selectorText.replace(/\\.fr-element/g,\"body\"),style:t[n].style}))}}\"auto\"!=d.opts.direction&&d.$box.removeClass(\"fr-ltr fr-rtl\").addClass(\"fr-\"+d.opts.direction),d.$el.attr(\"dir\",d.opts.direction),d.$wp.attr(\"dir\",d.opts.direction),1<d.opts.zIndex&&d.$box.css(\"z-index\",d.opts.zIndex),d.opts.theme&&d.$box.addClass(d.opts.theme+\"-theme\"),d.opts.tabIndex=d.opts.tabIndex||d.$oel.attr(\"tabIndex\"),d.opts.tabIndex&&d.$el.attr(\"tabIndex\",d.opts.tabIndex)}return{_init:function(){if(w.FE.INSTANCES.push(d),d.drag_support={filereader:\"undefined\"!=typeof FileReader,formdata:!!d.win.FormData,progress:\"upload\"in new XMLHttpRequest},d.$wp){t(),d.html.set(d._original_html),d.$el.attr(\"spellcheck\",d.opts.spellcheck),d.helpers.isMobile()&&(d.$el.attr(\"autocomplete\",d.opts.spellcheck?\"on\":\"off\"),d.$el.attr(\"autocorrect\",d.opts.spellcheck?\"on\":\"off\"),d.$el.attr(\"autocapitalize\",d.opts.spellcheck?\"on\":\"off\")),d.opts.disableRightClick&&d.events.$on(d.$el,\"contextmenu\",function(e){if(2==e.button)return!1});try{d.doc.execCommand(\"styleWithCSS\",!1,!1)}catch(e){}}\"TEXTAREA\"==d.$oel.get(0).tagName&&(d.events.on(\"contentChanged\",function(){d.$oel.val(d.html.get())}),d.events.on(\"form.submit\",function(){d.$oel.val(d.html.get())}),d.events.on(\"form.reset\",function(){d.html.set(d._original_html)}),d.$oel.val(d.html.get())),d.helpers.isIOS()&&d.events.$on(d.$doc,\"selectionchange\",function(){d.$doc.get(0).hasFocus()||d.$win.get(0).focus()}),d.events.trigger(\"init\"),d.opts.autofocus&&!d.opts.initOnClick&&d.$wp&&d.events.on(\"initialized\",function(){d.events.focus(!0)})},destroy:function(e){\"TEXTAREA\"==d.$oel.get(0).tagName&&d.$oel.val(e),d.$box&&d.$box.removeAttr(\"role\"),d.$wp&&(\"TEXTAREA\"==d.$oel.get(0).tagName?(d.$el.html(\"\"),d.$wp.html(\"\"),d.$box.replaceWith(d.$oel),d.$oel.show()):(d.$wp.replaceWith(e),d.$el.html(\"\"),d.$box.removeClass(\"fr-view fr-ltr fr-box \"+(d.opts.editorClass||\"\")),d.opts.theme&&d.$box.addClass(d.opts.theme+\"-theme\"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null},isEmpty:function(){return d.node.isEmpty(d.el)},getXHR:function(e,t){var n=new XMLHttpRequest;for(var r in n.open(t,e,!0),d.opts.requestWithCredentials&&(n.withCredentials=!0),d.opts.requestHeaders)d.opts.requestHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,d.opts.requestHeaders[r]);return n},injectStyle:function(e){if(d.opts.iframe){d.$head.find(\"style[data-fr-style], link[data-fr-style]\").remove();for(var t=w('<style data-fr-style=\"true\">'+e+\"</style>\").appendTo(d.$head)[0].sheet,n=0;n<c.length;n++)for(var r=t.insertRule(c[n].selector+\"{}\",t.cssRules.length),o=0;o<c[n].style.length;o++){var i=c[n].style[o],a=c[n].style[i];d.browser.safari&&\"content\"===i&&(a='\"'+a+'\"'),t.cssRules[r].style[i]=a}for(var s=0;s<d.opts.iframeStyleFiles.length;s++){var l=w('<link data-fr-style=\"true\" rel=\"stylesheet\" href=\"'+d.opts.iframeStyleFiles[s]+'\">');l.get(0).addEventListener(\"load\",d.size.syncIframe),d.$head.append(l)}}},hasFocus:function(){return d.browser.mozilla&&d.helpers.isMobile()?d.selection.inEditor():d.node.hasFocus(d.el)||0<d.$el.find(\"*:focus\").length},sameInstance:function(e){if(!e)return!1;var t=e.data(\"instance\");return!!t&&t.id==d.id}}},w.FE.MODULES.cursorLists=function(h){function m(e){for(var t=e;\"LI\"!=t.tagName;)t=t.parentNode;return t}function E(e){for(var t=e;!h.node.isList(t);)t=t.parentNode;return t}return{_startEnter:function(e){var t,n=m(e),r=n.nextSibling,o=n.previousSibling,i=h.html.defaultTag();if(h.node.isEmpty(n,!0)&&r){for(var a=\"\",s=\"\",l=e.parentNode;!h.node.isList(l)&&l.parentNode&&(\"LI\"!==l.parentNode.tagName||l.parentNode===n);)a=h.node.openTagString(l)+a,s+=h.node.closeTagString(l),l=l.parentNode;a=h.node.openTagString(l)+a,s+=h.node.closeTagString(l);var d=\"\";for(d=l.parentNode&&\"LI\"==l.parentNode.tagName?s+\"<li>\"+w.FE.MARKERS+\"<br>\"+a:i?s+\"<\"+i+\">\"+w.FE.MARKERS+\"<br></\"+i+\">\"+a:s+w.FE.MARKERS+\"<br>\"+a;[\"UL\",\"OL\"].indexOf(l.tagName)<0||l.parentNode&&\"LI\"===l.parentNode.tagName;)l=l.parentNode;w(n).replaceWith('<span id=\"fr-break\"></span>');var c=h.node.openTagString(l)+w(l).html()+h.node.closeTagString(l);c=c.replace(/<span id=\"fr-break\"><\\/span>/g,d),w(l).replaceWith(c),h.$el.find(\"li:empty\").remove()}else if(o&&r||!h.node.isEmpty(n,!0)){for(var f=\"<br>\",p=e.parentNode;p&&\"LI\"!=p.tagName;)f=h.node.openTagString(p)+f+h.node.closeTagString(p),p=p.parentNode;w(n).before(\"<li>\"+f+\"</li>\"),w(e).remove()}else if(o){t=E(n);for(var u=w.FE.MARKERS+\"<br>\",g=e.parentNode;g&&\"LI\"!=g.tagName;)u=h.node.openTagString(g)+u+h.node.closeTagString(g),g=g.parentNode;t.parentNode&&\"LI\"==t.parentNode.tagName?w(t.parentNode).after(\"<li>\"+u+\"</li>\"):i?w(t).after(\"<\"+i+\">\"+u+\"</\"+i+\">\"):w(t).after(u),w(n).remove()}else(t=E(n)).parentNode&&\"LI\"==t.parentNode.tagName?r?w(t.parentNode).before(h.node.openTagString(n)+w.FE.MARKERS+\"<br></li>\"):w(t.parentNode).after(h.node.openTagString(n)+w.FE.MARKERS+\"<br></li>\"):i?w(t).before(\"<\"+i+\">\"+w.FE.MARKERS+\"<br></\"+i+\">\"):w(t).before(w.FE.MARKERS+\"<br>\"),w(n).remove()},_middleEnter:function(e){for(var t=m(e),n=\"\",r=e,o=\"\",i=\"\";r!=t;){var a=\"A\"==(r=r.parentNode).tagName&&h.cursor.isAtEnd(e,r)?\"fr-to-remove\":\"\";o=h.node.openTagString(w(r).clone().addClass(a).get(0))+o,i=h.node.closeTagString(r)+i}n=i+n+o+w.FE.MARKERS+(h.opts.keepFormatOnDelete?w.FE.INVISIBLE_SPACE:\"\"),w(e).replaceWith('<span id=\"fr-break\"></span>');var s=h.node.openTagString(t)+w(t).html()+h.node.closeTagString(t);s=s.replace(/<span id=\"fr-break\"><\\/span>/g,n),w(t).replaceWith(s)},_endEnter:function(e){for(var t=m(e),n=w.FE.MARKERS,r=\"\",o=e,i=!1;o!=t;){var a=\"A\"==(o=o.parentNode).tagName&&h.cursor.isAtEnd(e,o)?\"fr-to-remove\":\"\";i||o==t||h.node.isBlock(o)||(i=!0,r+=w.FE.INVISIBLE_SPACE),r=h.node.openTagString(w(o).clone().addClass(a).get(0))+r,n+=h.node.closeTagString(o)}var s=r+n;w(e).remove(),w(t).after(s)},_backspace:function(e){var t=m(e),n=t.previousSibling;if(n){n=w(n).find(h.html.blockTagsQuery()).get(-1)||n,w(e).replaceWith(w.FE.MARKERS);var r=h.node.contents(n);r.length&&\"BR\"==r[r.length-1].tagName&&w(r[r.length-1]).remove(),w(t).find(h.html.blockTagsQuery()).not(\"ol, ul, table\").each(function(){this.parentNode==t&&w(this).replaceWith(w(this).html()+(h.node.isEmpty(this)?\"\":\"<br>\"))});for(var o,i=h.node.contents(t)[0];i&&!h.node.isList(i);)o=i.nextSibling,w(n).append(i),i=o;for(n=t.previousSibling;i;)o=i.nextSibling,w(n).append(i),i=o;1<(r=h.node.contents(n)).length&&\"BR\"===r[r.length-1].tagName&&w(r[r.length-1]).remove(),w(t).remove()}else{var a=E(t);if(w(e).replaceWith(w.FE.MARKERS),a.parentNode&&\"LI\"==a.parentNode.tagName){var s=a.previousSibling;h.node.isBlock(s)?(w(t).find(h.html.blockTagsQuery()).not(\"ol, ul, table\").each(function(){this.parentNode==t&&w(this).replaceWith(w(this).html()+(h.node.isEmpty(this)?\"\":\"<br>\"))}),w(s).append(w(t).html())):w(a).before(w(t).html())}else{var l=h.html.defaultTag();l&&0===w(t).find(h.html.blockTagsQuery()).length?w(a).before(\"<\"+l+\">\"+w(t).html()+\"</\"+l+\">\"):w(a).before(w(t).html())}w(t).remove(),h.html.wrap(),0===w(a).find(\"li\").length&&w(a).remove()}},_del:function(e){var t,n=m(e),r=n.nextSibling;if(r){(t=h.node.contents(r)).length&&\"BR\"==t[0].tagName&&w(t[0]).remove(),w(r).find(h.html.blockTagsQuery()).not(\"ol, ul, table\").each(function(){this.parentNode==r&&w(this).replaceWith(w(this).html()+(h.node.isEmpty(this)?\"\":\"<br>\"))});for(var o,i=e,a=h.node.contents(r)[0];a&&!h.node.isList(a);)o=a.nextSibling,w(i).after(a),i=a,a=o;for(;a;)o=a.nextSibling,w(n).append(a),a=o;w(e).replaceWith(w.FE.MARKERS),w(r).remove()}else{for(var s=n;!s.nextSibling&&s!=h.el;)s=s.parentNode;if(s==h.el)return!1;if(s=s.nextSibling,h.node.isBlock(s))w.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0&&(w(e).replaceWith(w.FE.MARKERS),(t=h.node.contents(n)).length&&\"BR\"==t[t.length-1].tagName&&w(t[t.length-1]).remove(),w(n).append(w(s).html()),w(s).remove());else for((t=h.node.contents(n)).length&&\"BR\"==t[t.length-1].tagName&&w(t[t.length-1]).remove(),w(e).replaceWith(w.FE.MARKERS);s&&!h.node.isBlock(s)&&\"BR\"!=s.tagName;)w(n).append(w(s)),s=s.nextSibling}}}},w.FE.NO_DELETE_TAGS=[\"TH\",\"TD\",\"TR\",\"TABLE\",\"FORM\"],w.FE.SIMPLE_ENTER_TAGS=[\"TH\",\"TD\",\"LI\",\"DL\",\"DT\",\"FORM\"],w.FE.MODULES.cursor=function(u){function i(e){return!!e&&(!!u.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\\u200b/g,\"\").length?i(e.nextSibling):!(e.nextSibling&&(!e.previousSibling||\"BR\"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&i(e.parentNode)))}function a(e){return!!e&&(!!u.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\\u200b/g,\"\").length?a(e.previousSibling):!e.previousSibling&&(!(e.previousSibling||!u.node.hasClass(e.parentNode,\"fr-inner\"))||a(e.parentNode))))}function g(e,t){return!!e&&(e!=u.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\\u200b/g,\"\").length?g(e.previousSibling,t):!e.previousSibling&&(e.parentNode==t||g(e.parentNode,t))))}function h(e,t){return!!e&&(e!=u.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\\u200b/g,\"\").length?h(e.nextSibling,t):!(e.nextSibling&&(!e.previousSibling||\"BR\"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&(e.parentNode==t||h(e.parentNode,t))))}function s(e){return 0<w(e).parentsUntil(u.$el,\"LI\").length&&0===w(e).parentsUntil(\"LI\",\"TABLE\").length}function d(e,t){var n=new RegExp((t?\"^\":\"\")+\"(([\\\\uD83C-\\\\uDBFF\\\\uDC00-\\\\uDFFF]+\\\\u200D)*[\\\\uD83C-\\\\uDBFF\\\\uDC00-\\\\uDFFF]{2})\"+(t?\"\":\"$\"),\"i\"),r=e.match(n);return r?r[0].length:1}function c(e){for(var t,n=e;!n.previousSibling;)if(n=n.parentNode,u.node.isElement(n))return!1;if(n=n.previousSibling,!u.node.isBlock(n)&&u.node.isEditable(n)){for(t=u.node.contents(n);n.nodeType!=Node.TEXT_NODE&&!u.node.isDeletable(n)&&t.length&&u.node.isEditable(n);)n=t[t.length-1],t=u.node.contents(n);if(n.nodeType==Node.TEXT_NODE){var r=n.textContent,o=r.length;if(r.length&&\"\\n\"===r[r.length-1])return n.textContent=r.substring(0,o-2),0===n.textContent.length&&n.parentNode.removeChild(n),c(e);if(u.opts.tabSpaces&&r.length>=u.opts.tabSpaces)0===r.substr(r.length-u.opts.tabSpaces,r.length-1).replace(/ /g,\"\").replace(new RegExp(w.FE.UNICODE_NBSP,\"g\"),\"\").length&&(o=r.length-u.opts.tabSpaces+1);n.textContent=r.substring(0,o-d(r)),u.opts.htmlUntouched&&!e.nextSibling&&n.textContent.length&&\" \"===n.textContent[n.textContent.length-1]&&(n.textContent=n.textContent.substring(0,n.textContent.length-1)+w.FE.UNICODE_NBSP);var i=r.length!=n.textContent.length;if(0===n.textContent.length)if(i&&u.opts.keepFormatOnDelete)w(n).after(w.FE.INVISIBLE_SPACE+w.FE.MARKERS);else if(0!==r.length&&u.node.isBlock(n.parentNode))w(n).after(w.FE.MARKERS);else if((2!=n.parentNode.childNodes.length||n.parentNode!=e.parentNode)&&1!=n.parentNode.childNodes.length||u.node.isBlock(n.parentNode)||u.node.isElement(n.parentNode)||!u.node.isDeletable(n.parentNode)){for(;!u.node.isElement(n.parentNode)&&u.node.isEmpty(n.parentNode)&&w.FE.NO_DELETE_TAGS.indexOf(n.parentNode.tagName)<0;){var a=n;n=n.parentNode,a.parentNode.removeChild(a)}w(n).after(w.FE.MARKERS),u.node.isElement(n.parentNode)&&!e.nextSibling&&n.previousSibling&&\"BR\"==n.previousSibling.tagName&&w(e).after(\"<br>\"),n.parentNode.removeChild(n)}else w(n.parentNode).after(w.FE.MARKERS),w(n.parentNode).remove();else w(n).after(w.FE.MARKERS)}else u.node.isDeletable(n)?(w(n).after(w.FE.MARKERS),w(n).remove()):e.nextSibling&&\"BR\"==e.nextSibling.tagName&&u.node.isVoid(n)&&\"BR\"!=n.tagName?(w(e.nextSibling).remove(),w(e).replaceWith(w.FE.MARKERS)):!1!==u.events.trigger(\"node.remove\",[w(n)])&&(w(n).after(w.FE.MARKERS),w(n).remove())}else if(w.FE.NO_DELETE_TAGS.indexOf(n.tagName)<0&&(u.node.isEditable(n)||u.node.isDeletable(n)))if(u.node.isDeletable(n))w(e).replaceWith(w.FE.MARKERS),w(n).remove();else if(u.node.isEmpty(n)&&!u.node.isList(n))w(n).remove(),w(e).replaceWith(w.FE.MARKERS);else{for(u.node.isList(n)&&(n=w(n).find(\"li:last\").get(0)),(t=u.node.contents(n))&&\"BR\"==t[t.length-1].tagName&&w(t[t.length-1]).remove(),t=u.node.contents(n);t&&u.node.isBlock(t[t.length-1]);)n=t[t.length-1],t=u.node.contents(n);w(n).append(w.FE.MARKERS);for(var s=e;!s.previousSibling;)s=s.parentNode;for(;s&&\"BR\"!==s.tagName&&!u.node.isBlock(s);){var l=s;s=s.nextSibling,w(n).append(l)}s&&\"BR\"==s.tagName&&w(s).remove(),w(e).remove()}else e.nextSibling&&\"BR\"==e.nextSibling.tagName&&w(e.nextSibling).remove();return!0}function l(e){var t=0<w(e).parentsUntil(u.$el,\"BLOCKQUOTE\").length,n=u.node.deepestParent(e,[],!t);if(n&&\"BLOCKQUOTE\"==n.tagName){var r=u.node.deepestParent(e,[w(e).parentsUntil(u.$el,\"BLOCKQUOTE\").get(0)]);r&&r.nextSibling&&(n=r)}if(null!==n){var o,i=n.nextSibling;if(u.node.isBlock(n)&&(u.node.isEditable(n)||u.node.isDeletable(n))&&i&&w.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0)if(u.node.isDeletable(i))w(i).remove(),w(e).replaceWith(w.FE.MARKERS);else if(u.node.isBlock(i)&&u.node.isEditable(i))if(u.node.isList(i))if(u.node.isEmpty(n,!0))w(n).remove(),w(i).find(\"li:first\").prepend(w.FE.MARKERS);else{var a=w(i).find(\"li:first\");\"BLOCKQUOTE\"==n.tagName&&(o=u.node.contents(n)).length&&u.node.isBlock(o[o.length-1])&&(n=o[o.length-1]),0===a.find(\"ul, ol\").length&&(w(e).replaceWith(w.FE.MARKERS),a.find(u.html.blockTagsQuery()).not(\"ol, ul, table\").each(function(){this.parentNode==a.get(0)&&w(this).replaceWith(w(this).html()+(u.node.isEmpty(this)?\"\":\"<br>\"))}),w(n).append(u.node.contents(a.get(0))),a.remove(),0===w(i).find(\"li\").length&&w(i).remove())}else{if((o=u.node.contents(i)).length&&\"BR\"==o[0].tagName&&w(o[0]).remove(),\"BLOCKQUOTE\"!=i.tagName&&\"BLOCKQUOTE\"==n.tagName)for(o=u.node.contents(n);o.length&&u.node.isBlock(o[o.length-1]);)n=o[o.length-1],o=u.node.contents(n);else if(\"BLOCKQUOTE\"==i.tagName&&\"BLOCKQUOTE\"!=n.tagName)for(o=u.node.contents(i);o.length&&u.node.isBlock(o[0]);)i=o[0],o=u.node.contents(i);w(e).replaceWith(w.FE.MARKERS),w(n).append(i.innerHTML),w(i).remove()}else{for(w(e).replaceWith(w.FE.MARKERS);i&&\"BR\"!==i.tagName&&!u.node.isBlock(i)&&u.node.isEditable(i);){var s=i;i=i.nextSibling,w(n).append(s)}i&&\"BR\"==i.tagName&&u.node.isEditable(i)&&w(i).remove()}}}function n(e){for(var t,n=e;!n.nextSibling;)if(n=n.parentNode,u.node.isElement(n))return!1;if(\"BR\"==(n=n.nextSibling).tagName&&u.node.isEditable(n))if(n.nextSibling){if(u.node.isBlock(n.nextSibling)&&u.node.isEditable(n.nextSibling)){if(!(w.FE.NO_DELETE_TAGS.indexOf(n.nextSibling.tagName)<0))return void w(n).remove();n=n.nextSibling,w(n.previousSibling).remove()}}else if(i(n)){if(s(e))u.cursorLists._del(e);else u.node.deepestParent(n)&&((!u.node.isEmpty(u.node.blockParent(n))||(u.node.blockParent(n).nextSibling&&w.FE.NO_DELETE_TAGS.indexOf(u.node.blockParent(n).nextSibling.tagName))<0)&&w(n).remove(),l(e));return}if(!u.node.isBlock(n)&&u.node.isEditable(n)){for(t=u.node.contents(n);n.nodeType!=Node.TEXT_NODE&&t.length&&!u.node.isDeletable(n)&&u.node.isEditable(n);)n=t[0],t=u.node.contents(n);n.nodeType==Node.TEXT_NODE?(w(n).before(w.FE.MARKERS),n.textContent.length&&(n.textContent=n.textContent.substring(d(n.textContent,!0),n.textContent.length))):u.node.isDeletable(n)?(w(n).before(w.FE.MARKERS),w(n).remove()):!1!==u.events.trigger(\"node.remove\",[w(n)])&&(w(n).before(w.FE.MARKERS),w(n).remove()),w(e).remove()}else if(w.FE.NO_DELETE_TAGS.indexOf(n.tagName)<0&&(u.node.isEditable(n)||u.node.isDeletable(n)))if(u.node.isDeletable(n))w(e).replaceWith(w.FE.MARKERS),w(n).remove();else if(u.node.isList(n))e.previousSibling?(w(n).find(\"li:first\").prepend(e),u.cursorLists._backspace(e)):(w(n).find(\"li:first\").prepend(w.FE.MARKERS),w(e).remove());else if((t=u.node.contents(n))&&t.length&&\"BR\"==t[0].tagName&&w(t[0]).remove(),t&&\"BLOCKQUOTE\"==n.tagName){var r=t[0];for(w(e).before(w.FE.MARKERS);r&&\"BR\"!=r.tagName;){var o=r;r=r.nextSibling,w(e).before(o)}r&&\"BR\"==r.tagName&&w(r).remove()}else w(e).after(w(n).html()).after(w.FE.MARKERS),w(n).remove()}function f(){for(var e=u.el.querySelectorAll(\"blockquote:empty\"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}function p(e,t,n){var r,o=u.node.deepestParent(e,[],!n);if(o&&\"BLOCKQUOTE\"==o.tagName)return h(e,o)?(r=u.html.defaultTag(),t?w(e).replaceWith(\"<br>\"+w.FE.MARKERS):r?w(o).after(\"<\"+r+\">\"+w.FE.MARKERS+\"<br></\"+r+\">\"):w(o).after(w.FE.MARKERS+\"<br>\"),w(e).remove()):m(e,t,n),!1;if(null==o)(r=u.html.defaultTag())&&u.node.isElement(e.parentNode)?w(e).replaceWith(\"<\"+r+\">\"+w.FE.MARKERS+\"<br></\"+r+\">\"):!e.previousSibling||w(e.previousSibling).is(\"br\")||e.nextSibling?w(e).replaceWith(\"<br>\"+w.FE.MARKERS):w(e).replaceWith(\"<br>\"+w.FE.MARKERS+\"<br>\");else{var i=e,a=\"\";\"PRE\"!=o.tagName||e.nextSibling||(t=!0),u.node.isBlock(o)&&!t||(a=\"<br/>\");var s,l=\"\",d=\"\",c=\"\",f=\"\";(r=u.html.defaultTag())&&u.node.isBlock(o)&&(c=\"<\"+r+\">\",f=\"</\"+r+\">\",o.tagName==r.toUpperCase()&&(c=u.node.openTagString(w(o).clone().removeAttr(\"id\").get(0))));do{if(i=i.parentNode,!t||i!=o||t&&!u.node.isBlock(o))if(l+=u.node.closeTagString(i),i==o&&u.node.isBlock(o))d=c+d;else{var p=\"A\"==i.tagName&&h(e,i)?\"fr-to-remove\":\"\";d=u.node.openTagString(w(i).clone().addClass(p).get(0))+d}}while(i!=o);a=l+a+d+(e.parentNode==o&&u.node.isBlock(o)?\"\":w.FE.INVISIBLE_SPACE)+w.FE.MARKERS,u.node.isBlock(o)&&!w(o).find(\"*:last\").is(\"br\")&&w(o).append(\"<br/>\"),w(e).after('<span id=\"fr-break\"></span>'),w(e).remove(),o.nextSibling&&!u.node.isBlock(o.nextSibling)||u.node.isBlock(o)||w(o).after(\"<br>\"),s=(s=!t&&u.node.isBlock(o)?u.node.openTagString(o)+w(o).html()+f:u.node.openTagString(o)+w(o).html()+u.node.closeTagString(o)).replace(/<span id=\"fr-break\"><\\/span>/g,a),w(o).replaceWith(s)}}function m(e,t,n){var r=u.node.deepestParent(e,[],!n);if(null==r)u.html.defaultTag()&&e.parentNode===u.el?w(e).replaceWith(\"<\"+u.html.defaultTag()+\">\"+w.FE.MARKERS+\"<br></\"+u.html.defaultTag()+\">\"):(e.nextSibling&&!u.node.isBlock(e.nextSibling)||w(e).after(\"<br>\"),w(e).replaceWith(\"<br>\"+w.FE.MARKERS));else{var o=e,i=\"\";\"PRE\"==r.tagName&&(t=!0),u.node.isBlock(r)&&!t||(i=\"<br>\");var a=\"\",s=\"\";do{var l=o;if(o=o.parentNode,\"BLOCKQUOTE\"==r.tagName&&u.node.isEmpty(l)&&!u.node.hasClass(l,\"fr-marker\")&&0<w(l).find(e).length&&w(l).after(e),\"BLOCKQUOTE\"!=r.tagName||!h(e,o)&&!g(e,o))if(!t||o!=r||t&&!u.node.isBlock(r)){a+=u.node.closeTagString(o);var d=\"A\"==o.tagName&&h(e,o)?\"fr-to-remove\":\"\";s=u.node.openTagString(w(o).clone().addClass(d).removeAttr(\"id\").get(0))+s}else\"BLOCKQUOTE\"==r.tagName&&t&&(s=a=\"\")}while(o!=r);var c=r==e.parentNode&&u.node.isBlock(r)||e.nextSibling;if(\"BLOCKQUOTE\"==r.tagName)if(e.previousSibling&&u.node.isBlock(e.previousSibling)&&e.nextSibling&&\"BR\"==e.nextSibling.tagName&&(w(e.nextSibling).after(e),e.nextSibling&&\"BR\"==e.nextSibling.tagName&&w(e.nextSibling).remove()),t)i=a+i+w.FE.MARKERS+s;else{var f=u.html.defaultTag();i=a+i+(f?\"<\"+f+\">\":\"\")+w.FE.MARKERS+\"<br>\"+(f?\"</\"+f+\">\":\"\")+s}else i=a+i+s+(c?\"\":w.FE.INVISIBLE_SPACE)+w.FE.MARKERS;w(e).replaceWith('<span id=\"fr-break\"></span>');var p=u.node.openTagString(r)+w(r).html()+u.node.closeTagString(r);p=p.replace(/<span id=\"fr-break\"><\\/span>/g,i),w(r).replaceWith(p)}}return{enter:function(t){var n=u.markers.insert();if(!n)return!0;for(var r=n.parentNode;r&&!u.node.isElement(r);){if(\"false\"===r.getAttribute(\"contenteditable\"))return w(n).replaceWith(w.FE.MARKERS),u.selection.restore(),!1;if(\"true\"===r.getAttribute(\"contenteditable\"))break;r=r.parentNode}u.el.normalize();var o=!1;0<w(n).parentsUntil(u.$el,\"BLOCKQUOTE\").length&&(o=!0),w(n).parentsUntil(u.$el,\"TD, TH\").length&&(o=!1),i(n)?!s(n)||t||o?p(n,t,o):u.cursorLists._endEnter(n):a(n)?!s(n)||t||o?function e(t,n,r){var o,i=u.node.deepestParent(t,[],!r);if(i&&\"TABLE\"==i.tagName)return w(i).find(\"td:first, th:first\").prepend(t),e(t,n,r);if(i&&\"BLOCKQUOTE\"==i.tagName)if(g(t,i)){if(!n)return(o=u.html.defaultTag())?w(i).before(\"<\"+o+\">\"+w.FE.MARKERS+\"<br></\"+o+\">\"):w(i).before(w.FE.MARKERS+\"<br>\"),w(t).remove(),!1}else h(t,i)?p(t,n,!0):m(t,n,!0);if(null==i)(o=u.html.defaultTag())&&u.node.isElement(t.parentNode)?w(t).replaceWith(\"<\"+o+\">\"+w.FE.MARKERS+\"<br></\"+o+\">\"):w(t).replaceWith(\"<br>\"+w.FE.MARKERS);else{if(u.node.isBlock(i))if(\"PRE\"==i.tagName&&(n=!0),n)w(t).remove(),w(i).prepend(\"<br>\"+w.FE.MARKERS);else{if(u.node.isEmpty(i,!0))return p(t,n,r);if(u.opts.keepFormatOnDelete){for(var a=t,s=w.FE.INVISIBLE_SPACE;a!=i&&!u.node.isElement(a);)a=a.parentNode,s=u.node.openTagString(a)+s+u.node.closeTagString(a);w(i).before(s)}else w(i).before(u.node.openTagString(w(i).clone().removeAttr(\"id\").get(0))+\"<br>\"+u.node.closeTagString(i))}else w(i).before(\"<br>\");w(t).remove()}}(n,t,o):u.cursorLists._startEnter(n):!s(n)||t||o?m(n,t,o):u.cursorLists._middleEnter(n),u.$el.find(\".fr-to-remove\").each(function(){for(var e=u.node.contents(this),t=0;t<e.length;t++)e[t].nodeType==Node.TEXT_NODE&&(e[t].textContent=e[t].textContent.replace(/\\u200B/g,\"\"));w(this).replaceWith(this.innerHTML)}),u.html.fillEmptyBlocks(!0),u.opts.htmlUntouched||(u.html.cleanEmptyTags(),u.clean.lists(),u.spaces.normalizeAroundCursor()),u.selection.restore()},backspace:function(){var e=!1,t=u.markers.insert();if(!t)return!0;for(var n=t.parentNode;n&&!u.node.isElement(n);){if(\"false\"===n.getAttribute(\"contenteditable\"))return w(t).replaceWith(w.FE.MARKERS),u.selection.restore(),!1;if(\"true\"===n.getAttribute(\"contenteditable\"))break;n=n.parentNode}u.el.normalize();var r=t.previousSibling;if(r){var o=r.textContent;o&&o.length&&8203==o.charCodeAt(o.length-1)&&(1==o.length?w(r).remove():r.textContent=r.textContent.substr(0,o.length-d(o)))}return i(t)?s(t)&&g(t,w(t).parents(\"li:first\").get(0))?u.cursorLists._backspace(t):e=c(t):a(t)?s(t)&&g(t,w(t).parents(\"li:first\").get(0))?u.cursorLists._backspace(t):function(e){for(var t=0<w(e).parentsUntil(u.$el,\"BLOCKQUOTE\").length,n=u.node.deepestParent(e,[],!t),r=n;n&&!n.previousSibling&&\"BLOCKQUOTE\"!=n.tagName&&n.parentElement!=u.el&&!u.node.hasClass(n.parentElement,\"fr-inner\")&&w.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentElement.tagName)<0;)n=n.parentElement;if(n&&\"BLOCKQUOTE\"==n.tagName){var o=u.node.deepestParent(e,[w(e).parentsUntil(u.$el,\"BLOCKQUOTE\").get(0)]);o&&o.previousSibling&&(r=n=o)}if(null!==n){var i,a=n.previousSibling;if(u.node.isBlock(n)&&u.node.isEditable(n))if(a&&w.FE.NO_DELETE_TAGS.indexOf(a.tagName)<0){if(u.node.isDeletable(a))w(a).remove(),w(e).replaceWith(w.FE.MARKERS);else if(u.node.isEditable(a))if(u.node.isBlock(a))if(u.node.isEmpty(a)&&!u.node.isList(a))w(a).remove(),w(e).after(u.opts.keepFormatOnDelete?w.FE.INVISIBLE_SPACE:\"\");else{if(u.node.isList(a)&&(a=w(a).find(\"li:last\").get(0)),(i=u.node.contents(a)).length&&\"BR\"==i[i.length-1].tagName&&w(i[i.length-1]).remove(),\"BLOCKQUOTE\"==a.tagName&&\"BLOCKQUOTE\"!=n.tagName)for(i=u.node.contents(a);i.length&&u.node.isBlock(i[i.length-1]);)a=i[i.length-1],i=u.node.contents(a);else if(\"BLOCKQUOTE\"!=a.tagName&&\"BLOCKQUOTE\"==r.tagName)for(i=u.node.contents(r);i.length&&u.node.isBlock(i[0]);)r=i[0],i=u.node.contents(r);if(u.node.isEmpty(n))w(e).remove(),u.selection.setAtEnd(a,!0);else{w(e).replaceWith(w.FE.MARKERS);var s=a.childNodes;u.node.isBlock(s[s.length-1])?w(s[s.length-1]).append(r.innerHTML):w(a).append(r.innerHTML)}w(r).remove(),u.node.isEmpty(n)&&w(n).remove()}else w(e).replaceWith(w.FE.MARKERS),\"BLOCKQUOTE\"==n.tagName&&a.nodeType==Node.ELEMENT_NODE?w(a).remove():(w(a).after(u.node.isEmpty(n)?\"\":w(n).html()),w(n).remove(),\"BR\"==a.tagName&&w(a).remove())}else a||n&&\"BLOCKQUOTE\"===n.tagName&&0===w(n).text().replace(/\\u200B/g,\"\").length&&w(n).remove()}}(t):e=c(t),w(t).remove(),f(),u.html.fillEmptyBlocks(!0),u.opts.htmlUntouched||(u.html.cleanEmptyTags(),u.clean.lists(),u.spaces.normalizeAroundCursor()),u.selection.restore(),e},del:function(){var e=u.markers.insert();if(!e)return!1;if(u.el.normalize(),i(e))if(s(e))if(0===w(e).parents(\"li:first\").find(\"ul, ol\").length)u.cursorLists._del(e);else{var t=w(e).parents(\"li:first\").find(\"ul:first, ol:first\").find(\"li:first\");(t=t.find(u.html.blockTagsQuery()).get(-1)||t).prepend(e),u.cursorLists._backspace(e)}else l(e);else a(e),n(e);w(e).remove(),f(),u.html.fillEmptyBlocks(!0),u.opts.htmlUntouched||(u.html.cleanEmptyTags(),u.clean.lists()),u.spaces.normalizeAroundCursor(),u.selection.restore()},isAtEnd:h,isAtStart:g}},w.FE.ENTER_P=0,w.FE.ENTER_DIV=1,w.FE.ENTER_BR=2,w.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,IME:229},w.extend(w.FE.DEFAULTS,{enter:w.FE.ENTER_P,multiLine:!0,tabSpaces:0}),w.FE.MODULES.keys=function(l){var d,n,r,c=!1;function e(){if(l.browser.mozilla&&l.selection.isCollapsed()&&!c){var e=l.selection.ranges(0),t=e.startContainer,n=e.startOffset;t&&t.nodeType==Node.TEXT_NODE&&n<=t.textContent.length&&0<n&&32==t.textContent.charCodeAt(n-1)&&(l.selection.save(),l.spaces.normalize(),l.selection.restore())}}function t(){l.selection.isFull()&&setTimeout(function(){var e=l.html.defaultTag();e?l.$el.html(\"<\"+e+\">\"+w.FE.MARKERS+\"<br/></\"+e+\">\"):l.$el.html(w.FE.MARKERS+\"<br/>\"),l.selection.restore(),l.placeholder.refresh(),l.button.bulkRefresh(),l.undo.saveStep()},0)}function o(){c=!1}function i(){c=!1}function f(){var e=l.html.defaultTag();e?l.$el.html(\"<\"+e+\">\"+w.FE.MARKERS+\"<br/></\"+e+\">\"):l.$el.html(w.FE.MARKERS+\"<br/>\"),l.selection.restore()}function a(e){var t=l.selection.element();if(t&&0<=[\"INPUT\",\"TEXTAREA\"].indexOf(t.tagName))return!0;if(e&&h(e.which))return p(),!0;l.events.disableBlur(),null;var n=e.which;if(16===n)return!0;if((d=n)===w.FE.KEYCODE.IME)return c=!0;c=!1;var r,o,i,a=m(n)&&!g(e)&&!e.altKey,s=n==w.FE.KEYCODE.BACKSPACE||n==w.FE.KEYCODE.DELETE;if((!(g(e)||e.shiftKey&&(33===n||34===n||35===n||36===n))&&l.selection.isFull()&&!l.opts.keepFormatOnDelete&&!l.placeholder.isVisible()||s&&l.placeholder.isVisible()&&l.opts.keepFormatOnDelete)&&(a||s)&&(f(),!m(n)))return e.preventDefault(),!0;n==w.FE.KEYCODE.ENTER?e.shiftKey?((i=e).preventDefault(),i.stopPropagation(),l.opts.multiLine&&(l.selection.isCollapsed()||l.selection.remove(),l.cursor.enter(!0))):(o=e,l.opts.multiLine?(l.helpers.isIOS()||(o.preventDefault(),o.stopPropagation()),l.selection.isCollapsed()||l.selection.remove(),l.cursor.enter()):(o.preventDefault(),o.stopPropagation())):n===w.FE.KEYCODE.BACKSPACE&&(e.metaKey||e.ctrlKey)?setTimeout(function(){l.events.disableBlur(),l.events.focus()},0):n!=w.FE.KEYCODE.BACKSPACE||g(e)||e.altKey?n!=w.FE.KEYCODE.DELETE||g(e)||e.altKey||e.shiftKey?n==w.FE.KEYCODE.SPACE?function(e){var t=l.selection.element();if(!l.helpers.isMobile()&&t&&\"A\"==t.tagName){e.preventDefault(),e.stopPropagation(),l.selection.isCollapsed()||l.selection.remove();var n=l.markers.insert();if(n){var r=n.previousSibling;!n.nextSibling&&n.parentNode&&\"A\"==n.parentNode.tagName?(n.parentNode.insertAdjacentHTML(\"afterend\",\"&nbsp;\"+w.FE.MARKERS),n.parentNode.removeChild(n)):(r&&r.nodeType==Node.TEXT_NODE&&1==r.textContent.length&&160==r.textContent.charCodeAt(0)?r.textContent=r.textContent+\" \":n.insertAdjacentHTML(\"beforebegin\",\"&nbsp;\"),n.outerHTML=w.FE.MARKERS),l.selection.restore()}}}(e):n==w.FE.KEYCODE.TAB?function(e){if(0<l.opts.tabSpaces)if(l.selection.isCollapsed()){l.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var t=\"\",n=0;n<l.opts.tabSpaces;n++)t+=\"&nbsp;\";l.html.insert(t),l.placeholder.refresh(),l.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?l.commands.outdent():l.commands.indent()}(e):g(e)||!m(e.which)||l.selection.isCollapsed()||e.ctrlKey||e.altKey||l.selection.remove():l.placeholder.isVisible()?(l.opts.keepFormatOnDelete||f(),e.preventDefault(),e.stopPropagation()):((r=e).preventDefault(),r.stopPropagation(),\"\"===l.selection.text()?l.cursor.del():l.selection.remove(),l.placeholder.refresh()):l.placeholder.isVisible()?(l.opts.keepFormatOnDelete||f(),e.preventDefault(),e.stopPropagation()):function(e){if(l.selection.isCollapsed())if(l.cursor.backspace(),l.helpers.isIOS()){var t=l.selection.ranges(0);t.deleteContents(),t.insertNode(document.createTextNode(\"\\u200b\")),l.selection.get().modify(\"move\",\"forward\",\"character\")}else e.preventDefault(),e.stopPropagation();else e.preventDefault(),e.stopPropagation(),l.selection.remove();l.placeholder.refresh()}(e),l.events.enableBlur()}function s(){if(!l.$wp)return!0;var e;l.opts.height||l.opts.heightMax?(e=l.position.getBoundingRect().top,l.opts.iframe&&(e+=l.$iframe.offset().top,e-=l.helpers.scrollTop()),e>l.$wp.offset().top-l.helpers.scrollTop()+l.$wp.height()-20&&l.$wp.scrollTop(e+l.$wp.scrollTop()-(l.$wp.height()+l.$wp.offset().top)+l.helpers.scrollTop()+20)):(e=l.position.getBoundingRect().top,l.opts.toolbarBottom&&(e+=l.opts.toolbarStickyOffset),l.opts.iframe&&(e+=l.$iframe.offset().top,e-=l.helpers.scrollTop()),(e+=l.opts.toolbarStickyOffset)>l.o_win.innerHeight-20&&w(l.o_win).scrollTop(e+l.helpers.scrollTop()-l.o_win.innerHeight+20),e=l.position.getBoundingRect().top,l.opts.toolbarBottom||(e-=l.opts.toolbarStickyOffset),l.opts.iframe&&(e+=l.$iframe.offset().top,e-=l.helpers.scrollTop()),e<l.$tb.height()+20&&w(l.o_win).scrollTop(e+l.helpers.scrollTop()-l.$tb.height()-20))}function p(){var e,t=l.selection.element();!function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\\s*=\\s*[\"']?fr-marker[\"']?[^>]+>\\u200b<\\/span>/gi,\"\"))&&/\\u200B/.test(t)&&0<t.replace(/\\u200B/gi,\"\").length)}(t)||l.node.hasClass(t,\"fr-marker\")||\"IFRAME\"==t.tagName||(e=t,l.helpers.isIOS()&&0!==((e.textContent||\"\").match(/[\\u3041-\\u3096\\u30A0-\\u30FF\\u4E00-\\u9FFF\\u3130-\\u318F\\uAC00-\\uD7AF]/gi)||[]).length)||(l.selection.save(),function(e){for(var t=l.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,l.node.filter(function(e){return/\\u200B/gi.test(e.textContent)}),!1);t.nextNode();){var n=t.currentNode;n.textContent=n.textContent.replace(/\\u200B/gi,\"\")}}(t),l.selection.restore())}function u(e){var t=l.selection.element();if(t&&0<=[\"INPUT\",\"TEXTAREA\"].indexOf(t.tagName))return!0;if(e&&0===e.which&&d&&(e.which=d),l.helpers.isAndroid()&&l.browser.mozilla)return!0;if(c)return!1;if(e&&l.helpers.isIOS()&&e.which==w.FE.KEYCODE.ENTER&&l.doc.execCommand(\"undo\"),!l.selection.isCollapsed())return!0;if(e&&(e.which===w.FE.KEYCODE.META||e.which==w.FE.KEYCODE.CTRL))return!0;if(e&&h(e.which))return!0;if(e&&!l.helpers.isIOS()&&(e.which==w.FE.KEYCODE.ENTER||e.which==w.FE.KEYCODE.BACKSPACE||37<=e.which&&e.which<=40&&!l.browser.msie))try{s()}catch(n){}p()}function g(e){if(-1!=navigator.userAgent.indexOf(\"Mac OS X\")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function h(e){if(e>=w.FE.KEYCODE.ARROW_LEFT&&e<=w.FE.KEYCODE.ARROW_DOWN)return!0}function m(e){if(e>=w.FE.KEYCODE.ZERO&&e<=w.FE.KEYCODE.NINE)return!0;if(e>=w.FE.KEYCODE.NUM_ZERO&&e<=w.FE.KEYCODE.NUM_MULTIPLY)return!0;if(e>=w.FE.KEYCODE.A&&e<=w.FE.KEYCODE.Z)return!0;if(l.browser.webkit&&0===e)return!0;switch(e){case w.FE.KEYCODE.SPACE:case w.FE.KEYCODE.QUESTION_MARK:case w.FE.KEYCODE.NUM_PLUS:case w.FE.KEYCODE.NUM_MINUS:case w.FE.KEYCODE.NUM_PERIOD:case w.FE.KEYCODE.NUM_DIVISION:case w.FE.KEYCODE.SEMICOLON:case w.FE.KEYCODE.FF_SEMICOLON:case w.FE.KEYCODE.DASH:case w.FE.KEYCODE.EQUALS:case w.FE.KEYCODE.FF_EQUALS:case w.FE.KEYCODE.COMMA:case w.FE.KEYCODE.PERIOD:case w.FE.KEYCODE.SLASH:case w.FE.KEYCODE.APOSTROPHE:case w.FE.KEYCODE.SINGLE_QUOTE:case w.FE.KEYCODE.OPEN_SQUARE_BRACKET:case w.FE.KEYCODE.BACKSLASH:case w.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function E(e){var t=e.which;if(g(e)||37<=t&&t<=40||!m(t)&&t!=w.FE.KEYCODE.DELETE&&t!=w.FE.KEYCODE.BACKSPACE&&t!=w.FE.KEYCODE.ENTER&&t!=w.FE.KEYCODE.IME)return!0;n||(r=l.snapshot.get(),l.undo.canDo()||l.undo.saveStep()),clearTimeout(n),n=setTimeout(function(){n=null,l.undo.saveStep()},Math.max(250,l.opts.typingTimer))}function v(e){var t=e.which;if(g(e)||37<=t&&t<=40)return!0;r&&n?(l.undo.saveStep(r),r=null):void 0!==t&&0!==t||r||n||l.undo.saveStep()}function b(e){if(e&&\"BR\"==e.tagName)return!1;try{return 0===(e.textContent||\"\").length&&e.querySelector&&!e.querySelector(\":scope > br\")||e.childNodes&&1==e.childNodes.length&&e.childNodes[0].getAttribute&&(\"false\"==e.childNodes[0].getAttribute(\"contenteditable\")||l.node.hasClass(e.childNodes[0],\"fr-img-caption\"))}catch(t){return!1}}function S(e){var t=l.el.childNodes,n=l.html.defaultTag();return!(!e.target||e.target===l.el)||(0===t.length||void(l.$el.outerHeight()-e.offsetY<=10?b(t[t.length-1])&&(n?l.$el.append(\"<\"+n+\">\"+w.FE.MARKERS+\"<br></\"+n+\">\"):l.$el.append(w.FE.MARKERS+\"<br>\"),l.selection.restore(),s()):e.offsetY<=10&&b(t[0])&&(n?l.$el.prepend(\"<\"+n+\">\"+w.FE.MARKERS+\"<br></\"+n+\">\"):l.$el.prepend(w.FE.MARKERS+\"<br>\"),l.selection.restore(),s())))}function T(){n&&clearTimeout(n)}return{_init:function(){l.events.on(\"keydown\",E),l.events.on(\"input\",e),l.events.on(\"mousedown\",i),l.events.on(\"keyup input\",v),l.events.on(\"keypress\",o),l.events.on(\"keydown\",a),l.events.on(\"keyup\",u),l.events.on(\"destroy\",T),l.events.on(\"html.inserted\",u),l.events.on(\"cut\",t),l.opts.multiLine&&l.events.on(\"click\",S)},ctrlKey:g,isCharacter:m,isArrow:h,forceUndo:function(){n&&(clearTimeout(n),l.undo.saveStep(),r=null)},isIME:function(){return c},isBrowserAction:function(e){var t=e.which;return g(e)||t==w.FE.KEYCODE.F5},positionCaret:s}},w.FE.MODULES.accessibility=function(f){var i=!0;function s(t){t&&t.length&&!f.$el.find('[contenteditable=\"true\"]').is(\":focus\")&&(t.data(\"blur-event-set\")||t.parents(\".fr-popup\").length||(f.events.$on(t,\"blur\",function(){var e=t.parents(\".fr-toolbar, .fr-popup\").data(\"instance\")||f;e.events.blurActive()&&!f.core.hasFocus()&&e.events.trigger(\"blur\"),setTimeout(function(){e.events.enableBlur()},100)},!0),t.data(\"blur-event-set\",!0)),(t.parents(\".fr-toolbar, .fr-popup\").data(\"instance\")||f).events.disableBlur(),t.focus(),f.shared.$f_el=t)}function p(e,t){var n=t?\"last\":\"first\",r=e.find(\"button:visible:not(.fr-disabled), .fr-group span.fr-command:visible\")[n]();if(r.length)return s(r),!0}function a(e){return e.is(\"input, textarea, select\")&&t(),f.events.disableBlur(),e.focus(),!0}function u(e,t){var n=e.find(\"input, textarea, button, select\").filter(\":visible\").not(\":disabled\").filter(t?\":last\":\":first\");if(n.length)return a(n);if(f.shared.with_kb){var r=e.find(\".fr-active-item:visible:first\");if(r.length)return a(r);var o=e.find(\"[tabIndex]:visible:first\");if(o.length)return a(o)}}function t(){0===f.$el.find(\".fr-marker\").length&&f.core.hasFocus()&&f.selection.save()}function l(){var e=f.popups.areVisible();if(e){var t=e.find(\".fr-buttons\");return t.find(\"button:focus, .fr-group span:focus\").length?!p(e.data(\"instance\").$tb):!p(t)}return!p(f.$tb)}function d(){var e=null;return f.shared.$f_el.is(\".fr-dropdown.fr-active\")?e=f.shared.$f_el:f.shared.$f_el.closest(\".fr-dropdown-menu\").prev().is(\".fr-dropdown.fr-active\")&&(e=f.shared.$f_el.closest(\".fr-dropdown-menu\").prev()),e}function n(e,t,n){if(f.shared.$f_el){var r=d();r&&(f.button.click(r),f.shared.$f_el=r);var o=e.find(\"button:visible:not(.fr-disabled), .fr-group span.fr-command:visible\"),i=o.index(f.shared.$f_el);if(0===i&&!n||i==o.length-1&&n){var a;if(t){if(e.parent().is(\".fr-popup\"))a=!u(e.parent().children().not(\".fr-buttons\"),!n);!1===a&&(f.shared.$f_el=null)}t&&!1===a||p(e,!n)}else s(w(o.get(i+(n?1:-1))));return!1}}function c(e,t){return n(e,t,!0)}function g(e,t){return n(e,t)}function h(e){if(f.shared.$f_el){var t;if(f.shared.$f_el.is(\".fr-dropdown.fr-active\"))return s(t=e?f.shared.$f_el.next().find(\".fr-command:not(.fr-disabled)\").first():f.shared.$f_el.next().find(\".fr-command:not(.fr-disabled)\").last()),!1;if(f.shared.$f_el.is(\"a.fr-command\"))return(t=e?f.shared.$f_el.closest(\"li\").nextAll(\":visible:first\").find(\".fr-command:not(.fr-disabled)\").first():f.shared.$f_el.closest(\"li\").prevAll(\":visible:first\").find(\".fr-command:not(.fr-disabled)\").first()).length||(t=e?f.shared.$f_el.closest(\".fr-dropdown-menu\").find(\".fr-command:not(.fr-disabled)\").first():f.shared.$f_el.closest(\".fr-dropdown-menu\").find(\".fr-command:not(.fr-disabled)\").last()),s(t),!1}}function m(){if(f.shared.$f_el){if(f.shared.$f_el.hasClass(\"fr-dropdown\"))f.button.click(f.shared.$f_el);else if(f.shared.$f_el.is(\"button.fr-back\")){f.opts.toolbarInline&&(f.events.disableBlur(),f.events.focus());var e=f.popups.areVisible(f);e&&(f.shared.with_kb=!1),f.button.click(f.shared.$f_el),v(e)}else{if(f.events.disableBlur(),f.button.click(f.shared.$f_el),f.shared.$f_el.attr(\"data-popup\")){var t=f.popups.areVisible(f);t&&t.data(\"popup-button\",f.shared.$f_el)}else if(f.shared.$f_el.attr(\"data-modal\")){var n=f.modals.areVisible(f);n&&n.data(\"modal-button\",f.shared.$f_el)}f.shared.$f_el=null}return!1}}function E(){f.shared.$f_el&&(f.events.disableBlur(),f.shared.$f_el.blur(),f.shared.$f_el=null),!1!==f.events.trigger(\"toolbar.focusEditor\")&&(f.events.disableBlur(),f.browser.msie||f.$el.focus(),f.events.focus())}function r(r){r&&r.length&&(f.events.$on(r,\"keydown\",function(e){if(!w(e.target).is(\"a.fr-command, button.fr-command, .fr-group span.fr-command\"))return!0;var t=r.parents(\".fr-popup\").data(\"instance\")||r.data(\"instance\")||f;f.shared.with_kb=!0;var n=t.accessibility.exec(e,r);return f.shared.with_kb=!1,n},!0),f.browser.msie||f.events.$on(r,\"mouseenter\",\"[tabIndex]\",function(e){var t=r.parents(\".fr-popup\").data(\"instance\")||r.data(\"instance\")||f;if(!i)return e.stopPropagation(),void e.preventDefault();var n=w(e.currentTarget);t.shared.$f_el&&t.shared.$f_el.not(n)&&t.accessibility.focusEditor()},!0))}function v(e){var t=e.data(\"popup-button\");t&&setTimeout(function(){s(t),e.data(\"popup-button\",null)},0)}function o(e){var t=f.popups.areVisible(e);t&&t.data(\"popup-button\",null)}function e(e){var t=-1!=navigator.userAgent.indexOf(\"Mac OS X\")?e.metaKey:e.ctrlKey;if(e.which==w.FE.KEYCODE.F10&&!t&&!e.shiftKey&&e.altKey){f.shared.with_kb=!0;var n=f.popups.areVisible(f),r=!1;return n&&(r=u(n.children().not(\".fr-buttons\"))),r||l(),f.shared.with_kb=!1,e.preventDefault(),e.stopPropagation(),!1}return!0}return{_init:function(){f.$wp?f.events.on(\"keydown\",e,!0):f.events.$on(f.$win,\"keydown\",e,!0),f.events.on(\"mousedown\",function(e){o(f),f.shared.$f_el&&(f.accessibility.restoreSelection(),e.stopPropagation(),f.events.disableBlur(),f.shared.$f_el=null)},!0),f.events.on(\"blur\",function(){f.shared.$f_el=null,o(f)},!0)},registerPopup:function(e){var d,c,t=f.popups.get(e),n=(d=e,c=f.popups.get(d),{_tiKeydown:function(e){var t=c.data(\"instance\")||f;if(!1===t.events.trigger(\"popup.tab\",[e]))return!1;var n=e.which,r=c.find(\":focus:first\");if(w.FE.KEYCODE.TAB==n){e.preventDefault();var o=c.children().not(\".fr-buttons\"),i=o.find(\"input, textarea, button, select\").filter(\":visible\").not(\".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled\").toArray(),a=i.indexOf(this)+(e.shiftKey?-1:1);if(0<=a&&a<i.length)return t.events.disableBlur(),w(i[a]).focus(),e.stopPropagation(),!1;var s=c.find(\".fr-buttons\");if(s.length&&p(s,!!e.shiftKey))return e.stopPropagation(),!1;if(u(o))return e.stopPropagation(),!1}else{if(w.FE.KEYCODE.ENTER!=n||!e.target||\"TEXTAREA\"===e.target.tagName)return w.FE.KEYCODE.ESC==n?(e.preventDefault(),e.stopPropagation(),t.accessibility.restoreSelection(),t.popups.isVisible(d)&&c.find(\".fr-back:visible\").length?(t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(c.find(\".fr-back:visible:first\")),v(c)):t.popups.isVisible(d)&&c.find(\".fr-dismiss:visible\").length?t.button.exec(c.find(\".fr-dismiss:visible:first\")):(t.popups.hide(d),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),v(c)),!1):w.FE.KEYCODE.SPACE==n&&(r.is(\".fr-submit\")||r.is(\".fr-dismiss\"))?(e.preventDefault(),e.stopPropagation(),t.events.disableBlur(),t.button.exec(r),!0):t.keys.isBrowserAction(e)?void e.stopPropagation():r.is(\"input[type=text], textarea\")?void e.stopPropagation():w.FE.KEYCODE.SPACE==n&&(r.is(\".fr-link-attr\")||r.is(\"input[type=file]\"))?void e.stopPropagation():(e.stopPropagation(),e.preventDefault(),!1);var l=null;0<c.find(\".fr-submit:visible\").length?l=c.find(\".fr-submit:visible:first\"):c.find(\".fr-dismiss:visible\").length&&(l=c.find(\".fr-dismiss:visible:first\")),l&&(e.preventDefault(),e.stopPropagation(),t.events.disableBlur(),t.button.exec(l))}},_tiMouseenter:function(){var e=c.data(\"instance\")||f;o(e)}});r(t.find(\".fr-buttons\")),f.events.$on(t,\"mouseenter\",\"tabIndex\",n._tiMouseenter,!0),f.events.$on(t.children().not(\".fr-buttons\"),\"keydown\",\"[tabIndex]\",n._tiKeydown,!0),f.popups.onHide(e,function(){(t.data(\"instance\")||f).accessibility.restoreSelection()}),f.popups.onShow(e,function(){i=!1,setTimeout(function(){i=!0},0)})},registerToolbar:r,focusToolbarElement:s,focusToolbar:p,focusContent:u,focusPopup:function(r){var o=r.children().not(\".fr-buttons\");o.data(\"mouseenter-event-set\")||f.browser.msie||(f.events.$on(o,\"mouseenter\",\"[tabIndex]\",function(e){var t=r.data(\"instance\")||f;if(!i)return e.stopPropagation(),void e.preventDefault();var n=o.find(\":focus:first\");n.length&&!n.is(\"input, button, textarea, select\")&&(t.events.disableBlur(),n.blur(),t.events.disableBlur(),t.events.focus())}),o.data(\"mouseenter-event-set\",!0)),!u(o)&&f.shared.with_kb&&p(r.find(\".fr-buttons\"))},focusModal:function(e){f.core.hasFocus()||(f.events.disableBlur(),f.events.focus()),f.accessibility.saveSelection(),f.events.disableBlur(),f.$el.blur(),f.selection.clear(),f.events.disableBlur(),f.shared.with_kb?e.find(\".fr-command[tabIndex], [tabIndex]\").first().focus():e.find(\"[tabIndex]:first\").focus()},focusEditor:E,focusPopupButton:v,focusModalButton:function(e){var t=e.data(\"modal-button\");t&&setTimeout(function(){s(t),e.data(\"modal-button\",null)},0)},hasFocus:function(){return null!=f.shared.$f_el},exec:function(e,t){var n=-1!=navigator.userAgent.indexOf(\"Mac OS X\")?e.metaKey:e.ctrlKey,r=e.which,o=!1;return r!=w.FE.KEYCODE.TAB||n||e.shiftKey||e.altKey?r!=w.FE.KEYCODE.ARROW_RIGHT||n||e.shiftKey||e.altKey?r!=w.FE.KEYCODE.TAB||n||!e.shiftKey||e.altKey?r!=w.FE.KEYCODE.ARROW_LEFT||n||e.shiftKey||e.altKey?r!=w.FE.KEYCODE.ARROW_UP||n||e.shiftKey||e.altKey?r!=w.FE.KEYCODE.ARROW_DOWN||n||e.shiftKey||e.altKey?r!=w.FE.KEYCODE.ENTER&&r!=w.FE.KEYCODE.SPACE||n||e.shiftKey||e.altKey?r!=w.FE.KEYCODE.ESC||n||e.shiftKey||e.altKey?r!=w.FE.KEYCODE.F10||n||e.shiftKey||!e.altKey||(o=l()):o=function(e){if(f.shared.$f_el){var t=d();return t?(f.button.click(t),s(t)):e.parent().find(\".fr-back:visible\").length?(f.shared.with_kb=!1,f.opts.toolbarInline&&(f.events.disableBlur(),f.events.focus()),f.button.exec(e.parent().find(\".fr-back:visible:first\")),v(e.parent())):f.shared.$f_el.is(\"button, .fr-group span\")&&(e.parent().is(\".fr-popup\")?(f.accessibility.restoreSelection(),f.shared.$f_el=null,!1!==f.events.trigger(\"toolbar.esc\")&&(f.popups.hide(e.parent()),f.opts.toolbarInline&&f.toolbar.showInline(null,!0),v(e.parent()))):E()),!1}}(t):o=m():o=f.shared.$f_el&&f.shared.$f_el.is(\".fr-dropdown:not(.fr-active)\")?m():h(!0):o=h():o=g(t):o=g(t,!0):o=c(t):o=c(t,!0),f.shared.$f_el||o!==undefined||(o=!0),!o&&f.keys.isBrowserAction(e)&&(o=!0),!!o||(e.preventDefault(),e.stopPropagation(),!1)},saveSelection:t,restoreSelection:function(){f.$el.find(\".fr-marker\").length&&(f.events.disableBlur(),f.selection.restore(),f.events.enableBlur())}}},w.FE.MODULES.format=function(h){function l(e,t){var n=\"<\"+e;for(var r in t)t.hasOwnProperty(r)&&(n+=\" \"+r+'=\"'+t[r]+'\"');return n+=\">\"}function f(e,t){var n=e;for(var r in t)t.hasOwnProperty(r)&&(n+=\"id\"==r?\"#\"+t[r]:\"class\"==r?\".\"+t[r]:\"[\"+r+'=\"'+t[r]+'\"]');return n}function p(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function m(e,t,n){if(e){for(;e.nodeType===Node.COMMENT_NODE;)e=e.nextSibling;if(e){if(h.node.isBlock(e)&&\"HR\"!==e.tagName)return m(e.firstChild,t,n),!1;for(var r=w(l(t,n)).insertBefore(e),o=e;o&&!w(o).is(\".fr-marker\")&&0===w(o).find(\".fr-marker\").length&&\"UL\"!=o.tagName&&\"OL\"!=o.tagName;){var i=o;if(h.node.isBlock(o)&&\"HR\"!==e.tagName)return m(o.firstChild,t,n),!1;o=o.nextSibling,r.append(i)}if(o)(w(o).find(\".fr-marker\").length||\"UL\"==o.tagName||\"OL\"==o.tagName)&&m(o.firstChild,t,n);else{for(var a=r.get(0).parentNode;a&&!a.nextSibling&&!h.node.isElement(a);)a=a.parentNode;if(a){var s=a.nextSibling;s&&(h.node.isBlock(s)?\"HR\"===s.tagName?m(s.nextSibling,t,n):m(s.firstChild,t,n):m(s,t,n))}}r.is(\":empty\")&&r.remove()}}}function n(e,t){var n;if(void 0===t&&(t={}),t.style&&delete t.style,h.selection.isCollapsed()){h.markers.insert(),h.$el.find(\".fr-marker\").replaceWith(l(e,t)+w.FE.INVISIBLE_SPACE+w.FE.MARKERS+(\"</\"+e+\">\")),h.selection.restore()}else{var r;h.selection.save(),m(h.$el.find('.fr-marker[data-type=\"true\"]').get(0).nextSibling,e,t);do{for(r=h.$el.find(f(e,t)+\" > \"+f(e,t)),n=0;n<r.length;n++)r[n].outerHTML=r[n].innerHTML}while(r.length);h.el.normalize();var o=h.el.querySelectorAll(\".fr-marker\");for(n=0;n<o.length;n++){var i=w(o[n]);!0===i.data(\"type\")?p(i.get(0).nextSibling,f(e,t))&&i.next().prepend(i):p(i.get(0).previousSibling,f(e,t))&&i.prev().append(i)}h.selection.restore()}}function E(e,t,n,r){if(!r){var o=!1;if(!0===e.data(\"type\"))for(;h.node.isFirstSibling(e.get(0))&&!e.parent().is(h.$el)&&!e.parent().is(\"ol\")&&!e.parent().is(\"ul\");)e.parent().before(e),o=!0;else if(!1===e.data(\"type\"))for(;h.node.isLastSibling(e.get(0))&&!e.parent().is(h.$el)&&!e.parent().is(\"ol\")&&!e.parent().is(\"ul\");)e.parent().after(e),o=!0;if(o)return!0}if(e.parents(t).length||void 0===t){var i=\"\",a=\"\",s=e.parent();if(s.is(h.$el)||h.node.isBlock(s.get(0)))return!1;for(;!h.node.isBlock(s.parent().get(0))&&(void 0===t||void 0!==t&&!p(s.get(0),f(t,n)));)i+=h.node.closeTagString(s.get(0)),a=h.node.openTagString(s.get(0))+a,s=s.parent();var l=e.get(0).outerHTML;e.replaceWith('<span id=\"mark\"></span>');var d=s.html().replace(/<span id=\"mark\"><\\/span>/,i+h.node.closeTagString(s.get(0))+a+l+i+h.node.openTagString(s.get(0))+a);return s.replaceWith(h.node.openTagString(s.get(0))+d+h.node.closeTagString(s.get(0))),!0}return!1}function r(t,n){void 0===n&&(n={}),n.style&&delete n.style;var r=h.selection.isCollapsed();h.selection.save();for(var o=!0;o;){o=!1;for(var i=h.$el.find(\".fr-marker\"),a=0;a<i.length;a++){var s=w(i[a]),l=null;if(s.attr(\"data-cloned\")||r||(l=s.clone().removeClass(\"fr-marker\").addClass(\"fr-clone\"),!0===s.data(\"type\")?s.attr(\"data-cloned\",!0).after(l):s.attr(\"data-cloned\",!0).before(l)),E(s,t,n,r)){o=!0;break}}}!function e(t,n,r,o){for(var i=h.node.contents(t.get(0)),a=0;a<i.length;a++){var s=i[a];if(h.node.hasClass(s,\"fr-marker\"))n=(n+1)%2;else if(n)if(0<w(s).find(\".fr-marker\").length)n=e(w(s),n,r,o);else{for(var l=w(s).find(r||\"*:not(br)\"),d=l.length-1;0<=d;d--){var c=l[d];h.node.isBlock(c)||h.node.isVoid(c)||void 0!==r&&!p(c,f(r,o))?h.node.isBlock(c)&&void 0===r&&\"TABLE\"!=s.tagName&&h.node.clearAttributes(c):h.node.hasClass(c,\"fr-clone\")||(c.outerHTML=c.innerHTML)}void 0===r&&s.nodeType==Node.ELEMENT_NODE&&!h.node.isVoid(s)||p(s,f(r,o))?h.node.isBlock(s)?void 0===r&&s.nodeType==Node.ELEMENT_NODE&&h.node.isBlock(s)&&\"TABLE\"!=s.tagName&&h.node.clearAttributes(s):h.node.hasClass(s,\"fr-clone\")||(s.outerHTML=s.innerHTML):void 0===r&&s.nodeType==Node.ELEMENT_NODE&&h.node.isBlock(s)&&\"TABLE\"!=s.tagName&&h.node.clearAttributes(s)}else 0<w(s).find(\".fr-marker\").length&&(n=e(w(s),n,r,o))}return n}(h.$el,0,t,n),r||(h.$el.find(\".fr-marker\").remove(),h.$el.find(\".fr-clone\").removeClass(\"fr-clone\").addClass(\"fr-marker\")),r&&h.$el.find(\".fr-marker\").before(w.FE.INVISIBLE_SPACE).after(w.FE.INVISIBLE_SPACE),h.html.cleanEmptyTags(),h.el.normalize(),h.selection.restore()}function t(e,t){var n,r,o,i,a,s=null;if(h.selection.isCollapsed()){h.markers.insert();var l=(r=h.$el.find(\".fr-marker\")).parent();if(h.node.openTagString(l.get(0))=='<span style=\"'+e+\": \"+l.css(e)+';\">'){if(h.node.isEmpty(l.get(0)))s=w('<span style=\"'+e+\": \"+t+';\">'+w.FE.INVISIBLE_SPACE+w.FE.MARKERS+\"</span>\"),l.replaceWith(s);else{var d={};d[\"style*\"]=e+\":\",E(r,\"span\",d,!0),r=h.$el.find(\".fr-marker\"),t?(s=w('<span style=\"'+e+\": \"+t+';\">'+w.FE.INVISIBLE_SPACE+w.FE.MARKERS+\"</span>\"),r.replaceWith(s)):r.replaceWith(w.FE.INVISIBLE_SPACE+w.FE.MARKERS)}h.html.cleanEmptyTags()}else h.node.isEmpty(l.get(0))&&l.is(\"span\")?(r.replaceWith(w.FE.MARKERS),l.css(e,t)):(s=w('<span style=\"'+e+\": \"+t+';\">'+w.FE.INVISIBLE_SPACE+w.FE.MARKERS+\"</span>\"),r.replaceWith(s));s&&v(s,e,t)}else{if(h.selection.save(),null==t||\"color\"==e&&0<h.$el.find(\".fr-marker\").parents(\"u, a\").length){var c=h.$el.find(\".fr-marker\");for(n=0;n<c.length;n++)if(!0===(r=w(c[n])).data(\"type\"))for(;h.node.isFirstSibling(r.get(0))&&!r.parent().is(h.$el)&&!h.node.isElement(r.parent().get(0))&&!h.node.isBlock(r.parent().get(0));)r.parent().before(r);else for(;h.node.isLastSibling(r.get(0))&&!r.parent().is(h.$el)&&!h.node.isElement(r.parent().get(0))&&!h.node.isBlock(r.parent().get(0));)r.parent().after(r)}var f=h.$el.find('.fr-marker[data-type=\"true\"]').get(0).nextSibling,p={\"class\":\"fr-unprocessed\"};for(t&&(p.style=e+\": \"+t+\";\"),m(f,\"span\",p),h.$el.find(\".fr-marker + .fr-unprocessed\").each(function(){w(this).prepend(w(this).prev())}),h.$el.find(\".fr-unprocessed + .fr-marker\").each(function(){w(this).prev().append(this)}),(t||\"\").match(/\\dem$/)&&h.$el.find(\"span.fr-unprocessed\").removeClass(\"fr-unprocessed\");0<h.$el.find(\"span.fr-unprocessed\").length;){if((s=h.$el.find(\"span.fr-unprocessed:first\").removeClass(\"fr-unprocessed\")).parent().get(0).normalize(),s.parent().is(\"span\")&&1==s.parent().get(0).childNodes.length){s.parent().css(e,t);var u=s;s=s.parent(),u.replaceWith(u.html())}var g=s.find(\"span\");for(n=g.length-1;0<=n;n--)o=g[n],i=e,a=void 0,(a=w(o)).css(i,\"\"),\"\"===a.attr(\"style\")&&a.replaceWith(a.html());v(s,e,t)}}!function(){var e;for(;0<h.$el.find(\".fr-split:empty\").length;)h.$el.find(\".fr-split:empty\").remove();h.$el.find(\".fr-split\").removeClass(\"fr-split\"),h.$el.find('[style=\"\"]').removeAttr(\"style\"),h.$el.find('[class=\"\"]').removeAttr(\"class\"),h.html.cleanEmptyTags(),w(h.$el.find(\"span\").get().reverse()).each(function(){this.attributes&&0!==this.attributes.length||w(this).replaceWith(this.innerHTML)}),h.el.normalize();var t=h.$el.find(\"span[style] + span[style]\");for(e=0;e<t.length;e++){var n=w(t[e]),r=w(t[e]).prev();n.get(0).previousSibling==r.get(0)&&h.node.openTagString(n.get(0))==h.node.openTagString(r.get(0))&&(n.prepend(r.html()),r.remove())}h.$el.find(\"span[style] span[style]\").each(function(){if(0<=w(this).attr(\"style\").indexOf(\"font-size\")){var e=w(this).parents(\"span[style]\");0<=e.attr(\"style\").indexOf(\"background-color\")&&(w(this).attr(\"style\",w(this).attr(\"style\")+\";\"+e.attr(\"style\")),E(w(this),\"span[style]\",{},!1))}}),h.el.normalize(),h.selection.restore()}()}function v(e,t,n){var r,o,i,a=e.parentsUntil(h.$el,\"span[style]\"),s=[];for(r=a.length-1;0<=r;r--)o=a[r],i=t,0===w(o).attr(\"style\").indexOf(i+\":\")||0<=w(o).attr(\"style\").indexOf(\";\"+i+\":\")||0<=w(o).attr(\"style\").indexOf(\"; \"+i+\":\")||s.push(a[r]);if((a=a.not(s)).length){for(var l=\"\",d=\"\",c=\"\",f=\"\",p=e.get(0);p=p.parentNode,w(p).addClass(\"fr-split\"),l+=h.node.closeTagString(p),d=h.node.openTagString(w(p).clone().addClass(\"fr-split\").get(0))+d,a.get(0)!=p&&(c+=h.node.closeTagString(p),f=h.node.openTagString(w(p).clone().addClass(\"fr-split\").get(0))+f),a.get(0)!=p;);var u=l+h.node.openTagString(w(a.get(0)).clone().css(t,n||\"\").get(0))+f+e.css(t,\"\").get(0).outerHTML+c+\"</span>\"+d;e.replaceWith('<span id=\"fr-break\"></span>');var g=a.get(0).outerHTML;w(a.get(0)).replaceWith(g.replace(/<span id=\"fr-break\"><\\/span>/g,u))}}function o(e,t){void 0===t&&(t={}),t.style&&delete t.style;var n=h.selection.ranges(0),r=n.startContainer;if(r.nodeType==Node.ELEMENT_NODE&&0<r.childNodes.length&&r.childNodes[n.startOffset]&&(r=r.childNodes[n.startOffset]),!n.collapsed&&r.nodeType==Node.TEXT_NODE&&n.startOffset==(r.textContent||\"\").length){for(;!h.node.isBlock(r.parentNode)&&!r.nextSibling;)r=r.parentNode;r.nextSibling&&(r=r.nextSibling)}for(var o=r;o&&o.nodeType==Node.ELEMENT_NODE&&!p(o,f(e,t));)o=o.firstChild;if(o&&o.nodeType==Node.ELEMENT_NODE&&p(o,f(e,t)))return!0;var i=r;for(i&&i.nodeType!=Node.ELEMENT_NODE&&(i=i.parentNode);i&&i.nodeType==Node.ELEMENT_NODE&&i!=h.el&&!p(i,f(e,t));)i=i.parentNode;return!(!i||i.nodeType!=Node.ELEMENT_NODE||i==h.el||!p(i,f(e,t)))}return{is:o,toggle:function(e,t){o(e,t)?r(e,t):n(e,t)},apply:n,remove:r,applyStyle:t,removeStyle:function(e){t(e,null)}}},w.extend(w.FE.DEFAULTS,{indentMargin:20}),w.FE.COMMANDS={bold:{title:\"Bold\",toggle:!0,refresh:function(e){var t=this.format.is(\"strong\");e.toggleClass(\"fr-active\",t).attr(\"aria-pressed\",t)}},italic:{title:\"Italic\",toggle:!0,refresh:function(e){var t=this.format.is(\"em\");e.toggleClass(\"fr-active\",t).attr(\"aria-pressed\",t)}},underline:{title:\"Underline\",toggle:!0,refresh:function(e){var t=this.format.is(\"u\");e.toggleClass(\"fr-active\",t).attr(\"aria-pressed\",t)}},strikeThrough:{title:\"Strikethrough\",toggle:!0,refresh:function(e){var t=this.format.is(\"s\");e.toggleClass(\"fr-active\",t).attr(\"aria-pressed\",t)}},subscript:{title:\"Subscript\",toggle:!0,refresh:function(e){var t=this.format.is(\"sub\");e.toggleClass(\"fr-active\",t).attr(\"aria-pressed\",t)}},superscript:{title:\"Superscript\",toggle:!0,refresh:function(e){var t=this.format.is(\"sup\");e.toggleClass(\"fr-active\",t).attr(\"aria-pressed\",t)}},outdent:{title:\"Decrease Indent\"},indent:{title:\"Increase Indent\"},undo:{title:\"Undo\",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:\"Redo\",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:\"Insert Horizontal Line\"},clearFormatting:{title:\"Clear Formatting\"},selectAll:{title:\"Select All\",undo:!1}},w.FE.RegisterCommand=function(e,t){w.FE.COMMANDS[e]=t},w.FE.MODULES.commands=function(a){function o(e){return a.html.defaultTag()&&(e=\"<\"+a.html.defaultTag()+\">\"+e+\"</\"+a.html.defaultTag()+\">\"),e}var i={bold:function(){e(\"bold\",\"strong\")},subscript:function(){a.format.is(\"sup\")&&a.format.remove(\"sup\"),e(\"subscript\",\"sub\")},superscript:function(){a.format.is(\"sub\")&&a.format.remove(\"sub\"),e(\"superscript\",\"sup\")},italic:function(){e(\"italic\",\"em\")},strikeThrough:function(){e(\"strikeThrough\",\"s\")},underline:function(){e(\"underline\",\"u\")},undo:function(){a.undo.run()},redo:function(){a.undo.redo()},indent:function(){n(1)},outdent:function(){n(-1)},show:function(){a.opts.toolbarInline&&a.toolbar.showInline(null,!0)},insertHR:function(){a.selection.remove();var e=\"\";a.core.isEmpty()&&(e=o(e=\"<br>\")),a.html.insert('<hr id=\"fr-just\">'+e);var t,n=a.$el.find(\"hr#fr-just\");if(n.removeAttr(\"id\"),0===n.next().length){var r=a.html.defaultTag();r?n.after(w(\"<\"+r+\">\").append(\"<br>\")):n.after(\"<br>\")}n.prev().is(\"hr\")?t=a.selection.setAfter(n.get(0),!1):n.next().is(\"hr\")?t=a.selection.setBefore(n.get(0),!1):a.selection.setAfter(n.get(0),!1)||a.selection.setBefore(n.get(0),!1),t||void 0===t||(e=o(e=w.FE.MARKERS+\"<br>\"),n.after(e)),a.selection.restore()},clearFormatting:function(){a.format.remove()},selectAll:function(){a.doc.execCommand(\"selectAll\",!1,!1)}};function t(e,t){if(!1!==a.events.trigger(\"commands.before\",w.merge([e],t||[]))){var n=w.FE.COMMANDS[e]&&w.FE.COMMANDS[e].callback||i[e],r=!0,o=!1;w.FE.COMMANDS[e]&&(\"undefined\"!=typeof w.FE.COMMANDS[e].focus&&(r=w.FE.COMMANDS[e].focus),\"undefined\"!=typeof w.FE.COMMANDS[e].accessibilityFocus&&(o=w.FE.COMMANDS[e].accessibilityFocus)),(!a.core.hasFocus()&&r&&!a.popups.areVisible()||!a.core.hasFocus()&&o&&a.accessibility.hasFocus())&&a.events.focus(!0),w.FE.COMMANDS[e]&&!1!==w.FE.COMMANDS[e].undo&&(a.$el.find(\".fr-marker\").length&&(a.events.disableBlur(),a.selection.restore()),a.undo.saveStep()),n&&n.apply(a,w.merge([e],t||[])),a.events.trigger(\"commands.after\",w.merge([e],t||[])),w.FE.COMMANDS[e]&&!1!==w.FE.COMMANDS[e].undo&&a.undo.saveStep()}}function e(e,t){a.format.toggle(t)}function n(e){a.selection.save(),a.html.wrap(!0,!0,!0,!0),a.selection.restore();for(var t=a.selection.blocks(),n=0;n<t.length;n++)if(\"LI\"!=t[n].tagName&&\"LI\"!=t[n].parentNode.tagName){var r=w(t[n]),o=\"rtl\"==a.opts.direction||\"rtl\"==r.css(\"direction\")?\"margin-right\":\"margin-left\",i=a.helpers.getPX(r.css(o));if(r.width()<2*a.opts.indentMargin&&0<e)continue;r.css(o,Math.max(i+e*a.opts.indentMargin,0)||\"\"),r.removeClass(\"fr-temp-div\")}a.selection.save(),a.html.unwrap(),a.selection.restore()}function r(e){return function(){t(e)}}var s={};for(var l in i)i.hasOwnProperty(l)&&(s[l]=r(l));return w.extend(s,{exec:t,_init:function(){a.events.on(\"keydown\",function(e){var t=a.selection.element();if(t&&\"HR\"==t.tagName&&!a.keys.isArrow(e.which))return e.preventDefault(),!1}),a.events.on(\"keyup\",function(e){var t=a.selection.element();if(t&&\"HR\"==t.tagName)if(e.which==w.FE.KEYCODE.ARROW_LEFT||e.which==w.FE.KEYCODE.ARROW_UP){if(t.previousSibling)return a.node.isBlock(t.previousSibling)?a.selection.setAtEnd(t.previousSibling):w(t).before(w.FE.MARKERS),a.selection.restore(),!1}else if((e.which==w.FE.KEYCODE.ARROW_RIGHT||e.which==w.FE.KEYCODE.ARROW_DOWN)&&t.nextSibling)return a.node.isBlock(t.nextSibling)?a.selection.setAtStart(t.nextSibling):w(t).after(w.FE.MARKERS),a.selection.restore(),!1}),a.events.on(\"mousedown\",function(e){if(e.target&&\"HR\"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),a.events.on(\"mouseup\",function(){var e=a.selection.element();e==a.selection.endElement()&&e&&\"HR\"==e.tagName&&(e.nextSibling&&(a.node.isBlock(e.nextSibling)?a.selection.setAtStart(e.nextSibling):w(e).after(w.FE.MARKERS)),a.selection.restore())})}})},w.FE.MODULES.data=function(p){var u=\"NCKB1zwtPA9tqzajXC2c2A7B-16VD3spzJ1C9C3D5oOF2OB1NB1LD7VA5QF4TE3gytXB2A4C-8VA2AC4E1D3GB2EB2KC3KD1MF1juuSB1A8C6yfbmd1B2a1A5qdsdB2tivbC3CB1KC1CH1eLA2sTF1B4I4H-7B-21UB6b1F5bzzzyAB4JC3MG2hjdKC1JE6C1E1cj1pD-16pUE5B4prra2B5ZB3D3C3pxj1EA6A3rnJA2C-7I-7JD9D1E1wYH1F3sTB5TA2G4H4ZA22qZA5BB3mjcvcCC3JB1xillavC-21VE6PC5SI4YC5C8mb1A3WC3BD2B5aoDA2qqAE3A5D-17fOD1D5RD4WC10tE6OAZC3nF-7b1C4A4D3qCF2fgmapcromlHA2QA6a1E1D3e1A6C2bie2F4iddnIA7B2mvnwcIB5OA1DB2OLQA3PB10WC7WC5d1E3uI-7b1D5D6b1E4D2arlAA4EA1F-11srxI-7MB1D7PF1E5B4adB-21YD5vrZH3D3xAC4E1A2GF2CF2J-7yNC2JE1MI2hH-7QB1C6B5B-9bA-7XB13a1B5VievwpKB4LA3NF-10H-9I-8hhaC-16nqPG4wsleTD5zqYF3h1G2B7B4yvGE2Pi1H-7C-21OE6B1uLD1kI4WC1E7C5g1D-8fue1C8C6c1D4D3Hpi1CC4kvGC2E1legallyXB4axVA11rsA4A-9nkdtlmzBA2GD3A13A6CB1dabE1lezrUE6RD5TB4A-7f1C8c1B5d1D4D3tyfCD5C2D2==\",g=function(){for(var e=0,t=document.domain,n=t.split(\".\"),r=\"_gd\"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(r+\"=\"+r);)t=n.slice(-1-++e).join(\".\"),document.cookie=r+\"=\"+r+\";domain=\"+t+\";\";return document.cookie=r+\"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=\"+t+\";\",(t||\"\").replace(/(^\\.*)|(\\.*$)/g,\"\")}();function h(e){return e}var m,E,v=h(function(e){if(!e)return e;for(var t=\"\",n=h(\"charCodeAt\"),r=h(\"fromCharCode\"),o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".indexOf(e[0]),i=1;i<e.length-2;i++){for(var a=d(++o),s=e[n](i),l=\"\";/[0-9-]/.test(e[i+1]);)l+=e[++i];s=c(s,a,l=parseInt(l,10)||0),s^=o-1&31,t+=String[r](s)}return t});function d(e){for(var t=e.toString(),n=0,r=0;r<t.length;r++)n+=parseInt(t.charAt(r),10);return 10<n?n%9+1:n}function c(e,t,n){for(var r=Math.abs(n);0<r--;)e-=t;return n<0&&(e+=123),e}function b(e){return e&&\"block\"!==e.css(\"display\")?(e.remove(),!0):e&&0===p.helpers.getPX(e.css(\"height\"))?(e.remove(),!0):!(!e||\"absolute\"!==e.css(\"position\")&&\"fixed\"!==e.css(\"position\")||(e.remove(),0))}function S(e){return e&&0===p.$box.find(e).length}var e=0;function T(){if(10<e&&(p[h(v(\"0ppecjvc==\"))](),setTimeout(function(){w.FE=null},10)),!p.$box)return!1;p.$wp.prepend(v(h(v(u)))),m=p.$wp.find(\"> div:first\"),E=m.find(\"> a\"),\"rtl\"==p.opts.direction&&m.css(\"left\",\"auto\").css(\"right\",0).attr(\"direction\",\"rtl\"),e++}function y(e){for(var t=[v(\"9qqG-7amjlwq==\"),v(\"KA3B3C2A6D1D5H5H1A3==\"),v(\"3B9B3B5F3C4G3E3==\"),v(\"QzbzvxyB2yA-9m==\"),v(\"ji1kacwmgG5bc==\"),v(\"nmA-13aogi1A3c1jd==\"),v(\"BA9ggq==\"),v(\"emznbjbH3fij==\"),v(\"tkC-22d1qC-13sD1wzF-7==\")],n=0;n<t.length;n++)if(String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(t===undefined||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),e.endsWith(t[n]))return!0;return!1}return{_init:function(){var e=p.o_win.FEK;try{e=e||localStorage&&localStorage.FEK}catch(f){}e=p.opts.key||e||[\"\"];var t=v(h(\"ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9==\"));\"string\"==typeof e&&(e=[e]);for(var n,r,o,i=!(p.ul=!0),a=0,s=0;s<e.length;s++){var l=(r=e[s],3===(o=(v(r)||\"\").split(\"|\")).length?o:[null,null,v(r)||\"\"]),d=l[2];if(d===v(h(v(\"mcVRDoB1BGILD7YFe1BTXBA7B6==\")))||0<=d.indexOf(g,d.length-g.length)||y(g)){if(!((null===(n=l[1])||new Date(n)<new Date(v(\"fA4B3E3C1I3H2C6C6C3E4==\")))&&0<(g||\"\").length)||y(g)){p.ul=!1;break}i=!0,u=\"RCZB17botVG4A-8yzia1C4A5DG3CD2cFB4qflmCE4I2FB1SC7F6PE4WE3RD6e2A4c1D3d1E2E3ehxdGE3CE2IB2LC1HG2LE1QA3QC7B-13cC-9epmkjc1B4e1C4pgjgvkOC5E1eNE1HB2LD2B-13WD5tvabUA5a1A4f1A2G3C2A-21cihKE3FE2DB2cccJE1iC-7G-7tD-17tVD6A-9qC-7QC7a1E4B4je1E3E2G2ecmsAA1xH-8HB11C1D1lgzQA3dTB8od1D4XE3ohb1B4E4D3mbLA10NA7C-21d1genodKC11PD9PE5tA-8UI3ZC5XB5B-11qXF2F-7wtwjAG3NA1IB1OD1HC1RD4QJ4evUF2D5XG2G4XA8pqocH1F3G2J2hcpHC4D1MD4C1MB8PD5klcQD1A8A6e2A3ed1E2A24A7HC5C3qA-9tiA-61dcC3MD1LE1D4SA3A9ZZXSE4g1C3Pa2C5ufbcGI3I2B4skLF2CA1vxB-22wgUC4kdH-8cVB5iwe1A2D3H3G-7DD5JC2ED2OH2JB10D3C2xHE1KA29PB11wdC-11C4cixb2C7a1C4YYE3B2A15uB-21wpCA1MF1NuC-21dyzD6pPG4I-7pmjc1A4yte1F3B-22yvCC3VbC-7qC-22qNE2hC1vH-8zad1RF6WF3DpI-7C8A-16hpf1F3D2ylalB-13BB2lpA-63IB3uOF6D5G4gabC-21UD2A3PH4ZA20B11b2C6ED4A2H3I1A15DB4KD2laC-8LA5B8B7==\",a=l[0]||-1}}var c=new Image;!0===p.ul&&(T(),c.src=i?h(v(t))+\"e=\"+a:h(v(t))+\"u\"),!0===p.ul&&(p.events.on(\"contentChanged\",function(){(b(m)||b(E)||S(m)||S(E))&&T()}),p.events.on(\"html.get\",function(e){return e+'<p data-f-id=\"pbf\" style=\"text-align: center; font-size: 14px; margin-top: 30px; opacity: 0.65; font-family: sans-serif;\">Powered by <a href=\"https://www.froala.com/wysiwyg-editor?pb=1\" title=\"Froala Editor\">Froala Editor</a></p>'})),p.events.on(\"html.set\",function(){var e=p.el.querySelector('[data-f-id=\"pbf\"]');e&&w(e).remove()}),p.events.on(\"destroy\",function(){m&&m.length&&m.remove()},!0)}}},w.extend(w.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:[\"colgroup\",\"col\",\"meta\"],pasteDeniedAttrs:[\"class\",\"id\",\"style\"],pasteAllowedStyleProps:[\".*\"],pasteAllowLocalImages:!1}),w.FE.MODULES.paste=function(C){var A,a,o,x;function n(e,t){try{C.win.localStorage.setItem(\"fr-copied-html\",e),C.win.localStorage.setItem(\"fr-copied-text\",t)}catch(n){}}function e(e){var t=C.html.getSelected();n(t,w(\"<div>\").html(t).text()),\"cut\"==e.type&&(C.undo.saveStep(),setTimeout(function(){C.selection.save(),C.html.wrap(),C.selection.restore(),C.events.focus(),C.undo.saveStep()},0))}var i=!1;function t(e){if(C.edit.isDisabled())return!1;if(i)return!1;if(e.originalEvent&&(e=e.originalEvent),!1===C.events.trigger(\"paste.before\",[e]))return e.preventDefault(),!1;if(C.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var t=\"\",n=e.clipboardData.types;if(C.helpers.isArray(n))for(var r=0;r<n.length;r++)t+=n[r]+\";\";else t=n;if(A=\"\",/text\\/rtf/.test(t)&&(a=e.clipboardData.getData(\"text/rtf\")),/text\\/html/.test(t)&&!C.browser.safari?A=e.clipboardData.getData(\"text/html\"):/text\\/rtf/.test(t)&&C.browser.safari?A=a:/public.rtf/.test(t)&&C.browser.safari&&(A=e.clipboardData.getData(\"text/rtf\")),\"\"!==A)return s(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;A=null}return function(){C.selection.save(),C.events.disableBlur(),A=null,o?(o.html(\"\"),C.browser.edge&&C.opts.iframe&&C.$el.append(o)):(o=w('<div contenteditable=\"true\" style=\"position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%; -moz-user-select: text; -webkit-user-select: text; -ms-user-select: text; user-select: text;\" tabIndex=\"-1\"></div>'),C.browser.webkit||C.browser.mozilla?(o.css(\"top\",C.$sc.scrollTop()),C.$el.after(o)):C.browser.edge&&C.opts.iframe?C.$el.append(o):C.$box.after(o),C.events.on(\"destroy\",function(){o.remove()}));var e;C.helpers.isIOS()&&C.$sc&&(e=C.$sc.scrollTop());C.opts.iframe&&C.$el.attr(\"contenteditable\",\"false\");o.focus(),C.helpers.isIOS()&&C.$sc&&C.$sc.scrollTop(e);C.win.setTimeout(s,1)}(),!1}function r(e){if(e.originalEvent&&(e=e.originalEvent),e&&e.dataTransfer&&e.dataTransfer.getData){var t=\"\",n=e.dataTransfer.types;if(C.helpers.isArray(n))for(var r=0;r<n.length;r++)t+=n[r]+\";\";else t=n;if(A=\"\",/text\\/rtf/.test(t)&&(a=e.dataTransfer.getData(\"text/rtf\")),/text\\/html/.test(t)?A=e.dataTransfer.getData(\"text/html\"):/text\\/rtf/.test(t)&&C.browser.safari?A=a:/text\\/plain/.test(t)&&!this.browser.mozilla&&(A=C.html.escapeEntities(e.dataTransfer.getData(\"text/plain\")).replace(/\\n/g,\"<br>\")),\"\"!==A){C.keys.forceUndo(),x=C.snapshot.get(),C.selection.save(),C.$el.find(\".fr-marker\").removeClass(\"fr-marker\").addClass(\"fr-marker-helper\");var o=C.markers.insertAtPoint(e);if(C.$el.find(\".fr-marker\").removeClass(\"fr-marker\").addClass(\"fr-marker-placeholder\"),C.$el.find(\".fr-marker-helper\").addClass(\"fr-marker\").removeClass(\"fr-marker-helper\"),C.selection.restore(),C.selection.remove(),C.$el.find(\".fr-marker-placeholder\").addClass(\"fr-marker\").removeClass(\"fr-marker-placeholder\"),!1!==o){var i=C.el.querySelector(\".fr-marker\");return w(i).replaceWith(w.FE.MARKERS),C.selection.restore(),s(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1}}else A=null}}function s(){C.opts.iframe&&C.$el.attr(\"contenteditable\",\"true\"),C.browser.edge&&C.opts.iframe&&C.$box.after(o),x||(C.keys.forceUndo(),x=C.snapshot.get()),A||(A=o.get(0).innerHTML,C.selection.restore(),C.events.enableBlur());var e=A.match(/(class=\\\"?Mso|class=\\'?Mso|class=\"?Xl|class='?Xl|class=Xl|style=\\\"[^\\\"]*\\bmso\\-|style=\\'[^\\']*\\bmso\\-|w:WordDocument)/gi),t=C.events.chainTrigger(\"paste.beforeCleanup\",A);t&&\"string\"==typeof t&&(A=t),(!e||e&&!1!==C.events.trigger(\"paste.wordPaste\",[A]))&&l(A,e)}function $(e){for(var t=\"\",n=0;n++<e;)t+=\"&nbsp;\";return t}function l(r,e,t){var n,o=null,i=null;if(0<=r.toLowerCase().indexOf(\"<body\")){var a=\"\";0<=r.indexOf(\"<style\")&&(a=r.replace(/[.\\s\\S\\w\\W<>]*(<style[^>]*>[\\s]*[.\\s\\S\\w\\W<>]*[\\s]*<\\/style>)[.\\s\\S\\w\\W<>]*/gi,\"$1\")),r=a+r.replace(/[.\\s\\S\\w\\W<>]*<body[^>]*>[\\s]*([.\\s\\S\\w\\W<>]*)[\\s]*<\\/body>[.\\s\\S\\w\\W<>]*/gi,\"$1\");var s=0,l=\"\";r.replace(/<pre.*?>([\\s\\S]*?)<\\/pre>/gi,function(e,t,n){s<n&&(l+=r.substring(s,n).replace(/ \\n/g,\" \").replace(/\\n /g,\" \").replace(/([^>])\\n([^<])/g,\"$1 $2\")),l+=e,s=n+e.length}),r.length>s+1&&(l+=r.substring(s,r.length).replace(/ \\n/g,\" \").replace(/\\n /g,\" \").replace(/([^>])\\n([^<])/g,\"$1 $2\")),r=l}var d=!1;0<=r.indexOf('id=\"docs-internal-guid')&&(r=r.replace(/^[\\w\\W\\s\\S]* id=\"docs-internal-guid[^>]*>([\\w\\W\\s\\S]*)<\\/b>[\\w\\W\\s\\S]*$/g,\"$1\"),d=!0),0<=r.indexOf('content=\"Sheets\"')&&(r=r.replace(/width:0px;/g,\"\"));var c=!1,f=!1;if(!e)if(c=function(e){var t=null;try{t=C.win.localStorage.getItem(\"fr-copied-text\")}catch(n){}return!(!t||w(\"<div>\").html(e).text().replace(/\\u00A0/gi,\" \").replace(/\\r|\\n/gi,\"\")!=t.replace(/\\u00A0/gi,\" \").replace(/\\r|\\n/gi,\"\"))}(r),f=function(){var e=null;try{e=C.win.localStorage.getItem(\"fr-dragged-content-text\")}catch(t){}return!(!e||w(\"<div>\").html(A).text().replace(/\\u00A0/gi,\" \").replace(/\\r|\\n/gi,\"\")!=e.replace(/\\u00A0/gi,\" \").replace(/\\r|\\n/gi,\"\"))}(),c&&(r=C.win.localStorage.getItem(\"fr-copied-html\")),f&&(c=!0,r=C.win.localStorage.getItem(\"fr-dragged-content-html\")),c)r=C.clean.html(r,C.opts.pasteDeniedTags,C.opts.pasteDeniedAttrs);else{var p=C.opts.htmlAllowedStyleProps;C.opts.htmlAllowedStyleProps=C.opts.pasteAllowedStyleProps,C.opts.htmlAllowComments=!1,r=(r=(r=r.replace(/<span class=\"Apple-tab-span\">\\s*<\\/span>/g,$(C.opts.tabSpaces||4))).replace(/<span class=\"Apple-tab-span\" style=\"white-space:pre\">(\\t*)<\\/span>/g,function(e,t){return $(t.length*(C.opts.tabSpaces||4))})).replace(/\\t/g,$(C.opts.tabSpaces||4)),r=C.clean.html(r,C.opts.pasteDeniedTags,C.opts.pasteDeniedAttrs),C.opts.htmlAllowedStyleProps=p,C.opts.htmlAllowComments=!0,r=(r=(r=O(r)).replace(/\\r/g,\"\")).replace(/^ */g,\"\").replace(/ *$/g,\"\")}!e||C.wordPaste&&t||(0===(r=r.replace(/^\\n*/g,\"\").replace(/^ /g,\"\")).indexOf(\"<colgroup>\")&&(r=\"<table>\"+r+\"</table>\"),r=O(r=function(e){var t;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p(.*?)class=\"?'?MsoListParagraph\"?'? ([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<ul><li>$3</li></ul>\")).replace(/<p(.*?)class=\"?'?NumberedText\"?'? ([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<ol><li>$3</li></ol>\")).replace(/<p(.*?)class=\"?'?MsoListParagraphCxSpFirst\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<ul><li$3>$5</li>\")).replace(/<p(.*?)class=\"?'?NumberedTextCxSpFirst\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<ol><li$3>$5</li>\")).replace(/<p(.*?)class=\"?'?MsoListParagraphCxSpMiddle\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<li$3>$5</li>\")).replace(/<p(.*?)class=\"?'?NumberedTextCxSpMiddle\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<li$3>$5</li>\")).replace(/<p(.*?)class=\"?'?MsoListBullet\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<li$3>$5</li>\")).replace(/<p(.*?)class=\"?'?MsoListParagraphCxSpLast\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<li$3>$5</li></ul>\")).replace(/<p(.*?)class=\"?'?NumberedTextCxSpLast\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\"<li$3>$5</li></ol>\")).replace(/<span([^<]*?)style=\"?'?mso-list:Ignore\"?'?([\\s\\S]*?)>([\\s\\S]*?)<span/gi,\"<span><span\")).replace(/<!--\\[if \\!supportLists\\]-->([\\s\\S]*?)<!--\\[endif\\]-->/gi,\"\")).replace(/<!\\[if \\!supportLists\\]>([\\s\\S]*?)<!\\[endif\\]>/gi,\"\")).replace(/(\\n|\\r| class=(\")?Mso[a-zA-Z0-9]+(\")?)/gi,\" \")).replace(/<!--[\\s\\S]*?-->/gi,\"\")).replace(/<(\\/)*(meta|link|span|\\\\?xml:|st1:|o:|font)(.*?)>/gi,\"\");var n,r=[\"style\",\"script\",\"applet\",\"embed\",\"noframes\",\"noscript\"];for(t=0;t<r.length;t++){var o=new RegExp(\"<\"+r[t]+\".*?\"+r[t]+\"(.*?)>\",\"gi\");e=e.replace(o,\"\")}for(e=(e=(e=e.replace(/&nbsp;/gi,\" \")).replace(/<td([^>]*)><\\/td>/g,\"<td$1><br></td>\")).replace(/<th([^>]*)><\\/th>/g,\"<th$1><br></th>\");(e=(n=e).replace(/<[^\\/>][^>]*><\\/[^>]+>/gi,\"\"))!=n;);e=(e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent=\"true\"$2>')).replace(/<lilevel1([^>]*)>/gi,\"<li$1>\"),e=(e=(e=C.clean.html(e,C.opts.pasteDeniedTags,C.opts.pasteDeniedAttrs)).replace(/<a>(.[^<]+)<\\/a>/gi,\"$1\")).replace(/<br> */g,\"<br>\");var i=C.o_doc.createElement(\"div\");i.innerHTML=e;var a=i.querySelectorAll(\"li[data-indent]\");for(t=0;t<a.length;t++){var s=a[t],l=s.previousElementSibling;if(l&&\"LI\"==l.tagName){var d=l.querySelector(\":scope > ul, :scope > ol\");d||(d=document.createElement(\"ul\"),l.appendChild(d)),d.appendChild(s)}else s.removeAttribute(\"data-indent\")}return C.html.cleanBlankSpaces(i),e=i.innerHTML}(r))),C.opts.pastePlain&&!c&&(r=function(e){var t,n=null,r=C.doc.createElement(\"div\");r.innerHTML=e;var o=r.querySelectorAll(\"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote\");for(t=0;t<o.length;t++)(n=o[t]).outerHTML=\"<\"+(C.html.defaultTag()||\"DIV\")+\">\"+n.innerHTML+\"</\"+(C.html.defaultTag()||\"DIV\")+\">\";for(t=(o=r.querySelectorAll(\"*:not(\"+\"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img\".split(\",\").join(\"):not(\")+\")\")).length-1;0<=t;t--)(n=o[t]).outerHTML=n.innerHTML;var i=function(e){for(var t=C.node.contents(e),n=0;n<t.length;n++)t[n].nodeType!=Node.TEXT_NODE&&t[n].nodeType!=Node.ELEMENT_NODE?t[n].parentNode.removeChild(t[n]):i(t[n])};return i(r),r.innerHTML}(r));var u=C.events.chainTrigger(\"paste.afterCleanup\",r);if(\"string\"==typeof u&&(r=u),\"\"!==r){var g=C.o_doc.createElement(\"div\");0<=(g.innerHTML=r).indexOf(\"<body>\")?(C.html.cleanBlankSpaces(g),C.spaces.normalize(g,!0)):C.spaces.normalize(g);var h=g.getElementsByTagName(\"span\");for(n=h.length-1;0<=n;n--){var m=h[n];0===m.attributes.length&&(m.outerHTML=m.innerHTML)}if(!0===C.opts.linkAlwaysBlank){var E=g.getElementsByTagName(\"a\");for(n=E.length-1;0<=n;n--){var v=E[n];v.getAttribute(\"target\")||v.setAttribute(\"target\",\"_blank\")}}var b=C.selection.element(),S=!1;if(b&&w(b).parentsUntil(C.el,\"ul, ol\").length&&(S=!0),S){var T=g.children;1==T.length&&0<=[\"OL\",\"UL\"].indexOf(T[0].tagName)&&(T[0].outerHTML=T[0].innerHTML)}if(!d){var y=g.getElementsByTagName(\"br\");for(n=y.length-1;0<=n;n--){var N=y[n];C.node.isBlock(N.previousSibling)&&N.parentNode.removeChild(N)}}if(C.opts.enter==w.FE.ENTER_BR)for(n=(o=g.querySelectorAll(\"p, div\")).length-1;0<=n;n--)0===(i=o[n]).attributes.length&&(i.outerHTML=i.innerHTML+(i.nextSibling&&!C.node.isEmpty(i)?\"<br>\":\"\"));else if(C.opts.enter==w.FE.ENTER_DIV)for(n=(o=g.getElementsByTagName(\"p\")).length-1;0<=n;n--)0===(i=o[n]).attributes.length&&(i.outerHTML=\"<div>\"+i.innerHTML+\"</div>\");else C.opts.enter==w.FE.ENTER_P&&1==g.childNodes.length&&\"P\"==g.childNodes[0].tagName&&0===g.childNodes[0].attributes.length&&(g.childNodes[0].outerHTML=g.childNodes[0].innerHTML);r=g.innerHTML,c&&(r=function(e){var t,n=C.o_doc.createElement(\"div\");n.innerHTML=e;var r=n.querySelectorAll(\"*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not(\"+w.FE.VOID_ELEMENTS.join(\"):not(\")+\"):not(\"+C.opts.htmlAllowedEmptyTags.join(\"):not(\")+\")\");for(;r.length;){for(t=0;t<r.length;t++)r[t].parentNode.removeChild(r[t]);r=n.querySelectorAll(\"*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not(\"+w.FE.VOID_ELEMENTS.join(\"):not(\")+\"):not(\"+C.opts.htmlAllowedEmptyTags.join(\"):not(\")+\")\")}return n.innerHTML}(r)),C.html.insert(r,!0)}C.events.trigger(\"paste.after\"),C.undo.saveStep(x),x=null,C.undo.saveStep()}function d(e){for(var t=e.length-1;0<=t;t--)e[t].attributes&&e[t].attributes.length&&e.splice(t,1);return e}function O(e){var t,n=C.o_doc.createElement(\"div\");n.innerHTML=e;for(var r=d(Array.prototype.slice.call(n.querySelectorAll(\":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])\")));r.length;){var o=r[r.length-1];if(C.html.defaultTag()&&\"div\"!=C.html.defaultTag())o.querySelector(C.html.blockTagsQuery())?o.outerHTML=o.innerHTML:o.outerHTML=\"<\"+C.html.defaultTag()+\">\"+o.innerHTML+\"</\"+C.html.defaultTag()+\">\";else{var i=o.querySelectorAll(\"*\");!i.length||\"BR\"!==i[i.length-1].tagName&&0===o.innerText.length?o.outerHTML=o.innerHTML+(o.nextSibling?\"<br>\":\"\"):!i.length||\"BR\"!==i[i.length-1].tagName||i[i.length-1].nextSibling?o.outerHTML=o.innerHTML+(o.nextSibling?\"<br>\":\"\"):o.outerHTML=o.innerHTML}r=d(Array.prototype.slice.call(n.querySelectorAll(\":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])\")))}for(r=d(Array.prototype.slice.call(n.querySelectorAll(\"div:not([style])\")));r.length;){for(t=0;t<r.length;t++){var a=r[t],s=a.innerHTML.replace(/\\u0009/gi,\"\").trim();try{a.outerHTML=s}catch(l){}}r=d(Array.prototype.slice.call(n.querySelectorAll(\"div:not([style])\")))}return n.innerHTML}function c(e){if(e.originalEvent&&e.originalEvent.target&&e.originalEvent.target.nodeType==Node.TEXT_NODE)try{C.win.localStorage.setItem(\"fr-dragged-content-html\",e.originalEvent.dataTransfer.getData(\"text/html\")),C.win.localStorage.setItem(\"fr-dragged-content-text\",e.originalEvent.dataTransfer.getData(\"text/plain\"))}catch(t){}}function f(){C.el.removeEventListener(\"copy\",e),C.el.removeEventListener(\"cut\",e),C.el.removeEventListener(\"paste\",t)}return{_init:function(){C.el.addEventListener(\"copy\",e),C.el.addEventListener(\"cut\",e),C.el.addEventListener(\"paste\",t,{capture:!0}),C.events.on(\"drop\",r),C.browser.msie&&C.browser.version<11&&(C.events.on(\"mouseup\",function(e){2==e.button&&(setTimeout(function(){i=!1},50),i=!0)},!0),C.events.on(\"beforepaste\",t)),C.events.on(\"dragstart\",c,!0),C.events.on(\"destroy\",f)},cleanEmptyTagsAndDivs:O,getRtfClipboard:function(){return a},saveCopiedText:n,clean:l}},w.extend(w.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),w.FE.SHORTCUTS_MAP={},w.FE.RegisterShortcut=function(e,t,n,r,o,i){w.FE.SHORTCUTS_MAP[(o?\"^\":\"\")+(i?\"@\":\"\")+e]={cmd:t,val:n,letter:r,shift:o,option:i},w.FE.DEFAULTS.shortcutsEnabled.push(t)},w.FE.RegisterShortcut(w.FE.KEYCODE.E,\"show\",null,\"E\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.B,\"bold\",null,\"B\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.I,\"italic\",null,\"I\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.U,\"underline\",null,\"U\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.S,\"strikeThrough\",null,\"S\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.CLOSE_SQUARE_BRACKET,\"indent\",null,\"]\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.OPEN_SQUARE_BRACKET,\"outdent\",null,\"[\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.Z,\"undo\",null,\"Z\",!1,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.Z,\"redo\",null,\"Z\",!0,!1),w.FE.RegisterShortcut(w.FE.KEYCODE.Y,\"redo\",null,\"Y\",!1,!1),w.FE.MODULES.shortcuts=function(s){var r=null;var l=!1;function e(e){if(!s.core.hasFocus())return!0;var t=e.which,n=-1!=navigator.userAgent.indexOf(\"Mac OS X\")?e.metaKey:e.ctrlKey;if(\"keyup\"==e.type&&l&&t!=w.FE.KEYCODE.META)return l=!1;\"keydown\"==e.type&&(l=!1);var r=(e.shiftKey?\"^\":\"\")+(e.altKey?\"@\":\"\")+t;if(n&&w.FE.SHORTCUTS_MAP[r]){var o=w.FE.SHORTCUTS_MAP[r].cmd;if(o&&0<=s.opts.shortcutsEnabled.indexOf(o)){var i,a=w.FE.SHORTCUTS_MAP[r].val;if(o&&!a?i=s.$tb.find('.fr-command[data-cmd=\"'+o+'\"]'):o&&a&&(i=s.$tb.find('.fr-command[data-cmd=\"'+o+'\"][data-param1=\"'+a+'\"]')),i.length)return e.preventDefault(),e.stopPropagation(),i.parents(\".fr-toolbar\").data(\"instance\",s),\"keydown\"==e.type&&(s.button.exec(i),l=!0),!1;if(o&&(s.commands[o]||w.FE.COMMANDS[o]&&w.FE.COMMANDS[o].callback))return e.preventDefault(),e.stopPropagation(),\"keydown\"==e.type&&((s.commands[o]||w.FE.COMMANDS[o].callback)(),l=!0),!1}}}return{_init:function(){s.events.on(\"keydown\",e,!0),s.events.on(\"keyup\",e,!0)},get:function(e){if(!s.opts.shortcutsHint)return null;if(!r)for(var t in r={},w.FE.SHORTCUTS_MAP)w.FE.SHORTCUTS_MAP.hasOwnProperty(t)&&0<=s.opts.shortcutsEnabled.indexOf(w.FE.SHORTCUTS_MAP[t].cmd)&&(r[w.FE.SHORTCUTS_MAP[t].cmd+\".\"+(w.FE.SHORTCUTS_MAP[t].val||\"\")]={shift:w.FE.SHORTCUTS_MAP[t].shift,option:w.FE.SHORTCUTS_MAP[t].option,letter:w.FE.SHORTCUTS_MAP[t].letter});var n=r[e];return n?(s.helpers.isMac()?String.fromCharCode(8984):s.language.translate(\"Ctrl\")+\"+\")+(n.shift?s.helpers.isMac()?String.fromCharCode(8679):s.language.translate(\"Shift\")+\"+\":\"\")+(n.option?s.helpers.isMac()?String.fromCharCode(8997):s.language.translate(\"Alt\")+\"+\":\"\")+n.letter:null}}},w.FE.MODULES.snapshot=function(l){function n(e){for(var t=e.parentNode.childNodes,n=0,r=null,o=0;o<t.length;o++){if(r){var i=t[o].nodeType===Node.TEXT_NODE&&\"\"===t[o].textContent,a=r.nodeType===Node.TEXT_NODE&&t[o].nodeType===Node.TEXT_NODE,s=r.nodeType===Node.TEXT_NODE&&\"\"===r.textContent;i||a||s||n++}if(t[o]==e)return n;r=t[o]}}function o(e){var t=[];if(!e.parentNode)return[];for(;!l.node.isElement(e);)t.push(n(e)),e=e.parentNode;return t.reverse()}function i(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function d(e){for(var t=l.el,n=0;n<e.length;n++)t=t.childNodes[e[n]];return t}function r(e,t){try{var n=d(t.scLoc),r=t.scOffset,o=d(t.ecLoc),i=t.ecOffset,a=l.doc.createRange();a.setStart(n,r),a.setEnd(o,i),e.addRange(a)}catch(s){console.warn(s)}}return{get:function(){var e,t={};if(l.events.trigger(\"snapshot.before\"),t.html=(l.$wp?l.$el.html():l.$oel.get(0).outerHTML).replace(/ style=\"\"/g,\"\"),t.ranges=[],l.$wp&&l.selection.inEditor()&&l.core.hasFocus())for(var n=l.selection.ranges(),r=0;r<n.length;r++)t.ranges.push({scLoc:o((e=n[r]).startContainer),scOffset:i(e.startContainer,e.startOffset),ecLoc:o(e.endContainer),ecOffset:i(e.endContainer,e.endOffset)});return l.events.trigger(\"snapshot.after\",[t]),t},restore:function(e){l.$el.html()!=e.html&&(l.opts.htmlExecuteScripts?l.$el.html(e.html):l.el.innerHTML=e.html);var t=l.selection.get();l.selection.clear(),l.events.focus(!0);for(var n=0;n<e.ranges.length;n++)r(t,e.ranges[n])},equal:function(e,t){return e.html==t.html&&(!l.core.hasFocus()||JSON.stringify(e.ranges)==JSON.stringify(t.ranges))}}},w.FE.MODULES.undo=function(n){function e(e){var t=e.which;n.keys.ctrlKey(e)&&(90==t&&e.shiftKey&&e.preventDefault(),90==t&&e.preventDefault())}var t=null;function r(){if(!n.undo_stack||n.undoing)return!1;for(;n.undo_stack.length>n.undo_index;)n.undo_stack.pop()}function o(){t=(n.$wp?n.$el.html():n.$oel.get(0).outerHTML).replace(/ style=\"\"/g,\"\"),n.undo_index=0,n.undo_stack=[]}function i(){n.undo_stack=[]}return{_init:function(){o(),n.events.on(\"initialized\",function(){t=(n.$wp?n.$el.html():n.$oel.get(0).outerHTML).replace(/ style=\"\"/g,\"\")}),n.events.on(\"blur\",function(){n.el.querySelector(\".fr-dragging\")||n.undo.saveStep()}),n.events.on(\"keydown\",e),n.events.on(\"destroy\",i)},run:function(){if(1<n.undo_index){n.undoing=!0;var e=n.undo_stack[--n.undo_index-1];clearTimeout(n._content_changed_timer),n.snapshot.restore(e),t=e.html,n.popups.hideAll(),n.toolbar.enable(),n.events.trigger(\"contentChanged\"),n.events.trigger(\"commands.undo\"),n.undoing=!1}},redo:function(){if(n.undo_index<n.undo_stack.length){n.undoing=!0;var e=n.undo_stack[n.undo_index++];clearTimeout(n._content_changed_timer),n.snapshot.restore(e),t=e.html,n.popups.hideAll(),n.toolbar.enable(),n.events.trigger(\"contentChanged\"),n.events.trigger(\"commands.redo\"),n.undoing=!1}},canDo:function(){return!(0===n.undo_stack.length||n.undo_index<=1)},canRedo:function(){return n.undo_index!=n.undo_stack.length},dropRedo:r,reset:o,saveStep:function(e){if(!n.undo_stack||n.undoing||n.el.querySelector(\".fr-marker\"))return!1;void 0===e?(e=n.snapshot.get(),n.undo_stack[n.undo_index-1]&&n.snapshot.equal(n.undo_stack[n.undo_index-1],e)||(r(),n.undo_stack.push(e),n.undo_index++,e.html!=t&&(n.events.trigger(\"contentChanged\"),t=e.html))):(r(),0<n.undo_index?n.undo_stack[n.undo_index-1]=e:(n.undo_stack.push(e),n.undo_index++))}}},w.FE.ICON_TEMPLATES={font_awesome:'<i class=\"fa fa-[NAME]\" aria-hidden=\"true\"></i>',font_awesome_5:'<i class=\"fas fa-[FA5NAME]\" aria-hidden=\"true\"></i>',font_awesome_5r:'<i class=\"far fa-[FA5NAME]\" aria-hidden=\"true\"></i>',font_awesome_5l:'<i class=\"fal fa-[FA5NAME]\" aria-hidden=\"true\"></i>',font_awesome_5b:'<i class=\"fab fa-[FA5NAME]\" aria-hidden=\"true\"></i>',text:'<span style=\"text-align: center;\">[NAME]</span>',image:\"<img src=[SRC] alt=[ALT] />\",svg:'<svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">[PATH]</svg>',empty:\" \"},w.FE.ICONS={bold:{NAME:\"bold\"},italic:{NAME:\"italic\"},underline:{NAME:\"underline\"},strikeThrough:{NAME:\"strikethrough\"},subscript:{NAME:\"subscript\"},superscript:{NAME:\"superscript\"},color:{NAME:\"tint\"},outdent:{NAME:\"outdent\"},indent:{NAME:\"indent\"},undo:{NAME:\"rotate-left\",FA5NAME:\"undo\"},redo:{NAME:\"rotate-right\",FA5NAME:\"redo\"},insertHR:{NAME:\"minus\"},clearFormatting:{NAME:\"eraser\"},selectAll:{NAME:\"mouse-pointer\"}},w.FE.DefineIconTemplate=function(e,t){w.FE.ICON_TEMPLATES[e]=t},w.FE.DefineIcon=function(e,t){w.FE.ICONS[e]=t},w.extend(w.FE.DEFAULTS,{iconsTemplate:\"font_awesome\"}),w.FE.MODULES.icon=function(o){return{create:function(n){var e=null,r=w.FE.ICONS[n];if(void 0!==r){var t=r.template||w.FE.ICON_DEFAULT_TEMPLATE||o.opts.iconsTemplate;t&&t.apply&&(t=t.apply(o)),r.FA5NAME||(r.FA5NAME=r.NAME),t&&(t=w.FE.ICON_TEMPLATES[t])&&(e=t.replace(/\\[([a-zA-Z0-9]*)\\]/g,function(e,t){return\"NAME\"==t?r[t]||n:r[t]}))}return e||n},getTemplate:function(e){var t=w.FE.ICONS[e],n=o.opts.iconsTemplate;return void 0!==t?n=t.template||w.FE.ICON_DEFAULT_TEMPLATE||o.opts.iconsTemplate:n}}},w.extend(w.FE.DEFAULTS,{tooltips:!0}),w.FE.MODULES.tooltip=function(o){function r(){if(o.helpers.isMobile())return!1;o.$tooltip&&o.$tooltip.removeClass(\"fr-visible\").css(\"left\",\"-3000px\").css(\"position\",\"fixed\")}function i(e,t){if(o.helpers.isMobile())return!1;if(e.data(\"title\")||e.data(\"title\",e.attr(\"title\")),!e.data(\"title\"))return!1;o.$tooltip||o.opts.tooltips&&!o.helpers.isMobile()&&(o.shared.$tooltip?o.$tooltip=o.shared.$tooltip:(o.shared.$tooltip=w('<div class=\"fr-tooltip\"></div>'),o.$tooltip=o.shared.$tooltip,o.opts.theme&&o.$tooltip.addClass(o.opts.theme+\"-theme\"),w(o.o_doc).find(\"body:first\").append(o.$tooltip)),o.events.on(\"shared.destroy\",function(){o.$tooltip.html(\"\").removeData().remove(),o.$tooltip=null},!0)),e.removeAttr(\"title\"),o.$tooltip.text(o.language.translate(e.data(\"title\"))),o.$tooltip.addClass(\"fr-visible\");var n=e.offset().left+(e.outerWidth()-o.$tooltip.outerWidth())/2;n<0&&(n=0),n+o.$tooltip.outerWidth()>w(o.o_win).width()&&(n=w(o.o_win).width()-o.$tooltip.outerWidth()),void 0===t&&(t=o.opts.toolbarBottom),e.offset().top-w(window).scrollTop()+e.outerHeight()+10>=w(window).height()&&(t=!0);var r=t?e.offset().top-o.$tooltip.height():e.offset().top+e.outerHeight();o.$tooltip.css(\"position\",\"\"),o.$tooltip.css(\"left\",n),o.$tooltip.css(\"top\",Math.ceil(r)),\"static\"!=w(o.o_doc).find(\"body:first\").css(\"position\")?(o.$tooltip.css(\"margin-left\",-w(o.o_doc).find(\"body:first\").offset().left),o.$tooltip.css(\"margin-top\",-w(o.o_doc).find(\"body:first\").offset().top)):(o.$tooltip.css(\"margin-left\",\"\"),o.$tooltip.css(\"margin-top\",\"\"))}return{hide:r,to:i,bind:function(e,t,n){o.opts.tooltips&&!o.helpers.isMobile()&&(o.events.$on(e,\"mouseenter\",t,function(e){o.node.hasClass(e.currentTarget,\"fr-disabled\")||o.edit.isDisabled()||i(w(e.currentTarget),n)},!0),o.events.$on(e,\"mouseleave \"+o._mousedown+\" \"+o._mouseup,t,function(){r()},!0))}}},w.FE.MODULES.button=function(u){var a=[];(u.opts.toolbarInline||u.opts.toolbarContainer)&&(u.shared.buttons||(u.shared.buttons=[]),a=u.shared.buttons);var s=[];function l(e,t,n){for(var r=w(),o=0;o<e.length;o++){var i=w(e[o]);if(i.is(t)&&(r=r.add(i)),n&&i.is(\".fr-dropdown\")){var a=i.next().find(t);r=r.add(a)}}return r}function d(e,t){var n,r=w();if(!e)return r;for(n in r=(r=r.add(l(a,e,t))).add(l(s,e,t)),u.shared.popups)if(u.shared.popups.hasOwnProperty(n)){var o=u.shared.popups[n].children().find(e);r=r.add(o)}for(n in u.shared.modals)if(u.shared.modals.hasOwnProperty(n)){var i=u.shared.modals[n].$modal.find(e);r=r.add(i)}return r}function r(e){e.addClass(\"fr-blink\"),setTimeout(function(){e.removeClass(\"fr-blink\")},500);for(var t=e.data(\"cmd\"),n=[];void 0!==e.data(\"param\"+(n.length+1));)n.push(e.data(\"param\"+(n.length+1)));var r=d(\".fr-dropdown.fr-active\");r.length&&(r.removeClass(\"fr-active\").attr(\"aria-expanded\",!1).next().attr(\"aria-hidden\",!0),r.prev(\".fr-expanded\").removeClass(\"fr-expanded\"),r.parent(\".fr-toolbar:not(.fr-inline)\").css(\"zIndex\",\"\")),e.parents(\".fr-popup, .fr-toolbar\").data(\"instance\").commands.exec(t,n)}function t(e){var t=e.parents(\".fr-popup, .fr-toolbar\").data(\"instance\");if(0!==e.parents(\".fr-popup\").length||e.data(\"popup\")||t.popups.hideAll(),t.popups.areVisible()&&!t.popups.areVisible(t)){for(var n=0;n<w.FE.INSTANCES.length;n++)w.FE.INSTANCES[n]!=t&&w.FE.INSTANCES[n].popups&&w.FE.INSTANCES[n].popups.areVisible()&&w.FE.INSTANCES[n].$el.find(\".fr-marker\").remove();t.popups.hideAll()}u.node.hasClass(e.get(0),\"fr-dropdown\")?function(e){var t=e.next(),n=u.node.hasClass(e.get(0),\"fr-active\"),r=d(\".fr-dropdown.fr-active\").not(e),o=e.parents(\".fr-toolbar, .fr-popup\").data(\"instance\")||u;if(o.helpers.isIOS()&&!o.el.querySelector(\".fr-marker\")&&(o.selection.save(),o.selection.clear(),o.selection.restore()),!n){var i=e.data(\"cmd\");t.find(\".fr-command\").removeClass(\"fr-active\").attr(\"aria-selected\",!1),w.FE.COMMANDS[i]&&w.FE.COMMANDS[i].refreshOnShow&&w.FE.COMMANDS[i].refreshOnShow.apply(o,[e,t]),t.css(\"left\",e.offset().left-e.parent().offset().left-(\"rtl\"==u.opts.direction?t.width()-e.outerWidth():0)),t.addClass(\"test-height\");var a=t.outerHeight();t.removeClass(\"test-height\"),t.css(\"top\",\"\").css(\"bottom\",\"\"),!u.opts.toolbarBottom&&t.offset().top+e.outerHeight()+a<w(u.o_doc).height()?t.css(\"top\",e.position().top+e.outerHeight()):t.css(\"bottom\",e.parents(\".fr-popup, .fr-toolbar\").first().height()-e.position().top)}e.addClass(\"fr-blink\").toggleClass(\"fr-active\"),e.hasClass(\"fr-options\")&&e.prev().toggleClass(\"fr-expanded\"),e.hasClass(\"fr-active\")?(t.attr(\"aria-hidden\",!1),e.attr(\"aria-expanded\",!0)):(t.attr(\"aria-hidden\",!0),e.attr(\"aria-expanded\",!1)),setTimeout(function(){e.removeClass(\"fr-blink\")},300),t.css(\"margin-left\",\"\"),t.offset().left+t.outerWidth()>u.$sc.offset().left+u.$sc.width()&&t.css(\"margin-left\",-(t.offset().left+t.outerWidth()-u.$sc.offset().left-u.$sc.width())),t.offset().left<u.$sc.offset().left&&\"rtl\"==u.opts.direction&&t.css(\"margin-left\",u.$sc.offset().left),r.removeClass(\"fr-active\").attr(\"aria-expanded\",!1).next().attr(\"aria-hidden\",!0),r.prev(\".fr-expanded\").removeClass(\"fr-expanded\"),r.parent(\".fr-toolbar:not(.fr-inline)\").css(\"zIndex\",\"\"),0!==e.parents(\".fr-popup\").length||u.opts.toolbarInline||(u.node.hasClass(e.get(0),\"fr-active\")?u.$tb.css(\"zIndex\",(u.opts.zIndex||1)+4):u.$tb.css(\"zIndex\",\"\"));var s=t.find(\"a.fr-command.fr-active:first\");u.helpers.isMobile()||(s.length?u.accessibility.focusToolbarElement(s):u.accessibility.focusToolbarElement(e))}(e):(r(e),w.FE.COMMANDS[e.data(\"cmd\")]&&!1!==w.FE.COMMANDS[e.data(\"cmd\")].refreshAfterCallback&&t.button.bulkRefresh())}function i(e){t(w(e.currentTarget))}function c(e){var t=e.find(\".fr-dropdown.fr-active\");t.length&&(t.removeClass(\"fr-active\").attr(\"aria-expanded\",!1).next().attr(\"aria-hidden\",!0),t.parent(\".fr-toolbar:not(.fr-inline)\").css(\"zIndex\",\"\"),t.prev().removeClass(\"fr-expanded\"))}function f(e){e.preventDefault(),e.stopPropagation()}function p(e){if(e.stopPropagation(),!u.helpers.isMobile())return!1}function g(e,t,n){if(t=w.extend(!0,{},t),u.helpers.isMobile()&&!1===t.showOnMobile)return\"\";var r=t.displaySelection;\"function\"==typeof r&&(r=r(u));var o=\"\";if(\"options\"!==t.type)if(r){var i=\"function\"==typeof t.defaultSelection?t.defaultSelection(u):t.defaultSelection;o='<span style=\"width:'+(t.displaySelectionWidth||100)+'px\">'+u.language.translate(i||t.title)+\"</span>\"}else o=u.icon.create(t.icon||e),o+='<span class=\"fr-sr-only\">'+(u.language.translate(t.title)||\"\")+\"</span>\";var a=t.popup?' data-popup=\"true\"':\"\",s=t.modal?' data-modal=\"true\"':\"\",l=u.shortcuts.get(e+\".\");l=l?\" (\"+l+\")\":\"\";var d=e+\"-\"+u.id,c=\"dropdown-menu-\"+d,f='<button id=\"'+d+'\"type=\"button\" tabIndex=\"-1\" role=\"button\"'+(t.toggle?' aria-pressed=\"false\"':\"\")+(\"dropdown\"==t.type||\"options\"==t.type?' aria-controls=\"'+c+'\" aria-expanded=\"false\" aria-haspopup=\"true\"':\"\")+(t.disabled?' aria-disabled=\"true\"':\"\")+' title=\"'+(u.language.translate(t.title)||\"\")+l+'\" class=\"fr-command fr-btn'+(\"dropdown\"==t.type||\"options\"==t.type?\" fr-dropdown\":\"\")+(\"options\"==t.type?\" fr-options\":\"\")+\" fr-btn-\"+u.icon.getTemplate(t.icon)+(t.displaySelection?\" fr-selection\":\"\")+(t.back?\" fr-back\":\"\")+(t.disabled?\" fr-disabled\":\"\")+(n?\"\":\" fr-hidden\")+'\" data-cmd=\"'+e+'\"'+a+s+\">\"+o+\"</button>\";if(\"dropdown\"==t.type||\"options\"==t.type){var p='<div id=\"'+c+'\" class=\"fr-dropdown-menu\" role=\"listbox\" aria-labelledby=\"'+d+'\" aria-hidden=\"true\"><div class=\"fr-dropdown-wrapper\" role=\"presentation\"><div class=\"fr-dropdown-content\" role=\"presentation\">';p+=function(e,t){var n=\"\";if(t.html)\"function\"==typeof t.html?n+=t.html.call(u):n+=t.html;else{var r=t.options;for(var o in\"function\"==typeof r&&(r=r()),n+='<ul class=\"fr-dropdown-list\" role=\"presentation\">',r)if(r.hasOwnProperty(o)){var i=u.shortcuts.get(e+\".\"+o);i=i?'<span class=\"fr-shortcut\">'+i+\"</span>\":\"\",n+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"'+(\"options\"===t.type?e.replace(/Options/g,\"\"):e)+'\" data-param1=\"'+o+'\" title=\"'+r[o]+'\">'+u.language.translate(r[o])+\"</a></li>\"}n+=\"</ul>\"}return n}(e,t),f+=p+=\"</div></div></div>\"}return t.hasOptions&&t.hasOptions.apply(u)&&(t.type=\"options\",t.hasOptions=!1,f='<div class=\"fr-btn-wrap\">'+f+g(e+\"Options\",t,n)+\"</div>\"),f}function e(o){var i=u.$tb&&u.$tb.data(\"instance\")||u;if(!1===u.events.trigger(\"buttons.refresh\"))return!0;setTimeout(function(){for(var e=i.selection.inEditor()&&i.core.hasFocus(),t=0;t<o.length;t++){var n=w(o[t]),r=n.data(\"cmd\");0===n.parents(\".fr-popup\").length?e||w.FE.COMMANDS[r]&&w.FE.COMMANDS[r].forcedRefresh?i.button.refresh(n):u.node.hasClass(n.get(0),\"fr-dropdown\")||(n.removeClass(\"fr-active\"),n.attr(\"aria-pressed\")&&n.attr(\"aria-pressed\",!1)):n.parents(\".fr-popup\").is(\":visible\")&&i.button.refresh(n)}},0)}function n(){e(a),e(s)}function o(){a=[],s=[]}u.shared.popup_buttons||(u.shared.popup_buttons=[]),s=u.shared.popup_buttons;var h=null;function m(){clearTimeout(h),h=setTimeout(n,50)}return{_init:function(){u.opts.toolbarInline?u.events.on(\"toolbar.show\",n):(u.events.on(\"mouseup\",m),u.events.on(\"keyup\",m),u.events.on(\"blur\",m),u.events.on(\"focus\",m),u.events.on(\"contentChanged\",m),u.helpers.isMobile()&&u.events.$on(u.$doc,\"selectionchange\",n)),u.events.on(\"shared.destroy\",o)},buildList:function(e,t){for(var n=\"\",r=0;r<e.length;r++){var o=e[r],i=w.FE.COMMANDS[o];i&&\"undefined\"!=typeof i.plugin&&u.opts.pluginsEnabled.indexOf(i.plugin)<0||(i?n+=g(o,i,void 0===t||0<=t.indexOf(o)):\"|\"==o?n+='<div class=\"fr-separator fr-vs\" role=\"separator\" aria-orientation=\"vertical\"></div>':\"-\"==o&&(n+='<div class=\"fr-separator fr-hs\" role=\"separator\" aria-orientation=\"horizontal\"></div>'))}return n},bindCommands:function(t,e){u.events.bindClick(t,\".fr-command:not(.fr-disabled)\",i),u.events.$on(t,u._mousedown+\" \"+u._mouseup+\" \"+u._move,\".fr-dropdown-menu\",f,!0),u.events.$on(t,u._mousedown+\" \"+u._mouseup+\" \"+u._move,\".fr-dropdown-menu .fr-dropdown-wrapper\",p,!0);var n=t.get(0).ownerDocument,r=\"defaultView\"in n?n.defaultView:n.parentWindow,o=function(e){(!e||e.type==u._mouseup&&e.target!=w(\"html\").get(0)||\"keydown\"==e.type&&(u.keys.isCharacter(e.which)&&!u.keys.ctrlKey(e)||e.which==w.FE.KEYCODE.ESC))&&c(t)};u.events.$on(w(r),u._mouseup+\" resize keydown\",o,!0),u.opts.iframe&&u.events.$on(u.$win,u._mouseup,o,!0),u.node.hasClass(t.get(0),\"fr-popup\")?w.merge(s,t.find(\".fr-btn\").toArray()):w.merge(a,t.find(\".fr-btn\").toArray()),u.tooltip.bind(t,\".fr-btn, .fr-title\",e)},refresh:function(e){var t,n=e.parents(\".fr-popup, .fr-toolbar\").data(\"instance\")||u,r=e.data(\"cmd\");u.node.hasClass(e.get(0),\"fr-dropdown\")?t=e.next():(e.removeClass(\"fr-active\"),e.attr(\"aria-pressed\")&&e.attr(\"aria-pressed\",!1)),w.FE.COMMANDS[r]&&w.FE.COMMANDS[r].refresh?w.FE.COMMANDS[r].refresh.apply(n,[e,t]):u.refresh[r]&&n.refresh[r](e,t)},bulkRefresh:n,exec:r,click:t,hideActiveDropdowns:c,getButtons:d}},w.FE.MODULES.modals=function(l){l.shared.modals||(l.shared.modals={});var s,d=l.shared.modals;function e(){for(var e in d){var t=d[e];t&&t.$modal&&t.$modal.removeData().remove()}s&&s.removeData().remove(),d={}}function c(e,t){if(d[e]){var n=d[e].$modal,r=n.data(\"instance\")||l;r.events.enableBlur(),n.hide(),s.hide(),w(r.o_doc).find(\"body:first\").removeClass(\"prevent-scroll fr-mobile\"),n.removeClass(\"fr-active\"),t||(r.accessibility.restoreSelection(),r.events.trigger(\"modals.hide\"))}}function n(e){var t;if(\"string\"==typeof e){if(!d[e])return;t=d[e].$modal}else t=e;return t&&l.node.hasClass(t,\"fr-active\")&&l.core.sameInstance(t)||!1}return{_init:function(){l.events.on(\"shared.destroy\",e,!0)},get:function(e){return d[e]},create:function(n,e,t){if(l.shared.$overlay||(l.shared.$overlay=w('<div class=\"fr-overlay\">').appendTo(\"body:first\")),s=l.shared.$overlay,l.opts.theme&&s.addClass(l.opts.theme+\"-theme\"),!d[n]){var r=(o=e,i=t,a='<div tabIndex=\"-1\" class=\"fr-modal'+(l.opts.theme?\" \"+l.opts.theme+\"-theme\":\"\")+'\"><div class=\"fr-modal-wrapper\">',a+='<div class=\"fr-modal-head\">'+o+'<span title=\"'+l.language.translate(\"Cancel\")+'\" class=\"fr-modal-close\">&times;</span></div>',a+='<div tabIndex=\"-1\" class=\"fr-modal-body\">'+i+\"</div>\",w(a+=\"</div></div>\"));d[n]={$modal:r,$head:r.find(\".fr-modal-head\"),$body:r.find(\".fr-modal-body\")},l.helpers.isMobile()||r.addClass(\"fr-desktop\"),r.appendTo(\"body:first\"),l.events.$on(r,\"click\",\".fr-modal-close\",function(){c(n)},!0),d[n].$body.css(\"margin-top\",d[n].$head.outerHeight()),l.events.$on(r,\"keydown\",function(e){var t=e.which;return t==w.FE.KEYCODE.ESC?(c(n),l.accessibility.focusModalButton(r),!1):!(!w(e.target).is(\"input[type=text], textarea\")&&t!=w.FE.KEYCODE.ARROW_UP&&t!=w.FE.KEYCODE.ARROW_DOWN&&!l.keys.isBrowserAction(e)&&(e.preventDefault(),e.stopPropagation(),1))},!0),c(n,!0)}var o,i,a;return d[n]},show:function(e){if(d[e]){var t=d[e].$modal;t.data(\"instance\",l),t.show(),s.show(),w(l.o_doc).find(\"body:first\").addClass(\"prevent-scroll\"),l.helpers.isMobile()&&w(l.o_doc).find(\"body:first\").addClass(\"fr-mobile\"),t.addClass(\"fr-active\"),l.accessibility.focusModal(t)}},hide:c,resize:function(e){if(d[e]){var t=d[e],n=t.$modal,r=t.$body,o=w(l.o_win).height(),i=n.find(\".fr-modal-wrapper\"),a=o-i.outerHeight(!0)+(i.height()-(r.outerHeight(!0)-r.height())),s=\"auto\";a<r.get(0).scrollHeight&&(s=a),r.height(s)}},isVisible:n,areVisible:function(e){for(var t in d)if(d.hasOwnProperty(t)&&n(t)&&(void 0===e||d[t].$modal.data(\"instance\")==e))return d[t].$modal;return!1}}},w.FE.POPUP_TEMPLATES={\"text.edit\":\"[_EDIT_]\"},w.FE.RegisterTemplate=function(e,t){w.FE.POPUP_TEMPLATES[e]=t},w.FE.MODULES.popups=function(c){c.shared.popups||(c.shared.popups={});var f=c.shared.popups;function p(e,t){t.is(\":visible\")||(t=c.$sc),t.is(f[e].data(\"container\"))||(f[e].data(\"container\",t),t.append(f[e]))}function u(e){return f[e]&&c.node.hasClass(f[e],\"fr-active\")&&c.core.sameInstance(f[e])||!1}function g(e){for(var t in f)if(f.hasOwnProperty(t)&&u(t)&&(void 0===e||f[t].data(\"instance\")==e))return f[t];return!1}function n(e){var t=null;(t=\"string\"!=typeof e?e:f[e])&&c.node.hasClass(t,\"fr-active\")&&(t.removeClass(\"fr-active fr-above\"),c.events.trigger(\"popups.hide.\"+e),c.$tb&&(1<c.opts.zIndex?c.$tb.css(\"zIndex\",c.opts.zIndex+1):c.$tb.css(\"zIndex\",\"\")),c.events.disableBlur(),t.find(\"input, textarea, button\").filter(\":focus\").blur(),t.find(\"input, textarea\").attr(\"disabled\",\"disabled\"))}function h(e){for(var t in void 0===e&&(e=[]),f)f.hasOwnProperty(t)&&e.indexOf(t)<0&&n(t)}function t(){c.shared.exit_flag=!0}function m(){c.shared.exit_flag=!1}function i(){return c.shared.exit_flag}function o(e,t){var n,r,o=function(e,t){var n=w.FE.POPUP_TEMPLATES[e];if(!n)return null;for(var r in\"function\"==typeof n&&(n=n.apply(c)),t)t.hasOwnProperty(r)&&(n=n.replace(\"[_\"+r.toUpperCase()+\"_]\",t[r]));return n}(e,t);return o?(n=w('<div class=\"fr-popup'+(c.helpers.isMobile()?\" fr-mobile\":\" fr-desktop\")+(c.opts.toolbarInline?\" fr-inline\":\"\")+'\"><span class=\"fr-arrow\"></span>'+o+\"</div>\"),c.opts.theme&&n.addClass(c.opts.theme+\"-theme\"),1<c.opts.zIndex&&(c.opts.editInPopup?n.css(\"z-index\",c.opts.zIndex+2):c.$tb.css(\"z-index\",c.opts.zIndex+2)),\"auto\"!=c.opts.direction&&n.removeClass(\"fr-ltr fr-rtl\").addClass(\"fr-\"+c.opts.direction),n.find(\"input, textarea\").attr(\"dir\",c.opts.direction).attr(\"disabled\",\"disabled\"),(r=w(\"body:first\")).append(n),n.data(\"container\",r),f[e]=n,c.button.bindCommands(n,!1),n):(n=w('<div class=\"fr-popup fr-empty\"></div>'),(r=w(\"body:first\")).append(n),n.data(\"container\",r),f[e]=n)}function E(r){var o=f[r];return{_windowResize:function(){var e=o.data(\"instance\")||c;!e.helpers.isMobile()&&o.is(\":visible\")&&(e.events.disableBlur(),e.popups.hide(r),e.events.enableBlur())},_inputFocus:function(e){var t=o.data(\"instance\")||c,n=w(e.currentTarget);if(n.is(\"input:file\")&&n.closest(\".fr-layer\").addClass(\"fr-input-focus\"),e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.events.enableBlur()},c.browser.msie?100:0),t.helpers.isMobile()){var r=w(t.o_win).scrollTop();setTimeout(function(){w(t.o_win).scrollTop(r)},0)}},_inputBlur:function(e){var t=o.data(\"instance\")||c,n=w(e.currentTarget);n.is(\"input:file\")&&n.closest(\".fr-layer\").removeClass(\"fr-input-focus\"),document.activeElement!=this&&w(this).is(\":visible\")&&(t.events.blurActive()&&t.events.trigger(\"blur\"),t.events.enableBlur())},_editorKeydown:function(e){var t=o.data(\"instance\")||c;t.keys.ctrlKey(e)||e.which==w.FE.KEYCODE.ALT||e.which==w.FE.KEYCODE.ESC||(u(r)&&o.find(\".fr-back:visible\").length?t.button.exec(o.find(\".fr-back:visible:first\")):e.which!=w.FE.KEYCODE.ALT&&t.popups.hide(r))},_preventFocus:function(e){var t=o.data(\"instance\")||c,n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;\"mouseup\"==e.type||w(n).is(\":focus\")||t.events.disableBlur(),\"mouseup\"!=e.type||w(n).hasClass(\"fr-command\")||0<w(n).parents(\".fr-command\").length||w(n).hasClass(\"fr-dropdown-content\")||c.button.hideActiveDropdowns(o),(c.browser.safari||c.browser.mozilla)&&\"mousedown\"==e.type&&w(n).is(\"input[type=file]\")&&t.events.disableBlur();var r=\"input, textarea, button, select, label, .fr-command\";if(n&&!w(n).is(r)&&0===w(n).parents(r).length)return e.stopPropagation(),!1;n&&w(n).is(r)&&e.stopPropagation(),m()},_editorMouseup:function(){o.is(\":visible\")&&i()&&0<o.find(\"input:focus, textarea:focus, button:focus, select:focus\").filter(\":visible\").length&&c.events.disableBlur()},_windowMouseup:function(e){if(!c.core.sameInstance(o))return!0;var t=o.data(\"instance\")||c;o.is(\":visible\")&&i()&&(e.stopPropagation(),t.markers.remove(),t.popups.hide(r),m())},_windowKeydown:function(e){if(!c.core.sameInstance(o))return!0;var t=o.data(\"instance\")||c,n=e.which;if(w.FE.KEYCODE.ESC==n){if(t.popups.isVisible(r)&&t.opts.toolbarInline)return e.stopPropagation(),t.popups.isVisible(r)&&(o.find(\".fr-back:visible\").length?(t.button.exec(o.find(\".fr-back:visible:first\")),t.accessibility.focusPopupButton(o)):o.find(\".fr-dismiss:visible\").length?t.button.exec(o.find(\".fr-dismiss:visible:first\")):(t.popups.hide(r),t.toolbar.showInline(null,!0),t.accessibility.focusPopupButton(o))),!1;if(t.popups.isVisible(r))return o.find(\".fr-back:visible\").length?(t.button.exec(o.find(\".fr-back:visible:first\")),t.accessibility.focusPopupButton(o)):o.find(\".fr-dismiss:visible\").length?t.button.exec(o.find(\".fr-dismiss:visible:first\")):(t.popups.hide(r),t.accessibility.focusPopupButton(o)),!1}},_doPlaceholder:function(){0===w(this).next().length&&w(this).attr(\"placeholder\")&&w(this).after('<label for=\"'+w(this).attr(\"id\")+'\">'+w(this).attr(\"placeholder\")+\"</label>\"),w(this).toggleClass(\"fr-not-empty\",\"\"!==w(this).val())},_repositionPopup:function(){if(!c.opts.height&&!c.opts.heightMax||c.opts.toolbarInline)return!0;if(c.$wp&&u(r)&&o.parent().get(0)==c.$sc.get(0)){var e=o.offset().top-c.$wp.offset().top,t=c.$wp.outerHeight();c.node.hasClass(o.get(0),\"fr-above\")&&(e+=o.outerHeight()),t<e||e<0?o.addClass(\"fr-hidden\"):o.removeClass(\"fr-hidden\")}}}}function a(e,t){c.events.on(\"mouseup\",e._editorMouseup,!0),c.$wp&&c.events.on(\"keydown\",e._editorKeydown),c.events.on(\"blur\",function(){g()&&c.markers.remove(),h()}),c.$wp&&!c.helpers.isMobile()&&c.events.$on(c.$wp,\"scroll.popup\"+t,e._repositionPopup),c.events.on(\"window.mouseup\",e._windowMouseup,!0),c.events.on(\"window.keydown\",e._windowKeydown,!0),f[t].data(\"inst\"+c.id,!0),c.events.on(\"destroy\",function(){c.core.sameInstance(f[t])&&f[t].removeClass(\"fr-active\").appendTo(\"body:first\")},!0)}function e(){for(var e in f)if(f.hasOwnProperty(e)){var t=f[e];t&&(t.html(\"\").removeData().remove(),f[e]=null)}f=[]}return c.shared.exit_flag=!1,{_init:function(){c.events.on(\"shared.destroy\",e,!0),c.events.on(\"window.mousedown\",t),c.events.on(\"window.touchmove\",m),c.events.$on(w(c.o_win),\"scroll\",m),c.events.on(\"mousedown\",function(e){g()&&(e.stopPropagation(),c.$el.find(\".fr-marker\").remove(),t(),c.events.disableBlur())})},create:function(e,t){var n=o(e,t),r=E(e);return a(r,e),c.events.$on(n,\"mousedown mouseup touchstart touchend touch\",\"*\",r._preventFocus,!0),c.events.$on(n,\"focus\",\"input, textarea, button, select\",r._inputFocus,!0),c.events.$on(n,\"blur\",\"input, textarea, button, select\",r._inputBlur,!0),c.accessibility.registerPopup(e),c.events.$on(n,\"keydown keyup change input\",\"input, textarea\",r._doPlaceholder,!0),c.helpers.isIOS()&&c.events.$on(n,\"touchend\",\"label\",function(){w(\"#\"+w(this).attr(\"for\")).prop(\"checked\",function(e,t){return!t})},!0),c.events.$on(w(c.o_win),\"resize\",r._windowResize,!0),n},get:function(e){var t=f[e];return t&&!t.data(\"inst\"+c.id)&&a(E(e),e),t},show:function(e,t,n,r){if(u(e)||(g()&&0<c.$el.find(\".fr-marker\").length?(c.events.disableBlur(),c.selection.restore()):g()||(c.events.disableBlur(),c.events.focus(),c.events.enableBlur())),h([e]),!f[e])return!1;var o=c.button.getButtons(\".fr-dropdown.fr-active\");o.removeClass(\"fr-active\").attr(\"aria-expanded\",!1).parent(\".fr-toolbar\").css(\"zIndex\",\"\"),o.next().attr(\"aria-hidden\",!0),f[e].data(\"instance\",c),c.$tb&&c.$tb.data(\"instance\",c);var i=f[e].outerWidth(),a=u(e);f[e].addClass(\"fr-active\").removeClass(\"fr-hidden\").find(\"input, textarea\").removeAttr(\"disabled\");var s,l,d=f[e].data(\"container\");s=e,(l=d).is(\":visible\")||(l=c.$sc),0===l.find([f[s]]).length&&l.append(f[s]),c.opts.toolbarInline&&d&&c.$tb&&d.get(0)==c.$tb.get(0)&&(p(e,c.$sc),n=c.$tb.offset().top-c.helpers.getPX(c.$tb.css(\"margin-top\")),t=c.$tb.offset().left+c.$tb.outerWidth()/2+(parseFloat(c.$tb.find(\".fr-arrow\").css(\"margin-left\"))||0)+c.$tb.find(\".fr-arrow\").outerWidth()/2,c.node.hasClass(c.$tb.get(0),\"fr-above\")&&n&&(n+=c.$tb.outerHeight()),r=0),d=f[e].data(\"container\"),!c.opts.iframe||r||a||(t&&(t-=c.$iframe.offset().left),n&&(n-=c.$iframe.offset().top)),d.is(c.$tb)?c.$tb.css(\"zIndex\",(c.opts.zIndex||1)+4):f[e].css(\"zIndex\",(c.opts.zIndex||1)+4),t&&(t-=i/2),c.opts.toolbarBottom&&d&&c.$tb&&d.get(0)==c.$tb.get(0)&&(f[e].addClass(\"fr-above\"),n&&(n-=f[e].outerHeight())),f[e].removeClass(\"fr-active\"),c.position.at(t,n,f[e],r||0),f[e].addClass(\"fr-active\"),a||c.accessibility.focusPopup(f[e]),c.opts.toolbarInline&&c.toolbar.hide(),c.events.trigger(\"popups.show.\"+e),E(e)._repositionPopup(),m()},hide:n,onHide:function(e,t){c.events.on(\"popups.hide.\"+e,t)},hideAll:h,setContainer:p,refresh:function(e){f[e].data(\"instance\",c),c.events.trigger(\"popups.refresh.\"+e);for(var t=f[e].find(\".fr-command\"),n=0;n<t.length;n++){var r=w(t[n]);0===r.parents(\".fr-dropdown-menu\").length&&c.button.refresh(r)}},onRefresh:function(e,t){c.events.on(\"popups.refresh.\"+e,t)},onShow:function(e,t){c.events.on(\"popups.show.\"+e,t)},isVisible:u,areVisible:g}},w.FE.MODULES.position=function(v){function o(){var e=v.selection.ranges(0).getBoundingClientRect();if(0===e.top&&0===e.left&&0===e.width||0===e.height){var t=!1;0===v.$el.find(\".fr-marker\").length&&(v.selection.save(),t=!0);var n=v.$el.find(\".fr-marker:first\");n.css(\"display\",\"inline\"),n.css(\"line-height\",\"\");var r=n.offset(),o=n.outerHeight();n.css(\"display\",\"none\"),n.css(\"line-height\",0),(e={}).left=r.left,e.width=0,e.height=o,e.top=r.top-(v.opts.iframe?0:v.helpers.scrollTop()),e.right=1,e.bottom=1,e.ok=!0,t&&v.selection.restore()}return e}function i(e,t,n,r){var o=n.data(\"container\");!o||\"BODY\"===o.get(0).tagName&&\"static\"==o.css(\"position\")||(e&&(e-=o.offset().left),t&&(t-=o.offset().top),\"BODY\"!=o.get(0).tagName?(e&&(e+=o.get(0).scrollLeft),t&&(t+=o.get(0).scrollTop)):\"absolute\"==o.css(\"position\")&&(e&&(e+=o.position().left),t&&(t+=o.position().top))),v.opts.iframe&&o&&v.$tb&&o.get(0)!=v.$tb.get(0)&&(e&&(e+=v.$iframe.offset().left),t&&(t+=v.$iframe.offset().top));var i,a,s,l,d=(a=e,s=(i=n).outerWidth(!0),l=i.parent().offset().left,i.parent().get(0)==v.$sc.get(0)&&(l-=i.parent().position().left),l+a+s>v.$sc.get(0).clientWidth-10&&(a=v.$sc.get(0).clientWidth-s-l-10),a<0&&(a=10),a);if(e){n.css(\"left\",d);var c=n.data(\"fr-arrow\");c||(c=n.find(\".fr-arrow\"),n.data(\"fr-arrow\",c)),c.data(\"margin-left\")||c.data(\"margin-left\",v.helpers.getPX(c.css(\"margin-left\"))),c.css(\"margin-left\",e-d+c.data(\"margin-left\"))}t&&n.css(\"top\",function(e,t,n){var r=e.outerHeight(!0);if(!v.helpers.isMobile()&&v.$tb&&e.parent().get(0)!=v.$tb.get(0)){var o=e.parent().offset().top,i=t-r-(n||0);e.parent().get(0)==v.$sc.get(0)&&(o-=e.parent().position().top);var a=v.$sc.get(0).clientHeight;o+t+r>v.$sc.offset().top+a&&0<e.parent().offset().top+i&&0<i?i>v.$wp.scrollTop()&&(t=i,e.addClass(\"fr-above\")):e.removeClass(\"fr-above\")}return t}(n,t,r))}function n(e){var n=w(e),t=n.is(\".fr-sticky-on\"),r=n.data(\"sticky-top\"),o=n.data(\"sticky-scheduled\");if(void 0===r){n.data(\"sticky-top\",0);var i=w('<div class=\"fr-sticky-dummy\" style=\"height: '+n.outerHeight()+'px;\"></div>');v.$box.prepend(i)}else v.$box.find(\".fr-sticky-dummy\").css(\"height\",n.outerHeight());if(v.core.hasFocus()||0<v.$tb.find(\"input:visible:focus\").length){var a=v.helpers.scrollTop(),s=Math.min(Math.max(a-v.$tb.parent().offset().top,0),v.$tb.parent().outerHeight()-n.outerHeight());s!=r&&s!=o&&(clearTimeout(n.data(\"sticky-timeout\")),n.data(\"sticky-scheduled\",s),n.outerHeight()<a-v.$tb.parent().offset().top&&n.addClass(\"fr-opacity-0\"),n.data(\"sticky-timeout\",setTimeout(function(){var e=v.helpers.scrollTop(),t=Math.min(Math.max(e-v.$tb.parent().offset().top,0),v.$tb.parent().outerHeight()-n.outerHeight());0<t&&\"BODY\"==v.$tb.parent().get(0).tagName&&(t+=v.$tb.parent().position().top),t!=r&&(n.css(\"top\",Math.max(t,0)),n.data(\"sticky-top\",t),n.data(\"sticky-scheduled\",t)),n.removeClass(\"fr-opacity-0\")},100))),t||(n.css(\"top\",\"0\"),n.width(v.$tb.parent().width()),n.addClass(\"fr-sticky-on\"),v.$box.addClass(\"fr-sticky-box\"))}else clearTimeout(w(e).css(\"sticky-timeout\")),n.css(\"top\",\"0\"),n.css(\"position\",\"\"),n.width(\"\"),n.data(\"sticky-top\",0),n.removeClass(\"fr-sticky-on\"),v.$box.removeClass(\"fr-sticky-box\")}function t(e){if(e.offsetWidth){var t,n,r=w(e),o=r.outerHeight(),i=r.data(\"sticky-top\"),a=r.data(\"sticky-position\"),s=w(\"body\"==v.opts.scrollableContainer?v.o_win:v.opts.scrollableContainer).outerHeight(),l=0,d=0;\"body\"!==v.opts.scrollableContainer&&(l=v.$sc.offset().top,d=w(v.o_win).outerHeight()-l-s);var c=\"body\"==v.opts.scrollableContainer?v.helpers.scrollTop():l,f=r.is(\".fr-sticky-on\");r.data(\"sticky-parent\")||r.data(\"sticky-parent\",r.parent());var p=r.data(\"sticky-parent\"),u=p.offset().top,g=p.outerHeight();if(r.data(\"sticky-offset\")||void 0!==i?v.$box.find(\".fr-sticky-dummy\").css(\"height\",o+\"px\"):(r.data(\"sticky-offset\",!0),r.after('<div class=\"fr-sticky-dummy\" style=\"height: '+o+'px;\"></div>')),!a){var h=\"auto\"!==r.css(\"top\")||\"auto\"!==r.css(\"bottom\");h||r.css(\"position\",\"fixed\"),a={top:v.node.hasClass(r.get(0),\"fr-top\"),bottom:v.node.hasClass(r.get(0),\"fr-bottom\")},h||r.css(\"position\",\"\"),r.data(\"sticky-position\",a),r.data(\"top\",v.node.hasClass(r.get(0),\"fr-top\")?r.css(\"top\"):\"auto\"),r.data(\"bottom\",v.node.hasClass(r.get(0),\"fr-bottom\")?r.css(\"bottom\"):\"auto\")}t=v.helpers.getPX(r.data(\"top\")),n=v.helpers.getPX(r.data(\"bottom\"));var m=a.top&&u<c+t&&c+t<=u+g-o&&(v.helpers.isInViewPort(v.$sc.get(0))||\"body\"==v.opts.scrollableContainer),E=a.bottom&&u+o<c+s-n&&c+s-n<u+g;m||E?(r.css(\"width\",p.get(0).getBoundingClientRect().width+\"px\"),f||(r.addClass(\"fr-sticky-on\"),r.removeClass(\"fr-sticky-off\"),r.css(\"top\")&&(\"auto\"!=r.data(\"top\")?r.css(\"top\",v.helpers.getPX(r.data(\"top\"))+l):r.data(\"top\",\"auto\")),r.css(\"bottom\")&&(\"auto\"!=r.data(\"bottom\")?r.css(\"bottom\",v.helpers.getPX(r.data(\"bottom\"))+d):r.css(\"bottom\",\"auto\")))):v.node.hasClass(r.get(0),\"fr-sticky-off\")||(r.width(\"\"),r.removeClass(\"fr-sticky-on\"),r.addClass(\"fr-sticky-off\"),r.css(\"top\")&&\"auto\"!=r.data(\"top\")&&a.top&&r.css(\"top\",0),r.css(\"bottom\")&&\"auto\"!=r.data(\"bottom\")&&a.bottom&&r.css(\"bottom\",0))}}function e(){if(v._stickyElements)for(var e=0;e<v._stickyElements.length;e++)t(v._stickyElements[e])}return{_init:function(){!function(){if(v._stickyElements=[],v.helpers.isIOS()){var t=function(){if(v.helpers.requestAnimationFrame()(t),!1!==v.events.trigger(\"position.refresh\"))for(var e=0;e<v._stickyElements.length;e++)n(v._stickyElements[e])};t(),v.events.$on(w(v.o_win),\"scroll\",function(){if(v.core.hasFocus())for(var e=0;e<v._stickyElements.length;e++){var t=w(v._stickyElements[e]),n=t.parent(),r=v.helpers.scrollTop();t.outerHeight()<r-n.offset().top&&(t.addClass(\"fr-opacity-0\"),t.data(\"sticky-top\",-1),t.data(\"sticky-scheduled\",-1))}},!0)}else\"body\"!==v.opts.scrollableContainer&&v.events.$on(w(v.opts.scrollableContainer),\"scroll\",e,!0),v.events.$on(w(v.o_win),\"scroll\",e,!0),v.events.$on(w(v.o_win),\"resize\",e,!0),v.events.on(\"initialized\",e),v.events.on(\"focus\",e),v.events.$on(w(v.o_win),\"resize\",\"textarea\",e,!0);v.events.on(\"destroy\",function(){v._stickyElements=[]})}()},forSelection:function(e){var t=o();e.css({top:0,left:0});var n=t.top+t.height,r=t.left+t.width/2-e.get(0).offsetWidth/2+v.helpers.scrollLeft();v.opts.iframe||(n+=v.helpers.scrollTop()),i(r,n,e,t.height)},addSticky:function(e){e.addClass(\"fr-sticky\"),v.helpers.isIOS()&&e.addClass(\"fr-sticky-ios\"),e.removeClass(\"fr-sticky\"),v._stickyElements.push(e.get(0))},refresh:e,at:i,getBoundingRect:o}},w.FE.MODULES.refresh=function(o){function i(e,t){e.toggleClass(\"fr-disabled\",t).attr(\"aria-disabled\",t)}return{undo:function(e){i(e,!o.undo.canDo())},redo:function(e){i(e,!o.undo.canRedo())},outdent:function(e){if(o.node.hasClass(e.get(0),\"fr-no-refresh\"))return!1;for(var t=o.selection.blocks(),n=0;n<t.length;n++){var r=\"rtl\"==o.opts.direction||\"rtl\"==w(t[n]).css(\"direction\")?\"margin-right\":\"margin-left\";if(\"LI\"==t[n].tagName||\"LI\"==t[n].parentNode.tagName)return i(e,!1),!0;if(0<o.helpers.getPX(w(t[n]).css(r)))return i(e,!1),!0}i(e,!0)},indent:function(e){if(o.node.hasClass(e.get(0),\"fr-no-refresh\"))return!1;for(var t=o.selection.blocks(),n=0;n<t.length;n++){for(var r=t[n].previousSibling;r&&r.nodeType==Node.TEXT_NODE&&0===r.textContent.length;)r=r.previousSibling;if(\"LI\"!=t[n].tagName||r)return i(e,!1),!0;i(e,!0)}}}},w.extend(w.FE.DEFAULTS,{editInPopup:!1}),w.FE.MODULES.textEdit=function(n){function t(){n.events.$on(n.$el,n._mouseup,function(){setTimeout(function(){var e,t;t=n.popups.get(\"text.edit\"),e=\"INPUT\"===n.$el.prop(\"tagName\")?n.$el.attr(\"placeholder\"):n.$el.text(),t.find(\"input\").val(e).trigger(\"change\"),n.popups.setContainer(\"text.edit\",n.$sc),n.popups.show(\"text.edit\",n.$el.offset().left+n.$el.outerWidth()/2,n.$el.offset().top+n.$el.outerHeight(),n.$el.outerHeight())},10)})}return{_init:function(){var e;n.opts.editInPopup&&(e={edit:'<div id=\"fr-text-edit-'+n.id+'\" class=\"fr-layer fr-text-edit-layer\"><div class=\"fr-input-line\"><input type=\"text\" placeholder=\"'+n.language.translate(\"Text\")+'\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"updateText\" tabIndex=\"2\">'+n.language.translate(\"Update\")+\"</button></div></div>\"},n.popups.create(\"text.edit\",e),t())},update:function(){var e=n.popups.get(\"text.edit\").find(\"input\").val();0===e.length&&(e=n.opts.placeholderText),\"INPUT\"===n.$el.prop(\"tagName\")?n.$el.attr(\"placeholder\",e):n.$el.text(e),n.events.trigger(\"contentChanged\"),n.popups.hide(\"text.edit\")}}},w.FE.RegisterCommand(\"updateText\",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),w.extend(w.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:null,toolbarButtonsXS:null,toolbarButtonsSM:null,toolbarButtonsMD:null,toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),w.FE.TOOLBAR_BUTTONS=[\"fullscreen\",\"bold\",\"italic\",\"underline\",\"strikeThrough\",\"subscript\",\"superscript\",\"|\",\"fontFamily\",\"fontSize\",\"color\",\"inlineClass\",\"inlineStyle\",\"paragraphStyle\",\"lineHeight\",\"|\",\"paragraphFormat\",\"align\",\"formatOL\",\"formatUL\",\"outdent\",\"indent\",\"quote\",\"-\",\"insertLink\",\"insertImage\",\"insertVideo\",\"embedly\",\"insertFile\",\"insertTable\",\"|\",\"emoticons\",\"fontAwesome\",\"specialCharacters\",\"insertHR\",\"selectAll\",\"clearFormatting\",\"|\",\"print\",\"getPDF\",\"spellChecker\",\"help\",\"html\",\"|\",\"undo\",\"redo\"],w.FE.TOOLBAR_BUTTONS_MD=null,w.FE.TOOLBAR_BUTTONS_SM=[\"bold\",\"italic\",\"underline\",\"|\",\"fontFamily\",\"fontSize\",\"insertLink\",\"insertImage\",\"table\",\"|\",\"undo\",\"redo\"],w.FE.TOOLBAR_BUTTONS_XS=[\"bold\",\"italic\",\"fontFamily\",\"fontSize\",\"|\",\"undo\",\"redo\"],w.FE.MODULES.toolbar=function(o){var r=[];function i(e,t){for(var n=0;n<t.length;n++)\"-\"!=t[n]&&\"|\"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function a(){var e=o.helpers.screenSize();return r[e]}function e(){var e=a();o.$tb.find(\".fr-separator\").remove(),o.$tb.find(\"> .fr-command, > div.fr-btn-wrap\").addClass(\"fr-hidden\");for(var t=0;t<e.length;t++)if(\"|\"==e[t]||\"-\"==e[t])o.$tb.append(o.button.buildList([e[t]]));else{var n=o.$tb.find('> .fr-command[data-cmd=\"'+e[t]+'\"], > div.fr-btn-wrap > .fr-command[data-cmd=\"'+e[t]+'\"]'),r=null;o.node.hasClass(n.next().get(0),\"fr-dropdown-menu\")&&(r=n.next()),o.node.hasClass(n.next().get(0),\"fr-options\")&&(n=n.parent()),n.removeClass(\"fr-hidden\").appendTo(o.$tb),r&&r.appendTo(o.$tb)}}function t(e,t){setTimeout(function(){if((!e||e.which!=w.FE.KEYCODE.ESC)&&o.selection.inEditor()&&o.core.hasFocus()&&!o.popups.areVisible()&&(o.opts.toolbarVisibleWithoutSelection||!o.selection.isCollapsed()&&!o.keys.isIME()||t)){if(o.$tb.data(\"instance\",o),!1===o.events.trigger(\"toolbar.show\",[e]))return!1;o.$tb.show(),o.opts.toolbarContainer||o.position.forSelection(o.$tb),1<o.opts.zIndex?o.$tb.css(\"z-index\",o.opts.zIndex+1):o.$tb.css(\"z-index\",null)}},0)}function n(e){return(!e||\"blur\"!==e.type||document.activeElement!==o.el)&&(!(!e||\"keydown\"!==e.type||!o.keys.ctrlKey(e))||(!!o.button.getButtons(\".fr-dropdown.fr-active\").next().find(o.o_doc.activeElement).length||void(!1!==o.events.trigger(\"toolbar.hide\")&&o.$tb.hide())))}r[w.FE.XS]=o.opts.toolbarButtonsXS||o.opts.toolbarButtons||w.FE.TOOLBAR_BUTTONS_XS||w.FE.TOOLBAR_BUTTONS||[],r[w.FE.SM]=o.opts.toolbarButtonsSM||o.opts.toolbarButtons||w.FE.TOOLBAR_BUTTONS_SM||w.FE.TOOLBAR_BUTTONS||[],r[w.FE.MD]=o.opts.toolbarButtonsMD||o.opts.toolbarButtons||w.FE.TOOLBAR_BUTTONS_MD||w.FE.TOOLBAR_BUTTONS||[],r[w.FE.LG]=o.opts.toolbarButtons||w.FE.TOOLBAR_BUTTONS||[];var s=null;function l(e){clearTimeout(s),e&&e.which==w.FE.KEYCODE.ESC||(s=setTimeout(t,o.opts.typingTimer))}function d(){o.events.on(\"window.mousedown\",n),o.events.on(\"keydown\",n),o.events.on(\"blur\",n),o.helpers.isMobile()||o.events.on(\"window.mouseup\",t),o.helpers.isMobile()?o.helpers.isIOS()||(o.events.on(\"window.touchend\",t),o.browser.mozilla&&setInterval(t,200)):o.events.on(\"window.keyup\",l),o.events.on(\"keydown\",function(e){e&&e.which==w.FE.KEYCODE.ESC&&n()}),o.events.on(\"keydown\",function(e){if(e.which==w.FE.KEYCODE.ALT)return e.stopPropagation(),!1},!0),o.events.$on(o.$wp,\"scroll.toolbar\",t),o.events.$on(o.$sc,\"scroll.toolbar\",t),o.events.on(\"commands.after\",t),o.helpers.isMobile()&&(o.events.$on(o.$doc,\"selectionchange\",l),o.events.$on(o.$doc,\"orientationchange\",t))}function c(){o.$tb.html(\"\").removeData().remove(),o.$tb=null}function f(){o.$box.removeClass(\"fr-top fr-bottom fr-inline fr-basic\"),o.$box.find(\".fr-sticky-dummy\").remove()}function p(){o.opts.theme&&o.$tb.addClass(o.opts.theme+\"-theme\"),1<o.opts.zIndex&&o.$tb.css(\"z-index\",o.opts.zIndex+1),\"auto\"!=o.opts.direction&&o.$tb.removeClass(\"fr-ltr fr-rtl\").addClass(\"fr-\"+o.opts.direction),o.helpers.isMobile()?o.$tb.addClass(\"fr-mobile\"):o.$tb.addClass(\"fr-desktop\"),o.opts.toolbarContainer?(o.opts.toolbarInline&&(d(),n()),o.opts.toolbarBottom?o.$tb.addClass(\"fr-bottom\"):o.$tb.addClass(\"fr-top\")):o.opts.toolbarInline?(o.$sc.append(o.$tb),o.$tb.data(\"container\",o.$sc),o.$tb.addClass(\"fr-inline\"),o.$tb.prepend('<span class=\"fr-arrow\"></span>'),d(),o.opts.toolbarBottom=!1):(o.opts.toolbarBottom&&!o.helpers.isIOS()?(o.$box.append(o.$tb),o.$tb.addClass(\"fr-bottom\"),o.$box.addClass(\"fr-bottom\")):(o.opts.toolbarBottom=!1,o.$box.prepend(o.$tb),o.$tb.addClass(\"fr-top\"),o.$box.addClass(\"fr-top\")),o.$tb.addClass(\"fr-basic\"),o.opts.toolbarSticky&&(o.opts.toolbarStickyOffset&&(o.opts.toolbarBottom?o.$tb.css(\"bottom\",o.opts.toolbarStickyOffset):o.$tb.css(\"top\",o.opts.toolbarStickyOffset)),o.position.addSticky(o.$tb))),function(){var e=w.merge([],a());i(e,r[w.FE.XS]),i(e,r[w.FE.SM]),i(e,r[w.FE.MD]),i(e,r[w.FE.LG]);for(var t=e.length-1;0<=t;t--)\"-\"!=e[t]&&\"|\"!=e[t]&&e.indexOf(e[t])<t&&e.splice(t,1);var n=o.button.buildList(e,a());o.$tb.append(n),o.button.bindCommands(o.$tb)}(),o.events.$on(w(o.o_win),\"resize\",e),o.events.$on(w(o.o_win),\"orientationchange\",e),o.accessibility.registerToolbar(o.$tb),o.events.$on(o.$tb,o._mousedown+\" \"+o._mouseup,function(e){var t=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(t&&\"INPUT\"!=t.tagName&&!o.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}var u=!1;return{_init:function(){if(o.$sc=w(o.opts.scrollableContainer).first(),!o.$wp)return!1;o.opts.toolbarContainer?(o.shared.$tb?(o.$tb=o.shared.$tb,o.opts.toolbarInline&&d()):(o.shared.$tb=w('<div class=\"fr-toolbar\"></div>'),o.$tb=o.shared.$tb,w(o.opts.toolbarContainer).append(o.$tb),p(),o.$tb.data(\"instance\",o)),o.opts.toolbarInline?o.$box.addClass(\"fr-inline\"):o.$box.addClass(\"fr-basic\"),o.events.on(\"focus\",function(){o.$tb.data(\"instance\",o)},!0),o.opts.toolbarInline=!1):o.opts.toolbarInline?(o.$box.addClass(\"fr-inline\"),o.shared.$tb?(o.$tb=o.shared.$tb,d()):(o.shared.$tb=w('<div class=\"fr-toolbar\"></div>'),o.$tb=o.shared.$tb,p())):(o.$box.addClass(\"fr-basic\"),o.$tb=w('<div class=\"fr-toolbar\"></div>'),p(),o.$tb.data(\"instance\",o)),o.events.on(\"destroy\",f,!0),o.events.on(o.opts.toolbarInline||o.opts.toolbarContainer?\"shared.destroy\":\"destroy\",c,!0)},hide:n,show:function(){if(!1===o.events.trigger(\"toolbar.show\"))return!1;o.$tb.show()},showInline:t,disable:function(){!u&&o.$tb&&(o.$tb.find(\"> .fr-command, .fr-btn-wrap > .fr-command\").addClass(\"fr-disabled fr-no-refresh\").attr(\"aria-disabled\",!0),u=!0)},enable:function(){u&&o.$tb&&(o.$tb.find(\"> .fr-command, .fr-btn-wrap > .fr-command\").removeClass(\"fr-disabled fr-no-refresh\").attr(\"aria-disabled\",!1),u=!1),o.button.bulkRefresh()}}}});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(t){\"function\"==typeof define&&define.amd?define([\"jquery\"],t):\"object\"==typeof module&&module.exports?module.exports=function(e,n){return n===undefined&&(n=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),t(n)}:t(window.jQuery)}(function(r){r.FE.PLUGINS.align=function(a){return{apply:function(e){var n=a.selection.element();if(r(n).parents(\".fr-img-caption\").length)r(n).css(\"text-align\",e);else{a.selection.save(),a.html.wrap(!0,!0,!0,!0),a.selection.restore();for(var t=a.selection.blocks(),i=0;i<t.length;i++)r(t[i]).css(\"text-align\",e).removeClass(\"fr-temp-div\"),\"\"===r(t[i]).attr(\"class\")&&r(t[i]).removeAttr(\"class\"),\"\"===r(t[i]).attr(\"style\")&&r(t[i]).removeAttr(\"style\");a.selection.save(),a.html.unwrap(),a.selection.restore()}},refresh:function(e){var n=a.selection.blocks();if(n.length){var t=a.helpers.getAlignment(r(n[0]));e.find(\"> *:first\").replaceWith(a.icon.create(\"align-\"+t))}},refreshOnShow:function(e,n){var t=a.selection.blocks();if(t.length){var i=a.helpers.getAlignment(r(t[0]));n.find('a.fr-command[data-param1=\"'+i+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0)}},refreshForToolbar:function(e){var n=a.selection.blocks();if(n.length){var t=a.helpers.getAlignment(r(n[0]));\"align\"+(t=t.charAt(0).toUpperCase()+t.slice(1))==e.attr(\"data-cmd\")&&e.addClass(\"fr-active\")}}}},r.FE.DefineIcon(\"align\",{NAME:\"align-left\"}),r.FE.DefineIcon(\"align-left\",{NAME:\"align-left\"}),r.FE.DefineIcon(\"align-right\",{NAME:\"align-right\"}),r.FE.DefineIcon(\"align-center\",{NAME:\"align-center\"}),r.FE.DefineIcon(\"align-justify\",{NAME:\"align-justify\"}),r.FE.RegisterCommand(\"align\",{type:\"dropdown\",title:\"Align\",options:{left:\"Align Left\",center:\"Align Center\",right:\"Align Right\",justify:\"Align Justify\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',n=r.FE.COMMANDS.align.options;for(var t in n)n.hasOwnProperty(t)&&(e+='<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"align\" data-param1=\"'+t+'\" title=\"'+this.language.translate(n[t])+'\">'+this.icon.create(\"align-\"+t)+'<span class=\"fr-sr-only\">'+this.language.translate(n[t])+\"</span></a></li>\");return e+=\"</ul>\"},callback:function(e,n){this.align.apply(n)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,n){this.align.refreshOnShow(e,n)},plugin:\"align\"}),r.FE.RegisterCommand(\"alignLeft\",{type:\"button\",icon:\"align-left\",callback:function(){this.align.apply(\"left\")},refresh:function(e){this.align.refreshForToolbar(e)}}),r.FE.RegisterCommand(\"alignRight\",{type:\"button\",icon:\"align-right\",callback:function(){this.align.apply(\"right\")},refresh:function(e){this.align.refreshForToolbar(e)}}),r.FE.RegisterCommand(\"alignCenter\",{type:\"button\",icon:\"align-center\",callback:function(){this.align.apply(\"center\")},refresh:function(e){this.align.refreshForToolbar(e)}}),r.FE.RegisterCommand(\"alignJustify\",{type:\"button\",icon:\"align-justify\",callback:function(){this.align.apply(\"justify\")},refresh:function(e){this.align.refreshForToolbar(e)}})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):\"object\"==typeof module&&module.exports?module.exports=function(o,r){return r===undefined&&(r=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(o)),e(r)}:e(window.jQuery)}(function(C){C.extend(C.FE.POPUP_TEMPLATES,{\"colors.picker\":\"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]\"}),C.extend(C.FE.DEFAULTS,{colorsText:[\"#61BD6D\",\"#1ABC9C\",\"#54ACD2\",\"#2C82C9\",\"#9365B8\",\"#475577\",\"#CCCCCC\",\"#41A85F\",\"#00A885\",\"#3D8EB9\",\"#2969B0\",\"#553982\",\"#28324E\",\"#000000\",\"#F7DA64\",\"#FBA026\",\"#EB6B56\",\"#E25041\",\"#A38F84\",\"#EFEFEF\",\"#FFFFFF\",\"#FAC51C\",\"#F37934\",\"#D14841\",\"#B8312F\",\"#7C706B\",\"#D1D5D8\",\"REMOVE\"],colorsBackground:[\"#61BD6D\",\"#1ABC9C\",\"#54ACD2\",\"#2C82C9\",\"#9365B8\",\"#475577\",\"#CCCCCC\",\"#41A85F\",\"#00A885\",\"#3D8EB9\",\"#2969B0\",\"#553982\",\"#28324E\",\"#000000\",\"#F7DA64\",\"#FBA026\",\"#EB6B56\",\"#E25041\",\"#A38F84\",\"#EFEFEF\",\"#FFFFFF\",\"#FAC51C\",\"#F37934\",\"#D14841\",\"#B8312F\",\"#7C706B\",\"#D1D5D8\",\"REMOVE\"],colorsStep:7,colorsHEXInput:!0,colorsDefaultTab:\"text\",colorsButtons:[\"colorsBack\",\"|\",\"-\"]});var c=[\"text\",\"background\"];C.FE.PLUGINS.colors=function(E){function r(){E.popups.hide(\"colors.picker\")}function s(o){for(var r=\"text\"==o?E.opts.colorsText:E.opts.colorsBackground,e='<div class=\"fr-color-set fr-'+o+\"-color\"+(E.opts.colorsDefaultTab==o||\"text\"!=E.opts.colorsDefaultTab&&\"background\"!=E.opts.colorsDefaultTab&&\"text\"==o?\" fr-selected-set\":\"\")+'\">',t=0;t<r.length;t++)0!==t&&t%E.opts.colorsStep==0&&(e+=\"<br>\"),\"REMOVE\"!=r[t]?e+='<span class=\"fr-command fr-select-color\" style=\"background: '+r[t]+';\" tabIndex=\"-1\" aria-selected=\"false\" role=\"button\" data-cmd=\"'+o+'Color\" data-param1=\"'+r[t]+'\"><span class=\"fr-sr-only\">'+E.language.translate(\"Color\")+\" \"+r[t]+\"&nbsp;&nbsp;&nbsp;</span></span>\":e+='<span class=\"fr-command fr-select-color\" data-cmd=\"'+o+'Color\" tabIndex=\"-1\" role=\"button\" data-param1=\"REMOVE\" title=\"'+E.language.translate(\"Clear Formatting\")+'\">'+E.icon.create(\"remove\")+'<span class=\"fr-sr-only\">'+E.language.translate(\"Clear Formatting\")+\"</span></span>\";return e+\"</div>\"}function l(o){var r=E.popups.get(\"colors.picker\"),e=r.find(\".fr-\"+o+\"-color .fr-active-item\").attr(\"data-param1\"),t=r.find(\".fr-color-hex-layer input\"),a=r.find('.fr-colors-tab[data-param1=\"'+o+'\"]');t.length&&a.hasClass(\"fr-selected-tab\")&&t.val(e).trigger(\"change\")}function t(o){\"REMOVE\"!=o?E.format.applyStyle(\"background-color\",E.helpers.HEXtoRGB(o)):E.format.removeStyle(\"background-color\"),r()}function a(o){\"REMOVE\"!=o?E.format.applyStyle(\"color\",E.helpers.HEXtoRGB(o)):E.format.removeStyle(\"color\"),r()}return{showColorsPopup:function(){var o=E.$tb.find('.fr-command[data-cmd=\"color\"]'),r=E.popups.get(\"colors.picker\");if(r||(r=function(){var o,r='<div class=\"fr-buttons fr-colors-buttons\">';E.opts.toolbarInline&&0<E.opts.colorsButtons.length&&(r+=E.button.buildList(E.opts.colorsButtons)),r+=(o='<div class=\"fr-colors-tabs fr-group\">',o+='<span class=\"fr-colors-tab '+(\"background\"==E.opts.colorsDefaultTab?\"\":\"fr-selected-tab \")+'fr-command\" tabIndex=\"-1\" role=\"button\" aria-pressed=\"'+(\"background\"!=E.opts.colorsDefaultTab)+'\" data-param1=\"text\" data-cmd=\"colorChangeSet\" title=\"'+E.language.translate(\"Text\")+'\">'+E.language.translate(\"Text\")+\"</span>\",(o+='<span class=\"fr-colors-tab '+(\"background\"==E.opts.colorsDefaultTab?\"fr-selected-tab\":\"\")+'fr-command\" tabIndex=\"-1\" role=\"button\" aria-pressed=\"'+(\"background\"==E.opts.colorsDefaultTab)+'\" data-param1=\"background\" data-cmd=\"colorChangeSet\" title=\"'+E.language.translate(\"Background\")+'\">'+E.language.translate(\"Background\")+\"</span>\")+\"</div></div>\");var e=\"\";E.opts.colorsHEXInput&&(e='<div class=\"fr-color-hex-layer fr-active fr-layer\" id=\"fr-color-hex-layer-'+E.id+'\"><div class=\"fr-input-line\"><input maxlength=\"7\" id=\"fr-color-hex-layer-text-'+E.id+'\" type=\"text\" placeholder=\"'+E.language.translate(\"HEX Color\")+'\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"customColor\" tabIndex=\"2\" role=\"button\">'+E.language.translate(\"OK\")+\"</button></div></div>\");var b,t={buttons:r,text_colors:s(\"text\"),background_colors:s(\"background\"),custom_color:e},a=E.popups.create(\"colors.picker\",t);return b=a,E.events.on(\"popup.tab\",function(o){var r=C(o.currentTarget);if(!E.popups.isVisible(\"colors.picker\")||!r.is(\"span\"))return!0;var e=o.which,t=!0;if(C.FE.KEYCODE.TAB==e){var a=b.find(\".fr-buttons\");t=!E.accessibility.focusToolbar(a,!!o.shiftKey)}else if(C.FE.KEYCODE.ARROW_UP==e||C.FE.KEYCODE.ARROW_DOWN==e||C.FE.KEYCODE.ARROW_LEFT==e||C.FE.KEYCODE.ARROW_RIGHT==e){if(r.is(\"span.fr-select-color\")){var s=r.parent().find(\"span.fr-select-color\"),l=s.index(r),c=E.opts.colorsStep,n=Math.floor(s.length/c),i=l%c,p=Math.floor(l/c),u=p*c+i,d=n*c;C.FE.KEYCODE.ARROW_UP==e?u=((u-c)%d+d)%d:C.FE.KEYCODE.ARROW_DOWN==e?u=(u+c)%d:C.FE.KEYCODE.ARROW_LEFT==e?u=((u-1)%d+d)%d:C.FE.KEYCODE.ARROW_RIGHT==e&&(u=(u+1)%d);var f=C(s.get(u));E.events.disableBlur(),f.focus(),t=!1}}else C.FE.KEYCODE.ENTER==e&&(E.button.exec(r),t=!1);return!1===t&&(o.preventDefault(),o.stopPropagation()),t},!0),a}()),!r.hasClass(\"fr-active\"))if(E.popups.setContainer(\"colors.picker\",E.$tb),c.map(function(o){!function(o){var r,e=E.popups.get(\"colors.picker\"),t=C(E.selection.element());r=\"background\"==o?\"background-color\":\"color\";var a=e.find(\".fr-\"+o+\"-color .fr-select-color\");for(a.find(\".fr-selected-color\").remove(),a.removeClass(\"fr-active-item\"),a.not('[data-param1=\"REMOVE\"]').attr(\"aria-selected\",!1);t.get(0)!=E.el;){if(\"transparent\"!=t.css(r)&&\"rgba(0, 0, 0, 0)\"!=t.css(r)){var s=e.find(\".fr-\"+o+'-color .fr-select-color[data-param1=\"'+E.helpers.RGBToHex(t.css(r))+'\"]');s.append('<span class=\"fr-selected-color\" aria-hidden=\"true\">\\uf00c</span>'),s.addClass(\"fr-active-item\").attr(\"aria-selected\",!0);break}t=t.parent()}l(o)}(o)}),o.is(\":visible\")){var e=o.offset().left+o.outerWidth()/2,t=o.offset().top+(E.opts.toolbarBottom?10:o.outerHeight()-10);E.popups.show(\"colors.picker\",e,t,o.outerHeight())}else E.position.forSelection(r),E.popups.show(\"colors.picker\")},hideColorsPopup:r,changeSet:function(o,r){o.hasClass(\"fr-selected-tab\")||(o.siblings().removeClass(\"fr-selected-tab\").attr(\"aria-pressed\",!1),o.addClass(\"fr-selected-tab\").attr(\"aria-pressed\",!0),o.parents(\".fr-popup\").find(\".fr-color-set\").removeClass(\"fr-selected-set\"),o.parents(\".fr-popup\").find(\".fr-color-set.fr-\"+r+\"-color\").addClass(\"fr-selected-set\"),l(r)),E.accessibility.focusPopup(o.parents(\".fr-popup\"))},background:t,customColor:function(){var o=E.popups.get(\"colors.picker\"),r=o.find(\".fr-color-hex-layer input\");if(r.length){var e=r.val();\"background\"==o.find(\".fr-selected-tab\").attr(\"data-param1\")?t(e):a(e)}},text:a,back:function(){E.popups.hide(\"colors.picker\"),E.toolbar.showInline()}}},C.FE.DefineIcon(\"colors\",{NAME:\"tint\"}),C.FE.RegisterCommand(\"color\",{title:\"Colors\",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible(\"colors.picker\")?(this.$el.find(\".fr-marker\").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide(\"colors.picker\")):this.colors.showColorsPopup()},plugin:\"colors\"}),C.FE.RegisterCommand(\"textColor\",{undo:!0,callback:function(o,r){this.colors.text(r)}}),C.FE.RegisterCommand(\"backgroundColor\",{undo:!0,callback:function(o,r){this.colors.background(r)}}),C.FE.RegisterCommand(\"colorChangeSet\",{undo:!1,focus:!1,callback:function(o,r){var e=this.popups.get(\"colors.picker\").find('.fr-command[data-cmd=\"'+o+'\"][data-param1=\"'+r+'\"]');this.colors.changeSet(e,r)}}),C.FE.DefineIcon(\"colorsBack\",{NAME:\"arrow-left\"}),C.FE.RegisterCommand(\"colorsBack\",{title:\"Back\",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),C.FE.RegisterCommand(\"customColor\",{title:\"OK\",undo:!0,callback:function(){this.colors.customColor()}}),C.FE.DefineIcon(\"remove\",{NAME:\"eraser\"})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(n){\"function\"==typeof define&&define.amd?define([\"jquery\"],n):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),n(t)}:n(window.jQuery)}(function(v){v.extend(v.FE.DEFAULTS,{dragInline:!0}),v.FE.PLUGINS.draggable=function(f){function e(e){return!(!e.originalEvent||!e.originalEvent.target||e.originalEvent.target.nodeType!=Node.TEXT_NODE)||(e.target&&\"A\"==e.target.tagName&&1==e.target.childNodes.length&&\"IMG\"==e.target.childNodes[0].tagName&&(e.target=e.target.childNodes[0]),v(e.target).hasClass(\"fr-draggable\")?(f.undo.canDo()||f.undo.saveStep(),f.opts.dragInline?f.$el.attr(\"contenteditable\",!0):f.$el.attr(\"contenteditable\",!1),f.opts.toolbarInline&&f.toolbar.hide(),v(e.target).addClass(\"fr-dragging\"),f.browser.msie||f.browser.edge||f.selection.clear(),void e.originalEvent.dataTransfer.setData(\"text\",\"Froala\")):(f.browser.msie||e.preventDefault(),!1))}function g(e){return!(e&&(\"HTML\"==e.tagName||\"BODY\"==e.tagName||f.node.isElement(e)))}function d(e,t,n){f.opts.iframe&&(e+=f.$iframe.offset().top,t+=f.$iframe.offset().left),p.offset().top!=e&&p.css(\"top\",e),p.offset().left!=t&&p.css(\"left\",t),p.width()!=n&&p.css(\"width\",n)}function t(e){e.originalEvent.dataTransfer.dropEffect=\"move\",f.opts.dragInline?function(){for(var e=null,t=0;t<v.FE.INSTANCES.length;t++)if((e=v.FE.INSTANCES[t].$el.find(\".fr-dragging\")).length)return e.get(0)}()||!f.browser.msie&&!f.browser.edge||e.preventDefault():(e.preventDefault(),function(e){var t=f.doc.elementFromPoint(e.originalEvent.pageX-f.win.pageXOffset,e.originalEvent.pageY-f.win.pageYOffset);if(!g(t)){for(var n=0,r=t;!g(r)&&r==t&&0<e.originalEvent.pageY-f.win.pageYOffset-n;)n++,r=f.doc.elementFromPoint(e.originalEvent.pageX-f.win.pageXOffset,e.originalEvent.pageY-f.win.pageYOffset-n);(!g(r)||p&&0===f.$el.find(r).length&&r!=p.get(0))&&(r=null);for(var a=0,o=t;!g(o)&&o==t&&e.originalEvent.pageY-f.win.pageYOffset+a<v(f.doc).height();)a++,o=f.doc.elementFromPoint(e.originalEvent.pageX-f.win.pageXOffset,e.originalEvent.pageY-f.win.pageYOffset+a);(!g(o)||p&&0===f.$el.find(o).length&&o!=p.get(0))&&(o=null),t=null==o&&r?r:o&&null==r?o:o&&r?n<a?r:o:null}if(v(t).hasClass(\"fr-drag-helper\"))return;if(t&&!f.node.isBlock(t)&&(t=f.node.blockParent(t)),t&&0<=[\"TD\",\"TH\",\"TR\",\"THEAD\",\"TBODY\"].indexOf(t.tagName)&&(t=v(t).parents(\"table\").get(0)),t&&0<=[\"LI\"].indexOf(t.tagName)&&(t=v(t).parents(\"UL, OL\").get(0)),t&&!v(t).hasClass(\"fr-drag-helper\")){var i;p||(v.FE.$draggable_helper||(v.FE.$draggable_helper=v('<div class=\"fr-drag-helper\"></div>')),p=v.FE.$draggable_helper,f.events.on(\"shared.destroy\",function(){p.html(\"\").removeData().remove(),p=null},!0)),i=e.originalEvent.pageY<v(t).offset().top+v(t).outerHeight()/2;var l=v(t),s=0;i||0!==l.next().length?(i||(l=l.next()),\"before\"==p.data(\"fr-position\")&&l.is(p.data(\"fr-tag\"))||(0<l.prev().length&&(s=parseFloat(l.prev().css(\"margin-bottom\"))||0),s=Math.max(s,parseFloat(l.css(\"margin-top\"))||0),d(l.offset().top-s/2-f.$box.offset().top,l.offset().left-f.win.pageXOffset-f.$box.offset().left,l.width()),p.data(\"fr-position\",\"before\"))):\"after\"==p.data(\"fr-position\")&&l.is(p.data(\"fr-tag\"))||(s=parseFloat(l.css(\"margin-bottom\"))||0,d(l.offset().top+v(t).height()+s/2-f.$box.offset().top,l.offset().left-f.win.pageXOffset-f.$box.offset().left,l.width()),p.data(\"fr-position\",\"after\")),p.data(\"fr-tag\",l),p.addClass(\"fr-visible\"),p.appendTo(f.$box)}else p&&0<f.$box.find(p).length&&p.removeClass(\"fr-visible\")}(e))}function n(e){e.originalEvent.dataTransfer.dropEffect=\"move\",f.opts.dragInline||e.preventDefault()}function r(e){f.$el.attr(\"contenteditable\",!0);var t=f.$el.find(\".fr-dragging\");p&&p.hasClass(\"fr-visible\")&&f.$box.find(p).length?a(e):t.length&&(e.preventDefault(),e.stopPropagation()),p&&f.$box.find(p).length&&p.removeClass(\"fr-visible\"),t.removeClass(\"fr-dragging\")}function a(e){var t,n;\"true\"!==f.$el.attr(\"contenteditable\")&&f.$el.attr(\"contenteditable\",!0);for(var r=0;r<v.FE.INSTANCES.length;r++)if((t=v.FE.INSTANCES[r].$el.find(\".fr-dragging\")).length){n=v.FE.INSTANCES[r];break}if(t.length){if(e.preventDefault(),e.stopPropagation(),p&&p.hasClass(\"fr-visible\")&&f.$box.find(p).length)p.data(\"fr-tag\")[p.data(\"fr-position\")]('<span class=\"fr-marker\"></span>'),p.removeClass(\"fr-visible\");else if(!1===f.markers.insertAtPoint(e.originalEvent))return!1;if(t.removeClass(\"fr-dragging\"),!1===(t=f.events.chainTrigger(\"element.beforeDrop\",t)))return!1;var a=t;if(t.parent().is(\"A\")&&1==t.parent().get(0).childNodes.length&&(a=t.parent()),f.core.isEmpty())f.events.focus();else f.$el.find(\".fr-marker\").replaceWith(v.FE.MARKERS),f.selection.restore();if(n==f||f.undo.canDo()||f.undo.saveStep(),f.core.isEmpty())f.$el.html(a);else{var o=f.markers.insert();0===a.find(o).length?v(o).replaceWith(a):0===t.find(o).length&&v(o).replaceWith(t),t.after(v.FE.MARKERS),f.selection.restore()}return f.popups.hideAll(),f.selection.save(),f.$el.find(f.html.emptyBlockTagsQuery()).not(\"TD, TH, LI, .fr-inner\").not(f.opts.htmlAllowedEmptyTags.join(\",\")).remove(),f.html.wrap(),f.html.fillEmptyBlocks(),f.selection.restore(),f.undo.saveStep(),f.opts.iframe&&f.size.syncIframe(),n!=f&&(n.popups.hideAll(),n.$el.find(n.html.emptyBlockTagsQuery()).not(\"TD, TH, LI, .fr-inner\").remove(),n.html.wrap(),n.html.fillEmptyBlocks(),n.undo.saveStep(),n.events.trigger(\"element.dropped\"),n.opts.iframe&&n.size.syncIframe()),f.events.trigger(\"element.dropped\",[a]),!1}p&&p.removeClass(\"fr-visible\"),f.undo.canDo()||f.undo.saveStep(),setTimeout(function(){f.undo.saveStep()},0)}function o(e){if(e&&\"DIV\"==e.tagName&&f.node.hasClass(e,\"fr-drag-helper\"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll(\"div.fr-drag-helper\"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])}var p;return{_init:function(){f.opts.enter==v.FE.ENTER_BR&&(f.opts.dragInline=!0),f.events.on(\"dragstart\",e,!0),f.events.on(\"dragover\",t,!0),f.events.on(\"dragenter\",n,!0),f.events.on(\"document.dragend\",r,!0),f.events.on(\"document.drop\",r,!0),f.events.on(\"drop\",a,!0),f.events.on(\"html.processGet\",o)}}}});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(i){\"function\"==typeof define&&define.amd?define([\"jquery\"],i):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),i(t)}:i(window.jQuery)}(function(T){T.extend(T.FE.POPUP_TEMPLATES,{\"file.insert\":\"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]\"}),T.extend(T.FE.DEFAULTS,{fileUpload:!0,fileUploadURL:null,fileUploadParam:\"file\",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:\"POST\",fileMaxSize:10485760,fileAllowedTypes:[\"*\"],fileInsertButtons:[\"fileBack\",\"|\"],fileUseSelectedText:!1}),T.FE.PLUGINS.file=function(f){var r,p=\"https://i.froala.com/upload\",l=2,d=3,u=4,c=5,v=6,i={};function g(){var e=f.popups.get(\"file.insert\");e||(e=S()),e.find(\".fr-layer.fr-active\").removeClass(\"fr-active\").addClass(\"fr-pactive\"),e.find(\".fr-file-progress-bar-layer\").addClass(\"fr-active\"),e.find(\".fr-buttons\").hide(),n(f.language.translate(\"Uploading\"),0)}function o(e){var t=f.popups.get(\"file.insert\");t&&(t.find(\".fr-layer.fr-pactive\").addClass(\"fr-active\").removeClass(\"fr-pactive\"),t.find(\".fr-file-progress-bar-layer\").removeClass(\"fr-active\"),t.find(\".fr-buttons\").show(),e&&(f.events.focus(),f.popups.hide(\"file.insert\")))}function n(e,t){var i=f.popups.get(\"file.insert\");if(i){var r=i.find(\".fr-file-progress-bar-layer\");r.find(\"h3\").text(e+(t?\" \"+t+\"%\":\"\")),r.removeClass(\"fr-error\"),t?(r.find(\"div\").removeClass(\"fr-indeterminate\"),r.find(\"div > span\").css(\"width\",t+\"%\")):r.find(\"div\").addClass(\"fr-indeterminate\")}}function h(e,t,i){f.edit.on(),f.events.focus(!0),f.selection.restore(),f.opts.fileUseSelectedText&&f.selection.text().length&&(t=f.selection.text()),f.html.insert('<a href=\"'+e+'\" target=\"_blank\" id=\"fr-inserted-file\" class=\"fr-file\">'+t+\"</a>\");var r=f.$el.find(\"#fr-inserted-file\");r.removeAttr(\"id\"),f.popups.hide(\"file.insert\"),f.undo.saveStep(),C(),f.events.trigger(\"file.inserted\",[r,i])}function m(e){var t=this.status,i=this.response,r=this.responseXML,o=this.responseText;try{if(f.opts.fileUploadToS3)if(201==t){var n=function(e){try{var t=T(e).find(\"Location\").text(),i=T(e).find(\"Key\").text();return!1===f.events.trigger(\"file.uploadedToS3\",[t,i,e],!0)?(f.edit.on(),!1):t}catch(r){return U(u,e),!1}}(r);n&&h(n,e,i||r)}else U(u,i||r);else if(200<=t&&t<300){var a=function(e){try{if(!1===f.events.trigger(\"file.uploaded\",[e],!0))return f.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(U(l,e),!1)}catch(i){return U(u,e),!1}}(o);a&&h(a.link,e,i||o)}else U(d,i||o)}catch(s){U(u,i||o)}}function b(){U(u,this.response||this.responseText||this.responseXML)}function y(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;n(f.language.translate(\"Uploading\"),t)}}function U(e,t){f.edit.on(),function(e){g();var t=f.popups.get(\"file.insert\").find(\".fr-file-progress-bar-layer\");t.addClass(\"fr-error\");var i=t.find(\"h3\");i.text(e),f.events.disableBlur(),i.focus()}(f.language.translate(\"Something went wrong. Please try again.\")),f.events.trigger(\"file.error\",[{code:e,message:i[e]},t])}function w(){f.edit.on(),o(!0)}function a(e){if(void 0!==e&&0<e.length){if(!1===f.events.trigger(\"file.beforeUpload\",[e]))return!1;var t,i=e[0];if((null===f.opts.fileUploadURL||f.opts.fileUploadURL==p)&&!f.opts.fileUploadToS3)return s=i,(l=new FileReader).onload=function(){for(var e=l.result,t=atob(l.result.split(\",\")[1]),i=[],r=0;r<t.length;r++)i.push(t.charCodeAt(r));e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:s.type})),f.file.insert(e,s.name,null)},g(),l.readAsDataURL(s),!1;if(i.size>f.opts.fileMaxSize)return U(c),!1;if(f.opts.fileAllowedTypes.indexOf(\"*\")<0&&f.opts.fileAllowedTypes.indexOf(i.type.replace(/file\\//g,\"\"))<0)return U(v),!1;if(f.drag_support.formdata&&(t=f.drag_support.formdata?new FormData:null),t){var r;if(!1!==f.opts.fileUploadToS3)for(r in t.append(\"key\",f.opts.fileUploadToS3.keyStart+(new Date).getTime()+\"-\"+(i.name||\"untitled\")),t.append(\"success_action_status\",\"201\"),t.append(\"X-Requested-With\",\"xhr\"),t.append(\"Content-Type\",i.type),f.opts.fileUploadToS3.params)f.opts.fileUploadToS3.params.hasOwnProperty(r)&&t.append(r,f.opts.fileUploadToS3.params[r]);for(r in f.opts.fileUploadParams)f.opts.fileUploadParams.hasOwnProperty(r)&&t.append(r,f.opts.fileUploadParams[r]);t.append(f.opts.fileUploadParam,i);var o=f.opts.fileUploadURL;f.opts.fileUploadToS3&&(o=f.opts.fileUploadToS3.uploadURL?f.opts.fileUploadToS3.uploadURL:\"https://\"+f.opts.fileUploadToS3.region+\".amazonaws.com/\"+f.opts.fileUploadToS3.bucket);var n=f.core.getXHR(o,f.opts.fileUploadMethod);n.onload=function(){m.call(n,i.name)},n.onerror=b,n.upload.onprogress=y,n.onabort=w,g();var a=f.popups.get(\"file.insert\");a&&a.off(\"abortUpload\").on(\"abortUpload\",function(){4!=n.readyState&&n.abort()}),n.send(t)}}var s,l}function s(){o()}function S(e){if(e)return f.popups.onHide(\"file.insert\",s),!0;var t;f.opts.fileUpload||f.opts.fileInsertButtons.splice(f.opts.fileInsertButtons.indexOf(\"fileUpload\"),1),t='<div class=\"fr-buttons\">'+f.button.buildList(f.opts.fileInsertButtons)+\"</div>\";var i=\"\";f.opts.fileUpload&&(i='<div class=\"fr-file-upload-layer fr-layer fr-active\" id=\"fr-file-upload-layer-'+f.id+'\"><strong>'+f.language.translate(\"Drop file\")+\"</strong><br>(\"+f.language.translate(\"or click\")+')<div class=\"fr-form\"><input type=\"file\" name=\"'+f.opts.fileUploadParam+'\" accept=\"'+(0<=f.opts.fileAllowedTypes.indexOf(\"*\")?\"/\":\"\")+f.opts.fileAllowedTypes.join(\", \").toLowerCase()+'\" tabIndex=\"-1\" aria-labelledby=\"fr-file-upload-layer-'+f.id+'\" role=\"button\"></div></div>');var r,o={buttons:t,upload_layer:i,progress_bar:'<div class=\"fr-file-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"fileDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'},n=f.popups.create(\"file.insert\",o);return r=n,f.events.$on(r,\"dragover dragenter\",\".fr-file-upload-layer\",function(){return T(this).addClass(\"fr-drop\"),!1},!0),f.events.$on(r,\"dragleave dragend\",\".fr-file-upload-layer\",function(){return T(this).removeClass(\"fr-drop\"),!1},!0),f.events.$on(r,\"drop\",\".fr-file-upload-layer\",function(e){e.preventDefault(),e.stopPropagation(),T(this).removeClass(\"fr-drop\");var t=e.originalEvent.dataTransfer;t&&t.files&&(r.data(\"instance\")||f).file.upload(t.files)},!0),f.helpers.isIOS()&&f.events.$on(r,\"touchstart\",'.fr-file-upload-layer input[type=\"file\"]',function(){T(this).trigger(\"click\")}),f.events.$on(r,\"change\",'.fr-file-upload-layer input[type=\"file\"]',function(){if(this.files){var e=r.data(\"instance\")||f;e.events.disableBlur(),r.find(\"input:focus\").blur(),e.events.enableBlur(),e.file.upload(this.files)}T(this).val(\"\")},!0),n}function e(e){f.node.hasClass(e,\"fr-file\")}function t(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var i=t.files[0];if(i&&\"undefined\"!=typeof i.type){if(i.type.indexOf(\"image\")<0){if(!f.opts.fileUpload)return e.preventDefault(),e.stopPropagation(),!1;f.markers.remove(),f.markers.insertAtPoint(e.originalEvent),f.$el.find(\".fr-marker\").replaceWith(T.FE.MARKERS),f.popups.hideAll();var r=f.popups.get(\"file.insert\");return r||(r=S()),f.popups.setContainer(\"file.insert\",f.$sc),f.popups.show(\"file.insert\",e.originalEvent.pageX,e.originalEvent.pageY),g(),a(t.files),e.preventDefault(),e.stopPropagation(),!1}}else i.type.indexOf(\"image\")<0&&(e.preventDefault(),e.stopPropagation())}}function C(){var e,t=Array.prototype.slice.call(f.el.querySelectorAll(\"a.fr-file\")),i=[];for(e=0;e<t.length;e++)i.push(t[e].getAttribute(\"href\"));if(r)for(e=0;e<r.length;e++)i.indexOf(r[e].getAttribute(\"href\"))<0&&f.events.trigger(\"file.unlink\",[r[e]]);r=t}return i[1]=\"File cannot be loaded from the passed link.\",i[l]=\"No link in upload response.\",i[d]=\"Error during file upload.\",i[u]=\"Parsing response failed.\",i[c]=\"File is too large.\",i[v]=\"File file type is invalid.\",i[7]=\"Files can be uploaded only to same domain in IE 8 and IE 9.\",{_init:function(){f.events.on(\"drop\",t),f.events.$on(f.$win,\"keydown\",function(e){var t=e.which,i=f.popups.get(\"file.insert\");i&&t==T.FE.KEYCODE.ESC&&i.trigger(\"abortUpload\")}),f.events.on(\"destroy\",function(){var e=f.popups.get(\"file.insert\");e&&e.trigger(\"abortUpload\")}),f.events.on(\"link.beforeRemove\",e),f.$wp&&(C(),f.events.on(\"contentChanged\",C)),S(!0)},showInsertPopup:function(){var e=f.$tb.find('.fr-command[data-cmd=\"insertFile\"]'),t=f.popups.get(\"file.insert\");if(t||(t=S()),o(),!t.hasClass(\"fr-active\"))if(f.popups.refresh(\"file.insert\"),f.popups.setContainer(\"file.insert\",f.$tb),e.is(\":visible\")){var i=e.offset().left+e.outerWidth()/2,r=e.offset().top+(f.opts.toolbarBottom?10:e.outerHeight()-10);f.popups.show(\"file.insert\",i,r,e.outerHeight())}else f.position.forSelection(t),f.popups.show(\"file.insert\")},upload:a,insert:h,back:function(){f.events.disableBlur(),f.selection.restore(),f.events.enableBlur(),f.popups.hide(\"file.insert\"),f.toolbar.showInline()},hideProgressBar:o}},T.FE.DefineIcon(\"insertFile\",{NAME:\"file-o\",FA5NAME:\"file\"}),T.FE.RegisterCommand(\"insertFile\",{title:\"Upload File\",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible(\"file.insert\")?(this.$el.find(\".fr-marker\").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide(\"file.insert\")):this.file.showInsertPopup()},plugin:\"file\"}),T.FE.DefineIcon(\"fileBack\",{NAME:\"arrow-left\"}),T.FE.RegisterCommand(\"fileBack\",{title:\"Back\",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass(\"fr-hidden\"),e.next(\".fr-separator\").removeClass(\"fr-hidden\")):(e.addClass(\"fr-hidden\"),e.next(\".fr-separator\").addClass(\"fr-hidden\"))}}),T.FE.RegisterCommand(\"fileDismissError\",{title:\"OK\",callback:function(){this.file.hideProgressBar(!0)}})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(n){\"function\"==typeof define&&define.amd?define([\"jquery\"],n):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),n(t)}:n(window.jQuery)}(function(l){l.extend(l.FE.DEFAULTS,{fontFamily:{\"Arial,Helvetica,sans-serif\":\"Arial\",\"Georgia,serif\":\"Georgia\",\"Impact,Charcoal,sans-serif\":\"Impact\",\"Tahoma,Geneva,sans-serif\":\"Tahoma\",\"Times New Roman,Times,serif,-webkit-standard\":\"Times New Roman\",\"Verdana,Geneva,sans-serif\":\"Verdana\"},fontFamilySelection:!1,fontFamilyDefaultSelection:\"Font Family\"}),l.FE.PLUGINS.fontFamily=function(o){function i(e){var t=e.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,\"\").replace(/\"|'| /g,\"\").split(\",\");return l.grep(t,function(e){return 0<e.length})}function r(e,t){for(var n=0;n<e.length;n++)for(var a=0;a<t.length;a++)if(e[n].toLowerCase()==t[a].toLowerCase())return[n,a];return null}function f(){var e=i(l(o.selection.element()).css(\"font-family\")),t=[];for(var n in o.opts.fontFamily)if(o.opts.fontFamily.hasOwnProperty(n)){var a=r(e,i(n));a&&t.push([n,a])}return 0===t.length?null:(t.sort(function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n}),t[0][0])}return{apply:function(e){o.format.applyStyle(\"font-family\",e)},refreshOnShow:function(e,t){t.find(\".fr-command.fr-active\").removeClass(\"fr-active\").attr(\"aria-selected\",!1),t.find('.fr-command[data-param1=\"'+f()+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0);var n=t.find(\".fr-dropdown-list\"),a=t.find(\".fr-active\").parent();a.length?n.parent().scrollTop(a.offset().top-n.offset().top-(n.parent().outerHeight()/2-a.outerHeight()/2)):n.parent().scrollTop(0)},refresh:function(e){if(o.opts.fontFamilySelection){var t=l(o.selection.element()).css(\"font-family\").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,\"\").replace(/\"|'|/g,\"\").split(\",\");e.find(\"> span\").text(o.opts.fontFamily[f()]||t[0]||o.language.translate(o.opts.fontFamilyDefaultSelection))}}}},l.FE.RegisterCommand(\"fontFamily\",{type:\"dropdown\",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"fontFamily\" data-param1=\"'+n+'\" style=\"font-family: '+n+'\" title=\"'+t[n]+'\">'+t[n]+\"</a></li>\");return e+=\"</ul>\"},title:\"Font Family\",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:\"fontFamily\"}),l.FE.DefineIcon(\"fontFamily\",{NAME:\"font\"})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(n){\"function\"==typeof define&&define.amd?define([\"jquery\"],n):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),n(t)}:n(window.jQuery)}(function(f){f.extend(f.FE.DEFAULTS,{fontSize:[\"8\",\"9\",\"10\",\"11\",\"12\",\"14\",\"18\",\"24\",\"30\",\"36\",\"48\",\"60\",\"72\",\"96\"],fontSizeSelection:!1,fontSizeDefaultSelection:\"12\",fontSizeUnit:\"px\"}),f.FE.PLUGINS.fontSize=function(r){return{apply:function(e){r.format.applyStyle(\"font-size\",e)},refreshOnShow:function(e,t){var n=f(r.selection.element()).css(\"font-size\");\"pt\"===r.opts.fontSizeUnit&&(n=Math.round(72*parseFloat(n,10)/96)+\"pt\"),t.find(\".fr-command.fr-active\").removeClass(\"fr-active\").attr(\"aria-selected\",!1),t.find('.fr-command[data-param1=\"'+n+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0);var o=t.find(\".fr-dropdown-list\"),i=t.find(\".fr-active\").parent();i.length?o.parent().scrollTop(i.offset().top-o.offset().top-(o.parent().outerHeight()/2-i.outerHeight()/2)):o.parent().scrollTop(0)},refresh:function(e){if(r.opts.fontSizeSelection){var t=r.helpers.getPX(f(r.selection.element()).css(\"font-size\"));\"pt\"===r.opts.fontSizeUnit&&(t=Math.round(72*parseFloat(t,10)/96)+\"pt\"),e.find(\"> span\").text(t)}}}},f.FE.RegisterCommand(\"fontSize\",{type:\"dropdown\",title:\"Font Size\",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=this.opts.fontSize,n=0;n<t.length;n++){var o=t[n];e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"fontSize\" data-param1=\"'+o+this.opts.fontSizeUnit+'\" title=\"'+o+'\">'+o+\"</a></li>\"}return e+=\"</ul>\"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:\"fontSize\"}),f.FE.DefineIcon(\"fontSize\",{NAME:\"text-height\"})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),a(t)}:a(window.jQuery)}(function(be){be.extend(be.FE.POPUP_TEMPLATES,{\"image.insert\":\"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]\",\"image.edit\":\"[_BUTTONS_]\",\"image.alt\":\"[_BUTTONS_][_ALT_LAYER_]\",\"image.size\":\"[_BUTTONS_][_SIZE_LAYER_]\"}),be.extend(be.FE.DEFAULTS,{imageInsertButtons:[\"imageBack\",\"|\",\"imageUpload\",\"imageByURL\"],imageEditButtons:[\"imageReplace\",\"imageAlign\",\"imageCaption\",\"imageRemove\",\"|\",\"imageLink\",\"linkOpen\",\"linkEdit\",\"linkRemove\",\"-\",\"imageDisplay\",\"imageStyle\",\"imageAlt\",\"imageSize\"],imageAltButtons:[\"imageBack\",\"|\"],imageSizeButtons:[\"imageBack\",\"|\"],imageUpload:!0,imageUploadURL:null,imageCORSProxy:\"https://cors-anywhere.froala.com\",imageUploadRemoteUrls:!0,imageUploadParam:\"file\",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:\"POST\",imageMaxSize:10485760,imageAllowedTypes:[\"jpeg\",\"jpg\",\"png\",\"gif\",\"webp\"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:\"center\",imageDefaultDisplay:\"block\",imageSplitHTML:!1,imageStyles:{\"fr-rounded\":\"Rounded\",\"fr-bordered\":\"Bordered\",\"fr-shadow\":\"Shadow\"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5,imageAddNewLine:!1}),be.FE.PLUGINS.image=function(g){var d,l,f,p,o,a,c=\"https://i.froala.com/upload\",t=!1,i=1,u=2,m=3,h=4,v=5,b=6,r={};function y(){var e=g.popups.get(\"image.insert\").find(\".fr-image-by-url-layer input\");e.val(\"\"),d&&e.val(d.attr(\"src\")),e.trigger(\"change\")}function n(){var e=g.popups.get(\"image.edit\");if(e||(e=U()),e){var t=he();ve()&&(t=t.find(\".fr-img-wrap\")),g.popups.setContainer(\"image.edit\",g.$sc),g.popups.refresh(\"image.edit\");var a=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();d.hasClass(\"fr-uploading\")?$():g.popups.show(\"image.edit\",a,i,t.outerHeight())}}function w(){I()}function e(){for(var e,t,a=\"IMG\"==g.el.tagName?[g.el]:g.el.querySelectorAll(\"img\"),i=0;i<a.length;i++){var r=be(a[i]);!g.opts.htmlUntouched&&g.opts.useClasses?((g.opts.imageDefaultAlign||g.opts.imageDefaultDisplay)&&(0<(t=r).parents(\".fr-img-caption\").length&&(t=t.parents(\".fr-img-caption:first\")),t.hasClass(\"fr-dii\")||t.hasClass(\"fr-dib\")||(t.addClass(\"fr-fi\"+ge(t)[0]),t.addClass(\"fr-di\"+de(t)[0]),t.css(\"margin\",\"\"),t.css(\"float\",\"\"),t.css(\"display\",\"\"),t.css(\"z-index\",\"\"),t.css(\"position\",\"\"),t.css(\"overflow\",\"\"),t.css(\"vertical-align\",\"\"))),g.opts.imageTextNear||(0<r.parents(\".fr-img-caption\").length?r.parents(\".fr-img-caption:first\").removeClass(\"fr-dii\").addClass(\"fr-dib\"):r.removeClass(\"fr-dii\").addClass(\"fr-dib\"))):g.opts.htmlUntouched||g.opts.useClasses||(g.opts.imageDefaultAlign||g.opts.imageDefaultDisplay)&&(0<(e=r).parents(\".fr-img-caption\").length&&(e=e.parents(\".fr-img-caption:first\")),pe(e,e.hasClass(\"fr-dib\")?\"block\":e.hasClass(\"fr-dii\")?\"inline\":null,e.hasClass(\"fr-fil\")?\"left\":e.hasClass(\"fr-fir\")?\"right\":ge(e)),e.removeClass(\"fr-dib fr-dii fr-fir fr-fil\")),g.opts.iframe&&r.on(\"load\",g.size.syncIframe)}}function E(e){void 0===e&&(e=!0);var t,a=Array.prototype.slice.call(g.el.querySelectorAll(\"img\")),i=[];for(t=0;t<a.length;t++)if(i.push(a[t].getAttribute(\"src\")),be(a[t]).toggleClass(\"fr-draggable\",g.opts.imageMove),\"\"===a[t].getAttribute(\"class\")&&a[t].removeAttribute(\"class\"),\"\"===a[t].getAttribute(\"style\")&&a[t].removeAttribute(\"style\"),a[t].parentNode&&a[t].parentNode.parentNode&&g.node.hasClass(a[t].parentNode.parentNode,\"fr-img-caption\")){var r=a[t].parentNode.parentNode;g.browser.mozilla||r.setAttribute(\"contenteditable\",!1),r.setAttribute(\"draggable\",!1),r.classList.add(\"fr-draggable\");var n=a[t].nextSibling;n&&!g.browser.mozilla&&n.setAttribute(\"contenteditable\",!0)}if(o)for(t=0;t<o.length;t++)i.indexOf(o[t].getAttribute(\"src\"))<0&&g.events.trigger(\"image.removed\",[be(o[t])]);if(o&&e){var s=[];for(t=0;t<o.length;t++)s.push(o[t].getAttribute(\"src\"));for(t=0;t<a.length;t++)s.indexOf(a[t].getAttribute(\"src\"))<0&&g.events.trigger(\"image.loaded\",[be(a[t])])}o=a}function C(){if(l||function(){var e;g.shared.$image_resizer?(l=g.shared.$image_resizer,p=g.shared.$img_overlay,g.events.on(\"destroy\",function(){l.removeClass(\"fr-active\").appendTo(be(\"body:first\"))},!0)):(g.shared.$image_resizer=be('<div class=\"fr-image-resizer\"></div>'),l=g.shared.$image_resizer,g.events.$on(l,\"mousedown\",function(e){e.stopPropagation()},!0),g.opts.imageResize&&(l.append(s(\"nw\")+s(\"ne\")+s(\"sw\")+s(\"se\")),g.shared.$img_overlay=be('<div class=\"fr-image-overlay\"></div>'),p=g.shared.$img_overlay,e=l.get(0).ownerDocument,be(e).find(\"body:first\").append(p)));g.events.on(\"shared.destroy\",function(){l.html(\"\").removeData().remove(),l=null,g.opts.imageResize&&(p.remove(),p=null)},!0),g.helpers.isMobile()||g.events.$on(be(g.o_win),\"resize\",function(){d&&!d.hasClass(\"fr-uploading\")?se(!0):d&&(C(),ce(),$(!1))});if(g.opts.imageResize){e=l.get(0).ownerDocument,g.events.$on(l,g._mousedown,\".fr-handler\",R),g.events.$on(be(e),g._mousemove,S),g.events.$on(be(e.defaultView||e.parentWindow),g._mouseup,x),g.events.$on(p,\"mouseleave\",x);var i=1,r=null,n=0;g.events.on(\"keydown\",function(e){if(d){var t=-1!=navigator.userAgent.indexOf(\"Mac OS X\")?e.metaKey:e.ctrlKey,a=e.which;(a!==r||200<e.timeStamp-n)&&(i=1),(a==be.FE.KEYCODE.EQUALS||g.browser.mozilla&&a==be.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?i=q.call(this,e,1,1,i):(a==be.FE.KEYCODE.HYPHEN||g.browser.mozilla&&a==be.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey?i=q.call(this,e,2,-1,i):g.keys.ctrlKey(e)||a!=be.FE.KEYCODE.ENTER||(d.before(\"<br>\"),k(d)),r=a,n=e.timeStamp}},!0),g.events.on(\"keyup\",function(){i=1})}}(),!d)return!1;var e=g.$wp||g.$sc;e.append(l),l.data(\"instance\",g);var t=e.scrollTop()-(\"static\"!=e.css(\"position\")?e.offset().top:0),a=e.scrollLeft()-(\"static\"!=e.css(\"position\")?e.offset().left:0);a-=g.helpers.getPX(e.css(\"border-left-width\")),t-=g.helpers.getPX(e.css(\"border-top-width\")),g.$el.is(\"img\")&&g.$sc.is(\"body\")&&(a=t=0);var i=he();ve()&&(i=i.find(\".fr-img-wrap\")),l.css(\"top\",(g.opts.iframe?i.offset().top:i.offset().top+t)-1).css(\"left\",(g.opts.iframe?i.offset().left:i.offset().left+a)-1).css(\"width\",i.get(0).getBoundingClientRect().width).css(\"height\",i.get(0).getBoundingClientRect().height).addClass(\"fr-active\")}function s(e){return'<div class=\"fr-handler fr-h'+e+'\"></div>'}function A(e){ve()?d.parents(\".fr-img-caption\").css(\"width\",e):d.css(\"width\",e)}function R(e){if(!g.core.sameInstance(l))return!0;if(e.preventDefault(),e.stopPropagation(),g.$el.find(\"img.fr-error\").left)return!1;g.undo.canDo()||g.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if(\"mousedown\"==e.type){var a=g.$oel.get(0).ownerDocument,i=a.defaultView||a.parentWindow,r=!1;try{r=i.location!=i.parent.location&&!(i.$&&i.$.FE)}catch(o){}r&&i.frameElement&&(t+=g.helpers.getPX(be(i.frameElement).offset().left)+i.frameElement.clientLeft)}(f=be(this)).data(\"start-x\",t),f.data(\"start-width\",d.width()),f.data(\"start-height\",d.height());var n=d.width();if(g.opts.imageResizeWithPercent){var s=d.parentsUntil(g.$el,g.html.blockTagsQuery()).get(0)||g.el;n=(n/be(s).outerWidth()*100).toFixed(2)+\"%\"}A(n),p.show(),g.popups.hideAll(),fe()}function S(e){if(!g.core.sameInstance(l))return!0;var t;if(f&&d){if(e.preventDefault(),g.$el.find(\"img.fr-error\").left)return!1;var a=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!a)return!1;var i=a-f.data(\"start-x\"),r=f.data(\"start-width\");if((f.hasClass(\"fr-hnw\")||f.hasClass(\"fr-hsw\"))&&(i=0-i),g.opts.imageResizeWithPercent){var n=d.parentsUntil(g.$el,g.html.blockTagsQuery()).get(0)||g.el;r=((r+i)/be(n).outerWidth()*100).toFixed(2),g.opts.imageRoundPercent&&(r=Math.round(r)),A(r+\"%\"),(t=ve()?(g.helpers.getPX(d.parents(\".fr-img-caption\").css(\"width\"))/be(n).outerWidth()*100).toFixed(2):(g.helpers.getPX(d.css(\"width\"))/be(n).outerWidth()*100).toFixed(2))===r||g.opts.imageRoundPercent||A(t+\"%\"),d.css(\"height\",\"\").removeAttr(\"height\")}else r+i>=g.opts.imageMinWidth&&(A(r+i),t=ve()?g.helpers.getPX(d.parents(\".fr-img-caption\").css(\"width\")):g.helpers.getPX(d.css(\"width\"))),t!==r+i&&A(t),((d.attr(\"style\")||\"\").match(/(^height:)|(; *height:)/)||d.attr(\"height\"))&&(d.css(\"height\",f.data(\"start-height\")*d.width()/f.data(\"start-width\")),d.removeAttr(\"height\"));C(),g.events.trigger(\"image.resize\",[me()])}}function x(e){if(!g.core.sameInstance(l))return!0;if(f&&d){if(e&&e.stopPropagation(),g.$el.find(\"img.fr-error\").left)return!1;f=null,p.hide(),C(),n(),g.undo.saveStep(),g.events.trigger(\"image.resizeEnd\",[me()])}}function D(e,t,a){g.edit.on(),d&&d.addClass(\"fr-error\"),function(e){$();var t=g.popups.get(\"image.insert\").find(\".fr-image-progress-bar-layer\");t.addClass(\"fr-error\");var a=t.find(\"h3\");a.text(e),g.events.disableBlur(),a.focus()}(g.language.translate(\"Something went wrong. Please try again.\")),!d&&a&&Q(a),g.events.trigger(\"image.error\",[{code:e,message:r[e]},t,a])}function U(e){if(e)return g.$wp&&g.events.$on(g.$wp,\"scroll.image-edit\",function(){d&&g.popups.isVisible(\"image.edit\")&&(g.events.disableBlur(),n())}),!0;var t=\"\";if(0<g.opts.imageEditButtons.length){t+='<div class=\"fr-buttons\">',t+=g.button.buildList(g.opts.imageEditButtons);var a={buttons:t+=\"</div>\"};return g.popups.create(\"image.edit\",a)}return!1}function $(e){var t=g.popups.get(\"image.insert\");if(t||(t=K()),t.find(\".fr-layer.fr-active\").removeClass(\"fr-active\").addClass(\"fr-pactive\"),t.find(\".fr-image-progress-bar-layer\").addClass(\"fr-active\"),t.find(\".fr-buttons\").hide(),d){var a=he();g.popups.setContainer(\"image.insert\",g.$sc);var i=a.offset().left+a.width()/2,r=a.offset().top+a.height();g.popups.show(\"image.insert\",i,r,a.outerHeight())}void 0===e&&F(g.language.translate(\"Uploading\"),0)}function I(e){var t=g.popups.get(\"image.insert\");if(t&&(t.find(\".fr-layer.fr-pactive\").addClass(\"fr-active\").removeClass(\"fr-pactive\"),t.find(\".fr-image-progress-bar-layer\").removeClass(\"fr-active\"),t.find(\".fr-buttons\").show(),e||g.$el.find(\"img.fr-error\").length)){if(g.events.focus(),g.$el.find(\"img.fr-error\").length&&(g.$el.find(\"img.fr-error\").remove(),g.undo.saveStep(),g.undo.run(),g.undo.dropRedo()),!g.$wp&&d){var a=d;se(!0),g.selection.setAfter(a.get(0)),g.selection.restore()}g.popups.hide(\"image.insert\")}}function F(e,t){var a=g.popups.get(\"image.insert\");if(a){var i=a.find(\".fr-image-progress-bar-layer\");i.find(\"h3\").text(e+(t?\" \"+t+\"%\":\"\")),i.removeClass(\"fr-error\"),t?(i.find(\"div\").removeClass(\"fr-indeterminate\"),i.find(\"div > span\").css(\"width\",t+\"%\")):i.find(\"div\").addClass(\"fr-indeterminate\")}}function k(e){ne.call(e.get(0))}function B(){var e=be(this);g.popups.hide(\"image.insert\"),e.removeClass(\"fr-uploading\"),e.next().is(\"br\")&&e.next().remove(),k(e),g.events.trigger(\"image.loaded\",[e])}function N(s,e,o,l,f){g.edit.off(),F(g.language.translate(\"Loading image\")),e&&(s=g.helpers.sanitizeURL(s));var t=new Image;t.onload=function(){var e,t;if(l){g.undo.canDo()||l.hasClass(\"fr-uploading\")||g.undo.saveStep();var a=l.data(\"fr-old-src\");l.data(\"fr-image-pasted\")&&(a=null),g.$wp?((e=l.clone().removeData(\"fr-old-src\").removeClass(\"fr-uploading\").removeAttr(\"data-fr-image-pasted\")).off(\"load\"),a&&l.attr(\"src\",a),l.replaceWith(e)):e=l;for(var i=e.get(0).attributes,r=0;r<i.length;r++){var n=i[r];0===n.nodeName.indexOf(\"data-\")&&e.removeAttr(n.nodeName)}if(void 0!==o)for(t in o)o.hasOwnProperty(t)&&\"link\"!=t&&e.attr(\"data-\"+t,o[t]);e.on(\"load\",B),e.attr(\"src\",s),g.edit.on(),E(!1),g.undo.saveStep(),g.events.disableBlur(),g.$el.blur(),g.events.trigger(a?\"image.replaced\":\"image.inserted\",[e,f])}else e=L(s,o,B),E(!1),g.undo.saveStep(),g.events.disableBlur(),g.$el.blur(),g.events.trigger(\"image.inserted\",[e,f])},t.onerror=function(){D(i)},$(g.language.translate(\"Loading image\")),t.src=s}function O(e){F(g.language.translate(\"Loading image\"));var t=this.status,a=this.response,i=this.responseXML,r=this.responseText;try{if(g.opts.imageUploadToS3)if(201==t){var n=function(e){try{var t=be(e).find(\"Location\").text(),a=be(e).find(\"Key\").text();return!1===g.events.trigger(\"image.uploadedToS3\",[t,a,e],!0)?(g.edit.on(),!1):t}catch(i){return D(h,e),!1}}(i);n&&N(n,!1,[],e,a||i)}else D(h,a||i,e);else if(200<=t&&t<300){var s=function(e){try{if(!1===g.events.trigger(\"image.uploaded\",[e],!0))return g.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(D(u,e),!1)}catch(a){return D(h,e),!1}}(r);s&&N(s.link,!1,s,e,a||r)}else D(m,a||r,e)}catch(o){D(h,a||r,e)}}function P(){D(h,this.response||this.responseText||this.responseXML)}function T(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;F(g.language.translate(\"Uploading\"),t)}}function L(e,t,a){var i,r=\"\";if(t&&void 0!==t)for(i in t)t.hasOwnProperty(i)&&\"link\"!=i&&(r+=\" data-\"+i+'=\"'+t[i]+'\"');var n=g.opts.imageDefaultWidth;n&&\"auto\"!=n&&(n=g.opts.imageResizeWithPercent?\"100%\":n+\"px\");var s=be('<img src=\"'+e+'\"'+r+(n?' style=\"width: '+n+';\"':\"\")+\">\");pe(s,g.opts.imageDefaultDisplay,g.opts.imageDefaultAlign),s.on(\"load\",a),s.on(\"error\",a),g.edit.on(),g.events.focus(!0),g.selection.restore(),g.undo.saveStep(),g.opts.imageSplitHTML?g.markers.split():g.markers.insert(),g.html.wrap();var o=g.$el.find(\".fr-marker\");return o.length?(o.parent().is(\"hr\")&&o.parent().after(o),g.node.isLastSibling(o)&&o.parent().hasClass(\"fr-deletable\")&&o.insertAfter(o.parent()),o.replaceWith(s)):g.$el.append(s),g.selection.clear(),s}function M(){g.edit.on(),I(!0)}function z(e,t){if(void 0!==e&&0<e.length){if(!1===g.events.trigger(\"image.beforeUpload\",[e,t]))return!1;var a,i=e[0];if((null===g.opts.imageUploadURL||g.opts.imageUploadURL==c)&&!g.opts.imageUploadToS3)return s=i,o=t||d,(l=new FileReader).onload=function(){var e=l.result;if(l.result.indexOf(\"svg+xml\")<0){for(var t=atob(l.result.split(\",\")[1]),a=[],i=0;i<t.length;i++)a.push(t.charCodeAt(i));e=window.URL.createObjectURL(new Blob([new Uint8Array(a)],{type:s.type})),g.image.insert(e,!1,null,o)}},$(),l.readAsDataURL(s),!1;if(i.name||(i.name=(new Date).getTime()+\".\"+(i.type||\"image/jpeg\").replace(/image\\//g,\"\")),i.size>g.opts.imageMaxSize)return D(v),!1;if(g.opts.imageAllowedTypes.indexOf(i.type.replace(/image\\//g,\"\"))<0)return D(b),!1;if(g.drag_support.formdata&&(a=g.drag_support.formdata?new FormData:null),a){var r;if(!1!==g.opts.imageUploadToS3)for(r in a.append(\"key\",g.opts.imageUploadToS3.keyStart+(new Date).getTime()+\"-\"+(i.name||\"untitled\")),a.append(\"success_action_status\",\"201\"),a.append(\"X-Requested-With\",\"xhr\"),a.append(\"Content-Type\",i.type),g.opts.imageUploadToS3.params)g.opts.imageUploadToS3.params.hasOwnProperty(r)&&a.append(r,g.opts.imageUploadToS3.params[r]);for(r in g.opts.imageUploadParams)g.opts.imageUploadParams.hasOwnProperty(r)&&a.append(r,g.opts.imageUploadParams[r]);a.append(g.opts.imageUploadParam,i,i.name);var n=g.opts.imageUploadURL;g.opts.imageUploadToS3&&(n=g.opts.imageUploadToS3.uploadURL?g.opts.imageUploadToS3.uploadURL:\"https://\"+g.opts.imageUploadToS3.region+\".amazonaws.com/\"+g.opts.imageUploadToS3.bucket),function(t,a,e,r){function n(){var e=be(this);e.off(\"load\"),e.addClass(\"fr-uploading\"),e.next().is(\"br\")&&e.next().remove(),g.placeholder.refresh(),k(e),C(),$(),g.edit.off(),t.onload=function(){O.call(t,e)},t.onerror=P,t.upload.onprogress=T,t.onabort=M,e.off(\"abortUpload\").on(\"abortUpload\",function(){4!=t.readyState&&(t.abort(),r?(r.attr(\"src\",r.data(\"fr-old-src\")),r.removeClass(\"fr-uploading\")):e.remove(),se(!0))}),t.send(a)}var s=new FileReader;s.onload=function(){var e=s.result;if(s.result.indexOf(\"svg+xml\")<0){for(var t=atob(s.result.split(\",\")[1]),a=[],i=0;i<t.length;i++)a.push(t.charCodeAt(i));e=window.URL.createObjectURL(new Blob([new Uint8Array(a)],{type:\"image/jpeg\"}))}r?(r.on(\"load\",n),r.one(\"error\",n),g.edit.on(),g.undo.saveStep(),r.data(\"fr-old-src\",r.attr(\"src\")),r.attr(\"src\",e)):L(e,null,n)},s.readAsDataURL(e)}(g.core.getXHR(n,g.opts.imageUploadMethod),a,i,t||d)}}var s,o,l}function _(e){if(e.is(\"img\")&&0<e.parents(\".fr-img-caption\").length)return e.parents(\".fr-img-caption\")}function W(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var a=t.files[0];if(a&&a.type&&-1!==a.type.indexOf(\"image\")&&0<=g.opts.imageAllowedTypes.indexOf(a.type.replace(/image\\//g,\"\"))){if(!g.opts.imageUpload)return e.preventDefault(),e.stopPropagation(),!1;g.markers.remove(),g.markers.insertAtPoint(e.originalEvent),g.$el.find(\".fr-marker\").replaceWith(be.FE.MARKERS),0===g.$el.find(\".fr-marker\").length&&g.selection.setAtEnd(g.el),g.popups.hideAll();var i=g.popups.get(\"image.insert\");i||(i=K()),g.popups.setContainer(\"image.insert\",g.$sc);var r=e.originalEvent.pageX,n=e.originalEvent.pageY;return g.opts.iframe&&(n+=g.$iframe.offset().top,r+=g.$iframe.offset().left),g.popups.show(\"image.insert\",r,n),$(),0<=g.opts.imageAllowedTypes.indexOf(a.type.replace(/image\\//g,\"\"))?(se(!0),z(t.files)):D(b),e.preventDefault(),e.stopPropagation(),!1}}}function K(e){if(e)return g.popups.onRefresh(\"image.insert\",y),g.popups.onHide(\"image.insert\",w),!0;var t,a,i=\"\";g.opts.imageUpload||-1===g.opts.imageInsertButtons.indexOf(\"imageUpload\")||g.opts.imageInsertButtons.splice(g.opts.imageInsertButtons.indexOf(\"imageUpload\"),1);var r=g.button.buildList(g.opts.imageInsertButtons);\"\"!==r&&(i='<div class=\"fr-buttons\">'+r+\"</div>\");var n=g.opts.imageInsertButtons.indexOf(\"imageUpload\"),s=g.opts.imageInsertButtons.indexOf(\"imageByURL\"),o=\"\";0<=n&&(t=\" fr-active\",0<=s&&s<n&&(t=\"\"),o='<div class=\"fr-image-upload-layer'+t+' fr-layer\" id=\"fr-image-upload-layer-'+g.id+'\"><strong>'+g.language.translate(\"Drop image\")+\"</strong><br>(\"+g.language.translate(\"or click\")+')<div class=\"fr-form\"><input type=\"file\" accept=\"image/'+g.opts.imageAllowedTypes.join(\", image/\").toLowerCase()+'\" tabIndex=\"-1\" aria-labelledby=\"fr-image-upload-layer-'+g.id+'\" role=\"button\"></div></div>');var l=\"\";0<=s&&(t=\" fr-active\",0<=n&&n<s&&(t=\"\"),l='<div class=\"fr-image-by-url-layer'+t+' fr-layer\" id=\"fr-image-by-url-layer-'+g.id+'\"><div class=\"fr-input-line\"><input id=\"fr-image-by-url-layer-text-'+g.id+'\" type=\"text\" placeholder=\"http://\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageInsertByURL\" tabIndex=\"2\" role=\"button\">'+g.language.translate(\"Insert\")+\"</button></div></div>\");var f,p={buttons:i,upload_layer:o,by_url_layer:l,progress_bar:'<div class=\"fr-image-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"imageDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'};return 1<=g.opts.imageInsertButtons.length&&(a=g.popups.create(\"image.insert\",p)),g.$wp&&g.events.$on(g.$wp,\"scroll\",function(){d&&g.popups.isVisible(\"image.insert\")&&ce()}),f=a,g.events.$on(f,\"dragover dragenter\",\".fr-image-upload-layer\",function(){return be(this).addClass(\"fr-drop\"),!1},!0),g.events.$on(f,\"dragleave dragend\",\".fr-image-upload-layer\",function(){return be(this).removeClass(\"fr-drop\"),!1},!0),g.events.$on(f,\"drop\",\".fr-image-upload-layer\",function(e){e.preventDefault(),e.stopPropagation(),be(this).removeClass(\"fr-drop\");var t=e.originalEvent.dataTransfer;if(t&&t.files){var a=f.data(\"instance\")||g;a.events.disableBlur(),a.image.upload(t.files),a.events.enableBlur()}},!0),g.helpers.isIOS()&&g.events.$on(f,\"touchstart\",'.fr-image-upload-layer input[type=\"file\"]',function(){be(this).trigger(\"click\")},!0),g.events.$on(f,\"change\",'.fr-image-upload-layer input[type=\"file\"]',function(){if(this.files){var e=f.data(\"instance\")||g;e.events.disableBlur(),f.find(\"input:focus\").blur(),e.events.enableBlur(),e.image.upload(this.files,d)}be(this).val(\"\")},!0),a}function H(){d&&g.popups.get(\"image.alt\").find(\"input\").val(d.attr(\"alt\")||\"\").trigger(\"change\")}function Y(){var e=g.popups.get(\"image.alt\");e||(e=X()),I(),g.popups.refresh(\"image.alt\"),g.popups.setContainer(\"image.alt\",g.$sc);var t=he();ve()&&(t=t.find(\".fr-img-wrap\"));var a=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();g.popups.show(\"image.alt\",a,i,t.outerHeight())}function X(e){if(e)return g.popups.onRefresh(\"image.alt\",H),!0;var t={buttons:'<div class=\"fr-buttons\">'+g.button.buildList(g.opts.imageAltButtons)+\"</div>\",alt_layer:'<div class=\"fr-image-alt-layer fr-layer fr-active\" id=\"fr-image-alt-layer-'+g.id+'\"><div class=\"fr-input-line\"><input id=\"fr-image-alt-layer-text-'+g.id+'\" type=\"text\" placeholder=\"'+g.language.translate(\"Alternative Text\")+'\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetAlt\" tabIndex=\"2\" role=\"button\">'+g.language.translate(\"Update\")+\"</button></div></div>\"},a=g.popups.create(\"image.alt\",t);return g.$wp&&g.events.$on(g.$wp,\"scroll.image-alt\",function(){d&&g.popups.isVisible(\"image.alt\")&&Y()}),a}function j(){var e=g.popups.get(\"image.size\");if(d)if(ve()){var t=d.parent();t.get(0).style.width||(t=d.parent().parent()),e.find('input[name=\"width\"]').val(t.get(0).style.width).trigger(\"change\"),e.find('input[name=\"height\"]').val(t.get(0).style.height).trigger(\"change\")}else e.find('input[name=\"width\"]').val(d.get(0).style.width).trigger(\"change\"),e.find('input[name=\"height\"]').val(d.get(0).style.height).trigger(\"change\")}function G(){var e=g.popups.get(\"image.size\");e||(e=V()),I(),g.popups.refresh(\"image.size\"),g.popups.setContainer(\"image.size\",g.$sc);var t=he();ve()&&(t=t.find(\".fr-img-wrap\"));var a=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();g.popups.show(\"image.size\",a,i,t.outerHeight())}function V(e){if(e)return g.popups.onRefresh(\"image.size\",j),!0;var t={buttons:'<div class=\"fr-buttons\">'+g.button.buildList(g.opts.imageSizeButtons)+\"</div>\",size_layer:'<div class=\"fr-image-size-layer fr-layer fr-active\" id=\"fr-image-size-layer-'+g.id+'\"><div class=\"fr-image-group\"><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-width-'+g.id+'\" type=\"text\" name=\"width\" placeholder=\"'+g.language.translate(\"Width\")+'\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-height'+g.id+'\" type=\"text\" name=\"height\" placeholder=\"'+g.language.translate(\"Height\")+'\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetSize\" tabIndex=\"2\" role=\"button\">'+g.language.translate(\"Update\")+\"</button></div></div>\"},a=g.popups.create(\"image.size\",t);return g.$wp&&g.events.$on(g.$wp,\"scroll.image-size\",function(){d&&g.popups.isVisible(\"image.size\")&&G()}),a}function q(e,t,a,i){return e.pageX=t,R.call(this,e),e.pageX=e.pageX+a*Math.floor(Math.pow(1.1,i)),S.call(this,e),x.call(this,e),++i}function Q(e){(e=e||he())&&!1!==g.events.trigger(\"image.beforeRemove\",[e])&&(g.popups.hideAll(),ue(),se(!0),g.undo.canDo()||g.undo.saveStep(),e.get(0)==g.el?e.removeAttr(\"src\"):(e.get(0).parentNode&&\"A\"==e.get(0).parentNode.tagName?(g.selection.setBefore(e.get(0).parentNode)||g.selection.setAfter(e.get(0).parentNode)||e.parent().after(be.FE.MARKERS),be(e.get(0).parentNode).remove()):(g.selection.setBefore(e.get(0))||g.selection.setAfter(e.get(0))||e.after(be.FE.MARKERS),e.remove()),g.html.fillEmptyBlocks(),g.selection.restore()),g.undo.saveStep())}function J(e){var t=e.which;if(d&&(t==be.FE.KEYCODE.BACKSPACE||t==be.FE.KEYCODE.DELETE))return e.preventDefault(),e.stopPropagation(),Q(),!1;if(d&&t==be.FE.KEYCODE.ESC){var a=d;return se(!0),g.selection.setAfter(a.get(0)),g.selection.restore(),e.preventDefault(),!1}if(d&&(t==be.FE.KEYCODE.ARROW_LEFT||t==be.FE.KEYCODE.ARROW_RIGHT)){var i=d.get(0);return se(!0),t==be.FE.KEYCODE.ARROW_LEFT?g.selection.setBefore(i):g.selection.setAfter(i),g.selection.restore(),e.preventDefault(),!1}return d&&t===be.FE.KEYCODE.TAB?(e.preventDefault(),e.stopPropagation(),se(!0),!1):d&&t!=be.FE.KEYCODE.F10&&!g.keys.isBrowserAction(e)?(e.preventDefault(),e.stopPropagation(),!1):void 0}function Z(e){if(e&&\"IMG\"==e.tagName){if(g.node.hasClass(e,\"fr-uploading\")||g.node.hasClass(e,\"fr-error\")?e.parentNode.removeChild(e):g.node.hasClass(e,\"fr-draggable\")&&e.classList.remove(\"fr-draggable\"),e.parentNode&&e.parentNode.parentNode&&g.node.hasClass(e.parentNode.parentNode,\"fr-img-caption\")){var t=e.parentNode.parentNode;t.removeAttribute(\"contenteditable\"),t.removeAttribute(\"draggable\"),t.classList.remove(\"fr-draggable\");var a=e.nextSibling;a&&a.removeAttribute(\"contenteditable\")}}else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var i=e.querySelectorAll(\"img.fr-uploading, img.fr-error, img.fr-draggable\"),r=0;r<i.length;r++)Z(i[r])}function ee(e){if(!1===g.events.trigger(\"image.beforePasteUpload\",[e]))return!1;d=be(e),C(),n(),ce(),$(),d.one(\"load\",function(){C(),$()});for(var t=be(e).attr(\"src\").split(\",\"),a=atob(t[1]),i=[],r=0;r<a.length;r++)i.push(a.charCodeAt(r));z([new Blob([new Uint8Array(i)],{type:t[0].replace(/data\\:/g,\"\").replace(/;base64/g,\"\")})],d)}function te(){g.opts.imagePaste?g.$el.find(\"img[data-fr-image-pasted]\").each(function(e,i){if(g.opts.imagePasteProcess){var t=g.opts.imageDefaultWidth;t&&\"auto\"!=t&&(t+=g.opts.imageResizeWithPercent?\"%\":\"px\"),be(i).css(\"width\",t).removeClass(\"fr-dii fr-dib fr-fir fr-fil\"),pe(be(i),g.opts.imageDefaultDisplay,g.opts.imageDefaultAlign)}if(0===i.src.indexOf(\"data:\"))ee(i);else if(0===i.src.indexOf(\"blob:\")||0===i.src.indexOf(\"http\")&&g.opts.imageUploadRemoteUrls&&g.opts.imageCORSProxy){var a=new Image;a.crossOrigin=\"Anonymous\",a.onload=function(){var e,t=g.o_doc.createElement(\"CANVAS\"),a=t.getContext(\"2d\");t.height=this.naturalHeight,t.width=this.naturalWidth,a.drawImage(this,0,0),setTimeout(function(){ee(i)},0),e=2e3<this.naturalWidth||1500<this.naturalHeight?\"jpeg\":\"png\",i.src=t.toDataURL(\"image/\"+e)},a.src=(0===i.src.indexOf(\"blob:\")?\"\":g.opts.imageCORSProxy+\"/\")+i.src}else 0!==i.src.indexOf(\"http\")||0===i.src.indexOf(\"https://mail.google.com/mail\")?(g.selection.save(),be(i).remove(),g.selection.restore()):be(i).removeAttr(\"data-fr-image-pasted\")}):g.$el.find(\"img[data-fr-image-pasted]\").remove()}function ae(e){var t=e.target.result,a=g.opts.imageDefaultWidth;a&&\"auto\"!=a&&(a+=g.opts.imageResizeWithPercent?\"%\":\"px\"),g.undo.saveStep(),g.html.insert('<img data-fr-image-pasted=\"true\" src=\"'+t+'\"'+(a?' style=\"width: '+a+';\"':\"\")+\">\");var i=g.$el.find('img[data-fr-image-pasted=\"true\"]');i&&pe(i,g.opts.imageDefaultDisplay,g.opts.imageDefaultAlign),g.events.trigger(\"paste.after\")}function ie(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.types&&-1!=e.clipboardData.types.indexOf(\"text/rtf\")||e.clipboardData.getData(\"text/rtf\"))t=e.clipboardData.items[0].getAsFile();else for(var a=0;a<e.clipboardData.items.length&&!(t=e.clipboardData.items[a].getAsFile());a++);if(t)return i=t,(r=new FileReader).onload=ae,r.readAsDataURL(i),!1}var i,r}function re(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted=\"true\" ')}function ne(e){if(\"false\"==be(this).parents(\"[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first\").attr(\"contenteditable\"))return!0;if(e&&\"touchend\"==e.type&&a)return!0;if(e&&g.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;for(var t=0;t<be.FE.INSTANCES.length;t++)be.FE.INSTANCES[t]!=g&&be.FE.INSTANCES[t].events.trigger(\"image.hideResizer\");g.toolbar.disable(),e&&(e.stopPropagation(),e.preventDefault()),g.helpers.isMobile()&&(g.events.disableBlur(),g.$el.blur(),g.events.enableBlur()),g.opts.iframe&&g.size.syncIframe(),d=be(this),ue(),C(),n(),g.browser.msie?(g.popups.areVisible()&&g.events.disableBlur(),g.win.getSelection&&(g.win.getSelection().removeAllRanges(),g.win.getSelection().addRange(g.doc.createRange()))):g.selection.clear(),g.helpers.isIOS()&&(g.events.disableBlur(),g.$el.blur()),g.button.bulkRefresh(),g.events.trigger(\"video.hideResizer\")}function se(e){d&&(oe||!0===e)&&(g.toolbar.enable(),l.removeClass(\"fr-active\"),g.popups.hide(\"image.edit\"),d=null,fe(),f=null,p&&p.hide())}r[i]=\"Image cannot be loaded from the passed link.\",r[u]=\"No link in upload response.\",r[m]=\"Error during file upload.\",r[h]=\"Parsing response failed.\",r[v]=\"File is too large.\",r[b]=\"Image file type is invalid.\",r[7]=\"Files can be uploaded only to same domain in IE 8 and IE 9.\";var oe=!(r[8]=\"Image file is corrupted.\");function le(){oe=!0}function fe(){oe=!1}function pe(e,t,a){!g.opts.htmlUntouched&&g.opts.useClasses?(e.removeClass(\"fr-fil fr-fir fr-dib fr-dii\"),a&&e.addClass(\"fr-fi\"+a[0]),t&&e.addClass(\"fr-di\"+t[0])):\"inline\"==t?(e.css({display:\"inline-block\",verticalAlign:\"bottom\",margin:g.opts.imageDefaultMargin}),\"center\"==a?e.css({\"float\":\"none\",marginBottom:\"\",marginTop:\"\",maxWidth:\"calc(100% - \"+2*g.opts.imageDefaultMargin+\"px)\",textAlign:\"center\"}):\"left\"==a?e.css({\"float\":\"left\",marginLeft:0,maxWidth:\"calc(100% - \"+g.opts.imageDefaultMargin+\"px)\",textAlign:\"left\"}):e.css({\"float\":\"right\",marginRight:0,maxWidth:\"calc(100% - \"+g.opts.imageDefaultMargin+\"px)\",textAlign:\"right\"})):\"block\"==t&&(e.css({display:\"block\",\"float\":\"none\",verticalAlign:\"top\",margin:g.opts.imageDefaultMargin+\"px auto\",textAlign:\"center\"}),\"left\"==a?e.css({marginLeft:0,textAlign:\"left\"}):\"right\"==a&&e.css({marginRight:0,textAlign:\"right\"}))}function ge(e){if(void 0===e&&(e=he()),e){if(e.hasClass(\"fr-fil\"))return\"left\";if(e.hasClass(\"fr-fir\"))return\"right\";if(e.hasClass(\"fr-dib\")||e.hasClass(\"fr-dii\"))return\"center\";var t=e.css(\"float\");if(e.css(\"float\",\"none\"),\"block\"==e.css(\"display\")){if(e.css(\"float\",\"\"),e.css(\"float\")!=t&&e.css(\"float\",t),0===parseInt(e.css(\"margin-left\"),10))return\"left\";if(0===parseInt(e.css(\"margin-right\"),10))return\"right\"}else{if(e.css(\"float\",\"\"),e.css(\"float\")!=t&&e.css(\"float\",t),\"left\"==e.css(\"float\"))return\"left\";if(\"right\"==e.css(\"float\"))return\"right\"}}return\"center\"}function de(e){void 0===e&&(e=he());var t=e.css(\"float\");return e.css(\"float\",\"none\"),\"block\"==e.css(\"display\")?(e.css(\"float\",\"\"),e.css(\"float\")!=t&&e.css(\"float\",t),\"block\"):(e.css(\"float\",\"\"),e.css(\"float\")!=t&&e.css(\"float\",t),\"inline\")}function ce(){var e=g.popups.get(\"image.insert\");e||(e=K()),g.popups.isVisible(\"image.insert\")||(I(),g.popups.refresh(\"image.insert\"),g.popups.setContainer(\"image.insert\",g.$sc));var t=he();ve()&&(t=t.find(\".fr-img-wrap\"));var a=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();g.popups.show(\"image.insert\",a,i,t.outerHeight(!0))}function ue(){if(d){g.events.disableBlur(),g.selection.clear();var e=g.doc.createRange();e.selectNode(d.get(0)),g.browser.msie&&e.collapse(!0),g.selection.get().addRange(e),g.events.enableBlur()}}function me(){return d}function he(){return ve()?d.parents(\".fr-img-caption:first\"):d}function ve(){return!!d&&0<d.parents(\".fr-img-caption\").length}return{_init:function(){var i;g.events.$on(g.$el,g._mousedown,\"IMG\"==g.el.tagName?null:'img:not([contenteditable=\"false\"])',function(e){if(\"false\"==be(this).parents(\"[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first\").attr(\"contenteditable\"))return!0;g.helpers.isMobile()||g.selection.clear(),t=!0,g.popups.areVisible()&&g.events.disableBlur(),g.browser.msie&&(g.events.disableBlur(),g.$el.attr(\"contenteditable\",!1)),g.draggable||\"touchstart\"==e.type||e.preventDefault(),e.stopPropagation()}),g.events.$on(g.$el,g._mousedown,\".fr-img-caption .fr-inner\",function(e){g.core.hasFocus()||g.events.focus(),e.stopPropagation()}),g.events.$on(g.$el,\"paste\",\".fr-img-caption .fr-inner\",function(e){g.toolbar.hide(),e.stopPropagation()}),g.events.$on(g.$el,g._mouseup,\"IMG\"==g.el.tagName?null:'img:not([contenteditable=\"false\"])',function(e){if(\"false\"==be(this).parents(\"[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first\").attr(\"contenteditable\"))return!0;t&&(t=!1,e.stopPropagation(),g.browser.msie&&(g.$el.attr(\"contenteditable\",!0),g.events.enableBlur()))}),g.events.on(\"keyup\",function(e){if(e.shiftKey&&\"\"===g.selection.text().replace(/\\n/g,\"\")&&g.keys.isArrow(e.which)){var t=g.selection.element(),a=g.selection.endElement();t&&\"IMG\"==t.tagName?k(be(t)):a&&\"IMG\"==a.tagName&&k(be(a))}},!0),g.events.on(\"drop\",W),g.events.on(\"element.beforeDrop\",_),g.events.on(\"mousedown window.mousedown\",le),g.events.on(\"window.touchmove\",fe),g.events.on(\"mouseup window.mouseup\",function(){if(d)return se(),!1;fe()}),g.events.on(\"commands.mousedown\",function(e){0<e.parents(\".fr-toolbar\").length&&se()}),g.events.on(\"image.resizeEnd\",function(){g.opts.iframe&&g.size.syncIframe()}),g.events.on(\"blur image.hideResizer commands.undo commands.redo element.dropped\",function(){se(!(t=!1))}),g.events.on(\"modals.hide\",function(){d&&(ue(),g.selection.clear())}),g.events.on(\"image.resizeEnd\",function(){g.win.getSelection&&k(d)}),g.opts.imageAddNewLine&&g.events.on(\"image.inserted\",function(e){var t=e.get(0);for(t.nextSibling&&\"BR\"===t.nextSibling.tagName&&(t=t.nextSibling);t&&!g.node.isElement(t);)t=g.node.isLastSibling(t)?t.parentNode:null;g.node.isElement(t)&&(g.opts.enter===be.FE.ENTER_BR?e.after(\"<br>\"):be(g.node.blockParent(e.get(0))).after(\"<\"+g.html.defaultTag()+\"><br></\"+g.html.defaultTag()+\">\"))}),\"IMG\"==g.el.tagName&&g.$el.addClass(\"fr-view\"),g.events.$on(g.$el,g.helpers.isMobile()&&!g.helpers.isWindowsPhone()?\"touchend\":\"click\",\"IMG\"==g.el.tagName?null:'img:not([contenteditable=\"false\"])',ne),g.helpers.isMobile()&&(g.events.$on(g.$el,\"touchstart\",\"IMG\"==g.el.tagName?null:'img:not([contenteditable=\"false\"])',function(){a=!1}),g.events.$on(g.$el,\"touchmove\",function(){a=!0})),g.$wp?(g.events.on(\"window.keydown keydown\",J,!0),g.events.on(\"keyup\",function(e){if(d&&e.which==be.FE.KEYCODE.ENTER)return!1},!0),g.events.$on(g.$el,\"keydown\",function(){var e=g.selection.element();e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),g.node.hasClass(e,\"fr-inner\")||(g.node.hasClass(e,\"fr-img-caption\")||(e=be(e).parents(\".fr-img-caption\").get(0)),g.node.hasClass(e,\"fr-img-caption\")&&(be(e).after(be.FE.INVISIBLE_SPACE+be.FE.MARKERS),g.selection.restore()))})):g.events.$on(g.$win,\"keydown\",J),g.events.on(\"toolbar.esc\",function(){if(d){if(g.$wp)g.events.disableBlur(),g.events.focus();else{var e=d;se(!0),g.selection.setAfter(e.get(0)),g.selection.restore()}return!1}},!0),g.events.on(\"toolbar.focusEditor\",function(){if(d)return!1},!0),g.events.on(\"window.cut window.copy\",function(e){if(d&&g.popups.isVisible(\"image.edit\")&&!g.popups.get(\"image.edit\").find(\":focus\").length){var t=he();ve()?(t.before(be.FE.START_MARKER),t.after(be.FE.END_MARKER),g.selection.restore(),g.paste.saveCopiedText(t.get(0).outerHTML,t.text())):(ue(),g.paste.saveCopiedText(d.get(0).outerHTML,d.attr(\"alt\"))),\"copy\"==e.type?setTimeout(function(){k(d)}):(se(!0),g.undo.saveStep(),setTimeout(function(){g.undo.saveStep()},0))}},!0),g.browser.msie&&g.events.on(\"keydown\",function(e){if(!g.selection.isCollapsed()||!d)return!0;var t=e.which;t==be.FE.KEYCODE.C&&g.keys.ctrlKey(e)?g.events.trigger(\"window.copy\"):t==be.FE.KEYCODE.X&&g.keys.ctrlKey(e)&&g.events.trigger(\"window.cut\")}),g.events.$on(be(g.o_win),\"keydown\",function(e){var t=e.which;if(d&&t==be.FE.KEYCODE.BACKSPACE)return e.preventDefault(),!1}),g.events.$on(g.$win,\"keydown\",function(e){var t=e.which;d&&d.hasClass(\"fr-uploading\")&&t==be.FE.KEYCODE.ESC&&d.trigger(\"abortUpload\")}),g.events.on(\"destroy\",function(){d&&d.hasClass(\"fr-uploading\")&&d.trigger(\"abortUpload\")}),g.events.on(\"paste.before\",ie),g.events.on(\"paste.beforeCleanup\",re),g.events.on(\"paste.after\",te),g.events.on(\"html.set\",e),g.events.on(\"html.inserted\",e),e(),g.events.on(\"destroy\",function(){o=[]}),g.events.on(\"html.processGet\",Z),g.opts.imageOutputSize&&g.events.on(\"html.beforeGet\",function(){i=g.el.querySelectorAll(\"img\");for(var e=0;e<i.length;e++){var t=i[e].style.width||be(i[e]).width(),a=i[e].style.height||be(i[e]).height();t&&i[e].setAttribute(\"width\",(\"\"+t).replace(/px/,\"\")),a&&i[e].setAttribute(\"height\",(\"\"+a).replace(/px/,\"\"))}}),g.opts.iframe&&g.events.on(\"image.loaded\",g.size.syncIframe),g.$wp&&(E(),g.events.on(\"contentChanged\",E)),g.events.$on(be(g.o_win),\"orientationchange.image\",function(){setTimeout(function(){d&&k(d)},100)}),U(!0),K(!0),V(!0),X(!0),g.events.on(\"node.remove\",function(e){if(\"IMG\"==e.get(0).tagName)return Q(e),!1})},showInsertPopup:function(){var e=g.$tb.find('.fr-command[data-cmd=\"insertImage\"]'),t=g.popups.get(\"image.insert\");if(t||(t=K()),I(),!t.hasClass(\"fr-active\"))if(g.popups.refresh(\"image.insert\"),g.popups.setContainer(\"image.insert\",g.$tb),e.is(\":visible\")){var a=e.offset().left+e.outerWidth()/2,i=e.offset().top+(g.opts.toolbarBottom?10:e.outerHeight()-10);g.popups.show(\"image.insert\",a,i,e.outerHeight())}else g.position.forSelection(t),g.popups.show(\"image.insert\")},showLayer:function(e){var t,a,i=g.popups.get(\"image.insert\");if(d||g.opts.toolbarInline){if(d){var r=he();ve()&&(r=r.find(\".fr-img-wrap\")),a=r.offset().top+r.outerHeight(),t=r.offset().left+r.outerWidth()/2}}else{var n=g.$tb.find('.fr-command[data-cmd=\"insertImage\"]');t=n.offset().left+n.outerWidth()/2,a=n.offset().top+(g.opts.toolbarBottom?10:n.outerHeight()-10)}!d&&g.opts.toolbarInline&&(a=i.offset().top-g.helpers.getPX(i.css(\"margin-top\")),i.hasClass(\"fr-above\")&&(a+=i.outerHeight())),i.find(\".fr-layer\").removeClass(\"fr-active\"),i.find(\".fr-\"+e+\"-layer\").addClass(\"fr-active\"),g.popups.show(\"image.insert\",t,a,d?d.outerHeight():0),g.accessibility.focusPopup(i)},refreshUploadButton:function(e){g.popups.get(\"image.insert\").find(\".fr-image-upload-layer\").hasClass(\"fr-active\")&&e.addClass(\"fr-active\").attr(\"aria-pressed\",!0)},refreshByURLButton:function(e){g.popups.get(\"image.insert\").find(\".fr-image-by-url-layer\").hasClass(\"fr-active\")&&e.addClass(\"fr-active\").attr(\"aria-pressed\",!0)},upload:z,insertByURL:function(){var e=g.popups.get(\"image.insert\").find(\".fr-image-by-url-layer input\");if(0<e.val().length){$(),F(g.language.translate(\"Loading image\"));var t=e.val().trim();if(g.opts.imageUploadRemoteUrls&&g.opts.imageCORSProxy&&g.opts.imageUpload){var a=new XMLHttpRequest;a.onload=function(){200==this.status?z([new Blob([this.response],{type:this.response.type||\"image/png\"})],d):D(i)},a.onerror=function(){N(t,!0,[],d)},a.open(\"GET\",g.opts.imageCORSProxy+\"/\"+t,!0),a.responseType=\"blob\",a.send()}else N(t,!0,[],d);e.val(\"\"),e.blur()}},align:function(e){var t=he();t.removeClass(\"fr-fir fr-fil\"),!g.opts.htmlUntouched&&g.opts.useClasses?\"left\"==e?t.addClass(\"fr-fil\"):\"right\"==e&&t.addClass(\"fr-fir\"):pe(t,de(),e),ue(),C(),n(),g.selection.clear()},refreshAlign:function(e){d&&e.find(\"> *:first\").replaceWith(g.icon.create(\"image-align-\"+ge()))},refreshAlignOnShow:function(e,t){d&&t.find('.fr-command[data-param1=\"'+ge()+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0)},display:function(e){var t=he();t.removeClass(\"fr-dii fr-dib\"),!g.opts.htmlUntouched&&g.opts.useClasses?\"inline\"==e?t.addClass(\"fr-dii\"):\"block\"==e&&t.addClass(\"fr-dib\"):pe(t,e,ge()),ue(),C(),n(),g.selection.clear()},refreshDisplayOnShow:function(e,t){d&&t.find('.fr-command[data-param1=\"'+de()+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0)},replace:ce,back:function(){d?(g.events.disableBlur(),be(\".fr-popup input:focus\").blur(),k(d)):(g.events.disableBlur(),g.selection.restore(),g.events.enableBlur(),g.popups.hide(\"image.insert\"),g.toolbar.showInline())},get:me,getEl:he,insert:N,showProgressBar:$,remove:Q,hideProgressBar:I,applyStyle:function(e,t,a){if(void 0===t&&(t=g.opts.imageStyles),void 0===a&&(a=g.opts.imageMultipleStyles),!d)return!1;var i=he();if(!a){var r=Object.keys(t);r.splice(r.indexOf(e),1),i.removeClass(r.join(\" \"))}\"object\"==typeof t[e]?(i.removeAttr(\"style\"),i.css(t[e].style)):i.toggleClass(e),k(d)},showAltPopup:Y,showSizePopup:G,setAlt:function(e){if(d){var t=g.popups.get(\"image.alt\");d.attr(\"alt\",e||t.find(\"input\").val()||\"\"),t.find(\"input:focus\").blur(),k(d)}},setSize:function(e,t){if(d){var a=g.popups.get(\"image.size\");e=e||a.find('input[name=\"width\"]').val()||\"\",t=t||a.find('input[name=\"height\"]').val()||\"\";var i=/^[\\d]+((px)|%)*$/g;d.removeAttr(\"width\").removeAttr(\"height\"),e.match(i)?d.css(\"width\",e):d.css(\"width\",\"\"),t.match(i)?d.css(\"height\",t):d.css(\"height\",\"\"),ve()&&(d.parents(\".fr-img-caption\").removeAttr(\"width\").removeAttr(\"height\"),e.match(i)?d.parents(\".fr-img-caption\").css(\"width\",e):d.parents(\".fr-img-caption\").css(\"width\",\"\"),t.match(i)?d.parents(\".fr-img-caption\").css(\"height\",t):d.parents(\".fr-img-caption\").css(\"height\",\"\")),a&&a.find(\"input:focus\").blur(),k(d)}},toggleCaption:function(){var e;if(d&&!ve()){var t,a;(e=d).parent().is(\"a\")&&(e=d.parent()),e.attr(\"style\")&&(a=-1<(t=e.attr(\"style\").split(\":\")).indexOf(\"width\")?t[t.indexOf(\"width\")+1].replace(\";\",\"\"):\"\");var i=g.opts.imageResizeWithPercent?(-1<a.indexOf(\"px\")?null:a)||\"100%\":d.width()+\"px\";e.wrap(\"<span \"+(g.browser.mozilla?\"\":'contenteditable=\"false\"')+'class=\"fr-img-caption '+d.attr(\"class\")+'\" style=\"'+(g.opts.useClasses?\"\":e.attr(\"style\"))+'\" draggable=\"false\"></span>'),e.wrap('<span class=\"fr-img-wrap\"></span>'),d.after('<span class=\"fr-inner\"'+(g.browser.mozilla?\"\":' contenteditable=\"true\"')+\">\"+be.FE.START_MARKER+g.language.translate(\"Image Caption\")+be.FE.END_MARKER+\"</span>\"),d.removeAttr(\"class\").removeAttr(\"style\").removeAttr(\"width\"),d.parents(\".fr-img-caption\").css(\"width\",i),se(!0),g.selection.restore()}else e=he(),d.insertAfter(e),d.attr(\"class\",e.attr(\"class\").replace(\"fr-img-caption\",\"\")).attr(\"style\",e.attr(\"style\")),e.remove(),k(d)},hasCaption:ve,exitEdit:se,edit:k}},be.FE.DefineIcon(\"insertImage\",{NAME:\"image\"}),be.FE.RegisterShortcut(be.FE.KEYCODE.P,\"insertImage\",null,\"P\"),be.FE.RegisterCommand(\"insertImage\",{title:\"Insert Image\",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible(\"image.insert\")?(this.$el.find(\".fr-marker\").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide(\"image.insert\")):this.image.showInsertPopup()},plugin:\"image\"}),be.FE.DefineIcon(\"imageUpload\",{NAME:\"upload\"}),be.FE.RegisterCommand(\"imageUpload\",{title:\"Upload Image\",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer(\"image-upload\")},refresh:function(e){this.image.refreshUploadButton(e)}}),be.FE.DefineIcon(\"imageByURL\",{NAME:\"link\"}),be.FE.RegisterCommand(\"imageByURL\",{title:\"By URL\",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer(\"image-by-url\")},refresh:function(e){this.image.refreshByURLButton(e)}}),be.FE.RegisterCommand(\"imageInsertByURL\",{title:\"Insert Image\",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate(\"Replace\")):e.text(this.language.translate(\"Insert\"))}}),be.FE.DefineIcon(\"imageDisplay\",{NAME:\"star\"}),be.FE.RegisterCommand(\"imageDisplay\",{title:\"Display\",type:\"dropdown\",options:{inline:\"Inline\",block:\"Break Text\"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass(\"fr-hidden\")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),be.FE.DefineIcon(\"image-align\",{NAME:\"align-left\"}),be.FE.DefineIcon(\"image-align-left\",{NAME:\"align-left\"}),be.FE.DefineIcon(\"image-align-right\",{NAME:\"align-right\"}),be.FE.DefineIcon(\"image-align-center\",{NAME:\"align-justify\"}),be.FE.DefineIcon(\"imageAlign\",{NAME:\"align-justify\"}),be.FE.RegisterCommand(\"imageAlign\",{type:\"dropdown\",title:\"Align\",options:{left:\"Align Left\",center:\"None\",right:\"Align Right\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=be.FE.COMMANDS.imageAlign.options;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"imageAlign\" data-param1=\"'+a+'\" title=\"'+this.language.translate(t[a])+'\">'+this.icon.create(\"image-align-\"+a)+'<span class=\"fr-sr-only\">'+this.language.translate(t[a])+\"</span></a></li>\");return e+=\"</ul>\"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),be.FE.DefineIcon(\"imageReplace\",{NAME:\"exchange\",FA5NAME:\"exchange-alt\"}),be.FE.RegisterCommand(\"imageReplace\",{title:\"Replace\",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),be.FE.DefineIcon(\"imageRemove\",{NAME:\"trash\"}),be.FE.RegisterCommand(\"imageRemove\",{title:\"Remove\",callback:function(){this.image.remove()}}),be.FE.DefineIcon(\"imageBack\",{NAME:\"arrow-left\"}),be.FE.RegisterCommand(\"imageBack\",{title:\"Back\",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass(\"fr-hidden\"),e.next(\".fr-separator\").removeClass(\"fr-hidden\")):(e.addClass(\"fr-hidden\"),e.next(\".fr-separator\").addClass(\"fr-hidden\"))}}),be.FE.RegisterCommand(\"imageDismissError\",{title:\"OK\",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),be.FE.DefineIcon(\"imageStyle\",{NAME:\"magic\"}),be.FE.RegisterCommand(\"imageStyle\",{title:\"Style\",type:\"dropdown\",html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=this.opts.imageStyles;for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];\"object\"==typeof i&&(i=i.title),e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"imageStyle\" data-param1=\"'+a+'\">'+this.language.translate(i)+\"</a></li>\"}return e+=\"</ul>\"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(e,t){var a=this.image.getEl();a&&t.find(\".fr-command\").each(function(){var e=be(this).data(\"param1\"),t=a.hasClass(e);be(this).toggleClass(\"fr-active\",t).attr(\"aria-selected\",t)})}}),be.FE.DefineIcon(\"imageAlt\",{NAME:\"info\"}),be.FE.RegisterCommand(\"imageAlt\",{undo:!1,focus:!1,popup:!0,title:\"Alternative Text\",callback:function(){this.image.showAltPopup()}}),be.FE.RegisterCommand(\"imageSetAlt\",{undo:!0,focus:!1,title:\"Update\",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),be.FE.DefineIcon(\"imageSize\",{NAME:\"arrows-alt\"}),be.FE.RegisterCommand(\"imageSize\",{undo:!1,focus:!1,popup:!0,title:\"Change Size\",callback:function(){this.image.showSizePopup()}}),be.FE.RegisterCommand(\"imageSetSize\",{undo:!0,focus:!1,title:\"Update\",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),be.FE.DefineIcon(\"imageCaption\",{NAME:\"commenting\",FA5NAME:\"comment-alt\"}),be.FE.RegisterCommand(\"imageCaption\",{undo:!0,focus:!1,title:\"Image Caption\",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(e){this.image.get()&&e.toggleClass(\"fr-active\",this.image.hasCaption())}})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(n){\"function\"==typeof define&&define.amd?define([\"jquery\"],n):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),n(t)}:n(window.jQuery)}(function(m){m.extend(m.FE.POPUP_TEMPLATES,{\"link.edit\":\"[_BUTTONS_]\",\"link.insert\":\"[_BUTTONS_][_INPUT_LAYER_]\"}),m.extend(m.FE.DEFAULTS,{linkEditButtons:[\"linkOpen\",\"linkStyle\",\"linkEdit\",\"linkRemove\"],linkInsertButtons:[\"linkBack\",\"|\",\"linkList\"],linkAttributes:{},linkAutoPrefix:\"http://\",linkStyles:{\"fr-green\":\"Green\",\"fr-strong\":\"Thick\"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkNoOpener:!0,linkNoReferrer:!0,linkList:[{text:\"Froala\",href:\"https://froala.com\",target:\"_blank\"},{text:\"Google\",href:\"https://google.com\",target:\"_blank\"},{displayText:\"Facebook\",href:\"https://facebook.com\"}],linkText:!0}),m.FE.PLUGINS.link=function(d){function c(){var e=d.image?d.image.get():null;if(!e&&d.$wp){var t=d.selection.ranges(0).commonAncestorContainer;try{t&&(t.contains&&t.contains(d.el)||!d.el.contains(t)||d.el==t)&&(t=null)}catch(r){t=null}if(t&&\"A\"===t.tagName)return t;var n=d.selection.element(),i=d.selection.endElement();\"A\"==n.tagName||d.node.isElement(n)||(n=m(n).parentsUntil(d.$el,\"a:first\").get(0)),\"A\"==i.tagName||d.node.isElement(i)||(i=m(i).parentsUntil(d.$el,\"a:first\").get(0));try{i&&(i.contains&&i.contains(d.el)||!d.el.contains(i)||d.el==i)&&(i=null)}catch(r){i=null}try{n&&(n.contains&&n.contains(d.el)||!d.el.contains(n)||d.el==n)&&(n=null)}catch(r){n=null}return i&&i==n&&\"A\"==i.tagName?(d.browser.msie||d.helpers.isMobile())&&(d.selection.info(n).atEnd||d.selection.info(n).atStart)?null:n:null}return\"A\"==d.el.tagName?d.el:e&&e.get(0).parentNode&&\"A\"==e.get(0).parentNode.tagName?e.get(0).parentNode:void 0}function u(){var e,t,n,i,r=d.image?d.image.get():null,l=[];if(r)\"A\"==r.get(0).parentNode.tagName&&l.push(r.get(0).parentNode);else if(d.win.getSelection){var a=d.win.getSelection();if(a.getRangeAt&&a.rangeCount){i=d.doc.createRange();for(var s=0;s<a.rangeCount;++s)if((t=(e=a.getRangeAt(s)).commonAncestorContainer)&&1!=t.nodeType&&(t=t.parentNode),t&&\"a\"==t.nodeName.toLowerCase())l.push(t);else{n=t.getElementsByTagName(\"a\");for(var o=0;o<n.length;++o)i.selectNodeContents(n[o]),i.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<i.compareBoundaryPoints(e.START_TO_END,e)&&l.push(n[o])}}}else if(d.doc.selection&&\"Control\"!=d.doc.selection.type)if(\"a\"==(t=(e=d.doc.selection.createRange()).parentElement()).nodeName.toLowerCase())l.push(t);else{n=t.getElementsByTagName(\"a\"),i=d.doc.body.createTextRange();for(var p=0;p<n.length;++p)i.moveToElementText(n[p]),-1<i.compareEndPoints(\"StartToEnd\",e)&&i.compareEndPoints(\"EndToStart\",e)<1&&l.push(n[p])}return l}function k(r){if(d.core.hasFocus()){if(a(),r&&\"keyup\"===r.type&&(r.altKey||r.which==m.FE.KEYCODE.ALT))return!0;setTimeout(function(){if(!r||r&&(1==r.which||\"mouseup\"!=r.type)){var e=c(),t=d.image?d.image.get():null;if(e&&!t){if(d.image){var n=d.node.contents(e);if(1==n.length&&\"IMG\"==n[0].tagName){var i=d.selection.ranges(0);return 0===i.startOffset&&0===i.endOffset?m(e).before(m.FE.MARKERS):m(e).after(m.FE.MARKERS),d.selection.restore(),!1}}r&&r.stopPropagation(),l(e)}}},d.helpers.isIOS()?100:0)}}function l(e){var t=d.popups.get(\"link.edit\");t||(t=function(){var e=\"\";1<=d.opts.linkEditButtons.length&&(\"A\"==d.el.tagName&&0<=d.opts.linkEditButtons.indexOf(\"linkRemove\")&&d.opts.linkEditButtons.splice(d.opts.linkEditButtons.indexOf(\"linkRemove\"),1),e='<div class=\"fr-buttons\">'+d.button.buildList(d.opts.linkEditButtons)+\"</div>\");var t={buttons:e},n=d.popups.create(\"link.edit\",t);d.$wp&&d.events.$on(d.$wp,\"scroll.link-edit\",function(){c()&&d.popups.isVisible(\"link.edit\")&&l(c())});return n}());var n=m(e);d.popups.isVisible(\"link.edit\")||d.popups.refresh(\"link.edit\"),d.popups.setContainer(\"link.edit\",d.$sc);var i=n.offset().left+m(e).outerWidth()/2,r=n.offset().top+n.outerHeight();d.popups.show(\"link.edit\",i,r,n.outerHeight())}function a(){d.popups.hide(\"link.edit\")}function o(){}function p(){var e=d.popups.get(\"link.insert\"),t=c();if(t){var n,i,r=m(t),l=e.find('input.fr-link-attr[type=\"text\"]'),a=e.find('input.fr-link-attr[type=\"checkbox\"]');for(n=0;n<l.length;n++)(i=m(l[n])).val(r.attr(i.attr(\"name\")||\"\"));for(a.prop(\"checked\",!1),n=0;n<a.length;n++)i=m(a[n]),r.attr(i.attr(\"name\"))==i.data(\"checked\")&&i.prop(\"checked\",!0);e.find('input.fr-link-attr[type=\"text\"][name=\"text\"]').val(r.text())}else e.find('input.fr-link-attr[type=\"text\"]').val(\"\"),e.find('input.fr-link-attr[type=\"checkbox\"]').prop(\"checked\",!1),e.find('input.fr-link-attr[type=\"text\"][name=\"text\"]').val(d.selection.text());e.find(\"input.fr-link-attr\").trigger(\"change\"),(d.image?d.image.get():null)?e.find('.fr-link-attr[name=\"text\"]').parent().hide():e.find('.fr-link-attr[name=\"text\"]').parent().show()}function s(e){if(e)return d.popups.onRefresh(\"link.insert\",p),d.popups.onHide(\"link.insert\",o),!0;var t=\"\";1<=d.opts.linkInsertButtons.length&&(t='<div class=\"fr-buttons\">'+d.button.buildList(d.opts.linkInsertButtons)+\"</div>\");var n=\"\",i=0;for(var r in n='<div class=\"fr-link-insert-layer fr-layer fr-active\" id=\"fr-link-insert-layer-'+d.id+'\">',n+='<div class=\"fr-input-line\"><input id=\"fr-link-insert-layer-url-'+d.id+'\" name=\"href\" type=\"text\" class=\"fr-link-attr\" placeholder=\"'+d.language.translate(\"URL\")+'\" tabIndex=\"'+ ++i+'\"></div>',d.opts.linkText&&(n+='<div class=\"fr-input-line\"><input id=\"fr-link-insert-layer-text-'+d.id+'\" name=\"text\" type=\"text\" class=\"fr-link-attr\" placeholder=\"'+d.language.translate(\"Text\")+'\" tabIndex=\"'+ ++i+'\"></div>'),d.opts.linkAttributes)if(d.opts.linkAttributes.hasOwnProperty(r)){var l=d.opts.linkAttributes[r];n+='<div class=\"fr-input-line\"><input name=\"'+r+'\" type=\"text\" class=\"fr-link-attr\" placeholder=\"'+d.language.translate(l)+'\" tabIndex=\"'+ ++i+'\"></div>'}d.opts.linkAlwaysBlank||(n+='<div class=\"fr-checkbox-line\"><span class=\"fr-checkbox\"><input name=\"target\" class=\"fr-link-attr\" data-checked=\"_blank\" type=\"checkbox\" id=\"fr-link-target-'+d.id+'\" tabIndex=\"'+ ++i+'\"><span><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg></span></span><label for=\"fr-link-target-'+d.id+'\">'+d.language.translate(\"Open in new tab\")+\"</label></div>\");var a={buttons:t,input_layer:n+='<div class=\"fr-action-buttons\"><button class=\"fr-command fr-submit\" role=\"button\" data-cmd=\"linkInsert\" href=\"#\" tabIndex=\"'+ ++i+'\" type=\"button\">'+d.language.translate(\"Insert\")+\"</button></div></div>\"},s=d.popups.create(\"link.insert\",a);return d.$wp&&d.events.$on(d.$wp,\"scroll.link-insert\",function(){(d.image?d.image.get():null)&&d.popups.isVisible(\"link.insert\")&&h(),d.popups.isVisible(\"link.insert\")&&g()}),s}function f(e,t,n){if(void 0===n&&(n={}),!1===d.events.trigger(\"link.beforeInsert\",[e,t,n]))return!1;var i=d.image?d.image.get():null;i||\"A\"==d.el.tagName?\"A\"==d.el.tagName&&d.$el.focus():(d.selection.restore(),d.popups.hide(\"link.insert\"));var r=e;d.opts.linkConvertEmailAddress&&d.helpers.isEmail(e)&&!/^mailto:.*/i.test(e)&&(e=\"mailto:\"+e);if(\"\"===d.opts.linkAutoPrefix||new RegExp(\"^(\"+m.FE.LinkProtocols.join(\"|\")+\"):.\",\"i\").test(e)||/^data:image.*/i.test(e)||/^(https?:|ftps?:|file:|)\\/\\//i.test(e)||/^([A-Za-z]:(\\\\){1,2}|[A-Za-z]:((\\\\){1,2}[^\\\\]+)+)(\\\\)?$/i.test(e)||[\"/\",\"{\",\"[\",\"#\",\"(\",\".\"].indexOf((e||\"\")[0])<0&&(e=d.opts.linkAutoPrefix+d.helpers.sanitizeURL(e)),e=d.helpers.sanitizeURL(e),d.opts.linkAlwaysBlank&&(n.target=\"_blank\"),d.opts.linkAlwaysNoFollow&&(n.rel=\"nofollow\"),d.helpers.isEmail(r)&&(n.target=null,n.rel=null),\"_blank\"==n.target?(d.opts.linkNoOpener&&(n.rel?n.rel+=\" noopener\":n.rel=\"noopener\"),d.opts.linkNoReferrer&&(n.rel?n.rel+=\" noreferrer\":n.rel=\"noreferrer\")):null==n.target&&(n.rel?n.rel=n.rel.replace(/noopener/,\"\").replace(/noreferrer/,\"\"):n.rel=null),t=t||\"\",e===d.opts.linkAutoPrefix)return d.popups.get(\"link.insert\").find('input[name=\"href\"]').addClass(\"fr-error\"),d.events.trigger(\"link.bad\",[r]),!1;var l,a=c();if(a){if((l=m(a)).attr(\"href\",e),0<t.length&&l.text()!=t&&!i){for(var s=l.get(0);1===s.childNodes.length&&s.childNodes[0].nodeType==Node.ELEMENT_NODE;)s=s.childNodes[0];m(s).text(t)}i||l.prepend(m.FE.START_MARKER).append(m.FE.END_MARKER),l.attr(n),i||d.selection.restore()}else{i?(i.wrap('<a href=\"'+e+'\"></a>'),d.image.hasCaption()&&i.parent().append(i.parents(\".fr-img-caption\").find(\".fr-inner\"))):(d.format.remove(\"a\"),d.selection.isCollapsed()?(t=0===t.length?r:t,d.html.insert('<a href=\"'+e+'\">'+m.FE.START_MARKER+t.replace(/&/g,\"&amp;\").replace(/</,\"&lt;\",\">\",\"&gt;\")+m.FE.END_MARKER+\"</a>\"),d.selection.restore()):0<t.length&&t!=d.selection.text().replace(/\\n/g,\"\")?(d.selection.remove(),d.html.insert('<a href=\"'+e+'\">'+m.FE.START_MARKER+t.replace(/&/g,\"&amp;\")+m.FE.END_MARKER+\"</a>\"),d.selection.restore()):(!function(){if(!d.selection.isCollapsed()){d.selection.save();for(var e=d.$el.find(\".fr-marker\").addClass(\"fr-unprocessed\").toArray();e.length;){var t=m(e.pop());t.removeClass(\"fr-unprocessed\");var n=d.node.deepestParent(t.get(0));if(n){for(var i=t.get(0),r=\"\",l=\"\";i=i.parentNode,d.node.isBlock(i)||(r+=d.node.closeTagString(i),l=d.node.openTagString(i)+l),i!=n;);var a=d.node.openTagString(t.get(0))+t.html()+d.node.closeTagString(t.get(0));t.replaceWith('<span id=\"fr-break\"></span>');var s=n.outerHTML;s=(s=s.replace(/<span id=\"fr-break\"><\\/span>/g,r+a+l)).replace(l+r,\"\"),n.outerHTML=s}e=d.$el.find(\".fr-marker.fr-unprocessed\").toArray()}d.html.cleanEmptyTags(),d.selection.restore()}}(),d.format.apply(\"a\",{href:e})));for(var o=u(),p=0;p<o.length;p++)(l=m(o[p])).attr(n),l.removeAttr(\"_moz_dirty\");1==o.length&&d.$wp&&!i&&(m(o[0]).prepend(m.FE.START_MARKER).append(m.FE.END_MARKER),d.selection.restore())}if(i){var f=d.popups.get(\"link.insert\");f&&f.find(\"input:focus\").blur(),d.image.edit(i)}else k()}function g(){a();var e=c();if(e){var t=d.popups.get(\"link.insert\");t||(t=s()),d.popups.isVisible(\"link.insert\")||(d.popups.refresh(\"link.insert\"),d.selection.save(),d.helpers.isMobile()&&(d.events.disableBlur(),d.$el.blur(),d.events.enableBlur())),d.popups.setContainer(\"link.insert\",d.$sc);var n=(d.image?d.image.get():null)||m(e),i=n.offset().left+n.outerWidth()/2,r=n.offset().top+n.outerHeight();d.popups.show(\"link.insert\",i,r,n.outerHeight())}}function h(){var e=d.image?d.image.getEl():null;if(e){var t=d.popups.get(\"link.insert\");d.image.hasCaption()&&(e=e.find(\".fr-img-wrap\")),t||(t=s()),p(),d.popups.setContainer(\"link.insert\",d.$sc);var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+e.outerHeight();d.popups.show(\"link.insert\",n,i,e.outerHeight())}}return{_init:function(){d.events.on(\"keyup\",function(e){e.which!=m.FE.KEYCODE.ESC&&k(e)}),d.events.on(\"window.mouseup\",k),d.events.$on(d.$el,\"click\",\"a\",function(e){d.edit.isDisabled()&&e.preventDefault()}),d.helpers.isMobile()&&d.events.$on(d.$doc,\"selectionchange\",k),s(!0),\"A\"==d.el.tagName&&d.$el.addClass(\"fr-view\"),d.events.on(\"toolbar.esc\",function(){if(d.popups.isVisible(\"link.edit\"))return d.events.disableBlur(),d.events.focus(),!1},!0)},remove:function(){var e=c(),t=d.image?d.image.get():null;if(!1===d.events.trigger(\"link.beforeRemove\",[e]))return!1;t&&e?(t.unwrap(),d.image.edit(t)):e&&(d.selection.save(),m(e).replaceWith(m(e).html()),d.selection.restore(),a())},showInsertPopup:function(){var e=d.$tb.find('.fr-command[data-cmd=\"insertLink\"]'),t=d.popups.get(\"link.insert\");if(t||(t=s()),!t.hasClass(\"fr-active\"))if(d.popups.refresh(\"link.insert\"),d.popups.setContainer(\"link.insert\",d.$tb||d.$sc),e.is(\":visible\")){var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(d.opts.toolbarBottom?10:e.outerHeight()-10);d.popups.show(\"link.insert\",n,i,e.outerHeight())}else d.position.forSelection(t),d.popups.show(\"link.insert\")},usePredefined:function(e){var t,n,i=d.opts.linkList[e],r=d.popups.get(\"link.insert\"),l=r.find('input.fr-link-attr[type=\"text\"]'),a=r.find('input.fr-link-attr[type=\"checkbox\"]');for(n=0;n<l.length;n++)i[(t=m(l[n])).attr(\"name\")]?t.val(i[t.attr(\"name\")]):\"text\"!=t.attr(\"name\")&&t.val(\"\");for(n=0;n<a.length;n++)(t=m(a[n])).prop(\"checked\",t.data(\"checked\")==i[t.attr(\"name\")]);d.accessibility.focusPopup(r)},insertCallback:function(){var e,t,n=d.popups.get(\"link.insert\"),i=n.find('input.fr-link-attr[type=\"text\"]'),r=n.find('input.fr-link-attr[type=\"checkbox\"]'),l=(i.filter('[name=\"href\"]').val()||\"\").trim(),a=i.filter('[name=\"text\"]').val(),s={};for(t=0;t<i.length;t++)e=m(i[t]),[\"href\",\"text\"].indexOf(e.attr(\"name\"))<0&&(s[e.attr(\"name\")]=e.val());for(t=0;t<r.length;t++)(e=m(r[t])).is(\":checked\")?s[e.attr(\"name\")]=e.data(\"checked\"):s[e.attr(\"name\")]=e.data(\"unchecked\")||null;var o=d.helpers.scrollTop();f(l,a,s),m(d.o_win).scrollTop(o)},insert:f,update:g,get:c,allSelected:u,back:function(){d.image&&d.image.get()?d.image.back():(d.events.disableBlur(),d.selection.restore(),d.events.enableBlur(),c()&&d.$wp?(d.selection.restore(),a(),k()):\"A\"==d.el.tagName?(d.$el.focus(),k()):(d.popups.hide(\"link.insert\"),d.toolbar.showInline()))},imageLink:h,applyStyle:function(e,t,n){void 0===n&&(n=d.opts.linkMultipleStyles),void 0===t&&(t=d.opts.linkStyles);var i=c();if(!i)return!1;if(!n){var r=Object.keys(t);r.splice(r.indexOf(e),1),m(i).removeClass(r.join(\" \"))}m(i).toggleClass(e),k()}}},m.FE.DefineIcon(\"insertLink\",{NAME:\"link\"}),m.FE.RegisterShortcut(m.FE.KEYCODE.K,\"insertLink\",null,\"K\"),m.FE.RegisterCommand(\"insertLink\",{title:\"Insert Link\",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible(\"link.insert\")?(this.$el.find(\".fr-marker\").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide(\"link.insert\")):this.link.showInsertPopup()},plugin:\"link\"}),m.FE.DefineIcon(\"linkOpen\",{NAME:\"external-link\",FA5NAME:\"external-link-alt\"}),m.FE.RegisterCommand(\"linkOpen\",{title:\"Open Link\",undo:!1,refresh:function(e){this.link.get()?e.removeClass(\"fr-hidden\"):e.addClass(\"fr-hidden\")},callback:function(){var e=this.link.get();e&&(-1!==e.href.indexOf(\"mailto:\")?this.o_win.open(e.href).close():this.o_win.open(e.href,\"_blank\",\"noopener\"),this.popups.hide(\"link.edit\"))},plugin:\"link\"}),m.FE.DefineIcon(\"linkEdit\",{NAME:\"edit\"}),m.FE.RegisterCommand(\"linkEdit\",{title:\"Edit Link\",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass(\"fr-hidden\"):e.addClass(\"fr-hidden\")},plugin:\"link\"}),m.FE.DefineIcon(\"linkRemove\",{NAME:\"unlink\"}),m.FE.RegisterCommand(\"linkRemove\",{title:\"Unlink\",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass(\"fr-hidden\"):e.addClass(\"fr-hidden\")},plugin:\"link\"}),m.FE.DefineIcon(\"linkBack\",{NAME:\"arrow-left\"}),m.FE.RegisterCommand(\"linkBack\",{title:\"Back\",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();(this.image?this.image.get():null)||t||this.opts.toolbarInline?(e.removeClass(\"fr-hidden\"),e.next(\".fr-separator\").removeClass(\"fr-hidden\")):(e.addClass(\"fr-hidden\"),e.next(\".fr-separator\").addClass(\"fr-hidden\"))},plugin:\"link\"}),m.FE.DefineIcon(\"linkList\",{NAME:\"search\"}),m.FE.RegisterCommand(\"linkList\",{title:\"Choose Link\",type:\"dropdown\",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"linkList\" data-param1=\"'+n+'\">'+(t[n].displayText||t[n].text)+\"</a></li>\";return e+=\"</ul>\"},callback:function(e,t){this.link.usePredefined(t)},plugin:\"link\"}),m.FE.RegisterCommand(\"linkInsert\",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate(\"Update\")):e.text(this.language.translate(\"Insert\"))},plugin:\"link\"}),m.FE.DefineIcon(\"imageLink\",{NAME:\"link\"}),m.FE.RegisterCommand(\"imageLink\",{title:\"Insert Link\",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?((t=e.prev()).hasClass(\"fr-separator\")&&t.removeClass(\"fr-hidden\"),e.addClass(\"fr-hidden\")):((t=e.prev()).hasClass(\"fr-separator\")&&t.addClass(\"fr-hidden\"),e.removeClass(\"fr-hidden\"))},plugin:\"link\"}),m.FE.DefineIcon(\"linkStyle\",{NAME:\"magic\"}),m.FE.RegisterCommand(\"linkStyle\",{title:\"Style\",type:\"dropdown\",html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"linkStyle\" data-param1=\"'+n+'\">'+this.language.translate(t[n])+\"</a></li>\");return e+=\"</ul>\"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(e,t){var n=this.link.get();if(n){var i=m(n);t.find(\".fr-command\").each(function(){var e=m(this).data(\"param1\"),t=i.hasClass(e);m(this).toggleClass(\"fr-active\",t).attr(\"aria-selected\",t)})}},refresh:function(e){this.link.get()?e.removeClass(\"fr-hidden\"):e.addClass(\"fr-hidden\")},plugin:\"link\"})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(n){\"function\"==typeof define&&define.amd?define([\"jquery\"],n):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),n(t)}:n(window.jQuery)}(function(u){u.extend(u.FE.DEFAULTS,{listAdvancedTypes:!0}),u.FE.PLUGINS.lists=function(d){function c(e){return'<span class=\"fr-open-'+e.toLowerCase()+'\"></span>'}function g(e){return'<span class=\"fr-close-'+e.toLowerCase()+'\"></span>'}function r(e,t){!function(e,t){for(var n=[],a=0;a<e.length;a++){var r=e[a].parentNode;\"LI\"==e[a].tagName&&r.tagName!=t&&n.indexOf(r)<0&&n.push(r)}for(a=n.length-1;0<=a;a--){var o=u(n[a]);o.replaceWith(\"<\"+t.toLowerCase()+\" \"+d.node.attributes(o.get(0))+\">\"+o.html()+\"</\"+t.toLowerCase()+\">\")}}(e,t);var n,a=d.html.defaultTag(),r=null;e.length&&(n=\"rtl\"==d.opts.direction||\"rtl\"==u(e[0]).css(\"direction\")?\"margin-right\":\"margin-left\");for(var o=0;o<e.length;o++)if(\"TD\"!=e[o].tagName&&\"TH\"!=e[o].tagName&&\"LI\"!=e[o].tagName){var l=d.helpers.getPX(u(e[o]).css(n))||0;(e[o].style.marginLeft=null)===r&&(r=l);var s=0<r?\"<\"+t+' style=\"'+n+\": \"+r+'px;\">':\"<\"+t+\">\",i=\"</\"+t+\">\";for(l-=r;0<l/d.opts.indentMargin;)s+=\"<\"+t+\">\",i+=i,l-=d.opts.indentMargin;a&&e[o].tagName.toLowerCase()==a?u(e[o]).replaceWith(s+\"<li\"+d.node.attributes(e[o])+\">\"+u(e[o]).html()+\"</li>\"+i):u(e[o]).wrap(s+\"<li></li>\"+i)}d.clean.lists()}function o(e){var t,n;for(t=e.length-1;0<=t;t--)for(n=t-1;0<=n;n--)if(u(e[n]).find(e[t]).length||e[n]==e[t]){e.splice(t,1);break}var a=[];for(t=0;t<e.length;t++){var r=u(e[t]),o=e[t].parentNode,l=r.attr(\"class\");if(r.before(g(o.tagName)),\"LI\"==o.parentNode.tagName)r.before(g(\"LI\")),r.after(c(\"LI\"));else{var s=\"\";l&&(s+=' class=\"'+l+'\"');var i=\"rtl\"==d.opts.direction||\"rtl\"==r.css(\"direction\")?\"margin-right\":\"margin-left\";d.helpers.getPX(u(o).css(i))&&0<=(u(o).attr(\"style\")||\"\").indexOf(i+\":\")&&(s+=' style=\"'+i+\":\"+d.helpers.getPX(u(o).css(i))+'px;\"'),d.html.defaultTag()&&0===r.find(d.html.blockTagsQuery()).length&&r.wrapInner(\"<\"+d.html.defaultTag()+s+\"></\"+d.html.defaultTag()+\">\"),d.node.isEmpty(r.get(0),!0)||0!==r.find(d.html.blockTagsQuery()).length||r.append(\"<br>\"),r.append(c(\"LI\")),r.prepend(g(\"LI\"))}r.after(c(o.tagName)),\"LI\"==o.parentNode.tagName&&(o=o.parentNode.parentNode),a.indexOf(o)<0&&a.push(o)}for(t=0;t<a.length;t++){var p=u(a[t]),f=p.html();f=(f=f.replace(/<span class=\"fr-close-([a-z]*)\"><\\/span>/g,\"</$1>\")).replace(/<span class=\"fr-open-([a-z]*)\"><\\/span>/g,\"<$1>\"),p.replaceWith(d.node.openTagString(p.get(0))+f+d.node.closeTagString(p.get(0)))}d.$el.find(\"li:empty\").remove(),d.$el.find(\"ul:empty, ol:empty\").remove(),d.clean.lists(),d.html.wrap()}function l(e){d.selection.save();for(var t=0;t<e.length;t++){var n=e[t].previousSibling;if(n){var a=u(e[t]).find(\"> ul, > ol\").last().get(0);if(a){for(var r=u(\"<li>\").prependTo(u(a)),o=d.node.contents(e[t])[0];o&&!d.node.isList(o);){var l=o.nextSibling;r.append(o),o=l}u(n).append(u(a)),u(e[t]).remove()}else{var s=u(n).find(\"> ul, > ol\").last().get(0);if(s)u(s).append(u(e[t]));else{var i=u(\"<\"+e[t].parentNode.tagName+\">\");u(n).append(i),i.append(u(e[t]))}}}}d.clean.lists(),d.selection.restore()}function s(e){d.selection.save(),o(e),d.selection.restore()}function e(e){if(\"indent\"==e||\"outdent\"==e){for(var t=!1,n=d.selection.blocks(),a=[],r=0;r<n.length;r++)\"LI\"==n[r].tagName?(t=!0,a.push(n[r])):\"LI\"==n[r].parentNode.tagName&&(t=!0,a.push(n[r].parentNode));t&&(\"indent\"==e?l(a):s(a))}}return{_init:function(){d.events.on(\"commands.after\",e),d.events.on(\"keydown\",function(e){if(e.which==u.FE.KEYCODE.TAB){for(var t=d.selection.blocks(),n=[],a=0;a<t.length;a++)\"LI\"==t[a].tagName?n.push(t[a]):\"LI\"==t[a].parentNode.tagName&&n.push(t[a].parentNode);if(1<n.length||n.length&&(d.selection.info(n[0]).atStart||d.node.isEmpty(n[0])))return e.preventDefault(),e.stopPropagation(),e.shiftKey?s(n):l(n),!1}},!0)},format:function(e,t){var n,a;for(d.selection.save(),d.html.wrap(!0,!0,!0,!0),d.selection.restore(),a=d.selection.blocks(),n=0;n<a.length;n++)\"LI\"!=a[n].tagName&&\"LI\"==a[n].parentNode.tagName&&(a[n]=a[n].parentNode);if(d.selection.save(),function(e,t){for(var n=!0,a=0;a<e.length;a++){if(\"LI\"!=e[a].tagName)return!1;e[a].parentNode.tagName!=t&&(n=!1)}return n}(a,e)?t||o(a):r(a,e),d.html.unwrap(),d.selection.restore(),t=t||\"default\"){for(a=d.selection.blocks(),n=0;n<a.length;n++)\"LI\"!=a[n].tagName&&\"LI\"==a[n].parentNode.tagName&&(a[n]=a[n].parentNode);for(n=0;n<a.length;n++)\"LI\"==a[n].tagName&&(u(a[n].parentNode).css(\"list-style-type\",\"default\"===t?\"\":t),0===(u(a[n].parentNode).attr(\"style\")||\"\").length&&u(a[n].parentNode).removeAttr(\"style\"))}},refresh:function(e,t){var n=u(d.selection.element());if(n.get(0)!=d.el){var a=n.get(0);(a=\"LI\"!=a.tagName&&a.firstElementChild&&\"LI\"!=a.firstElementChild.tagName?n.parents(\"li\").get(0):\"LI\"==a.tagName||a.firstElementChild?a.firstElementChild&&\"LI\"==a.firstElementChild.tagName?n.get(0).firstChild:n.get(0):n.parents(\"li\").get(0))&&a.parentNode.tagName==t&&d.el.contains(a.parentNode)&&e.addClass(\"fr-active\")}}}},u.FE.RegisterCommand(\"formatUL\",{title:\"Unordered List\",type:\"button\",hasOptions:function(){return this.opts.listAdvancedTypes},options:{\"default\":\"Default\",circle:\"Circle\",disc:\"Disc\",square:\"Square\"},refresh:function(e){this.lists.refresh(e,\"UL\")},callback:function(e,t){this.lists.format(\"UL\",t)},plugin:\"lists\"}),u.FE.RegisterCommand(\"formatOL\",{title:\"Ordered List\",hasOptions:function(){return this.opts.listAdvancedTypes},options:{\"default\":\"Default\",\"lower-alpha\":\"Lower Alpha\",\"lower-greek\":\"Lower Greek\",\"lower-roman\":\"Lower Roman\",\"upper-alpha\":\"Upper Alpha\",\"upper-roman\":\"Upper Roman\"},refresh:function(e){this.lists.refresh(e,\"OL\")},callback:function(e,t){this.lists.format(\"OL\",t)},plugin:\"lists\"}),u.FE.DefineIcon(\"formatUL\",{NAME:\"list-ul\"}),u.FE.DefineIcon(\"formatOL\",{NAME:\"list-ol\"})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(l){\"function\"==typeof define&&define.amd?define([\"jquery\"],l):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),l(t)}:l(window.jQuery)}(function(Z){Z.extend(Z.FE.POPUP_TEMPLATES,{\"table.insert\":\"[_BUTTONS_][_ROWS_COLUMNS_]\",\"table.edit\":\"[_BUTTONS_]\",\"table.colors\":\"[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]\"}),Z.extend(Z.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:[\"tableHeader\",\"tableRemove\",\"|\",\"tableRows\",\"tableColumns\",\"tableStyle\",\"-\",\"tableCells\",\"tableCellBackground\",\"tableCellVerticalAlign\",\"tableCellHorizontalAlign\",\"tableCellStyle\"],tableInsertButtons:[\"tableBack\",\"|\"],tableResizer:!0,tableDefaultWidth:\"100%\",tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:[\"tableBack\",\"|\"],tableColors:[\"#61BD6D\",\"#1ABC9C\",\"#54ACD2\",\"#2C82C9\",\"#9365B8\",\"#475577\",\"#CCCCCC\",\"#41A85F\",\"#00A885\",\"#3D8EB9\",\"#2969B0\",\"#553982\",\"#28324E\",\"#000000\",\"#F7DA64\",\"#FBA026\",\"#EB6B56\",\"#E25041\",\"#A38F84\",\"#EFEFEF\",\"#FFFFFF\",\"#FAC51C\",\"#F37934\",\"#D14841\",\"#B8312F\",\"#7C706B\",\"#D1D5D8\",\"REMOVE\"],tableColorsStep:7,tableCellStyles:{\"fr-highlighted\":\"Highlighted\",\"fr-thick\":\"Thick\"},tableStyles:{\"fr-dashed-borders\":\"Dashed Borders\",\"fr-alternate-rows\":\"Alternate Rows\"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),Z.FE.PLUGINS.table=function(w){var C,o,s,n,a,r,E;function h(){var e=O();if(e){var t=w.popups.get(\"table.edit\");if(t||(t=p()),t){w.popups.setContainer(\"table.edit\",w.$sc);var l=M(e),a=(l.left+l.right)/2,s=l.bottom;w.popups.show(\"table.edit\",a,s,l.bottom-l.top),w.edit.isDisabled()&&(1<J().length&&w.toolbar.disable(),w.$el.removeClass(\"fr-no-selection\"),w.edit.on(),w.button.bulkRefresh(),w.selection.setAtEnd(w.$el.find(\".fr-selected-cell:last\").get(0)),w.selection.restore())}}}function f(){var e,t,l,a,s=O();if(s){var n=w.popups.get(\"table.colors\");n||(n=function(){var e=\"\";0<w.opts.tableColorsButtons.length&&(e='<div class=\"fr-buttons fr-table-colors-buttons\">'+w.button.buildList(w.opts.tableColorsButtons)+\"</div>\");var t=\"\";w.opts.colorsHEXInput&&(t='<div class=\"fr-table-colors-hex-layer fr-active fr-layer\" id=\"fr-table-colors-hex-layer-'+w.id+'\"><div class=\"fr-input-line\"><input maxlength=\"7\" id=\"fr-table-colors-hex-layer-text-'+w.id+'\" type=\"text\" placeholder=\"'+w.language.translate(\"HEX Color\")+'\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"tableCellBackgroundCustomColor\" tabIndex=\"2\" role=\"button\">'+w.language.translate(\"OK\")+\"</button></div></div>\");var l={buttons:e,colors:function(){for(var e='<div class=\"fr-table-colors\">',t=0;t<w.opts.tableColors.length;t++)0!==t&&t%w.opts.tableColorsStep==0&&(e+=\"<br>\"),\"REMOVE\"!=w.opts.tableColors[t]?e+='<span class=\"fr-command\" style=\"background: '+w.opts.tableColors[t]+';\" tabIndex=\"-1\" role=\"button\" data-cmd=\"tableCellBackgroundColor\" data-param1=\"'+w.opts.tableColors[t]+'\"><span class=\"fr-sr-only\">'+w.language.translate(\"Color\")+\" \"+w.opts.tableColors[t]+\"&nbsp;&nbsp;&nbsp;</span></span>\":e+='<span class=\"fr-command\" data-cmd=\"tableCellBackgroundColor\" tabIndex=\"-1\" role=\"button\" data-param1=\"REMOVE\" title=\"'+w.language.translate(\"Clear Formatting\")+'\">'+w.icon.create(\"tableColorRemove\")+'<span class=\"fr-sr-only\">'+w.language.translate(\"Clear Formatting\")+\"</span></span>\";return e+=\"</div>\"}(),custom_color:t},a=w.popups.create(\"table.colors\",l);return w.events.$on(w.$wp,\"scroll.table-colors\",function(){w.popups.isVisible(\"table.colors\")&&f()}),u=a,w.events.on(\"popup.tab\",function(e){var t=Z(e.currentTarget);if(!w.popups.isVisible(\"table.colors\")||!t.is(\"span\"))return!0;var l=e.which,a=!0;if(Z.FE.KEYCODE.TAB==l){var s=u.find(\".fr-buttons\");a=!w.accessibility.focusToolbar(s,!!e.shiftKey)}else if(Z.FE.KEYCODE.ARROW_UP==l||Z.FE.KEYCODE.ARROW_DOWN==l||Z.FE.KEYCODE.ARROW_LEFT==l||Z.FE.KEYCODE.ARROW_RIGHT==l){var n=t.parent().find(\"span.fr-command\"),r=n.index(t),o=w.opts.colorsStep,i=Math.floor(n.length/o),f=r%o,c=Math.floor(r/o),d=c*o+f,p=i*o;Z.FE.KEYCODE.ARROW_UP==l?d=((d-o)%p+p)%p:Z.FE.KEYCODE.ARROW_DOWN==l?d=(d+o)%p:Z.FE.KEYCODE.ARROW_LEFT==l?d=((d-1)%p+p)%p:Z.FE.KEYCODE.ARROW_RIGHT==l&&(d=(d+1)%p);var h=Z(n.get(d));w.events.disableBlur(),h.focus(),a=!1}else Z.FE.KEYCODE.ENTER==l&&(w.button.exec(t),a=!1);return!1===a&&(e.preventDefault(),e.stopPropagation()),a},!0),a;var u}()),w.popups.setContainer(\"table.colors\",w.$sc);var r=M(s),o=(r.left+r.right)/2,i=r.bottom;e=w.popups.get(\"table.colors\"),t=w.$el.find(\".fr-selected-cell:first\"),l=w.helpers.RGBToHex(t.css(\"background-color\")),a=e.find(\".fr-table-colors-hex-layer input\"),e.find(\".fr-selected-color\").removeClass(\"fr-selected-color fr-active-item\"),e.find('span[data-param1=\"'+l+'\"]').addClass(\"fr-selected-color fr-active-item\"),a.val(l).trigger(\"change\"),w.popups.show(\"table.colors\",o,i,r.bottom-r.top)}}function i(){0===J().length&&w.toolbar.enable()}function c(e){if(e)return w.popups.onHide(\"table.insert\",function(){w.popups.get(\"table.insert\").find('.fr-table-size .fr-select-table-size > span[data-row=\"1\"][data-col=\"1\"]').trigger(\"mouseenter\")}),!0;var t=\"\";0<w.opts.tableInsertButtons.length&&(t='<div class=\"fr-buttons\">'+w.button.buildList(w.opts.tableInsertButtons)+\"</div>\");var l,a={buttons:t,rows_columns:function(){for(var e='<div class=\"fr-table-size\"><div class=\"fr-table-size-info\">1 &times; 1</div><div class=\"fr-select-table-size\">',t=1;t<=w.opts.tableInsertMaxSize;t++){for(var l=1;l<=w.opts.tableInsertMaxSize;l++){var a=\"inline-block\";2<t&&!w.helpers.isMobile()&&(a=\"none\");var s=\"fr-table-cell \";1==t&&1==l&&(s+=\" hover\"),e+='<span class=\"fr-command '+s+'\" tabIndex=\"-1\" data-cmd=\"tableInsert\" data-row=\"'+t+'\" data-col=\"'+l+'\" data-param1=\"'+t+'\" data-param2=\"'+l+'\" style=\"display: '+a+';\" role=\"button\"><span></span><span class=\"fr-sr-only\">'+t+\" &times; \"+l+\"&nbsp;&nbsp;&nbsp;</span></span>\"}e+='<div class=\"new-line\"></div>'}return e+=\"</div></div>\"}()},s=w.popups.create(\"table.insert\",a);return w.events.$on(s,\"mouseenter\",\".fr-table-size .fr-select-table-size .fr-table-cell\",function(e){d(Z(e.currentTarget))},!0),l=s,w.events.$on(l,\"focus\",\"[tabIndex]\",function(e){var t=Z(e.currentTarget);d(t)}),w.events.on(\"popup.tab\",function(e){var t=Z(e.currentTarget);if(!w.popups.isVisible(\"table.insert\")||!t.is(\"span, a\"))return!0;var l,a=e.which;if(Z.FE.KEYCODE.ARROW_UP==a||Z.FE.KEYCODE.ARROW_DOWN==a||Z.FE.KEYCODE.ARROW_LEFT==a||Z.FE.KEYCODE.ARROW_RIGHT==a){if(t.is(\"span.fr-table-cell\")){var s=t.parent().find(\"span.fr-table-cell\"),n=s.index(t),r=w.opts.tableInsertMaxSize,o=n%r,i=Math.floor(n/r);Z.FE.KEYCODE.ARROW_UP==a?i=Math.max(0,i-1):Z.FE.KEYCODE.ARROW_DOWN==a?i=Math.min(w.opts.tableInsertMaxSize-1,i+1):Z.FE.KEYCODE.ARROW_LEFT==a?o=Math.max(0,o-1):Z.FE.KEYCODE.ARROW_RIGHT==a&&(o=Math.min(w.opts.tableInsertMaxSize-1,o+1));var f=i*r+o,c=Z(s.get(f));d(c),w.events.disableBlur(),c.focus(),l=!1}}else Z.FE.KEYCODE.ENTER==a&&(w.button.exec(t),l=!1);return!1===l&&(e.preventDefault(),e.stopPropagation()),l},!0),s}function d(e){var t=e.data(\"row\"),l=e.data(\"col\"),a=e.parent();a.siblings(\".fr-table-size-info\").html(t+\" &times; \"+l),a.find(\"> span\").removeClass(\"hover fr-active-item\");for(var s=1;s<=w.opts.tableInsertMaxSize;s++)for(var n=0;n<=w.opts.tableInsertMaxSize;n++){var r=a.find('> span[data-row=\"'+s+'\"][data-col=\"'+n+'\"]');s<=t&&n<=l?r.addClass(\"hover\"):s<=t+1||s<=2&&!w.helpers.isMobile()?r.css(\"display\",\"inline-block\"):2<s&&!w.helpers.isMobile()&&r.css(\"display\",\"none\")}e.addClass(\"fr-active-item\")}function p(e){if(e)return w.popups.onHide(\"table.edit\",i),!0;if(0<w.opts.tableEditButtons.length){var t={buttons:'<div class=\"fr-buttons\">'+w.button.buildList(w.opts.tableEditButtons)+\"</div>\"},l=w.popups.create(\"table.edit\",t);return w.events.$on(w.$wp,\"scroll.table-edit\",function(){w.popups.isVisible(\"table.edit\")&&h()}),l}return!1}function u(){if(0<J().length){var e=Q();w.selection.setBefore(e.get(0))||w.selection.setAfter(e.get(0)),w.selection.restore(),w.popups.hide(\"table.edit\"),e.remove(),w.toolbar.enable()}}function b(e){var t=Q();if(0<t.length){if(0<w.$el.find(\"th.fr-selected-cell\").length&&\"above\"==e)return;var l,a,s,n=O(),r=$(n);a=\"above\"==e?r.min_i:r.max_i;var o=\"<tr>\";for(l=0;l<n[a].length;l++){if(\"below\"==e&&a<n.length-1&&n[a][l]==n[a+1][l]||\"above\"==e&&0<a&&n[a][l]==n[a-1][l]){if(0===l||0<l&&n[a][l]!=n[a][l-1]){var i=Z(n[a][l]);i.attr(\"rowspan\",parseInt(i.attr(\"rowspan\"),10)+1)}}else o+='<td style=\"'+Z(n[a][l]).attr(\"style\")+'\" ><br></td>'}o+=\"</tr>\",s=0<w.$el.find(\"th.fr-selected-cell\").length&&\"below\"==e?Z(t.find(\"tbody\").not(t.find(\"table tbody\"))):Z(t.find(\"tr\").not(t.find(\"table tr\")).get(a)),\"below\"==e?\"TBODY\"==s.prop(\"tagName\")?s.prepend(o):s.after(o):\"above\"==e&&(s.before(o),w.popups.isVisible(\"table.edit\")&&h())}}function g(e,t,l){var a,s,n,r,o,i=0,f=O(l);if(e<(t=Math.min(t,f[0].length-1)))for(s=e;s<=t;s++)if(!(e<s&&f[0][s]==f[0][s-1])&&1<(r=Math.min(parseInt(f[0][s].getAttribute(\"colspan\"),10)||1,t-e+1))&&f[0][s]==f[0][s+1])for(i=r-1,a=1;a<f.length;a++)if(f[a][s]!=f[a-1][s]){for(n=s;n<s+r;n++)if(1<(o=parseInt(f[a][n].getAttribute(\"colspan\"),10)||1)&&f[a][n]==f[a][n+1])n+=i=Math.min(i,o-1);else if(!(i=Math.max(0,i-1)))break;if(!i)break}i&&v(f,i,\"colspan\",0,f.length-1,e,t)}function m(e,t,l){var a,s,n,r,o,i=0,f=O(l);if(e<(t=Math.min(t,f.length-1)))for(a=e;a<=t;a++)if(!(e<a&&f[a][0]==f[a-1][0])&&1<(r=Math.min(parseInt(f[a][0].getAttribute(\"rowspan\"),10)||1,t-e+1))&&f[a][0]==f[a+1][0])for(i=r-1,s=1;s<f[0].length;s++)if(f[a][s]!=f[a][s-1]){for(n=a;n<a+r;n++)if(1<(o=parseInt(f[n][s].getAttribute(\"rowspan\"),10)||1)&&f[n][s]==f[n+1][s])n+=i=Math.min(i,o-1);else if(!(i=Math.max(0,i-1)))break;if(!i)break}i&&v(f,i,\"rowspan\",e,t,0,f[0].length-1)}function v(e,t,l,a,s,n,r){var o,i,f;for(o=a;o<=s;o++)for(i=n;i<=r;i++)a<o&&e[o][i]==e[o-1][i]||n<i&&e[o][i]==e[o][i-1]||1<(f=parseInt(e[o][i].getAttribute(l),10)||1)&&(1<f-t?e[o][i].setAttribute(l,f-t):e[o][i].removeAttribute(l))}function R(e,t,l,a,s){m(e,t,s),g(l,a,s)}function t(e){var t=w.$el.find(\".fr-selected-cell\");\"REMOVE\"!=e?t.css(\"background-color\",w.helpers.HEXtoRGB(e)):t.css(\"background-color\",\"\"),h()}function O(e){var f=[];return null==(e=e||null)&&0<J().length&&(e=Q()),e&&e.find(\"tr:visible\").not(e.find(\"table tr\")).each(function(o,e){var t=Z(e),i=0;t.find(\"> th, > td\").each(function(e,t){for(var l=Z(t),a=parseInt(l.attr(\"colspan\"),10)||1,s=parseInt(l.attr(\"rowspan\"),10)||1,n=o;n<o+s;n++)for(var r=i;r<i+a;r++)f[n]||(f[n]=[]),f[n][r]?i++:f[n][r]=t;i+=a})}),f}function A(e,t){for(var l=0;l<t.length;l++)for(var a=0;a<t[l].length;a++)if(t[l][a]==e)return{row:l,col:a}}function F(e,t,l){for(var a=e+1,s=t+1;a<l.length;){if(l[a][t]!=l[e][t]){a--;break}a++}for(a==l.length&&a--;s<l[e].length;){if(l[e][s]!=l[e][t]){s--;break}s++}return s==l[e].length&&s--,{row:a,col:s}}function x(){w.el.querySelector(\".fr-cell-fixed\")&&w.el.querySelector(\".fr-cell-fixed\").classList.remove(\"fr-cell-fixed\"),w.el.querySelector(\".fr-cell-handler\")&&w.el.querySelector(\".fr-cell-handler\").classList.remove(\"fr-cell-handler\")}function D(){var e=w.$el.find(\".fr-selected-cell\");0<e.length&&e.each(function(){var e=Z(this);e.removeClass(\"fr-selected-cell\"),\"\"===e.attr(\"class\")&&e.removeAttr(\"class\")}),x()}function y(){w.events.disableBlur(),w.selection.clear(),w.$el.addClass(\"fr-no-selection\"),w.$el.blur(),w.events.enableBlur()}function $(e){var t=w.$el.find(\".fr-selected-cell\");if(0<t.length){var l,a=e.length,s=0,n=e[0].length,r=0;for(l=0;l<t.length;l++){var o=A(t[l],e),i=F(o.row,o.col,e);a=Math.min(o.row,a),s=Math.max(i.row,s),n=Math.min(o.col,n),r=Math.max(i.col,r)}return{min_i:a,max_i:s,min_j:n,max_j:r}}return null}function M(e){var t=$(e),l=Z(e[t.min_i][t.min_j]),a=Z(e[t.min_i][t.max_j]),s=Z(e[t.max_i][t.min_j]);return{left:l.offset().left,right:a.offset().left+a.outerWidth(),top:l.offset().top,bottom:s.offset().top+s.outerHeight()}}function _(t,l){if(Z(t).is(l))D(),Z(t).addClass(\"fr-selected-cell\");else{y(),w.edit.off();var a=O(),s=A(t,a),n=A(l,a),r=function e(t,l,a,s,n){var r,o,i,f,c=t,d=l,p=a,h=s;for(r=c;r<=d;r++)(1<(parseInt(Z(n[r][p]).attr(\"rowspan\"),10)||1)||1<(parseInt(Z(n[r][p]).attr(\"colspan\"),10)||1))&&(f=F((i=A(n[r][p],n)).row,i.col,n),c=Math.min(i.row,c),d=Math.max(f.row,d),p=Math.min(i.col,p),h=Math.max(f.col,h)),(1<(parseInt(Z(n[r][h]).attr(\"rowspan\"),10)||1)||1<(parseInt(Z(n[r][h]).attr(\"colspan\"),10)||1))&&(f=F((i=A(n[r][h],n)).row,i.col,n),c=Math.min(i.row,c),d=Math.max(f.row,d),p=Math.min(i.col,p),h=Math.max(f.col,h));for(o=p;o<=h;o++)(1<(parseInt(Z(n[c][o]).attr(\"rowspan\"),10)||1)||1<(parseInt(Z(n[c][o]).attr(\"colspan\"),10)||1))&&(f=F((i=A(n[c][o],n)).row,i.col,n),c=Math.min(i.row,c),d=Math.max(f.row,d),p=Math.min(i.col,p),h=Math.max(f.col,h)),(1<(parseInt(Z(n[d][o]).attr(\"rowspan\"),10)||1)||1<(parseInt(Z(n[d][o]).attr(\"colspan\"),10)||1))&&(f=F((i=A(n[d][o],n)).row,i.col,n),c=Math.min(i.row,c),d=Math.max(f.row,d),p=Math.min(i.col,p),h=Math.max(f.col,h));return c==t&&d==l&&p==a&&h==s?{min_i:t,max_i:l,min_j:a,max_j:s}:e(c,d,p,h,n)}(Math.min(s.row,n.row),Math.max(s.row,n.row),Math.min(s.col,n.col),Math.max(s.col,n.col),a);D(),t.classList.add(\"fr-cell-fixed\"),l.classList.add(\"fr-cell-handler\");for(var o=r.min_i;o<=r.max_i;o++)for(var i=r.min_j;i<=r.max_j;i++)Z(a[o][i]).addClass(\"fr-selected-cell\")}}function I(e){var t=null,l=Z(e.target);return\"TD\"==e.target.tagName||\"TH\"==e.target.tagName?t=e.target:0<l.closest(\"td\").length?t=l.closest(\"td\").get(0):0<l.closest(\"th\").length&&(t=l.closest(\"th\").get(0)),0===w.$el.find(t).length?null:t}function S(){D(),w.popups.hide(\"table.edit\")}function e(e){var t=I(e);if(\"false\"==Z(t).parents(\"[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first\").attr(\"contenteditable\"))return!0;if(0<J().length&&!t&&S(),!w.edit.isDisabled()||w.popups.isVisible(\"table.edit\"))if(1!=e.which||1==e.which&&w.helpers.isMac()&&e.ctrlKey)(3==e.which||1==e.which&&w.helpers.isMac()&&e.ctrlKey)&&t&&S();else if(n=!0,t){0<J().length&&!e.shiftKey&&S(),e.stopPropagation(),w.events.trigger(\"image.hideResizer\"),w.events.trigger(\"video.hideResizer\"),s=!0;var l=t.tagName.toLowerCase();e.shiftKey&&0<w.$el.find(l+\".fr-selected-cell\").length?Z(w.$el.find(l+\".fr-selected-cell\").closest(\"table\")).is(Z(t).closest(\"table\"))?_(a,t):y():((w.keys.ctrlKey(e)||e.shiftKey)&&(1<J().length||0===Z(t).find(w.selection.element()).length&&!Z(t).is(w.selection.element()))&&y(),a=t,0<w.opts.tableEditButtons.length&&_(a,a))}}function l(e){if(w.popups.areVisible())return!0;if(s||w.$tb.is(e.target)||w.$tb.is(Z(e.target).closest(w.$tb.get(0)))||(0<J().length&&w.toolbar.enable(),D()),!(1!=e.which||1==e.which&&w.helpers.isMac()&&e.ctrlKey)){if(n=!1,s)s=!1,I(e)||1!=J().length?0<J().length&&(w.selection.isCollapsed()?h():D()):D();if(E){E=!1,C.removeClass(\"fr-moving\"),w.$el.removeClass(\"fr-no-selection\"),w.edit.on();var t=parseFloat(C.css(\"left\"))+w.opts.tableResizerOffset+w.$wp.offset().left;w.opts.iframe&&(t-=w.$iframe.offset().left),C.data(\"release-position\",t),C.removeData(\"max-left\"),C.removeData(\"max-right\"),function(){var e=C.data(\"origin\"),t=C.data(\"release-position\");if(e!==t){var l=C.data(\"first\"),a=C.data(\"second\"),s=C.data(\"table\"),n=s.outerWidth();if(w.undo.canDo()||w.undo.saveStep(),null!==l&&null!==a){var r,o,i,f=O(s),c=[],d=[],p=[],h=[];for(r=0;r<f.length;r++)o=Z(f[r][l]),i=Z(f[r][a]),c[r]=o.outerWidth(),p[r]=i.outerWidth(),d[r]=c[r]/n*100,h[r]=p[r]/n*100;for(r=0;r<f.length;r++)if(o=Z(f[r][l]),i=Z(f[r][a]),f[r][l]!=f[r][a]){var u=(d[r]*(c[r]+t-e)/c[r]).toFixed(4);o.css(\"width\",u+\"%\"),i.css(\"width\",(d[r]+h[r]-u).toFixed(4)+\"%\")}}else{var b,g=s.parent(),m=n/g.width()*100,v=(parseInt(s.css(\"margin-left\"),10)||0)/g.width()*100,E=(parseInt(s.css(\"margin-right\"),10)||0)/g.width()*100;\"rtl\"==w.opts.direction&&0===a||\"rtl\"!=w.opts.direction&&0!==a?(b=(n+t-e)/n*m,s.css(\"margin-right\",\"calc(100% - \"+Math.round(b).toFixed(4)+\"% - \"+Math.round(v).toFixed(4)+\"%)\")):(\"rtl\"==w.opts.direction&&0!==a||\"rtl\"!=w.opts.direction&&0===a)&&(b=(n-t+e)/n*m,s.css(\"margin-left\",\"calc(100% - \"+Math.round(b).toFixed(4)+\"% - \"+Math.round(E).toFixed(4)+\"%)\")),s.css(\"width\",Math.round(b).toFixed(4)+\"%\")}w.selection.restore(),w.undo.saveStep(),w.events.trigger(\"table.resized\",[s.get(0)])}C.removeData(\"origin\"),C.removeData(\"release-position\"),C.removeData(\"first\"),C.removeData(\"second\"),C.removeData(\"table\")}(),W()}}}function T(e){if(!0===s&&0<w.opts.tableEditButtons.length){if(Z(e.currentTarget).closest(\"table\").is(Q())){if(\"TD\"==e.currentTarget.tagName&&0===w.$el.find(\"th.fr-selected-cell\").length)return void _(a,e.currentTarget);if(\"TH\"==e.currentTarget.tagName&&0===w.$el.find(\"td.fr-selected-cell\").length)return void _(a,e.currentTarget)}y()}}function N(e,t,l,a){for(var s,n=t;n!=w.el&&\"TD\"!=n.tagName&&\"TH\"!=n.tagName&&(\"up\"==a?s=n.previousElementSibling:\"down\"==a&&(s=n.nextElementSibling),!s);)n=n.parentNode;\"TD\"==n.tagName||\"TH\"==n.tagName?function(e,t){for(var l=e;l&&\"TABLE\"!=l.tagName&&l.parentNode!=w.el;)l=l.parentNode;if(l&&\"TABLE\"==l.tagName){var a=O(Z(l));\"up\"==t?B(A(e,a),l,a):\"down\"==t&&z(A(e,a),l,a)}}(n,a):s&&(\"up\"==a&&w.selection.setAtEnd(s),\"down\"==a&&w.selection.setAtStart(s))}function B(e,t,l){0<e.row?w.selection.setAtEnd(l[e.row-1][e.col]):N(0,t,0,\"up\")}function z(e,t,l){var a=parseInt(l[e.row][e.col].getAttribute(\"rowspan\"),10)||1;e.row<l.length-a?w.selection.setAtStart(l[e.row+a][e.col]):N(0,t,0,\"down\")}function W(){C&&(C.find(\"div\").css(\"opacity\",0),C.css(\"top\",0),C.css(\"left\",0),C.css(\"height\",0),C.find(\"div\").css(\"height\",0),C.hide())}function k(){o&&o.removeClass(\"fr-visible\").css(\"left\",\"-9999px\")}function K(e,t){var l=Z(t),a=l.closest(\"table\"),s=a.parent();if(t&&\"TD\"!=t.tagName&&\"TH\"!=t.tagName&&(0<l.closest(\"td\").length?t=l.closest(\"td\"):0<l.closest(\"th\").length&&(t=l.closest(\"th\"))),!t||\"TD\"!=t.tagName&&\"TH\"!=t.tagName)C&&l.get(0)!=C.get(0)&&l.parent().get(0)!=C.get(0)&&w.core.sameInstance(C)&&W();else{if(l=Z(t),0===w.$el.find(l).length)return!1;var n=l.offset().left-1,r=n+l.outerWidth();if(Math.abs(e.pageX-n)<=w.opts.tableResizerOffset||Math.abs(r-e.pageX)<=w.opts.tableResizerOffset){var o,i,f,c,d,p=O(a),h=A(t,p),u=F(h.row,h.col,p),b=a.offset().top,g=a.outerHeight()-1;\"rtl\"!=w.opts.direction?e.pageX-n<=w.opts.tableResizerOffset?(f=n,0<h.col?(c=n-j(h.col-1,p)+w.opts.tableResizingLimit,d=n+j(h.col,p)-w.opts.tableResizingLimit,o=h.col-1,i=h.col):(o=null,i=0,c=a.offset().left-1-parseInt(a.css(\"margin-left\"),10),d=a.offset().left-1+a.width()-p[0].length*w.opts.tableResizingLimit)):r-e.pageX<=w.opts.tableResizerOffset&&(f=r,u.col<p[u.row].length&&p[u.row][u.col+1]?(c=r-j(u.col,p)+w.opts.tableResizingLimit,d=r+j(u.col+1,p)-w.opts.tableResizingLimit,o=u.col,i=u.col+1):(o=u.col,i=null,c=a.offset().left-1+p[0].length*w.opts.tableResizingLimit,d=s.offset().left-1+s.width()+parseFloat(s.css(\"padding-left\")))):r-e.pageX<=w.opts.tableResizerOffset?(f=r,0<h.col?(c=r-j(h.col,p)+w.opts.tableResizingLimit,d=r+j(h.col-1,p)-w.opts.tableResizingLimit,o=h.col,i=h.col-1):(o=null,i=0,c=a.offset().left+p[0].length*w.opts.tableResizingLimit,d=s.offset().left-1+s.width()+parseFloat(s.css(\"padding-left\")))):e.pageX-n<=w.opts.tableResizerOffset&&(f=n,u.col<p[u.row].length&&p[u.row][u.col+1]?(c=n-j(u.col+1,p)+w.opts.tableResizingLimit,d=n+j(u.col,p)-w.opts.tableResizingLimit,o=u.col+1,i=u.col):(o=u.col,i=null,c=s.offset().left+parseFloat(s.css(\"padding-left\")),d=a.offset().left-1+a.width()-p[0].length*w.opts.tableResizingLimit)),C||(w.shared.$table_resizer||(w.shared.$table_resizer=Z('<div class=\"fr-table-resizer\"><div></div></div>')),C=w.shared.$table_resizer,w.events.$on(C,\"mousedown\",function(e){return!w.core.sameInstance(C)||(0<J().length&&S(),1==e.which?(w.selection.save(),E=!0,C.addClass(\"fr-moving\"),y(),w.edit.off(),C.find(\"div\").css(\"opacity\",1),!1):void 0)}),w.events.$on(C,\"mousemove\",function(e){if(!w.core.sameInstance(C))return!0;E&&(w.opts.iframe&&(e.pageX-=w.$iframe.offset().left),X(e))}),w.events.on(\"shared.destroy\",function(){C.html(\"\").removeData().remove(),C=null},!0),w.events.on(\"destroy\",function(){w.$el.find(\".fr-selected-cell\").removeClass(\"fr-selected-cell\"),C.hide().appendTo(Z(\"body:first\"))},!0)),C.data(\"table\",a),C.data(\"first\",o),C.data(\"second\",i),C.data(\"instance\",w),w.$wp.append(C);var m=f-w.win.pageXOffset-w.opts.tableResizerOffset-w.$wp.offset().left,v=b-w.$wp.offset().top+w.$wp.scrollTop();w.opts.iframe&&(m+=w.$iframe.offset().left,v+=w.$iframe.offset().top,c+=w.$iframe.offset().left,d+=w.$iframe.offset().left),C.data(\"max-left\",c),C.data(\"max-right\",d),C.data(\"origin\",f-w.win.pageXOffset),C.css(\"top\",v),C.css(\"left\",m),C.css(\"height\",g),C.find(\"div\").css(\"height\",g),C.css(\"padding-left\",w.opts.tableResizerOffset),C.css(\"padding-right\",w.opts.tableResizerOffset),C.show()}else w.core.sameInstance(C)&&W()}}function L(e,t){if(w.$box.find(\".fr-line-breaker\").is(\":visible\"))return!1;o||q(),w.$box.append(o),o.data(\"instance\",w);var l,a=Z(t).find(\"tr:first\"),s=e.pageX,n=0,r=0;w.opts.iframe&&(n+=w.$iframe.offset().left-w.helpers.scrollLeft(),r+=w.$iframe.offset().top-w.helpers.scrollTop()),a.find(\"th, td\").each(function(){var e=Z(this);return e.offset().left<=s&&s<e.offset().left+e.outerWidth()/2?(l=parseInt(o.find(\"a\").css(\"width\"),10),o.css(\"top\",r+e.offset().top-w.$box.offset().top-l-5),o.css(\"left\",n+e.offset().left-w.$box.offset().left-l/2),o.data(\"selected-cell\",e),o.data(\"position\",\"before\"),o.addClass(\"fr-visible\"),!1):e.offset().left+e.outerWidth()/2<=s&&s<e.offset().left+e.outerWidth()?(l=parseInt(o.find(\"a\").css(\"width\"),10),o.css(\"top\",r+e.offset().top-w.$box.offset().top-l-5),o.css(\"left\",n+e.offset().left-w.$box.offset().left+e.outerWidth()-l/2),o.data(\"selected-cell\",e),o.data(\"position\",\"after\"),o.addClass(\"fr-visible\"),!1):void 0})}function H(e,t){if(w.$box.find(\".fr-line-breaker\").is(\":visible\"))return!1;o||q(),w.$box.append(o),o.data(\"instance\",w);var l,a=Z(t),s=e.pageY,n=0,r=0;w.opts.iframe&&(n+=w.$iframe.offset().left-w.helpers.scrollLeft(),r+=w.$iframe.offset().top-w.helpers.scrollTop()),a.find(\"tr\").each(function(){var e=Z(this);return e.offset().top<=s&&s<e.offset().top+e.outerHeight()/2?(l=parseInt(o.find(\"a\").css(\"width\"),10),o.css(\"top\",r+e.offset().top-w.$box.offset().top-l/2),o.css(\"left\",n+e.offset().left-w.$box.offset().left-l-5),o.data(\"selected-cell\",e.find(\"td:first\")),o.data(\"position\",\"above\"),o.addClass(\"fr-visible\"),!1):e.offset().top+e.outerHeight()/2<=s&&s<e.offset().top+e.outerHeight()?(l=parseInt(o.find(\"a\").css(\"width\"),10),o.css(\"top\",r+e.offset().top-w.$box.offset().top+e.outerHeight()-l/2),o.css(\"left\",n+e.offset().left-w.$box.offset().left-l-5),o.data(\"selected-cell\",e.find(\"td:first\")),o.data(\"position\",\"below\"),o.addClass(\"fr-visible\"),!1):void 0})}function Y(e){r=null;var t=w.doc.elementFromPoint(e.pageX-w.win.pageXOffset,e.pageY-w.win.pageYOffset);w.opts.tableResizer&&(!w.popups.areVisible()||w.popups.areVisible()&&w.popups.isVisible(\"table.edit\"))&&K(e,t),!w.opts.tableInsertHelper||w.popups.areVisible()||w.$tb.hasClass(\"fr-inline\")&&w.$tb.is(\":visible\")||function(e,t){if(0===J().length){var l,a,s;if(t&&(\"HTML\"==t.tagName||\"BODY\"==t.tagName||w.node.isElement(t)))for(l=1;l<=w.opts.tableInsertHelperOffset;l++){if(a=w.doc.elementFromPoint(e.pageX-w.win.pageXOffset,e.pageY-w.win.pageYOffset+l),Z(a).hasClass(\"fr-tooltip\"))return;if(a&&(\"TH\"==a.tagName||\"TD\"==a.tagName||\"TABLE\"==a.tagName)&&(Z(a).parents(\".fr-wrapper\").length||w.opts.iframe))return L(e,Z(a).closest(\"table\"));if(s=w.doc.elementFromPoint(e.pageX-w.win.pageXOffset+l,e.pageY-w.win.pageYOffset),Z(s).hasClass(\"fr-tooltip\"))return;if(s&&(\"TH\"==s.tagName||\"TD\"==s.tagName||\"TABLE\"==s.tagName)&&(Z(s).parents(\".fr-wrapper\").length||w.opts.iframe))return H(e,Z(s).closest(\"table\"))}w.core.sameInstance(o)&&k()}}(e,t)}function P(){if(E){var e=C.data(\"table\").offset().top-w.win.pageYOffset;w.opts.iframe&&(e+=w.$iframe.offset().top-w.helpers.scrollTop()),C.css(\"top\",e)}}function j(e,t){var l,a=Z(t[0][e]).outerWidth();for(l=1;l<t.length;l++)a=Math.min(a,Z(t[l][e]).outerWidth());return a}function V(e,t,l){var a,s=0;for(a=e;a<=t;a++)s+=j(a,l);return s}function X(e){if(1<J().length&&n&&y(),!1===n&&!1===s&&!1===E)r&&clearTimeout(r),w.edit.isDisabled()&&!w.popups.isVisible(\"table.edit\")||(r=setTimeout(Y,30,e));else if(E){var t=e.pageX-w.win.pageXOffset;w.opts.iframe&&(t+=w.$iframe.offset().left);var l=C.data(\"max-left\"),a=C.data(\"max-right\");l<=t&&t<=a?C.css(\"left\",t-w.opts.tableResizerOffset-w.$wp.offset().left):t<l&&parseFloat(C.css(\"left\"),10)>l-w.opts.tableResizerOffset?C.css(\"left\",l-w.opts.tableResizerOffset-w.$wp.offset().left):a<t&&parseFloat(C.css(\"left\"),10)<a-w.opts.tableResizerOffset&&C.css(\"left\",a-w.opts.tableResizerOffset-w.$wp.offset().left)}else n&&k()}function U(e){w.node.isEmpty(e.get(0))?e.prepend(Z.FE.MARKERS):e.prepend(Z.FE.START_MARKER).append(Z.FE.END_MARKER)}function q(){w.shared.$ti_helper||(w.shared.$ti_helper=Z('<div class=\"fr-insert-helper\"><a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"'+w.language.translate(\"Insert\")+'\"><svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z\"/></svg></a></div>'),w.events.bindClick(w.shared.$ti_helper,\"a\",function(){var e=o.data(\"selected-cell\"),t=o.data(\"position\"),l=o.data(\"instance\")||w;\"before\"==t?(w.undo.saveStep(),e.addClass(\"fr-selected-cell\"),l.table.insertColumn(t),e.removeClass(\"fr-selected-cell\"),w.undo.saveStep()):\"after\"==t?(w.undo.saveStep(),e.addClass(\"fr-selected-cell\"),l.table.insertColumn(t),e.removeClass(\"fr-selected-cell\"),w.undo.saveStep()):\"above\"==t?(w.undo.saveStep(),e.addClass(\"fr-selected-cell\"),l.table.insertRow(t),e.removeClass(\"fr-selected-cell\"),w.undo.saveStep()):\"below\"==t&&(w.undo.saveStep(),e.addClass(\"fr-selected-cell\"),l.table.insertRow(t),e.removeClass(\"fr-selected-cell\"),w.undo.saveStep()),k()}),w.events.on(\"shared.destroy\",function(){w.shared.$ti_helper.html(\"\").removeData().remove(),w.shared.$ti_helper=null},!0),w.events.$on(w.shared.$ti_helper,\"mousemove\",function(e){e.stopPropagation()},!0),w.events.$on(Z(w.o_win),\"scroll\",function(){k()},!0),w.events.$on(w.$wp,\"scroll\",function(){k()},!0)),o=w.shared.$ti_helper,w.events.on(\"destroy\",function(){o=null}),w.tooltip.bind(w.$box,\".fr-insert-helper > a.fr-floating-btn\")}function G(){a=null,clearTimeout(r)}function J(){return w.el.querySelectorAll(\".fr-selected-cell\")}function Q(){var e=J();if(e.length){for(var t=e[0];t&&\"TABLE\"!=t.tagName&&t.parentNode!=w.el;)t=t.parentNode;return t&&\"TABLE\"==t.tagName?Z(t):Z([])}return Z([])}return{_init:function(){if(!w.$wp)return!1;if(!w.helpers.isMobile()){E=s=n=!1,w.events.$on(w.$el,\"mousedown\",e),w.popups.onShow(\"image.edit\",function(){D(),s=n=!1}),w.popups.onShow(\"link.edit\",function(){D(),s=n=!1}),w.events.on(\"commands.mousedown\",function(e){0<e.parents(\".fr-toolbar\").length&&D()}),w.events.$on(w.$el,\"mouseenter\",\"th, td\",T),w.events.$on(w.$win,\"mouseup\",l),w.opts.iframe&&w.events.$on(Z(w.o_win),\"mouseup\",l),w.events.$on(w.$win,\"mousemove\",X),w.events.$on(Z(w.o_win),\"scroll\",P),w.events.on(\"contentChanged\",function(){0<J().length&&(h(),w.$el.find(\"img\").on(\"load.selected-cells\",function(){Z(this).off(\"load.selected-cells\"),0<J().length&&h()}))}),w.events.$on(Z(w.o_win),\"resize\",function(){D()}),w.events.on(\"toolbar.esc\",function(){if(0<J().length)return w.events.disableBlur(),w.events.focus(),!1},!0),w.events.$on(Z(w.o_win),\"keydown\",function(){n&&s&&(s=n=!1,w.$el.removeClass(\"fr-no-selection\"),w.edit.on(),w.selection.setAtEnd(w.$el.find(\".fr-selected-cell:last\").get(0)),w.selection.restore(),D())}),w.events.$on(w.$el,\"keydown\",function(e){e.shiftKey?!1===function(e){var t=J();if(0<t.length){var l,a,s=O(),n=e.which;1==t.length?a=l=t[0]:(l=w.el.querySelector(\".fr-cell-fixed\"),a=w.el.querySelector(\".fr-cell-handler\"));var r=A(a,s);if(Z.FE.KEYCODE.ARROW_RIGHT==n){if(r.col<s[0].length-1)return _(l,s[r.row][r.col+1]),!1}else if(Z.FE.KEYCODE.ARROW_DOWN==n){if(r.row<s.length-1)return _(l,s[r.row+1][r.col]),!1}else if(Z.FE.KEYCODE.ARROW_LEFT==n){if(0<r.col)return _(l,s[r.row][r.col-1]),!1}else if(Z.FE.KEYCODE.ARROW_UP==n&&0<r.row)return _(l,s[r.row-1][r.col]),!1}}(e)&&setTimeout(function(){h()},0):function(e){var t=e.which,l=w.selection.blocks();if(l.length&&(\"TD\"==(l=l[0]).tagName||\"TH\"==l.tagName)){for(var a=l;a&&\"TABLE\"!=a.tagName&&a.parentNode!=w.el;)a=a.parentNode;if(a&&\"TABLE\"==a.tagName&&(Z.FE.KEYCODE.ARROW_LEFT==t||Z.FE.KEYCODE.ARROW_UP==t||Z.FE.KEYCODE.ARROW_RIGHT==t||Z.FE.KEYCODE.ARROW_DOWN==t)&&(0<J().length&&S(),w.browser.webkit&&(Z.FE.KEYCODE.ARROW_UP==t||Z.FE.KEYCODE.ARROW_DOWN==t))){var s=w.selection.ranges(0).startContainer;if(s.nodeType==Node.TEXT_NODE&&(Z.FE.KEYCODE.ARROW_UP==t&&(s.previousSibling&&\"BR\"!==s.previousSibling.tagName||s.previousSibling&&\"BR\"===s.previousSibling.tagName&&s.previousSibling.previousSibling)||Z.FE.KEYCODE.ARROW_DOWN==t&&(s.nextSibling&&\"BR\"!==s.nextSibling.tagName||s.nextSibling&&\"BR\"===s.nextSibling.tagName&&s.nextSibling.nextSibling)))return;e.preventDefault(),e.stopPropagation();var n=O(Z(a)),r=A(l,n);Z.FE.KEYCODE.ARROW_UP==t?B(r,a,n):Z.FE.KEYCODE.ARROW_DOWN==t&&z(r,a,n),w.selection.restore()}}}(e)}),w.events.on(\"keydown\",function(e){if(!1===function(e){if(e.which==Z.FE.KEYCODE.TAB){var t;if(0<J().length)t=w.$el.find(\".fr-selected-cell:last\");else{var l=w.selection.element();\"TD\"==l.tagName||\"TH\"==l.tagName?t=Z(l):l!=w.el&&(0<Z(l).parentsUntil(w.$el,\"td\").length?t=Z(l).parents(\"td:first\"):0<Z(l).parentsUntil(w.$el,\"th\").length&&(t=Z(l).parents(\"th:first\")))}if(t)return e.preventDefault(),!!(0===w.selection.get().focusOffset&&0<Z(w.selection.element()).parentsUntil(w.$el,\"ol, ul\").length&&(0<Z(w.selection.element()).closest(\"li\").prev().length||Z(w.selection.element()).is(\"li\")&&0<Z(w.selection.element()).prev().length))||(S(),e.shiftKey?0<t.prev().length?U(t.prev()):0<t.closest(\"tr\").length&&0<t.closest(\"tr\").prev().length?U(t.closest(\"tr\").prev().find(\"td:last\")):0<t.closest(\"tbody\").length&&0<t.closest(\"table\").find(\"thead tr\").length&&U(t.closest(\"table\").find(\"thead tr th:last\")):0<t.next().length?U(t.next()):0<t.closest(\"tr\").length&&0<t.closest(\"tr\").next().length?U(t.closest(\"tr\").next().find(\"td:first\")):0<t.closest(\"thead\").length&&0<t.closest(\"table\").find(\"tbody tr\").length?U(t.closest(\"table\").find(\"tbody tr td:first\")):(t.addClass(\"fr-selected-cell\"),b(\"below\"),D(),U(t.closest(\"tr\").next().find(\"td:first\"))),w.selection.restore(),!1)}}(e))return!1;var t=J();if(0<t.length){if(0<t.length&&w.keys.ctrlKey(e)&&e.which==Z.FE.KEYCODE.A)return D(),w.popups.isVisible(\"table.edit\")&&w.popups.hide(\"table.edit\"),t=[],!0;if(e.which==Z.FE.KEYCODE.ESC&&w.popups.isVisible(\"table.edit\"))return D(),w.popups.hide(\"table.edit\"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!(t=[]);if(1<t.length&&(e.which==Z.FE.KEYCODE.BACKSPACE||e.which==Z.FE.KEYCODE.DELETE)){w.undo.saveStep();for(var l=0;l<t.length;l++)Z(t[l]).html(\"<br>\"),l==t.length-1&&Z(t[l]).prepend(Z.FE.MARKERS);return w.selection.restore(),w.undo.saveStep(),!(t=[])}if(1<t.length&&e.which!=Z.FE.KEYCODE.F10&&!w.keys.isBrowserAction(e))return e.preventDefault(),!(t=[])}else if(!(t=[])===function(e){if(e.altKey&&e.which==Z.FE.KEYCODE.SPACE){var t,l=w.selection.element();if(\"TD\"==l.tagName||\"TH\"==l.tagName?t=l:0<Z(l).closest(\"td\").length?t=Z(l).closest(\"td\").get(0):0<Z(l).closest(\"th\").length&&(t=Z(l).closest(\"th\").get(0)),t)return e.preventDefault(),_(t,t),h(),!1}}(e))return!1},!0);var t=[];w.events.on(\"html.beforeGet\",function(){t=J();for(var e=0;e<t.length;e++)t[e].className=(t[e].className||\"\").replace(/fr-selected-cell/g,\"\")}),w.events.on(\"html.afterGet\",function(){for(var e=0;e<t.length;e++)t[e].className=(t[e].className?t[e].className.trim()+\" \":\"\")+\"fr-selected-cell\";t=[]}),c(!0),p(!0)}w.events.on(\"destroy\",G)},insert:function(e,t){var l,a,s=\"<table \"+(w.opts.tableDefaultWidth?'style=\"width: '+w.opts.tableDefaultWidth+';\" ':\"\")+'class=\"fr-inserted-table\"><tbody>',n=100/t;for(l=0;l<e;l++){for(s+=\"<tr>\",a=0;a<t;a++)s+=\"<td\"+(w.opts.tableDefaultWidth?' style=\"width: '+n.toFixed(4)+'%;\"':\"\")+\">\",0===l&&0===a&&(s+=Z.FE.MARKERS),s+=\"<br></td>\";s+=\"</tr>\"}s+=\"</tbody></table>\",w.html.insert(s),w.selection.restore();var r=w.$el.find(\".fr-inserted-table\");r.removeClass(\"fr-inserted-table\"),w.events.trigger(\"table.inserted\",[r.get(0)])},remove:u,insertRow:b,deleteRow:function(){var e=Q();if(0<e.length){var t,l,a,s=O(),n=$(s);if(0===n.min_i&&n.max_i==s.length-1)u();else{for(t=n.max_i;t>=n.min_i;t--){for(a=Z(e.find(\"tr\").not(e.find(\"table tr\")).get(t)),l=0;l<s[t].length;l++)if(0===l||s[t][l]!=s[t][l-1]){var r=Z(s[t][l]);if(1<parseInt(r.attr(\"rowspan\"),10)){var o=parseInt(r.attr(\"rowspan\"),10)-1;1==o?r.removeAttr(\"rowspan\"):r.attr(\"rowspan\",o)}if(t<s.length-1&&s[t][l]==s[t+1][l]&&(0===t||s[t][l]!=s[t-1][l])){for(var i=s[t][l],f=l;0<f&&s[t][f]==s[t][f-1];)f--;0===f?Z(e.find(\"tr\").not(e.find(\"table tr\")).get(t+1)).prepend(i):Z(s[t+1][f-1]).after(i)}}var c=a.parent();a.remove(),0===c.find(\"tr\").length&&c.remove(),s=O(e)}R(0,s.length-1,0,s[0].length-1,e),0<n.min_i?w.selection.setAtEnd(s[n.min_i-1][0]):w.selection.setAtEnd(s[0][0]),w.selection.restore(),w.popups.hide(\"table.edit\")}}},insertColumn:function(i){var e=Q();if(0<e.length){var f,c=O(),t=$(c);f=\"before\"==i?t.min_j:t.max_j;var l,d=100/c[0].length,p=100/(c[0].length+1);e.find(\"th, td\").each(function(){(l=Z(this)).data(\"old-width\",l.outerWidth()/e.outerWidth()*100)}),e.find(\"tr\").not(e.find(\"table tr\")).each(function(e){for(var t,l=Z(this),a=0,s=0;a-1<f;){if(!(t=l.find(\"> th, > td\").get(s))){t=null;break}t==c[e][a]?(a+=parseInt(Z(t).attr(\"colspan\"),10)||1,s++):(a+=parseInt(Z(c[e][a]).attr(\"colspan\"),10)||1,\"after\"==i&&(t=0===s?-1:l.find(\"> th, > td\").get(s-1)))}var n,r=Z(t);if(\"after\"==i&&f<a-1||\"before\"==i&&0<f&&c[e][f]==c[e][f-1]){if(0===e||0<e&&c[e][f]!=c[e-1][f]){var o=parseInt(r.attr(\"colspan\"),10)+1;r.attr(\"colspan\",o),r.css(\"width\",(r.data(\"old-width\")*p/d+p).toFixed(4)+\"%\"),r.removeData(\"old-width\")}}else n=0<l.find(\"th\").length?'<th style=\"width: '+p.toFixed(4)+'%;\"><br></th>':'<td style=\"width: '+p.toFixed(4)+'%;\"><br></td>',-1==t?l.prepend(n):null==t?l.append(n):\"before\"==i?r.before(n):\"after\"==i&&r.after(n)}),e.find(\"th, td\").each(function(){(l=Z(this)).data(\"old-width\")&&(l.css(\"width\",(l.data(\"old-width\")*p/d).toFixed(4)+\"%\"),l.removeData(\"old-width\"))}),w.popups.isVisible(\"table.edit\")&&h()}},deleteColumn:function(){var e=Q();if(0<e.length){var t,l,a,s=O(),n=$(s);if(0===n.min_j&&n.max_j==s[0].length-1)u();else{var r=0;for(t=0;t<s.length;t++)for(l=0;l<s[0].length;l++)(a=Z(s[t][l])).hasClass(\"fr-selected-cell\")||(a.data(\"old-width\",a.outerWidth()/e.outerWidth()*100),(l<n.min_j||l>n.max_j)&&(r+=a.outerWidth()/e.outerWidth()*100));for(r/=s.length,l=n.max_j;l>=n.min_j;l--)for(t=0;t<s.length;t++)if(0===t||s[t][l]!=s[t-1][l])if(a=Z(s[t][l]),1<(parseInt(a.attr(\"colspan\"),10)||1)){var o=parseInt(a.attr(\"colspan\"),10)-1;1==o?a.removeAttr(\"colspan\"):a.attr(\"colspan\",o),a.css(\"width\",(100*(a.data(\"old-width\")-j(l,s))/r).toFixed(4)+\"%\"),a.removeData(\"old-width\")}else{var i=Z(a.parent().get(0));a.remove(),0===i.find(\"> th, > td\").length&&(0===i.prev().length||0===i.next().length||i.prev().find(\"> th[rowspan], > td[rowspan]\").length<i.prev().find(\"> th, > td\").length)&&i.remove()}R(0,s.length-1,0,s[0].length-1,e),0<n.min_j?w.selection.setAtEnd(s[n.min_i][n.min_j-1]):w.selection.setAtEnd(s[n.min_i][0]),w.selection.restore(),w.popups.hide(\"table.edit\"),e.find(\"th, td\").each(function(){(a=Z(this)).data(\"old-width\")&&(a.css(\"width\",(100*a.data(\"old-width\")/r).toFixed(4)+\"%\"),a.removeData(\"old-width\"))})}}},mergeCells:function(){if(1<J().length&&(0===w.$el.find(\"th.fr-selected-cell\").length||0===w.$el.find(\"td.fr-selected-cell\").length)){x();var e,t,l=$(O()),a=w.$el.find(\".fr-selected-cell\"),s=Z(a[0]),n=s.parent().find(\".fr-selected-cell\"),r=s.closest(\"table\"),o=s.html(),i=0;for(e=0;e<n.length;e++)i+=Z(n[e]).outerWidth();for(s.css(\"width\",Math.min(100,i/r.outerWidth()*100).toFixed(4)+\"%\"),l.min_j<l.max_j&&s.attr(\"colspan\",l.max_j-l.min_j+1),l.min_i<l.max_i&&s.attr(\"rowspan\",l.max_i-l.min_i+1),e=1;e<a.length;e++)\"<br>\"!=(t=Z(a[e])).html()&&\"\"!==t.html()&&(o+=\"<br>\"+t.html()),t.remove();s.html(o),w.selection.setAtEnd(s.get(0)),w.selection.restore(),w.toolbar.enable(),m(l.min_i,l.max_i,r);var f=r.find(\"tr:empty\");for(e=f.length-1;0<=e;e--)Z(f[e]).remove();g(l.min_j,l.max_j,r),h()}},splitCellVertically:function(){if(1==J().length){var e=w.$el.find(\".fr-selected-cell\"),t=parseInt(e.attr(\"colspan\"),10)||1,l=e.parent().outerWidth(),a=e.outerWidth(),s=e.clone().html(\"<br>\"),n=O(),r=A(e.get(0),n);if(1<t){var o=Math.ceil(t/2);a=V(r.col,r.col+o-1,n)/l*100;var i=V(r.col+o,r.col+t-1,n)/l*100;1<o?e.attr(\"colspan\",o):e.removeAttr(\"colspan\"),1<t-o?s.attr(\"colspan\",t-o):s.removeAttr(\"colspan\"),e.css(\"width\",a.toFixed(4)+\"%\"),s.css(\"width\",i.toFixed(4)+\"%\")}else{var f;for(f=0;f<n.length;f++)if(0===f||n[f][r.col]!=n[f-1][r.col]){var c=Z(n[f][r.col]);if(!c.is(e)){var d=(parseInt(c.attr(\"colspan\"),10)||1)+1;c.attr(\"colspan\",d)}}a=a/l*100/2,e.css(\"width\",a.toFixed(4)+\"%\"),s.css(\"width\",a.toFixed(4)+\"%\")}e.after(s),D(),w.popups.hide(\"table.edit\")}},splitCellHorizontally:function(){if(1==J().length){var e=w.$el.find(\".fr-selected-cell\"),t=e.parent(),l=e.closest(\"table\"),a=parseInt(e.attr(\"rowspan\"),10),s=O(),n=A(e.get(0),s),r=e.clone().html(\"<br>\");if(1<a){var o=Math.ceil(a/2);1<o?e.attr(\"rowspan\",o):e.removeAttr(\"rowspan\"),1<a-o?r.attr(\"rowspan\",a-o):r.removeAttr(\"rowspan\");for(var i=n.row+o,f=0===n.col?n.col:n.col-1;0<=f&&(s[i][f]==s[i][f-1]||0<i&&s[i][f]==s[i-1][f]);)f--;-1==f?Z(l.find(\"tr\").not(l.find(\"table tr\")).get(i)).prepend(r):Z(s[i][f]).after(r)}else{var c,d=Z(\"<tr>\").append(r);for(c=0;c<s[0].length;c++)if(0===c||s[n.row][c]!=s[n.row][c-1]){var p=Z(s[n.row][c]);p.is(e)||p.attr(\"rowspan\",(parseInt(p.attr(\"rowspan\"),10)||1)+1)}t.after(d)}D(),w.popups.hide(\"table.edit\")}},addHeader:function(){var e=Q();if(0<e.length&&0===e.find(\"th\").length){var t,l=\"<thead><tr>\",a=0;for(e.find(\"tr:first > td\").each(function(){var e=Z(this);a+=parseInt(e.attr(\"colspan\"),10)||1}),t=0;t<a;t++)l+=\"<th><br></th>\";l+=\"</tr></thead>\",e.prepend(l),h()}},removeHeader:function(){var e=Q(),t=e.find(\"thead\");if(0<t.length)if(0===e.find(\"tbody tr\").length)u();else if(t.remove(),0<J().length)h();else{w.popups.hide(\"table.edit\");var l=e.find(\"tbody tr:first td:first\").get(0);l&&(w.selection.setAtEnd(l),w.selection.restore())}},setBackground:t,showInsertPopup:function(){var e=w.$tb.find('.fr-command[data-cmd=\"insertTable\"]'),t=w.popups.get(\"table.insert\");if(t||(t=c()),!t.hasClass(\"fr-active\")){w.popups.refresh(\"table.insert\"),w.popups.setContainer(\"table.insert\",w.$tb);var l=e.offset().left+e.outerWidth()/2,a=e.offset().top+(w.opts.toolbarBottom?10:e.outerHeight()-10);w.popups.show(\"table.insert\",l,a,e.outerHeight())}},showEditPopup:h,showColorsPopup:f,back:function(){0<J().length?h():(w.popups.hide(\"table.insert\"),w.toolbar.showInline())},verticalAlign:function(e){w.$el.find(\".fr-selected-cell\").css(\"vertical-align\",e)},horizontalAlign:function(e){w.$el.find(\".fr-selected-cell\").css(\"text-align\",e)},applyStyle:function(e,t,l,a){if(0<t.length){if(!l){var s=Object.keys(a);s.splice(s.indexOf(e),1),t.removeClass(s.join(\" \"))}t.toggleClass(e)}},selectedTable:Q,selectedCells:J,customColor:function(){var e=w.popups.get(\"table.colors\").find(\".fr-table-colors-hex-layer input\");e.length&&t(e.val())},selectCells:_}},Z.FE.DefineIcon(\"insertTable\",{NAME:\"table\"}),Z.FE.RegisterCommand(\"insertTable\",{title:\"Insert Table\",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible(\"table.insert\")?(this.$el.find(\".fr-marker\").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide(\"table.insert\")):this.table.showInsertPopup()},plugin:\"table\"}),Z.FE.RegisterCommand(\"tableInsert\",{callback:function(e,t,l){this.table.insert(t,l),this.popups.hide(\"table.insert\")}}),Z.FE.DefineIcon(\"tableHeader\",{NAME:\"header\",FA5NAME:\"heading\"}),Z.FE.RegisterCommand(\"tableHeader\",{title:\"Table Header\",focus:!1,toggle:!0,callback:function(){this.popups.get(\"table.edit\").find('.fr-command[data-cmd=\"tableHeader\"]').hasClass(\"fr-active\")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();0<t.length&&(0===t.find(\"th\").length?e.removeClass(\"fr-active\").attr(\"aria-pressed\",!1):e.addClass(\"fr-active\").attr(\"aria-pressed\",!0))}}),Z.FE.DefineIcon(\"tableRows\",{NAME:\"bars\"}),Z.FE.RegisterCommand(\"tableRows\",{type:\"dropdown\",focus:!1,title:\"Row\",options:{above:\"Insert row above\",below:\"Insert row below\",\"delete\":\"Delete row\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=Z.FE.COMMANDS.tableRows.options;for(var l in t)t.hasOwnProperty(l)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableRows\" data-param1=\"'+l+'\" title=\"'+this.language.translate(t[l])+'\">'+this.language.translate(t[l])+\"</a></li>\");return e+=\"</ul>\"},callback:function(e,t){\"above\"==t||\"below\"==t?this.table.insertRow(t):this.table.deleteRow()}}),Z.FE.DefineIcon(\"tableColumns\",{NAME:\"bars fa-rotate-90\"}),Z.FE.RegisterCommand(\"tableColumns\",{type:\"dropdown\",focus:!1,title:\"Column\",options:{before:\"Insert column before\",after:\"Insert column after\",\"delete\":\"Delete column\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=Z.FE.COMMANDS.tableColumns.options;for(var l in t)t.hasOwnProperty(l)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableColumns\" data-param1=\"'+l+'\" title=\"'+this.language.translate(t[l])+'\">'+this.language.translate(t[l])+\"</a></li>\");return e+=\"</ul>\"},callback:function(e,t){\"before\"==t||\"after\"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),Z.FE.DefineIcon(\"tableCells\",{NAME:\"square-o\",FA5NAME:\"square\"}),Z.FE.RegisterCommand(\"tableCells\",{type:\"dropdown\",focus:!1,title:\"Cell\",options:{merge:\"Merge cells\",\"vertical-split\":\"Vertical split\",\"horizontal-split\":\"Horizontal split\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=Z.FE.COMMANDS.tableCells.options;for(var l in t)t.hasOwnProperty(l)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCells\" data-param1=\"'+l+'\" title=\"'+this.language.translate(t[l])+'\">'+this.language.translate(t[l])+\"</a></li>\");return e+=\"</ul>\"},callback:function(e,t){\"merge\"==t?this.table.mergeCells():\"vertical-split\"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){1<this.$el.find(\".fr-selected-cell\").length?(t.find('a[data-param1=\"vertical-split\"]').addClass(\"fr-disabled\").attr(\"aria-disabled\",!0),t.find('a[data-param1=\"horizontal-split\"]').addClass(\"fr-disabled\").attr(\"aria-disabled\",!0),t.find('a[data-param1=\"merge\"]').removeClass(\"fr-disabled\").attr(\"aria-disabled\",!1)):(t.find('a[data-param1=\"merge\"]').addClass(\"fr-disabled\").attr(\"aria-disabled\",!0),t.find('a[data-param1=\"vertical-split\"]').removeClass(\"fr-disabled\").attr(\"aria-disabled\",!1),t.find('a[data-param1=\"horizontal-split\"]').removeClass(\"fr-disabled\").attr(\"aria-disabled\",!1))}}),Z.FE.DefineIcon(\"tableRemove\",{NAME:\"trash\"}),Z.FE.RegisterCommand(\"tableRemove\",{title:\"Remove Table\",focus:!1,callback:function(){this.table.remove()}}),Z.FE.DefineIcon(\"tableStyle\",{NAME:\"paint-brush\"}),Z.FE.RegisterCommand(\"tableStyle\",{title:\"Table Style\",type:\"dropdown\",focus:!1,html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=this.opts.tableStyles;for(var l in t)t.hasOwnProperty(l)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableStyle\" data-param1=\"'+l+'\" title=\"'+this.language.translate(t[l])+'\">'+this.language.translate(t[l])+\"</a></li>\");return e+=\"</ul>\"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(\".fr-selected-cell\").closest(\"table\"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(e,t){var l=this.$el.find(\".fr-selected-cell\").closest(\"table\");l&&t.find(\".fr-command\").each(function(){var e=Z(this).data(\"param1\"),t=l.hasClass(e);Z(this).toggleClass(\"fr-active\",t).attr(\"aria-selected\",t)})}}),Z.FE.DefineIcon(\"tableCellBackground\",{NAME:\"tint\"}),Z.FE.RegisterCommand(\"tableCellBackground\",{title:\"Cell Background\",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),Z.FE.RegisterCommand(\"tableCellBackgroundColor\",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),Z.FE.DefineIcon(\"tableBack\",{NAME:\"arrow-left\"}),Z.FE.RegisterCommand(\"tableBack\",{title:\"Back\",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass(\"fr-hidden\"),e.next(\".fr-separator\").removeClass(\"fr-hidden\")):(e.addClass(\"fr-hidden\"),e.next(\".fr-separator\").addClass(\"fr-hidden\"))}}),Z.FE.DefineIcon(\"tableCellVerticalAlign\",{NAME:\"arrows-v\",FA5NAME:\"arrows-alt-v\"}),Z.FE.RegisterCommand(\"tableCellVerticalAlign\",{type:\"dropdown\",focus:!1,title:\"Vertical Align\",options:{Top:\"Align Top\",Middle:\"Align Middle\",Bottom:\"Align Bottom\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=Z.FE.COMMANDS.tableCellVerticalAlign.options;for(var l in t)t.hasOwnProperty(l)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellVerticalAlign\" data-param1=\"'+l.toLowerCase()+'\" title=\"'+this.language.translate(t[l])+'\">'+this.language.translate(l)+\"</a></li>\");return e+=\"</ul>\"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1=\"'+this.$el.find(\".fr-selected-cell\").css(\"vertical-align\")+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0)}}),Z.FE.DefineIcon(\"tableCellHorizontalAlign\",{NAME:\"align-left\"}),Z.FE.DefineIcon(\"align-left\",{NAME:\"align-left\"}),Z.FE.DefineIcon(\"align-right\",{NAME:\"align-right\"}),Z.FE.DefineIcon(\"align-center\",{NAME:\"align-center\"}),Z.FE.DefineIcon(\"align-justify\",{NAME:\"align-justify\"}),Z.FE.RegisterCommand(\"tableCellHorizontalAlign\",{type:\"dropdown\",focus:!1,title:\"Horizontal Align\",options:{left:\"Align Left\",center:\"Align Center\",right:\"Align Right\",justify:\"Align Justify\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=Z.FE.COMMANDS.tableCellHorizontalAlign.options;for(var l in t)t.hasOwnProperty(l)&&(e+='<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellHorizontalAlign\" data-param1=\"'+l+'\" title=\"'+this.language.translate(t[l])+'\">'+this.icon.create(\"align-\"+l)+'<span class=\"fr-sr-only\">'+this.language.translate(t[l])+\"</span></a></li>\");return e+=\"</ul>\"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(e){var t=this.table.selectedCells();t.length&&e.find(\"> *:first\").replaceWith(this.icon.create(\"align-\"+this.helpers.getAlignment(Z(t[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1=\"'+this.helpers.getAlignment(this.$el.find(\".fr-selected-cell:first\"))+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0)}}),Z.FE.DefineIcon(\"tableCellStyle\",{NAME:\"magic\"}),Z.FE.RegisterCommand(\"tableCellStyle\",{title:\"Cell Style\",type:\"dropdown\",focus:!1,html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=this.opts.tableCellStyles;for(var l in t)t.hasOwnProperty(l)&&(e+='<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellStyle\" data-param1=\"'+l+'\" title=\"'+this.language.translate(t[l])+'\">'+this.language.translate(t[l])+\"</a></li>\");return e+=\"</ul>\"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(\".fr-selected-cell\"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(e,t){var l=this.$el.find(\".fr-selected-cell:first\");l&&t.find(\".fr-command\").each(function(){var e=Z(this).data(\"param1\"),t=l.hasClass(e);Z(this).toggleClass(\"fr-active\",t).attr(\"aria-selected\",t)})}}),Z.FE.RegisterCommand(\"tableCellBackgroundCustomColor\",{title:\"OK\",undo:!0,callback:function(){this.table.customColor()}}),Z.FE.DefineIcon(\"tableColorRemove\",{NAME:\"eraser\"})});\n\n/*!\n * froala_editor v2.9.5 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n\n!function(i){\"function\"==typeof define&&define.amd?define([\"jquery\"],i):\"object\"==typeof module&&module.exports?module.exports=function(e,t){return t===undefined&&(t=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(e)),i(t)}:i(window.jQuery)}(function(Q){Q.extend(Q.FE.POPUP_TEMPLATES,{\"video.insert\":\"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]\",\"video.edit\":\"[_BUTTONS_]\",\"video.size\":\"[_BUTTONS_][_SIZE_LAYER_]\"}),Q.extend(Q.FE.DEFAULTS,{videoAllowedTypes:[\"mp4\",\"webm\",\"ogg\"],videoAllowedProviders:[\".*\"],videoDefaultAlign:\"center\",videoDefaultDisplay:\"block\",videoDefaultWidth:600,videoEditButtons:[\"videoReplace\",\"videoRemove\",\"|\",\"videoDisplay\",\"videoAlign\",\"videoSize\"],videoInsertButtons:[\"videoBack\",\"|\",\"videoByURL\",\"videoEmbed\",\"videoUpload\"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoResponsive:!1,videoSizeButtons:[\"videoBack\",\"|\"],videoSplitHTML:!1,videoTextNear:!0,videoUpload:!0,videoUploadMethod:\"POST\",videoUploadParam:\"file\",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:null}),Q.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\\/((v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))?\\??v?=?([^#\\&\\?]*).*/,url_regex:/(?:https?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=|embed\\/)?([0-9a-zA-Z_\\-]+)(.+)?/g,url_text:\"https://www.youtube.com/embed/$1?$2\",html:'<iframe width=\"640\" height=\"360\" src=\"{url}&wmode=opaque\" frameborder=\"0\" allowfullscreen></iframe>',provider:\"youtube\"},{test_regex:/^.*(?:vimeo.com)\\/(?:channels(\\/\\w+\\/)?|groups\\/*\\/videos\\/\\u200b\\d+\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/,url_regex:/(?:https?:\\/\\/)?(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?(\\/[a-zA-Z0-9_\\-]+)?/i,url_text:\"https://player.vimeo.com/video/$1\",html:'<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',provider:\"vimeo\"},{test_regex:/^.+(dailymotion.com|dai.ly)\\/(video|hub)?\\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\\/\\/)?(?:www\\.)?(?:dailymotion\\.com|dai\\.ly)\\/(?:video|hub)?\\/?(.+)/g,url_text:\"https://www.dailymotion.com/embed/video/$1\",html:'<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',provider:\"dailymotion\"},{test_regex:/^.+(screen.yahoo.com)\\/[^_&]+/,url_regex:\"\",url_text:\"\",html:'<iframe width=\"640\" height=\"360\" src=\"{url}?format=embed\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',provider:\"yahoo\"},{test_regex:/^.+(rutube.ru)\\/[^_&]+/,url_regex:/(?:https?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru)\\/(?:video)?\\/?(.+)/g,url_text:\"https://rutube.ru/play/embed/$1\",html:'<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',provider:\"rutube\"},{test_regex:/^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/g,url_text:\"https://play.vidyard.com/$1\",html:'<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',provider:\"vidyard\"}],Q.FE.VIDEO_EMBED_REGEX=/^\\W*((<iframe(.|\\n)*>(\\s|\\n)*<\\/iframe>)|(<embed(.|\\n)*>))\\W*$/i,Q.FE.PLUGINS.video=function(p){var a,f,v,u,o,i,d=\"https://i.froala.com/upload\",l=2,c=3,h=4,g=5,m=6,r={};function b(){var e=p.popups.get(\"video.insert\");e.find(\".fr-video-by-url-layer input\").val(\"\").trigger(\"change\");var t=e.find(\".fr-video-embed-layer textarea\");t.val(\"\").trigger(\"change\"),(t=e.find(\".fr-video-upload-layer input\")).val(\"\").trigger(\"change\")}function s(){var e=p.popups.get(\"video.edit\");if(e||(e=function(){var e=\"\";if(0<p.opts.videoEditButtons.length){p.opts.videoResponsive&&(-1<p.opts.videoEditButtons.indexOf(\"videoSize\")&&p.opts.videoEditButtons.splice(p.opts.videoEditButtons.indexOf(\"videoSize\"),1),-1<p.opts.videoEditButtons.indexOf(\"videoDisplay\")&&p.opts.videoEditButtons.splice(p.opts.videoEditButtons.indexOf(\"videoDisplay\"),1),-1<p.opts.videoEditButtons.indexOf(\"videoAlign\")&&p.opts.videoEditButtons.splice(p.opts.videoEditButtons.indexOf(\"videoAlign\"),1)),e+='<div class=\"fr-buttons\">',e+=p.button.buildList(p.opts.videoEditButtons);var t={buttons:e+=\"</div>\"},i=p.popups.create(\"video.edit\",t);return p.events.$on(p.$wp,\"scroll.video-edit\",function(){u&&p.popups.isVisible(\"video.edit\")&&(p.events.disableBlur(),R(u))}),i}return!1}()),e){p.popups.setContainer(\"video.edit\",p.$sc),p.popups.refresh(\"video.edit\");var t=u.find(\"iframe, embed, video\"),i=t.offset().left+t.outerWidth()/2,o=t.offset().top+t.outerHeight();p.popups.show(\"video.edit\",i,o,t.outerHeight())}}function n(e){if(e)return p.popups.onRefresh(\"video.insert\",b),p.popups.onHide(\"image.insert\",W),!0;var t=\"\";p.opts.videoUpload||-1===p.opts.videoInsertButtons.indexOf(\"videoUpload\")||p.opts.videoInsertButtons.splice(p.opts.videoInsertButtons.indexOf(\"videoUpload\"),1);var i=p.button.buildList(p.opts.videoInsertButtons);\"\"!==i&&(t='<div class=\"fr-buttons\">'+i+\"</div>\");var o,r=\"\",s=p.opts.videoInsertButtons.indexOf(\"videoUpload\"),n=p.opts.videoInsertButtons.indexOf(\"videoByURL\"),a=p.opts.videoInsertButtons.indexOf(\"videoEmbed\");0<=n&&(o=\" fr-active\",(s<n&&0<=s||a<n&&0<=a)&&(o=\"\"),r='<div class=\"fr-video-by-url-layer fr-layer'+o+'\" id=\"fr-video-by-url-layer-'+p.id+'\"><div class=\"fr-input-line\"><input id=\"fr-video-by-url-layer-text-'+p.id+'\" type=\"text\" placeholder=\"'+p.language.translate(\"Paste in a video URL\")+'\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertByURL\" tabIndex=\"2\" role=\"button\">'+p.language.translate(\"Insert\")+\"</button></div></div>\");var d=\"\";0<=a&&(o=\" fr-active\",(s<a&&0<=s||n<a&&0<=n)&&(o=\"\"),d='<div class=\"fr-video-embed-layer fr-layer'+o+'\" id=\"fr-video-embed-layer-'+p.id+'\"><div class=\"fr-input-line\"><textarea id=\"fr-video-embed-layer-text'+p.id+'\" type=\"text\" placeholder=\"'+p.language.translate(\"Embedded Code\")+'\" tabIndex=\"1\" aria-required=\"true\" rows=\"5\"></textarea></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertEmbed\" tabIndex=\"2\" role=\"button\">'+p.language.translate(\"Insert\")+\"</button></div></div>\");var l=\"\";0<=s&&(o=\" fr-active\",(a<s&&0<=a||n<s&&0<=n)&&(o=\"\"),l='<div class=\"fr-video-upload-layer fr-layer'+o+'\" id=\"fr-video-upload-layer-'+p.id+'\"><strong>'+p.language.translate(\"Drop video\")+\"</strong><br>(\"+p.language.translate(\"or click\")+')<div class=\"fr-form\"><input type=\"file\" accept=\"video/'+p.opts.videoAllowedTypes.join(\", video/\").toLowerCase()+'\" tabIndex=\"-1\" aria-labelledby=\"fr-video-upload-layer-'+p.id+'\" role=\"button\"></div></div>');var f={buttons:t,by_url_layer:r,embed_layer:d,upload_layer:l,progress_bar:'<div class=\"fr-video-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"videoDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'},v=p.popups.create(\"video.insert\",f);return function(o){p.events.$on(o,\"dragover dragenter\",\".fr-video-upload-layer\",function(){return Q(this).addClass(\"fr-drop\"),!1},!0),p.events.$on(o,\"dragleave dragend\",\".fr-video-upload-layer\",function(){return Q(this).removeClass(\"fr-drop\"),!1},!0),p.events.$on(o,\"drop\",\".fr-video-upload-layer\",function(e){e.preventDefault(),e.stopPropagation(),Q(this).removeClass(\"fr-drop\");var t=e.originalEvent.dataTransfer;if(t&&t.files){var i=o.data(\"instance\")||p;i.events.disableBlur(),i.video.upload(t.files),i.events.enableBlur()}},!0),p.helpers.isIOS()&&p.events.$on(o,\"touchstart\",'.fr-video-upload-layer input[type=\"file\"]',function(){Q(this).trigger(\"click\")},!0);p.events.$on(o,\"change\",'.fr-video-upload-layer input[type=\"file\"]',function(){if(this.files){var e=o.data(\"instance\")||p;e.events.disableBlur(),o.find(\"input:focus\").blur(),e.events.enableBlur(),e.video.upload(this.files)}Q(this).val(\"\")},!0)}(v),v}function y(e){p.events.focus(!0),p.selection.restore();var t=!1;u&&(j(),t=!0),p.html.insert('<span contenteditable=\"false\" draggable=\"true\" class=\"fr-jiv fr-video\">'+e+\"</span>\",!1,p.opts.videoSplitHTML),p.popups.hide(\"video.insert\");var i=p.$el.find(\".fr-jiv\");i.removeClass(\"fr-jiv\"),i.toggleClass(\"fr-rv\",p.opts.videoResponsive),q(i,p.opts.videoDefaultDisplay,p.opts.videoDefaultAlign),i.toggleClass(\"fr-draggable\",p.opts.videoMove),p.events.trigger(t?\"video.replaced\":\"video.inserted\",[i])}function w(){var e=Q(this);p.popups.hide(\"video.insert\"),e.removeClass(\"fr-uploading\"),e.parent().next().is(\"br\")&&e.parent().next().remove(),R(e.parent()),p.events.trigger(\"video.loaded\",[e.parent()])}function E(a,e,d,l,f){p.edit.off(),x(\"Loading video\"),e&&(a=p.helpers.sanitizeURL(a));C(\"Loading video\"),function(){var e,t;if(l){p.undo.canDo()||l.find(\"video\").hasClass(\"fr-uploading\")||p.undo.saveStep();var i=l.find(\"video\").data(\"fr-old-src\"),o=l.data(\"fr-replaced\");l.data(\"fr-replaced\",!1),p.$wp?((e=l.clone()).find(\"video\").removeData(\"fr-old-src\").removeClass(\"fr-uploading\"),e.find(\"video\").off(\"canplay\"),i&&l.find(\"video\").attr(\"src\",i),l.replaceWith(e)):e=l;for(var r=e.find(\"video\").get(0).attributes,s=0;s<r.length;s++){var n=r[s];0===n.nodeName.indexOf(\"data-\")&&e.find(\"video\").removeAttr(n.nodeName)}if(void 0!==d)for(t in d)d.hasOwnProperty(t)&&\"link\"!=t&&e.find(\"video\").attr(\"data-\"+t,d[t]);e.find(\"video\").on(\"canplay\",w),e.find(\"video\").attr(\"src\",a),p.edit.on(),O(),p.undo.saveStep(),p.$el.blur(),p.events.trigger(o?\"video.replaced\":\"video.inserted\",[e,f])}else e=function(e,t,i){var o,r=\"\";if(t&&void 0!==t)for(o in t)t.hasOwnProperty(o)&&\"link\"!=o&&(r+=\" data-\"+o+'=\"'+t[o]+'\"');var s=p.opts.videoDefaultWidth;s&&\"auto\"!=s&&(s+=\"px\");var n=Q('<span contenteditable=\"false\" draggable=\"true\" class=\"fr-video fr-dv'+p.opts.videoDefaultDisplay[0]+(\"center\"!=p.opts.videoDefaultAlign?\" fr-fv\"+p.opts.videoDefaultAlign[0]:\"\")+'\"><video src=\"'+e+'\" '+r+(s?' style=\"width: '+s+';\" ':\"\")+\" controls>\"+p.language.translate(\"Your browser does not support HTML5 video.\")+\"</video></span>\");n.toggleClass(\"fr-draggable\",p.opts.videoMove),p.edit.on(),p.events.focus(!0),p.selection.restore(),p.undo.saveStep(),p.opts.videoSplitHTML?p.markers.split():p.markers.insert(),p.html.wrap();var a=p.$el.find(\".fr-marker\");return p.node.isLastSibling(a)&&a.parent().hasClass(\"fr-deletable\")&&a.insertAfter(a.parent()),a.replaceWith(n),p.selection.clear(),n.find(\"video\").get(0).readyState>n.find(\"video\").get(0).HAVE_FUTURE_DATA||p.helpers.isIOS()?i.call(n.find(\"video\").get(0)):n.find(\"video\").on(\"canplaythrough load\",i),n}(a,d,w),O(),p.undo.saveStep(),p.events.trigger(\"video.inserted\",[e,f])}()}function C(e){var t=p.popups.get(\"video.insert\");if(t||(t=n()),t.find(\".fr-layer.fr-active\").removeClass(\"fr-active\").addClass(\"fr-pactive\"),t.find(\".fr-video-progress-bar-layer\").addClass(\"fr-active\"),t.find(\".fr-buttons\").hide(),u){var i=u.find(\"video\");p.popups.setContainer(\"video.insert\",p.$sc);var o=i.offset().left+i.width()/2,r=i.offset().top+i.height();p.popups.show(\"video.insert\",o,r,i.outerHeight())}void 0===e&&x(p.language.translate(\"Uploading\"),0)}function A(e){var t=p.popups.get(\"video.insert\");if(t&&(t.find(\".fr-layer.fr-pactive\").addClass(\"fr-active\").removeClass(\"fr-pactive\"),t.find(\".fr-video-progress-bar-layer\").removeClass(\"fr-active\"),t.find(\".fr-buttons\").show(),e||p.$el.find(\"video.fr-error\").length)){if(p.events.focus(),p.$el.find(\"video.fr-error\").length&&(p.$el.find(\"video.fr-error\").parent().remove(),p.undo.saveStep(),p.undo.run(),p.undo.dropRedo()),!p.$wp&&u){var i=u;P(!0),p.selection.setAfter(i.find(\"video\").get(0)),p.selection.restore()}p.popups.hide(\"video.insert\")}}function x(e,t){var i=p.popups.get(\"video.insert\");if(i){var o=i.find(\".fr-video-progress-bar-layer\");o.find(\"h3\").text(e+(t?\" \"+t+\"%\":\"\")),o.removeClass(\"fr-error\"),t?(o.find(\"div\").removeClass(\"fr-indeterminate\"),o.find(\"div > span\").css(\"width\",t+\"%\")):o.find(\"div\").addClass(\"fr-indeterminate\")}}function _(e){C();var t=p.popups.get(\"video.insert\").find(\".fr-video-progress-bar-layer\");t.addClass(\"fr-error\");var i=t.find(\"h3\");i.text(e),p.events.disableBlur(),i.focus()}function R(e){z.call(e.get(0))}function S(e){x(\"Loading video\");var t=this.status,i=this.response,o=this.responseXML,r=this.responseText;try{if(p.opts.videoUploadToS3)if(201==t){var s=function(e){try{var t=Q(e).find(\"Location\").text(),i=Q(e).find(\"Key\").text();return!1===p.events.trigger(\"video.uploadedToS3\",[t,i,e],!0)?(p.edit.on(),!1):t}catch(o){return V(h,e),!1}}(o);s&&E(s,!1,[],e,i||o)}else V(h,i||o);else if(200<=t&&t<300){var n=function(e){try{if(!1===p.events.trigger(\"video.uploaded\",[e],!0))return p.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(V(l,e),!1)}catch(i){return V(h,e),!1}}(r);n&&E(n.link,!1,n,e,i||r)}else V(c,i||r)}catch(a){V(h,i||r)}}function D(){V(h,this.response||this.responseText||this.responseXML)}function U(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;x(p.language.translate(\"Uploading\"),t)}}function B(){p.edit.on(),A(!0)}function I(e){if(!p.core.sameInstance(v))return!0;e.preventDefault(),e.stopPropagation();var t=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!t||!i)return!1;if(\"mousedown\"==e.type){var o=p.$oel.get(0).ownerDocument,r=o.defaultView||o.parentWindow,s=!1;try{s=r.location!=r.parent.location&&!(r.$&&r.$.FE)}catch(n){}s&&r.frameElement&&(t+=p.helpers.getPX(Q(r.frameElement).offset().left)+r.frameElement.clientLeft,i=e.clientY+p.helpers.getPX(Q(r.frameElement).offset().top)+r.frameElement.clientTop)}p.undo.canDo()||p.undo.saveStep(),(f=Q(this)).data(\"start-x\",t),f.data(\"start-y\",i),a.show(),p.popups.hideAll(),T()}function $(e){if(!p.core.sameInstance(v))return!0;if(f){e.preventDefault();var t=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!t||!i)return!1;var o=f.data(\"start-x\"),r=f.data(\"start-y\");f.data(\"start-x\",t),f.data(\"start-y\",i);var s=t-o,n=i-r,a=u.find(\"iframe, embed, video\"),d=a.width(),l=a.height();(f.hasClass(\"fr-hnw\")||f.hasClass(\"fr-hsw\"))&&(s=0-s),(f.hasClass(\"fr-hnw\")||f.hasClass(\"fr-hne\"))&&(n=0-n),a.css(\"width\",d+s),a.css(\"height\",l+n),a.removeAttr(\"width\"),a.removeAttr(\"height\"),L()}}function k(e){if(!p.core.sameInstance(v))return!0;f&&u&&(e&&e.stopPropagation(),f=null,a.hide(),L(),s(),p.undo.saveStep())}function t(e){return'<div class=\"fr-handler fr-h'+e+'\"></div>'}function F(e,t,i,o){return e.pageX=t,e.pageY=t,I.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,o)),e.pageY=e.pageY+i*Math.floor(Math.pow(1.1,o)),$.call(this,e),k.call(this,e),++o}function O(){var e,t=Array.prototype.slice.call(p.el.querySelectorAll(\"video, .fr-video > *\")),i=[];for(e=0;e<t.length;e++)i.push(t[e].getAttribute(\"src\")),Q(t[e]).toggleClass(\"fr-draggable\",p.opts.videoMove),\"\"===t[e].getAttribute(\"class\")&&t[e].removeAttribute(\"class\"),\"\"===t[e].getAttribute(\"style\")&&t[e].removeAttribute(\"style\");if(o)for(e=0;e<o.length;e++)i.indexOf(o[e].getAttribute(\"src\"))<0&&p.events.trigger(\"video.removed\",[Q(o[e])]);o=t}function L(){v||function(){var e;if(p.shared.$video_resizer?(v=p.shared.$video_resizer,a=p.shared.$vid_overlay,p.events.on(\"destroy\",function(){v.removeClass(\"fr-active\").appendTo(Q(\"body:first\"))},!0)):(p.shared.$video_resizer=Q('<div class=\"fr-video-resizer\"></div>'),v=p.shared.$video_resizer,p.events.$on(v,\"mousedown\",function(e){e.stopPropagation()},!0),p.opts.videoResize&&(v.append(t(\"nw\")+t(\"ne\")+t(\"sw\")+t(\"se\")),p.shared.$vid_overlay=Q('<div class=\"fr-video-overlay\"></div>'),a=p.shared.$vid_overlay,e=v.get(0).ownerDocument,Q(e).find(\"body:first\").append(a))),p.events.on(\"shared.destroy\",function(){v.html(\"\").removeData().remove(),v=null,p.opts.videoResize&&(a.remove(),a=null)},!0),p.helpers.isMobile()||p.events.$on(Q(p.o_win),\"resize.video\",function(){P(!0)}),p.opts.videoResize){e=v.get(0).ownerDocument,p.events.$on(v,p._mousedown,\".fr-handler\",I),p.events.$on(Q(e),p._mousemove,$),p.events.$on(Q(e.defaultView||e.parentWindow),p._mouseup,k),p.events.$on(a,\"mouseleave\",k);var o=1,r=null,s=0;p.events.on(\"keydown\",function(e){if(u){var t=-1!=navigator.userAgent.indexOf(\"Mac OS X\")?e.metaKey:e.ctrlKey,i=e.which;(i!==r||200<e.timeStamp-s)&&(o=1),(i==Q.FE.KEYCODE.EQUALS||p.browser.mozilla&&i==Q.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?o=F.call(this,e,1,1,o):(i==Q.FE.KEYCODE.HYPHEN||p.browser.mozilla&&i==Q.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey&&(o=F.call(this,e,2,-1,o)),r=i,s=e.timeStamp}}),p.events.on(\"keyup\",function(){o=1})}}(),(p.$wp||p.$sc).append(v),v.data(\"instance\",p);var e=u.find(\"iframe, embed, video\");v.css(\"top\",(p.opts.iframe?e.offset().top-1:e.offset().top-p.$wp.offset().top-1)+p.$wp.scrollTop()).css(\"left\",(p.opts.iframe?e.offset().left-1:e.offset().left-p.$wp.offset().left-1)+p.$wp.scrollLeft()).css(\"width\",e.get(0).getBoundingClientRect().width).css(\"height\",e.get(0).getBoundingClientRect().height).addClass(\"fr-active\")}function z(e){if(e&&\"touchend\"==e.type&&i)return!0;if(e&&p.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;if(p.edit.isDisabled())return!1;for(var t=0;t<Q.FE.INSTANCES.length;t++)Q.FE.INSTANCES[t]!=p&&Q.FE.INSTANCES[t].events.trigger(\"video.hideResizer\");p.toolbar.disable(),p.helpers.isMobile()&&(p.events.disableBlur(),p.$el.blur(),p.events.enableBlur()),p.$el.find(\".fr-video.fr-active\").removeClass(\"fr-active\"),(u=Q(this)).addClass(\"fr-active\"),p.opts.iframe&&p.size.syncIframe(),Z(),L(),s(),p.selection.clear(),p.button.bulkRefresh(),p.events.trigger(\"image.hideResizer\")}function P(e){u&&(p.shared.vid_exit_flag||!0===e)&&(v.removeClass(\"fr-active\"),p.toolbar.enable(),u.removeClass(\"fr-active\"),u=null,T())}function e(){p.shared.vid_exit_flag=!0}function T(){p.shared.vid_exit_flag=!1}function M(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var i=t.files[0];if(i&&i.type&&-1!==i.type.indexOf(\"video\")){if(!p.opts.videoUpload)return e.preventDefault(),e.stopPropagation(),!1;p.markers.remove(),p.markers.insertAtPoint(e.originalEvent),p.$el.find(\".fr-marker\").replaceWith(Q.FE.MARKERS),p.popups.hideAll();var o=p.popups.get(\"video.insert\");return o||(o=n()),p.popups.setContainer(\"video.insert\",p.$sc),p.popups.show(\"video.insert\",e.originalEvent.pageX,e.originalEvent.pageY),C(),0<=p.opts.videoAllowedTypes.indexOf(i.type.replace(/video\\//g,\"\"))?N(t.files):V(m),e.preventDefault(),e.stopPropagation(),!1}}}function N(e){if(void 0!==e&&0<e.length){if(!1===p.events.trigger(\"video.beforeUpload\",[e]))return!1;var t,i=e[0];if((null===p.opts.videoUploadURL||p.opts.videoUploadURL==d)&&!p.opts.videoUploadToS3)return function(o){u&&u.find(\"iframe\")&&u.find(\"iframe\").length&&j();var r=new FileReader;r.onload=function(){r.result;for(var e=atob(r.result.split(\",\")[1]),t=[],i=0;i<e.length;i++)t.push(e.charCodeAt(i));E(window.URL.createObjectURL(new Blob([new Uint8Array(t)],{type:o.type})),!1,null,u)},C(),r.readAsDataURL(o)}(i),!1;if(i.size>p.opts.videoMaxSize)return V(g),!1;if(p.opts.videoAllowedTypes.indexOf(i.type.replace(/video\\//g,\"\"))<0)return V(m),!1;if(p.drag_support.formdata&&(t=p.drag_support.formdata?new FormData:null),t){var o;if(!1!==p.opts.videoUploadToS3)for(o in t.append(\"key\",p.opts.videoUploadToS3.keyStart+(new Date).getTime()+\"-\"+(i.name||\"untitled\")),t.append(\"success_action_status\",\"201\"),t.append(\"X-Requested-With\",\"xhr\"),t.append(\"Content-Type\",i.type),p.opts.videoUploadToS3.params)p.opts.videoUploadToS3.params.hasOwnProperty(o)&&t.append(o,p.opts.videoUploadToS3.params[o]);for(o in p.opts.videoUploadParams)p.opts.videoUploadParams.hasOwnProperty(o)&&t.append(o,p.opts.videoUploadParams[o]);t.append(p.opts.videoUploadParam,i);var r=p.opts.videoUploadURL;p.opts.videoUploadToS3&&(r=p.opts.videoUploadToS3.uploadURL?p.opts.videoUploadToS3.uploadURL:\"https://\"+p.opts.videoUploadToS3.region+\".amazonaws.com/\"+p.opts.videoUploadToS3.bucket);var s=p.core.getXHR(r,p.opts.videoUploadMethod);s.onload=function(){S.call(s,u)},s.onerror=D,s.upload.onprogress=U,s.onabort=B,C(),p.events.disableBlur(),p.edit.off(),p.events.enableBlur();var n=p.popups.get(\"video.insert\");n&&n.off(\"abortUpload\").on(\"abortUpload\",function(){4!=s.readyState&&s.abort()}),s.send(t)}}}function V(e,t){p.edit.on(),u&&u.find(\"video\").addClass(\"fr-error\"),_(p.language.translate(\"Something went wrong. Please try again.\")),p.events.trigger(\"video.error\",[{code:e,message:r[e]},t])}function Y(){if(u){var e=p.popups.get(\"video.size\"),t=u.find(\"iframe, embed, video\");e.find('input[name=\"width\"]').val(t.get(0).style.width||t.attr(\"width\")).trigger(\"change\"),e.find('input[name=\"height\"]').val(t.get(0).style.height||t.attr(\"height\")).trigger(\"change\")}}function H(e){if(e)return p.popups.onRefresh(\"video.size\",Y),!0;var t={buttons:'<div class=\"fr-buttons\">'+p.button.buildList(p.opts.videoSizeButtons)+\"</div>\",size_layer:'<div class=\"fr-video-size-layer fr-layer fr-active\" id=\"fr-video-size-layer-'+p.id+'\"><div class=\"fr-video-group\"><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-width-'+p.id+'\" type=\"text\" name=\"width\" placeholder=\"'+p.language.translate(\"Width\")+'\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-height-'+p.id+'\" type=\"text\" name=\"height\" placeholder=\"'+p.language.translate(\"Height\")+'\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoSetSize\" tabIndex=\"2\" role=\"button\">'+p.language.translate(\"Update\")+\"</button></div></div>\"},i=p.popups.create(\"video.size\",t);return p.events.$on(p.$wp,\"scroll\",function(){u&&p.popups.isVisible(\"video.size\")&&(p.events.disableBlur(),R(u))}),i}function X(e){if(void 0===e&&(e=u),e){if(e.hasClass(\"fr-fvl\"))return\"left\";if(e.hasClass(\"fr-fvr\"))return\"right\";if(e.hasClass(\"fr-dvb\")||e.hasClass(\"fr-dvi\"))return\"center\";if(\"block\"==e.css(\"display\")){if(\"left\"==e.css(\"text-algin\"))return\"left\";if(\"right\"==e.css(\"text-align\"))return\"right\"}else{if(\"left\"==e.css(\"float\"))return\"left\";if(\"right\"==e.css(\"float\"))return\"right\"}}return\"center\"}function K(e){void 0===e&&(e=u);var t=e.css(\"float\");return e.css(\"float\",\"none\"),\"block\"==e.css(\"display\")?(e.css(\"float\",\"\"),e.css(\"float\")!=t&&e.css(\"float\",t),\"block\"):(e.css(\"float\",\"\"),e.css(\"float\")!=t&&e.css(\"float\",t),\"inline\")}function j(){if(u&&!1!==p.events.trigger(\"video.beforeRemove\",[u])){var e=u;p.popups.hideAll(),P(!0),p.selection.setBefore(e.get(0))||p.selection.setAfter(e.get(0)),e.remove(),p.selection.restore(),p.html.fillEmptyBlocks()}}function W(){A()}function q(e,t,i){!p.opts.htmlUntouched&&p.opts.useClasses?(e.removeClass(\"fr-fvl fr-fvr fr-dvb fr-dvi\"),e.addClass(\"fr-fv\"+i[0]+\" fr-dv\"+t[0])):\"inline\"==t?(e.css({display:\"inline-block\"}),\"center\"==i?e.css({\"float\":\"none\"}):\"left\"==i?e.css({\"float\":\"left\"}):e.css({\"float\":\"right\"})):(e.css({display:\"block\",clear:\"both\"}),\"left\"==i?e.css({textAlign:\"left\"}):\"right\"==i?e.css({textAlign:\"right\"}):e.css({textAlign:\"center\"}))}function G(){p.$el.find(\"video\").filter(function(){return 0===Q(this).parents(\"span.fr-video\").length}).wrap('<span class=\"fr-video\" contenteditable=\"false\"></span>'),p.$el.find(\"embed, iframe\").filter(function(){if(p.browser.safari&&this.getAttribute(\"src\")&&this.setAttribute(\"src\",this.src),0<Q(this).parents(\"span.fr-video\").length)return!1;for(var e=Q(this).attr(\"src\"),t=0;t<Q.FE.VIDEO_PROVIDERS.length;t++){var i=Q.FE.VIDEO_PROVIDERS[t];if(i.test_regex.test(e)&&new RegExp(p.opts.videoAllowedProviders.join(\"|\")).test(i.provider))return!0}return!1}).map(function(){return 0===Q(this).parents(\"object\").length?this:Q(this).parents(\"object\").get(0)}).wrap('<span class=\"fr-video\" contenteditable=\"false\"></span>');for(var e,t,i=p.$el.find(\"span.fr-video, video\"),o=0;o<i.length;o++){var r=Q(i[o]);!p.opts.htmlUntouched&&p.opts.useClasses?((t=r).hasClass(\"fr-dvi\")||t.hasClass(\"fr-dvb\")||(t.addClass(\"fr-fv\"+X(t)[0]),t.addClass(\"fr-dv\"+K(t)[0])),p.opts.videoTextNear||r.removeClass(\"fr-dvi\").addClass(\"fr-dvb\")):p.opts.htmlUntouched||p.opts.useClasses||(q(e=r,e.hasClass(\"fr-dvb\")?\"block\":e.hasClass(\"fr-dvi\")?\"inline\":null,e.hasClass(\"fr-fvl\")?\"left\":e.hasClass(\"fr-fvr\")?\"right\":X(e)),e.removeClass(\"fr-dvb fr-dvi fr-fvr fr-fvl\"))}i.toggleClass(\"fr-draggable\",p.opts.videoMove)}function Z(){if(u){p.selection.clear();var e=p.doc.createRange();e.selectNode(u.get(0)),p.selection.get().addRange(e)}}return r[1]=\"Video cannot be loaded from the passed link.\",r[l]=\"No link in upload response.\",r[c]=\"Error during file upload.\",r[h]=\"Parsing response failed.\",r[g]=\"File is too large.\",r[m]=\"Video file type is invalid.\",r[7]=\"Files can be uploaded only to same domain in IE 8 and IE 9.\",p.shared.vid_exit_flag=!1,{_init:function(){p.opts.videoResponsive&&(p.opts.videoResize=!1),p.events.on(\"drop\",M,!0),p.events.on(\"mousedown window.mousedown\",e),p.events.on(\"window.touchmove\",T),p.events.on(\"mouseup window.mouseup\",P),p.events.on(\"commands.mousedown\",function(e){0<e.parents(\".fr-toolbar\").length&&P()}),p.events.on(\"video.hideResizer commands.undo commands.redo element.dropped\",function(){P(!0)}),p.helpers.isMobile()&&(p.events.$on(p.$el,\"touchstart\",\"span.fr-video\",function(){i=!1}),p.events.$on(p.$el,\"touchmove\",function(){i=!0})),p.events.on(\"html.set\",G),G(),p.events.$on(p.$el,\"mousedown\",\"span.fr-video\",function(e){e.stopPropagation(),(p.browser.msie||p.browser.edge)&&(e.target.dragDrop(),z.call(this,e))}),p.events.$on(p.$el,\"click touchend\",\"span.fr-video\",function(e){if(\"false\"==Q(this).parents(\"[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first\").attr(\"contenteditable\"))return!0;z.call(this,e)}),p.events.on(\"keydown\",function(e){var t=e.which;return!u||t!=Q.FE.KEYCODE.BACKSPACE&&t!=Q.FE.KEYCODE.DELETE?u&&t==Q.FE.KEYCODE.ESC?(P(!0),e.preventDefault(),!1):u&&t!=Q.FE.KEYCODE.F10&&!p.keys.isBrowserAction(e)?(e.preventDefault(),!1):void 0:(e.preventDefault(),j(),p.undo.saveStep(),!1)},!0),p.events.on(\"toolbar.esc\",function(){if(u)return p.events.disableBlur(),p.events.focus(),!1},!0),p.events.on(\"toolbar.focusEditor\",function(){if(u)return!1},!0),p.events.on(\"keydown\",function(){p.$el.find(\"span.fr-video:empty\").remove()}),p.$wp&&(O(),p.events.on(\"contentChanged\",O)),n(!0),H(!0)},showInsertPopup:function(){var e=p.$tb.find('.fr-command[data-cmd=\"insertVideo\"]'),t=p.popups.get(\"video.insert\");if(t||(t=n()),A(),!t.hasClass(\"fr-active\"))if(p.popups.refresh(\"video.insert\"),p.popups.setContainer(\"video.insert\",p.$tb),e.is(\":visible\")){var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(p.opts.toolbarBottom?10:e.outerHeight()-10);p.popups.show(\"video.insert\",i,o,e.outerHeight())}else p.position.forSelection(t),p.popups.show(\"video.insert\")},showLayer:function(e){var t,i,o=p.popups.get(\"video.insert\");if(!u&&!p.opts.toolbarInline){var r=p.$tb.find('.fr-command[data-cmd=\"insertVideo\"]');t=r.offset().left+r.outerWidth()/2,i=r.offset().top+(p.opts.toolbarBottom?10:r.outerHeight()-10)}p.opts.toolbarInline&&(i=o.offset().top-p.helpers.getPX(o.css(\"margin-top\")),o.hasClass(\"fr-above\")&&(i+=o.outerHeight())),o.find(\".fr-layer\").removeClass(\"fr-active\"),o.find(\".fr-\"+e+\"-layer\").addClass(\"fr-active\"),p.popups.show(\"video.insert\",t,i,0),p.accessibility.focusPopup(o)},refreshByURLButton:function(e){p.popups.get(\"video.insert\").find(\".fr-video-by-url-layer\").hasClass(\"fr-active\")&&e.addClass(\"fr-active\").attr(\"aria-pressed\",!0)},refreshEmbedButton:function(e){p.popups.get(\"video.insert\").find(\".fr-video-embed-layer\").hasClass(\"fr-active\")&&e.addClass(\"fr-active\").attr(\"aria-pressed\",!0)},refreshUploadButton:function(e){p.popups.get(\"video.insert\").find(\".fr-video-upload-layer\").hasClass(\"fr-active\")&&e.addClass(\"fr-active\").attr(\"aria-pressed\",!0)},upload:N,insertByURL:function(e){void 0===e&&(e=(p.popups.get(\"video.insert\").find('.fr-video-by-url-layer input[type=\"text\"]').val()||\"\").trim());var t=null;if(/^http/.test(e)||(e=\"https://\"+e),p.helpers.isURL(e))for(var i=0;i<Q.FE.VIDEO_PROVIDERS.length;i++){var o=Q.FE.VIDEO_PROVIDERS[i];if(o.test_regex.test(e)&&new RegExp(p.opts.videoAllowedProviders.join(\"|\")).test(o.provider)){t=e.replace(o.url_regex,o.url_text),t=o.html.replace(/\\{url\\}/,t);break}}t?y(t):(_(p.language.translate(\"Something went wrong. Please try again.\")),p.events.trigger(\"video.linkError\",[e]))},insertEmbed:function(e){void 0===e&&(e=p.popups.get(\"video.insert\").find(\".fr-video-embed-layer textarea\").val()||\"\"),0!==e.length&&Q.FE.VIDEO_EMBED_REGEX.test(e)?y(e):(_(p.language.translate(\"Something went wrong. Please try again.\")),p.events.trigger(\"video.codeError\",[e]))},insert:y,align:function(e){u.removeClass(\"fr-fvr fr-fvl\"),!p.opts.htmlUntouched&&p.opts.useClasses?\"left\"==e?u.addClass(\"fr-fvl\"):\"right\"==e&&u.addClass(\"fr-fvr\"):q(u,K(),e),Z(),L(),s(),p.selection.clear()},refreshAlign:function(e){if(!u)return!1;e.find(\"> *:first\").replaceWith(p.icon.create(\"video-align-\"+X()))},refreshAlignOnShow:function(e,t){u&&t.find('.fr-command[data-param1=\"'+X()+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0)},display:function(e){u.removeClass(\"fr-dvi fr-dvb\"),!p.opts.htmlUntouched&&p.opts.useClasses?\"inline\"==e?u.addClass(\"fr-dvi\"):\"block\"==e&&u.addClass(\"fr-dvb\"):q(u,e,X()),Z(),L(),s(),p.selection.clear()},refreshDisplayOnShow:function(e,t){u&&t.find('.fr-command[data-param1=\"'+K()+'\"]').addClass(\"fr-active\").attr(\"aria-selected\",!0)},remove:j,hideProgressBar:A,showSizePopup:function(){var e=p.popups.get(\"video.size\");e||(e=H()),A(),p.popups.refresh(\"video.size\"),p.popups.setContainer(\"video.size\",p.$sc);var t=u.find(\"iframe, embed, video\"),i=t.offset().left+t.width()/2,o=t.offset().top+t.height();p.popups.show(\"video.size\",i,o,t.height())},replace:function(){var e=p.popups.get(\"video.insert\");e||(e=n()),p.popups.isVisible(\"video.insert\")||(A(),p.popups.refresh(\"video.insert\"),p.popups.setContainer(\"video.insert\",p.$sc));var t=u.offset().left+u.width()/2,i=u.offset().top+u.height();p.popups.show(\"video.insert\",t,i,u.outerHeight())},back:function(){u?(p.events.disableBlur(),u.trigger(\"click\")):(p.events.disableBlur(),p.selection.restore(),p.events.enableBlur(),p.popups.hide(\"video.insert\"),p.toolbar.showInline())},setSize:function(e,t){if(u){var i=p.popups.get(\"video.size\"),o=u.find(\"iframe, embed, video\");o.css(\"width\",e||i.find('input[name=\"width\"]').val()),o.css(\"height\",t||i.find('input[name=\"height\"]').val()),o.get(0).style.width&&o.removeAttr(\"width\"),o.get(0).style.height&&o.removeAttr(\"height\"),i.find(\"input:focus\").blur(),setTimeout(function(){u.trigger(\"click\")},p.helpers.isAndroid()?50:0)}},get:function(){return u},showProgressBar:C}},Q.FE.RegisterCommand(\"insertVideo\",{title:\"Insert Video\",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible(\"video.insert\")?(this.$el.find(\".fr-marker\").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide(\"video.insert\")):this.video.showInsertPopup()},plugin:\"video\"}),Q.FE.DefineIcon(\"insertVideo\",{NAME:\"video-camera\",FA5NAME:\"camera\"}),Q.FE.DefineIcon(\"videoByURL\",{NAME:\"link\"}),Q.FE.RegisterCommand(\"videoByURL\",{title:\"By URL\",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer(\"video-by-url\")},refresh:function(e){this.video.refreshByURLButton(e)}}),Q.FE.DefineIcon(\"videoEmbed\",{NAME:\"code\"}),Q.FE.RegisterCommand(\"videoEmbed\",{title:\"Embedded Code\",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer(\"video-embed\")},refresh:function(e){this.video.refreshEmbedButton(e)}}),Q.FE.DefineIcon(\"videoUpload\",{NAME:\"upload\"}),Q.FE.RegisterCommand(\"videoUpload\",{title:\"Upload Video\",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer(\"video-upload\")},refresh:function(e){this.video.refreshUploadButton(e)}}),Q.FE.RegisterCommand(\"videoInsertByURL\",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),Q.FE.RegisterCommand(\"videoInsertEmbed\",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),Q.FE.DefineIcon(\"videoDisplay\",{NAME:\"star\"}),Q.FE.RegisterCommand(\"videoDisplay\",{title:\"Display\",type:\"dropdown\",options:{inline:\"Inline\",block:\"Break Text\"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass(\"fr-hidden\")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),Q.FE.DefineIcon(\"video-align\",{NAME:\"align-left\"}),Q.FE.DefineIcon(\"video-align-left\",{NAME:\"align-left\"}),Q.FE.DefineIcon(\"video-align-right\",{NAME:\"align-right\"}),Q.FE.DefineIcon(\"video-align-center\",{NAME:\"align-justify\"}),Q.FE.DefineIcon(\"videoAlign\",{NAME:\"align-center\"}),Q.FE.RegisterCommand(\"videoAlign\",{type:\"dropdown\",title:\"Align\",options:{left:\"Align Left\",center:\"None\",right:\"Align Right\"},html:function(){var e='<ul class=\"fr-dropdown-list\" role=\"presentation\">',t=Q.FE.COMMANDS.videoAlign.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"videoAlign\" data-param1=\"'+i+'\" title=\"'+this.language.translate(t[i])+'\">'+this.icon.create(\"video-align-\"+i)+'<span class=\"fr-sr-only\">'+this.language.translate(t[i])+\"</span></a></li>\");return e+=\"</ul>\"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),Q.FE.DefineIcon(\"videoReplace\",{NAME:\"exchange\",FA5NAME:\"exchange-alt\"}),Q.FE.RegisterCommand(\"videoReplace\",{title:\"Replace\",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),Q.FE.DefineIcon(\"videoRemove\",{NAME:\"trash\"}),Q.FE.RegisterCommand(\"videoRemove\",{title:\"Remove\",callback:function(){this.video.remove()}}),Q.FE.DefineIcon(\"videoSize\",{NAME:\"arrows-alt\"}),Q.FE.RegisterCommand(\"videoSize\",{undo:!1,focus:!1,popup:!0,title:\"Change Size\",callback:function(){this.video.showSizePopup()}}),Q.FE.DefineIcon(\"videoBack\",{NAME:\"arrow-left\"}),Q.FE.RegisterCommand(\"videoBack\",{title:\"Back\",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass(\"fr-hidden\"),e.next(\".fr-separator\").removeClass(\"fr-hidden\")):(e.addClass(\"fr-hidden\"),e.next(\".fr-separator\").addClass(\"fr-hidden\"))}}),Q.FE.RegisterCommand(\"videoDismissError\",{title:\"OK\",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),Q.FE.RegisterCommand(\"videoSetSize\",{undo:!0,focus:!1,title:\"Update\",refreshAfterCallback:!1,callback:function(){this.video.setSize()}})});\n\n/* Files: froala_editor.js, plugins/align.js, plugins/colors.js, plugins/draggable.js, plugins/file.js, plugins/font_family.js, plugins/font_size.js, plugins/image.js, plugins/link.js, plugins/lists.js, plugins/table.js, plugins/video.js */\nvar $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(e,k,l){e instanceof String&&(e=String(e));for(var m=e.length,a=0;a<m;a++){var b=e[a];if(k.call(l,b,a,e))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(e,k,l){e!=Array.prototype&&e!=Object.prototype&&(e[k]=l.value)};\n$jscomp.getGlobal=function(e){return\"undefined\"!=typeof window&&window===e?e:\"undefined\"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(e,k,l,m){if(k){l=$jscomp.global;e=e.split(\".\");for(m=0;m<e.length-1;m++){var a=e[m];a in l||(l[a]={});l=l[a]}e=e[e.length-1];m=l[e];k=k(m);k!=m&&null!=k&&$jscomp.defineProperty(l,e,{configurable:!0,writable:!0,value:k})}};\n$jscomp.polyfill(\"Array.prototype.find\",function(e){return e?e:function(e,l){return $jscomp.findInternal(this,e,l).v}},\"es6\",\"es3\");\n!function(e,k,l,m){XF.isEditorEnabled=function(){return XF.LocalStorage.get(\"editorDisabled\")?!1:!0};XF.setIsEditorEnabled=function(a){a?XF.LocalStorage.remove(\"editorDisabled\"):XF.LocalStorage.set(\"editorDisabled\",\"1\",!0)};XF.Editor=XF.Element.newHandler({options:{maxHeight:.7,minHeight:250,buttonsRemove:\"\",attachmentTarget:!0,deferred:!1,attachmentUploader:\".js-attachmentUpload\",attachmentContextInput:\"attachment_hash_combined\"},edMinHeight:63,$form:null,buttonManager:null,ed:null,mentioner:null,\nemojiCompleter:null,uploadUrl:null,init:function(){this.$target.is(\"textarea\")?(this.options.minHeight=Math.max(this.edMinHeight,this.options.minHeight),this.$target.trigger(\"editor:start\",[this]),this.$form=this.$target.closest(\"form\"),this.$form.length||(this.$form=null),this.options.attachmentTarget&&(this.uploadUrl=this.$target.closest(\"[data-xf-init~=attachment-manager]\").find(this.options.attachmentUploader).attr(\"href\")),this.options.deferred||this.startInit()):console.error(\"Editor can only be initialized on a textarea\")},\nstartInit:function(a){var b=this,d=a&&a.beforeInit,c=a&&a.afterInit;this.$target.css(\"visibility\",\"\").on(\"froalaEditor.initialized\",function(a,e){b.ed=e;d&&d(b,e);b.editorInit();c&&c(b,e)}).froalaEditor(this.getEditorConfig())},getEditorConfig:function(){var a=this.getHeightLimits();a={direction:e.FE.LANGUAGE.xf.direction,editorClass:\"bbWrapper\",fileUpload:!1,fileMaxSize:4294967296,fileUploadParam:\"upload\",fileUploadURL:!1,fontFamily:{arial:\"Arial\",\"'book antiqua'\":\"Book Antiqua\",\"'courier new'\":\"Courier New\",\ngeorgia:\"Georgia\",tahoma:\"Tahoma\",\"'times new roman'\":\"Times New Roman\",\"'trebuchet ms'\":\"Trebuchet MS\",verdana:\"Verdana\"},fontSize:\"9 10 12 15 18 22 26\".split(\" \"),heightMin:a[0],heightMax:a[1],htmlAllowedTags:\"a b bdi bdo blockquote br cite code dfn div em h1 h2 h3 h4 h5 h6 hr i img li mark ol p pre s script style small span strike strong sub sup table tbody td tfoot th thead time tr u ul var video wbr\".split(\" \"),key:\"5D5C4B4B3aG3C2A5A4C4E3E2D4F2G2tFOFSAGLUi1AVKd1SN==\",htmlAllowComments:!1,imageUpload:!1,\nimageCORSProxy:null,imageDefaultDisplay:\"inline\",imageDefaultWidth:\"auto\",imageEditButtons:\"imageAlign imageSize imageAlt | imageReplace imageRemove | imageLink linkOpen linkEdit linkRemove\".split(\" \"),imageManagerLoadURL:!1,imageMaxSize:4294967296,imagePaste:!1,imageResize:!0,imageUploadParam:\"upload\",imageUploadRemoteUrls:!1,imageUploadURL:!1,language:\"xf\",linkAlwaysBlank:!0,linkEditButtons:[\"linkOpen\",\"linkEdit\",\"linkRemove\"],linkInsertButtons:[\"linkBack\"],placeholderText:\"\",tableResizer:!1,tableEditButtons:[\"tableHeader\",\n\"tableRemove\",\"|\",\"tableRows\",\"tableColumns\"],toolbarSticky:!1,videoAllowedTypes:[\"mp4\",\"quicktime\",\"ogg\",\"webm\"],videoAllowedProviders:[],videoDefaultAlign:\"left\",videoDefaultDisplay:\"inline\",videoDefaultWidth:500,videoEditButtons:[\"videoReplace\",\"videoRemove\",\"|\",\"videoAlign\",\"videoSize\"],videoInsertButtons:[\"videoBack\",\"|\",\"videoUpload\"],videoMaxSize:4294967296,videoMove:!0,videoUpload:!1,videoUploadParam:\"upload\",videoUploadURL:!1,zIndex:XF.getElEffectiveZIndex(this.$target)+1,xfBbCodeAttachmentContextInput:this.options.attachmentContextInput};\ne.FE.DT=!0;e.FE.DefineIconTemplate(\"xf_font_awesome_5\",'<i class=\"fa'+XF.config.fontAwesomeWeight+' fa-[NAME]\" aria-hidden=\"true\"></i>');e.FE.ICON_DEFAULT_TEMPLATE=\"xf_font_awesome_5\";e.FE.DefineIcon(\"insertVideo\",{NAME:\"video-plus\"});e.FE.DefineIcon(\"undo\",{NAME:\"undo\"});e.FE.DefineIcon(\"redo\",{NAME:\"redo\"});e.FE.DefineIcon(\"tableHeader\",{NAME:\"heading\"});if(this.uploadUrl){var b={_xfToken:XF.config.csrf,_xfResponseType:\"json\",_xfWithData:1};a.fileUpload=!0;a.fileUploadParams=b;a.fileUploadURL=this.uploadUrl;\na.imageUpload=!0;a.imageUploadParams=b;a.imageUploadURL=this.uploadUrl;a.imagePaste=!0;a.videoUpload=!0;a.videoUploadParams=b;a.videoUploadURL=this.uploadUrl}else a.imageInsertButtons=[\"imageByURL\"];b=this.getButtonConfig();a=e.extend({},a,b);this.$target.trigger(\"editor:config\",[a,this]);return a},getButtonConfig:function(){try{var a=e.parseJSON(e(\".js-editorToolbars\").first().html())||{}}catch(g){console.error(\"Editor buttons data not valid: \",g);return}var b={};try{var d=e.parseJSON(e(\".js-editorDropdowns\").first().html())||\n{},c;for(c in d)d.hasOwnProperty(c)&&d[c].buttons&&(b[c]=d[c].buttons)}catch(g){console.error(\"Editor dropdowns data not valid: \",g)}this.buttonManager=a=new XF.EditorButtons(this,a,b);this.$form&&this.$form.is(\"[data-xf-init~=draft]\")||a.addRemovedButton(\"xfDraft\");(b=this.getAttachmentManager())&&b.supportsVideoUploads||a.addRemovedButton(\"insertVideo\");this.options.buttonsRemove&&a.addRemovedButtons(this.options.buttonsRemove.split(\",\"));this.$target.trigger(\"editor:toolbar-buttons\",[{buttonManager:a},\nthis]);return a.getToolbars()},editorInit:function(){var a=this,b=this.ed;this.watchEditorHeight();this.$form&&(this.$form.on(\"ajax-submit:before draft:beforesync\",function(){b.$oel.val(a.ed.html.get())}),this.$form.on(\"draft:complete\",function(){var a=b.$tb.find(\".fr-command.fr-btn[data-cmd=xfDraft]\"),c=a.find(\".editorDraftIndicator\");c.length||(c=e('<b class=\"editorDraftIndicator\" />').appendTo(a));setTimeout(function(){c.addClass(\"is-active\")},50);setTimeout(function(){c.removeClass(\"is-active\")},\n2500)}),this.$form.on(\"ajax-submit:before\",function(a,c){0<b.$el.find(\".fr-uploading\").length&&!confirm(XF.phrase(\"files_being_uploaded_are_you_sure\"))&&(c.preventSubmit=!0)}),b.events.on(\"keydown\",function(b){if(\"Enter\"==b.key&&(XF.isMac()?b.metaKey:b.ctrlKey))return b.preventDefault(),a.$form.submit(),!1},!0));b.$tb.find(\"[data-cmd=align][data-param1=justify]\").closest(\"li\").css(\"display\",\"none\");b.events.on(\"image.inserted\",function(a){a.removeClass(\"fr-dib\").addClass(\"fr-dii\")});b.events.on(\"image.loaded\",\nfunction(b){a.replaceBase64ImageWithUpload(b)});b.events.on(\"image.beforePasteUpload\",function(a){if(\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\"==a.src)return!1});var d=!1;b.events.on(\"cut copy\",function(a){if((a=b.selection.ranges(0))&&a.commonAncestorContainer){a=a.commonAncestorContainer;a.nodeType==Node.TEXT_NODE&&(a=a.parentNode);var c=e(a).find(\"p\");e(a).find(\"p\").attr(\"data-xf-p\",\"1\");setTimeout(function(){c.removeAttr(\"data-xf-p\")},0)}});b.events.on(\"paste.before\",\nfunction(a){d=!1;if(a&&a.clipboardData&&a.clipboardData.getData){var c=\"\";a=a.clipboardData.types;if(b.helpers.isArray(a))for(var e=0;e<a.length;e++)c+=a[e]+\";\";else c=a;!/text\\/plain/.test(c)||b.browser.mozilla||/text\\/html/.test(c)||/text\\/rtf/.test(c)&&b.browser.safari||(d=!0)}});b.events.on(\"paste.beforeCleanup\",function(a){d&&(a=a.replace(/\\t/g,\"    \").replace(/  /g,\"&nbsp; \").replace(/  /g,\"&nbsp; \").replace(/> /g,\">&nbsp;\"));a=a.replace(/(<pre[^>]*>)([\\s\\S]+)(<\\/pre>)/g,function(a,b,c,e){c=\nc.replace(/\\r?\\n/g,\"<br>\");return b+c+e});a=a.replace(/<div(?=\\s|>)/g,function(a){return a+' data-xf-p=\"1\"'});var b;(b=a.match(/^(?:<meta charset=(?:'|\")[^'\"]*(?:'|\")>)?<a href=(?:'|\")([^'\"]*)\\/?(?:'|\")>\\1<\\/a>$/))&&(a=e.trim(b[1]));(b=a.match(/\\x3c!--StartFragment--\\x3e<a href=(?:'|\")([^'\"]*)\\/?(?:'|\")>\\1<\\/a>\\x3c!--EndFragment--\\x3e/))&&(a=e.trim(b[1]));return XF.adjustHtmlForRte(a)});b.events.on(\"paste.afterCleanup\",function(b){return a.normalizePaste(b)});b.events.on(\"paste.after\",function(){var c=\nb.selection.ranges(0);if(c&&c.getBoundingClientRect){c=c.getBoundingClientRect();var d=b.$wp[0].getBoundingClientRect();(0>c.top||0>c.left||c.bottom>e(k).height()||c.right>e(k).width()||c.bottom>d.bottom)&&setTimeout(function(){a.scrollToCursor()},100)}});b.events.on(\"popups.show.colors.picker\",function(){e(this.popups.get(\"colors.picker\")).find(\".fr-colors-buttons\").css(\"display\",\"none\")});var c={url:XF.getAutoCompleteUrl()};this.mentioner=new XF.AutoCompleter(b.$el,c,b);XF.config.shortcodeToEmoji&&\n(c={url:XF.canonicalizeUrl(\"index.php?misc/find-emoji\"),at:\":\",keepAt:!1,insertMode:\"html\",displayTemplate:'<div class=\"contentRow\"><div class=\"contentRow-figure contentRow-figure--emoji\">{{{icon}}}</div><div class=\"contentRow-main contentRow-main--close\">{{{text}}}<div class=\"contentRow-minor contentRow-minor--smaller\">{{{desc}}}</div></div></div>',beforeInsert:function(a,b){XF.logRecentEmojiUsage(e(b).find(\"img.smilie\").data(\"shortname\"));return a}},this.emojiCompleter=new XF.AutoCompleter(b.$el,\nc,b));this.setupUploads();XF.isEditorEnabled()||(c=this.$target.next(\"input[data-bb-code]\"),c.length?b.bbCode.toBbCode(c.val(),!0):b.bbCode.toBbCode(null,!0));XF.EditorHelpers.setupBlurSelectionWatcher(b);this.$target.on(\"control:enabled\",function(){b.edit.on()});this.$target.on(\"control:disabled\",function(){b.edit.off()});this.$target.on(\"control:enabled\",function(){b.edit.on();b.bbCode&&b.bbCode.isBbCodeView()?b.$tb.find(\".fr-command[data-cmd=xfBbCode]\").removeClass(\"fr-disabled\"):b.toolbar.enable()});\nthis.$target.on(\"control:disabled\",function(){b.edit.off();b.toolbar.disable();b.$tb.find(\" > .fr-command\").addClass(\"fr-disabled\")});this.$target.trigger(\"editor:init\",[b,this]);XF.layoutChange()},focus:function(){XF.EditorHelpers.focus(this.ed)},blur:function(){XF.EditorHelpers.blur(this.ed)},normalizePaste:function(a){a=a.replace(/(<(ul|li|p|div)>)\\s+/ig,\"$1\");a=a.replace(/\\s+(<\\/(ul|li|p|div)>)/ig,\"$1\");a=a.replace(/<span>&nbsp;<\\/span>/ig,\" \").replace(/(<\\/li>)\\s+(<li)/ig,\"$1$2\");var b=this.ed,\nd=e.parseHTML(a),c=e(\"<div />\").html(d);c.find(\"table\").each(function(a,b){a=e(b).width(\"100%\");a.wrap('<div class=\"bbTable\"></div>');a.find(\"[colspan], [rowspan]\").removeAttr(\"colspan rowspan\");var c=0;a.find(\"> tbody > tr\").each(function(){var a=e(this).find(\"> td, > th\").length;c=Math.max(c,a)}).each(function(){var a=e(this).find(\"> td, > th\"),b=a.length;if(b<c){var d=\"<td />\";for(b&&\"TH\"===a[0].tagName&&(d=\"<th />\");b<c;b++)e(this).append(d)}})});c.find(\"code, del, ins, sub, sup\").replaceWith(function(){return this.innerHTML});\nc.find(\"h1, h2, h3, h4, h5, h6\").replaceWith(function(){var a=\"<b>\"+this.innerHTML+\"</b>\",c=b.opts.fontSize;switch(this.tagName){case \"H1\":a='<span style=\"font-size: '+c[6]+'px\">'+a+\"</span>\";break;case \"H2\":a='<span style=\"font-size: '+c[5]+'px\">'+a+\"</span>\";break;case \"H3\":a='<span style=\"font-size: '+c[4]+'px\">'+a+\"</span>\"}return a+\"<br>\"});c.find(\"pre\").replaceWith(function(){var a=this.innerHTML;a=a.replace(/\\r?\\n/g,\"<br>\").replace(/\\t/g,\"    \").replace(/  /g,\"&nbsp; \").replace(/  /g,\"&nbsp; \").replace(/> /g,\n\">&nbsp;\").replace(/<br> /g,\"<br>&nbsp;\");return a+\"<br>\"});c.find(\"br\").each(function(a,d){var g=e(d).parents().not(c);if(g.length&&!g.filter(function(a,c){return b.node.isBlock(c)}).length){a=e([]);var h=!1,f=d,n=g.last();do{for(;f.nextSibling;)g=e(f.nextSibling).clone(),h?a.append(g):a=a.add(g),e(f.nextSibling).remove();f=f.parentNode;if(!f||c.is(f))break;g=e(f).clone().empty();g.html(a);a=g;h=!0}while(f.parentNode&&!c.is(f.parentNode));e(d).remove();n.after(a);n.after(\"<br />\")}});a=\"\";d=c[0].textContent.replace(/\\s/g,\n\"\");try{a=(b.win.localStorage.getItem(\"fr-copied-text\")||\"\").replace(/\\s/g,\"\")}catch(n){}a.length&&a!=d&&c.find(\"> p:not([data-xf-p])\").each(function(){this.nextSibling&&e(this).after(\"<p />\")});c.find(\"p\").removeAttr(\"data-xf-p\");d=c.contents();a=e(\"<div />\");for(var g=null,h=0;h<d.length;h++){var f=d[h];f.nodeType==Node.ELEMENT_NODE&&b.node.isBlock(f)?(a.append(f),g=null):f.nodeType==Node.ELEMENT_NODE&&\"BR\"==f.tagName?(g||a.append(\"<p />\"),g=null):(g||(g=e(\"<p />\"),a.append(g)),g.append(f))}d=a.children();\n1==d.length&&d.is(\"p, div\")&&(a=d);return a.html()},watchEditorHeight:function(){var a=this.ed,b=this;e(k).onPassive(\"resize\",function(){var c=b.getHeightLimits();a.opts.heightMin=c[0];a.opts.heightMax=c[1];a.size.refresh();XF.layoutChange()});a.events.on(\"focus\",function(){b.scrollToCursorAfterPendingResize()});var d=a.$wp.height(),c=function(){var b=a.$wp.height();d!=b&&(d=b,XF.layoutChange())};a.events.on(\"keyup\",c);a.events.on(\"commands.after\",c);a.events.on(\"html.set\",c);a.events.on(\"init\",c);\na.events.on(\"initialized\",c)},getHeightLimits:function(){var a=this.options.maxHeight,b=this.options.minHeight,d=null,c=null;this.$target.closest(\".overlay\").length&&(a=.1);a&&(d=e(k).height(),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(d-=250),d=Math.floor(0<a?1>=a?d*a:a:d+a),d=Math.max(d,150));b&&d&&(c=Math.min(b,d),c==d&&--c);return[c,d]},setupUploads:function(){var a=this,b=this.ed;b.events.on(\"file.uploaded\",function(b){this.popups.hide(\"file.insert\");this.events.focus();return a.handleUploadSuccess(b)});\nb.events.on(\"file.error\",function(b,d){this.popups.hide(\"file.insert\");a.handleUploadError(b,d);this.events.focus();return!1});this.uploadUrl||(b.events.on(\"image.beforeUpload\",function(){return!1}),b.events.on(\"file.beforeUpload\",function(){return!1}),b.events.on(\"video.beforeUpload\",function(){return!1}));b.events.on(\"image.error\",function(b,d){if(d)return this.popups.hide(\"image.insert\"),a.handleUploadError(b,d),!1});b.events.on(\"video.error\",function(b,d){if(d)return this.popups.hide(\"video.insert\"),\na.handleUploadError(b,d),!1});b.events.on(\"image.uploaded\",function(c){return a.handleUploadSuccess(c,function(){b.image.remove();b.popups.hide(\"image.insert\");b.events.focus();return!1},function(){return!0})});b.events.on(\"video.uploaded\",function(c){return a.handleUploadSuccess(c,function(){b.video.remove();b.popups.hide(\"video.insert\");b.events.focus();return!1},function(){return!0})});var d=function(a,b){if(b){try{var c=e.parseJSON(b)}catch(r){return}a.hasClass(\"fr-video\")&&(a=a.find(\"video\"),\na.attr(\"data-xf-init\",\"video-init\").attr(\"style\",\"\").empty());if(c.attachment){c=c.attachment.attachment_id;b=a[0].attributes;for(var d=/^data-(?!xf-init)/,g=b.length-1;0<=g;g--)d.test(b[g].nodeName)&&a.removeAttr(b[g].nodeName);a.attr(\"data-attachment\",\"full:\"+c)}}};b.events.on(\"image.inserted video.inserted\",d);b.events.on(\"image.replaced video.replaced\",d);b.events.on(\"image.loaded\",function(c){if(b.popups.isVisible(\"image.edit\")){var d=b.image.get();d&&d[0]==c[0]&&(b.image.exitEdit(!0),d=b.selection.ranges(0),\nd.setStartAfter(c[0]),d.collapse(!0),c=b.selection.get(),c.removeAllRanges(),c.addRange(d),b.events.focus(),a.scrollToCursor())}});b.events.on(\"video.loaded\",function(c){if(b.popups.isVisible(\"video.edit\")){var d=b.video.get();d&&d[0]==c[0]&&(b.events.trigger(\"video.hideResizer\"),b.popups.hide(\"video.edit\"),d=b.selection.ranges(0),d.setStartAfter(c[0]),d.collapse(!0),c=b.selection.get(),c.removeAllRanges(),c.addRange(d),b.events.focus(),a.scrollToCursor())}});b.events.on(\"popups.show.image.edit\",\nfunction(){var a=b.image.get();a.length&&a.hasClass(\"smilie\")&&(b.image.exitEdit(!0),b.selection.save(),setTimeout(function(){b.selection.restore()},0))})},handleUploadSuccess:function(a,b,d){try{var c=e.parseJSON(a)}catch(g){c={status:\"error\",errors:[XF.phrase(\"oops_we_ran_into_some_problems\")]}}return c.status&&\"error\"==c.status?(XF.alert(c.errors[0]),b?b(c):!1):(a=this.getAttachmentManager())&&c.attachment?(a.insertUploadedRow(c.attachment),d?d(c,a):!1):!1},handleUploadError:function(a,b){try{var d=\ne.parseJSON(b)}catch(c){d=null}d&&d.errors||(d={status:\"error\",errors:[XF.phrase(\"oops_we_ran_into_some_problems\")]});XF.alert(d.errors[0])},getAttachmentManager:function(){var a=this.$target.closest(\"[data-xf-init~=attachment-manager]\");return a&&a.length?XF.Element.getHandler(a,\"attachment-manager\"):null},isBbCodeView:function(){return this.ed.bbCode&&this.ed.bbCode.isBbCodeView?this.ed.bbCode.isBbCodeView():!1},insertContent:function(a,b){var d=this.ed;this.isBbCodeView()?\"undefined\"!==typeof b&&\nd.bbCode.insertBbCode(b):(this.focus(),d.html.insert(a),XF.Element.initialize(d.$el));this.scrollToCursor();this.scrollToCursorAfterPendingResize()},replaceContent:function(a,b){var d=this.ed;this.isBbCodeView()?\"undefined\"!==typeof b&&d.bbCode.replaceBbCode(b):d.html.set(a)},scrollToCursor:function(){var a=this.ed;if(this.isBbCodeView())a.bbCode.getTextArea().autofocus(),a.$box[0].scrollIntoView(!0);else{this.focus();var b=a.$box,d=a.$wp,c=a.selection.endElement(),e=c.getBoundingClientRect().bottom,\nh=!0,f=XF.windowHeight();XF.browser.ios&&(f-=250);if(0>e||e>=f)h=!1;if(d&&h){var n=d[0].getBoundingClientRect();if(e>n.bottom||e<n.top)h=!1}if(!h){e=b[0].getBoundingClientRect();if(0>e.top||e.bottom>=f)XF.browser.ios||b.addClass(\"is-scrolling-to\"),b[0].scrollIntoView(!0),b.removeClass(\"is-scrolling-to\");d?(b=a.position.getBoundingRect().top,b>d.offset().top-a.helpers.scrollTop()+d.height()-50&&d.scrollTop(b+d.scrollTop()-(d.height()+d.offset().top)+a.helpers.scrollTop()+f/2)):c.scrollIntoView()}}},\nscrollToCursorAfterPendingResize:function(a){var b=this,d=this.ed,c,g=function(){e(k).off(\"resize\",g);e(k).on(\"scroll\",h);c&&clearTimeout(c);c=setTimeout(f,500)},h=function(){c&&clearTimeout(c);c=setTimeout(f,100)},f=function(){e(k).off(\"scroll\",h);d.core.hasFocus()&&b.scrollToCursor()};e(k).on(\"resize\",g);setTimeout(function(){e(k).off(\"resize\",g)},2E3);a&&(c=setTimeout(f,1E3))},base64ToBytes:function(a,b){b=b||512;a=atob(a);for(var d=[],c=0;c<a.length;c+=b){for(var e=a.slice(c,c+b),h=Array(e.length),\nf=0;f<e.length;f++)h[f]=e.charCodeAt(f);e=new Uint8Array(h);d.push(e)}return d},editorSupportsUploads:function(){return-1!==this.ed.opts.imageInsertButtons.indexOf(\"imageUpload\")},imageMatchesBase64Encoding:function(a){return a.attr(\"src\").match(/^data:(image\\/([a-z0-9]+));base64,(.*)$/)},replaceBase64ImageWithUpload:function(a){if(!a.hasClass(\"smilie\")){var b;if(b=this.imageMatchesBase64Encoding(a)){var d=b[1];var c=b[2];b=b[3];-1===this.ed.opts.imageAllowedTypes.indexOf(c)?a[0].remove():this.editorSupportsUploads()?\n(a=new Blob(this.base64ToBytes(b),{type:d}),1024<a.size&&this.ed.image.upload([a])):a[0].remove()}}}});XF.EditorButtons=XF.create({xfEd:null,buttonClasses:null,toolbars:{},dropdowns:{},removeButtons:null,recalculateNeeded:!0,__construct:function(a,b,d){this.xfEd=a;this.removeButtons=[];b&&(this.toolbars=b);d&&(this.dropdowns=d)},addToolbar:function(a,b){this.toolbars[a]=b;this.recalculateNeeded=!0},adjustToolbar:function(a,b){var d=this.toolbars[a];return d?(this.toolbars[a]=b(d,a,this),this.recalculateNeeded=\n!0):!1},adjustToolbars:function(a){for(var b in this.toolbars)this.toolbars.hasOwnProperty(b)&&this.adjustToolbar(b,a)},getToolbar:function(a){return this.getToolbars()[a]},getToolbars:function(){this.recalculateIfNeeded();return this.toolbars},addDropdown:function(a,b){this.dropdowns[a]=b;this.recalculateNeeded=!0},adjustDropdown:function(a,b){var d=this.dropdowns[a];return d?(this.dropdowns[a]=b(d,a,this),this.recalculateNeeded=!0):!1},adjustDropdowns:function(a){for(var b in this.dropdowns)this.dropdowns.hasOwnProperty(b)&&\nthis.adjustDropdown(b,a)},getDropdown:function(a){return this.getDropdowns()[a]},getDropdowns:function(){this.recalculateIfNeeded();return this.dropdowns},addRemovedButton:function(a){this.removeButtons.push(a);this.recalculateNeeded=!0},addRemovedButtons:function(a){for(var b=0;b<a.length;b++)this.removeButtons.push(a[b]);this.recalculateNeeded=!0},recalculateIfNeeded:function(){this.recalculateNeeded&&this.recalculate()},recalculate:function(){function a(a,b){\"string\"==typeof b&&e[b]&&(b=e[b]);\n\"string\"==typeof b&&(b=b.split(\"|\"));return a.filter(function(a){return!(0<=b.indexOf(a))})}function b(a){var b=[];for(f=0;f<a.length;f++){var c=a[f];var d=\"-vs\"===c||\"|\"===c;var e=\"-hs\"===c||\"-\"===c;if(d||e){c=d?\"|\":\"-\";if(e&&!b.length)continue;if(b.length){d=b[b.length-1];if(d===c)continue;e&&\"|\"===d&&b.pop()}}b.push(c)}return b}for(var d=this.removeButtons,c,e=this.getButtonClasses(),h,f=0;f<d.length;f++){c=d[f];for(h in this.toolbars)this.toolbars.hasOwnProperty(h)&&(this.toolbars[h]=a(this.toolbars[h],\nc));for(h in this.dropdowns)this.dropdowns.hasOwnProperty(h)&&(this.dropdowns[h]=a(this.dropdowns[h],c))}for(h in this.dropdowns)if(this.dropdowns.hasOwnProperty(h)&&!this.dropdowns[h].length)for(var n in this.toolbars)this.toolbars.hasOwnProperty(n)&&(this.toolbars[n]=a(this.toolbars[n],h));for(h in this.toolbars)this.toolbars.hasOwnProperty(h)&&(this.toolbars[h]=b(this.toolbars[h],c));for(h in this.dropdowns)this.dropdowns.hasOwnProperty(h)&&(this.dropdowns[h]=b(this.dropdowns[h],c));this.recalculateNeeded=\n!1},getButtonClasses:function(){this.buttonClasses||(this.buttonClasses={_basic:[\"bold\",\"italic\",\"underline\",\"strikeThrough\"],_extended:[\"color\",\"fontFamily\",\"fontSize\",\"xfInlineCode\"],_link:[\"insertLink\"],_align:[\"align\"],_list:[\"formatOL\",\"formatUL\",\"outdent\",\"indent\"],_indent:[\"outdent\",\"indent\"],_smilies:[\"xfSmilie\"],_image:[\"insertImage\"],_media:[\"insertVideo\",\"xfMedia\"],_block:[\"xfQuote\",\"xfCode\",\"xfSpoiler\",\"xfInlineSpoiler\",\"insertTable\"]});return this.buttonClasses}});XF.EditorHelpers={setupBlurSelectionWatcher:function(a){var b=\na.$el,d=!1,c;e(l).on(\"mousedown keydown\",function(b){d&&(a.$el[0]==b.target||e.contains(a.$el[0],b.target)||a.selection.inEditor()&&(c=a.selection.ranges(0)))});a.events.on(\"blur\",function(){c?b.data(\"xf-ed-blur-sel\",c):b.removeData(\"xf-ed-blur-sel\");d=!1;c=null},!0);a.events.on(\"focus\",function(){d=!0;c=null;setTimeout(function(){b.removeData(\"xf-ed-blur-sel\")},0)});a.events.on(\"commands.before\",function(b){(b=e.FE.COMMANDS[b])&&(\"undefined\"==typeof b.focus||b.focus)&&XF.EditorHelpers.restoreMaintainedSelection(a)})},\nrestoreMaintainedSelection:function(a){var b=a.$el.data(\"xf-ed-blur-sel\");a.selection.inEditor()||(b?(a.markers.remove(),a.markers.place(b,!0,0),a.markers.place(b,!1,0)):a.selection.setAtEnd(a.el),a.selection.restore())},focus:function(a){XF.EditorHelpers.restoreMaintainedSelection(a);a.events.focus()},blur:function(a){a.$el[0].blur();a.selection.clear()},wrapSelectionText:function(a,b,d,c){c&&a.selection.save();c=a.$el.find(\".fr-marker\");c.first().before(XF.htmlspecialchars(b));c.last().after(XF.htmlspecialchars(d));\na.selection.restore();a.placeholder.hide()},insertCode:function(a,b,d){switch(b.toLowerCase()){case \"\":var c=\"CODE\";b=\"\";break;default:c=\"CODE\",b=b.toLowerCase()}d=d.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/\\t/g,\"    \").replace(/\\n /g,\"\\n&nbsp;\").replace(/  /g,\"&nbsp; \").replace(/  /g,\" &nbsp;\").replace(/\\n/g,\"</p><p>\");d=\"[\"+c+(b?\"=\"+b:\"\")+\"]\"+d+\"[/\"+c+\"]\";d.match(/<\\/p>/i)&&(d=(\"<p>\"+d+\"</p>\").replace(/<p><\\/p>/g,\"<p><br></p>\"));a.html.insert(d)},\ninsertSpoiler:function(a,b){XF.EditorHelpers.wrapSelectionText(a,b?'[SPOILER=\"'+b+'\"]':\"[SPOILER]\",\"[/SPOILER]\",!0)},dialogs:{},loadDialog:function(a,b){var d=XF.EditorHelpers.dialogs;d[b]?d[b].show(a):console.error(\"Unknown dialog '\"+b+\"'\")}};XF.EditorDialog=XF.create({ed:null,overlay:null,dialog:null,cache:!0,__construct:function(a){this.dialog=a},show:function(a){this.ed=a;a.selection.save();XF.loadOverlay(XF.canonicalizeUrl(\"index.php?editor/dialog&dialog=\"+this.dialog),{beforeShow:XF.proxy(this,\n\"beforeShow\"),afterShow:XF.proxy(this,\"afterShow\"),init:XF.proxy(this,\"init\"),cache:this.cache})},init:function(a){var b=this;a.on(\"overlay:hidden\",function(){b.ed&&b.ed.markers.remove()});this._init(a)},_init:function(a){},beforeShow:function(a){this.overlay=a;this._beforeShow(a)},_beforeShow:function(a){},afterShow:function(a){this._afterShow(a);a.$overlay.find(\"textarea, input\").first().focus()},_afterShow:function(a){}});XF.EditorDialogMedia=XF.extend(XF.EditorDialog,{_beforeShow:function(a){e(\"#editor_media_url\").val(\"\")},\n_init:function(a){e(\"#editor_media_form\").submit(XF.proxy(this,\"submit\"))},submit:function(a){a.preventDefault();var b=this.ed,d=this.overlay;XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?editor/media\"),{url:e(\"#editor_media_url\").val()},function(a){a.matchBbCode?(b.selection.restore(),b.html.insert(XF.htmlspecialchars(a.matchBbCode)),d.hide()):a.noMatch?XF.alert(a.noMatch):(b.selection.restore(),d.hide())})}});XF.EditorDialogSpoiler=XF.extend(XF.EditorDialog,{_beforeShow:function(a){e(\"#editor_spoiler_title\").val(\"\")},\n_init:function(a){e(\"#editor_spoiler_form\").submit(XF.proxy(this,\"submit\"))},submit:function(a){a.preventDefault();a=this.ed;var b=this.overlay;a.selection.restore();XF.EditorHelpers.insertSpoiler(a,e(\"#editor_spoiler_title\").val());b.hide()}});XF.EditorDialogCode=XF.extend(XF.EditorDialog,{_beforeShow:function(a){this.ed.$el.blur()},_init:function(a){e(\"#editor_code_form\").submit(XF.proxy(this,\"submit\"))},submit:function(a){a.preventDefault();a=this.ed;var b=this.overlay,d=b.$container.find(\".CodeMirror\");\nif(d.length){d=d[0].CodeMirror;var c=d.getDoc();d.save();c.setValue(\"\");d.setOption(\"mode\",\"\")}d=e(\"#editor_code_type\");c=e(\"#editor_code_code\");a.selection.restore();XF.EditorHelpers.insertCode(a,d.val(),c.val());b.hide();c.val(\"\");d.val(\"\")}});XF.editorStart={started:!1,custom:[],startAll:function(){XF.editorStart.started||(XF.editorStart.setupLanguage(),XF.editorStart.registerCommands(),XF.editorStart.registerCustomCommands(),XF.editorStart.registerEditorDropdowns(),XF.editorStart.registerDialogs(),\ne(l).trigger(\"editor:first-start\"),XF.editorStart.started=!0)},setupLanguage:function(){var a=e(\"html\").attr(\"dir\");try{var b=e.parseJSON(e(\".js-editorLanguage\").first().html())||{}}catch(d){console.error(d),b={}}e.FE.LANGUAGE.xf={translation:b,direction:a?a.toLowerCase():\"ltr\"}},registerCommands:function(){e.FE.DefineIcon(\"xfQuote\",{NAME:\"quote-right\"});e.FE.RegisterCommand(\"xfQuote\",{title:\"Quote\",icon:\"xfQuote\",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.wrapSelectionText(this,\"[QUOTE]\",\n\"[/QUOTE]\",!0)}});e.FE.DefineIcon(\"xfCode\",{NAME:\"code\"});e.FE.RegisterCommand(\"xfCode\",{title:\"Code\",icon:\"xfCode\",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.loadDialog(this,\"code\")}});e.FE.DefineIcon(\"xfInlineCode\",{NAME:\"terminal\"});e.FE.RegisterCommand(\"xfInlineCode\",{title:\"Inline Code\",icon:\"xfInlineCode\",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.wrapSelectionText(this,\"[ICODE]\",\"[/ICODE]\",!0)}});e.FE.DefineIcon(\"xfMedia\",{NAME:\"video\"});e.FE.RegisterCommand(\"xfMedia\",\n{title:\"Media\",icon:\"xfMedia\",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.loadDialog(this,\"media\")}});e.FE.DefineIcon(\"xfSpoiler\",{NAME:\"flag\"});e.FE.RegisterCommand(\"xfSpoiler\",{title:\"Spoiler\",icon:\"xfSpoiler\",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.loadDialog(this,\"spoiler\")}});e.FE.DefineIcon(\"xfInlineSpoiler\",{NAME:\"flag-checkered\"});e.FE.RegisterCommand(\"xfInlineSpoiler\",{title:\"Inline Spoiler\",icon:\"xfInlineSpoiler\",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.wrapSelectionText(this,\n\"[ISPOILER]\",\"[/ISPOILER]\",!0)}});e.FroalaEditor.PLUGINS.xfSmilie=function(a){function b(b){var c=e(b.currentTarget);b=c.html();if(!e(b).hasClass(\"smilie--lazyLoad\")){XF.EditorHelpers.focus(a);a.html.insert(b);n();XF.EditorHelpers.blur(a);if(p){var d=p.find(\".js-emojiInsertedRow\");d.find(\".js-emojiInsert\").html(b);d.addClassTransitioned(\"is-active\");clearTimeout(v);v=setTimeout(function(){d.removeClassTransitioned(\"is-active\")},1500)}clearTimeout(w);w=setTimeout(function(){XF.logRecentEmojiUsage(c.data(\"shortname\"))},\n1500)}}function d(a,b){for(var c,d,f=0;f<a.length;f++)c=a[f],c.isIntersecting&&(d=e(c.target),g(d),b.unobserve(c.target))}function c(a){var b=a;a instanceof Event&&(b=e(a.currentTarget));if(b.is(\":visible\")){var c=b[0].getBoundingClientRect(),d=c.bottom+100;b.children().each(function(){var a=e(this),b=this.getBoundingClientRect();if(!(b.bottom<c.top)){if(b.top>d)return!1;a.find(\"span.smilie--lazyLoad\").each(function(){var a=e(this);this.getBoundingClientRect().top<=d&&g(a)})}})}}function g(a){var b=\ne(\"<img />\").attr({\"class\":a.attr(\"class\").replace(/(\\s|^)smilie--lazyLoad(\\s|$)/,\" \"),alt:a.attr(\"data-alt\"),title:a.attr(\"title\"),src:a.attr(\"data-src\"),\"data-shortname\":a.attr(\"data-shortname\")}),c=function(){var c=function(){a.replaceWith(b)};k.requestAnimationFrame?k.requestAnimationFrame(c):c()};if(b.prop(\"complete\"))c();else b.on(\"load\",c)}function h(){var a=e(this),d=p.find(\".js-emojiFullList\"),f=p.find(\".js-emojiSearchResults\");clearTimeout(x);x=setTimeout(function(){var e=a.val();if(!e||\n2>e.length)f.hide(),d.show(),c(d);else{var h=XF.canonicalizeUrl(\"index.php?editor/smilies-emoji/search\");XF.ajax(\"GET\",h,{q:e},function(a){a.html&&XF.setupHtmlInsert(a.html,function(a){a.find(\".js-emoji\").on(\"click\",b);d.hide();f.replaceWith(a)})})}},300)}function f(){var a=XF.getRecentEmojiUsage(),d=q.find(\".js-recentHeader\"),f=q.find(\".js-recentBlock\"),h=f.find(\".js-recentList\"),g=q.find(\".js-emojiList\");if(a){var n=h.clone(),k=[];n.empty();for(var l in a){var p=a[l],m;g.each(function(){m=e(this).find('.js-emoji[data-shortname=\"'+\np+'\"]').closest(\"li\").clone();if(m.length)return m.find(\".js-emoji\").on(\"click\",b),k.push(m),!1})}for(l in k)k[l].appendTo(n);h.replaceWith(n);f.hasClass(\"is-hidden\")&&(f.hide(),f.removeClass(\"is-hidden\"),d.removeClass(\"is-hidden\"),f.xfFadeDown(XF.config.speed.fast));c(n)}}function n(){a.selection.save()}function r(){a.selection.restore()}var m=!1,t=!1,p,q,u=0,v,w,x;return{showMenu:function(){n();XF.EditorHelpers.blur(a);var g=a.$tb.find('.fr-command[data-cmd=\"xfSmilie\"]');if(!m){m=!0;p=e(e.parseHTML(Mustache.render(e(\".js-xfSmilieMenu\").first().html())));\np.insertAfter(g);g.data(\"xf-click\",\"menu\");var y=XF.Event.getElementHandler(g,\"menu\",\"click\");p.on(\"menu:complete\",function(){q=p.find(\".menu-scroller\");if(!t){t=!0;if(k.IntersectionObserver){var g=new IntersectionObserver(d,{root:q[0],rootMargin:\"0px 0px 100px 0px\"});q.find(\"span.smilie--lazyLoad\").each(function(){g.observe(this)})}else q.onPassive(\"scroll\",c);q.find(\".js-emoji\").on(\"click\",b);var m=p.find(\".js-emojiSearch\");m.on(\"focus\",n);m.on(\"blur\",r);m.on(\"input\",h);p.find(\".js-emojiCloser\").on(\"click\",\nfunction(){XF.EditorHelpers.focus(a)});e(l).on(\"recent-emoji:logged\",f);a.events.on(\"commands.mousedown\",function(a){\"xfSmilie\"!=a.data(\"cmd\")&&y.close()});p.on(\"menu:closed\",function(){u=q.scrollTop()})}q.scrollTop(u);k.IntersectionObserver||c(q)});p.on(\"menu:closed\",function(){setTimeout(function(){a.markers.remove()},50)})}(g=g.data(\"xfClickHandlers\"))&&g.menu&&g.menu.toggle()}}};e.FE.DefineIcon(\"xfSmilie\",{NAME:\"smile\"});e.FE.RegisterCommand(\"xfSmilie\",{title:\"Smilies\",icon:\"xfSmilie\",undo:!1,\nfocus:!1,refreshOnCallback:!1,callback:function(){this.xfSmilie.showMenu()}});e.FE.DefineIcon(\"xfDraft\",{NAME:\"save\"});e.FE.RegisterCommand(\"xfDraft\",{type:\"dropdown\",title:\"Drafts\",focus:!0,undo:!1,options:{xfDraftSave:\"Save Draft\",xfDraftDelete:\"Delete Draft\"},callback:function(a,b){a=this.$el.closest(\"form\");a.length?(a=XF.Element.getHandler(a,\"draft\"))?\"xfDraftSave\"==b?a.triggerSave():\"xfDraftDelete\"==b&&a.triggerDelete():console.error(\"No draft handler on parent form\"):console.error(\"No parent form to find draft handler\")}});\ne.extend(e.FE.DEFAULTS,{xfBbCodeAttachmentContextInput:\"attachment_hash_combined\"});e.FE.PLUGINS.bbCode=function(a){function b(){return a.$tb.find(\".fr-command[data-cmd=xfBbCode]\")}function d(){var b=a.$oel,c=b.data(\"xfBbCodeBox\");if(!c){var d=parseInt(a.$wp.css(\"border-bottom-width\"),10)+parseInt(a.$wp.css(\"border-top-width\"),10);c=e('<textarea class=\"input\" style=\"display: none\" />');c.attr(\"aria-label\",XF.htmlspecialchars(XF.phrase(\"rich_text_box\")));c.css({minHeight:a.opts.heightMin?a.opts.heightMin+\nd+\"px\":null,maxHeight:a.opts.heightMax?a.opts.heightMax+\"px\":null,height:a.opts.height?a.opts.height+d+\"px\":null,padding:a.$el.css(\"padding\")});c.attr(\"name\",b.data(\"original-name\"));b.data(\"xfBbCodeBox\",c);a.$wp.after(c);XF.Element.applyHandler(c,\"textarea-handler\");XF.Element.applyHandler(c,\"user-mentioner\");XF.Element.applyHandler(c,\"emoji-completer\")}return c}function c(c,e){var f=d(),g=function(c,d){h=!0;a.undo.saveStep();a.$el.blur();var e=b();a.$tb.find(\" > .fr-command\").not(e).addClass(\"fr-disabled\");\ne.addClass(\"fr-active\");a.$wp.css(\"display\",\"none\");a.$oel.prop(\"disabled\",!0);f.val(c).css(\"display\",\"\").prop(\"disabled\",!1).trigger(\"autosize\");d||f.autofocus();XF.setIsEditorEnabled(!1)};\"string\"==typeof c?g(c,e):XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?editor/to-bb-code\"),{html:a.html.get()},function(a){g(a.bbCode,e)})}function g(c){var f=d(),g=function(c){h=!1;var d=b();a.$tb.find(\" > .fr-command\").not(d).removeClass(\"fr-disabled\");d.removeClass(\"fr-active\");a.$oel.prop(\"disabled\",!1);a.html.set(c);\nf.css(\"display\",\"none\").prop(\"disabled\",!0);a.$wp.css(\"display\",\"\");a.events.focus();a.undo.saveStep();a.size.refresh();XF.setIsEditorEnabled(!0);XF.layoutChange()};if(\"string\"==typeof c)g(c);else{c={bb_code:f.val()};var k=a.$el.closest(\"form\");k.length&&k[0][a.opts.xfBbCodeAttachmentContextInput]&&(c.attachment_hash_combined=e(k[0][a.opts.xfBbCodeAttachmentContextInput]).val());XF.ajax(\"POST\",XF.canonicalizeUrl(\"index.php?editor/to-html\"),c,function(a){g(a.editorHtml)})}}var h=!1;return{_init:function(){a.events.on(\"buttons.refresh\",\nfunction(){return!h})},toBbCode:c,isBbCodeView:function(){return h},getTextArea:function(){return h?d():null},insertBbCode:function(a){if(h){var b=d();XF.insertIntoTextBox(b,a)}},replaceBbCode:function(a){if(h){var b=d();XF.replaceIntoTextBox(b,a)}},toHtml:g,toggle:function(){h?g():c()}}};e.FE.DefineIcon(\"xfBbCode\",{NAME:\"cog\"});e.FE.RegisterCommand(\"xfBbCode\",{title:\"Toggle BB Code\",icon:\"xfBbCode\",undo:!1,focus:!1,forcedRefresh:!0,callback:function(){this.bbCode.toggle()}})},registerCustomCommands:function(){try{var a=\ne.parseJSON(e(\".js-editorCustom\").first().html())||{}}catch(d){console.error(d),a={}}for(var b in a)a.hasOwnProperty(b)&&function(a,b){var c=\"xfCustom_\"+a,d=a.toUpperCase();a={};\"fa\"==b.type?a=(a=b.value.match(/^fa([slrb]) fa-(.+)$/))?{FA5NAME:a[2],template:\"font_awesome_5\"+(\"s\"===a[1]?\"\":a[1])}:{NAME:b.value}:\"image\"==b.type&&(a={template:\"image\",SRC:'\"'+XF.canonicalizeUrl(b.value)+'\"',ALT:'\"'+b.title+'\"'});e.FE.DefineIcon(c,a);e.FE.RegisterCommand(c,{title:b.title,icon:c,undo:!0,focus:!0,callback:function(){XF.EditorHelpers.wrapSelectionText(this,\n\"yes\"==b.option?\"[\"+d+\"=]\":\"[\"+d+\"]\",\"[/\"+d+\"]\",!0)}});XF.editorStart.custom.push(c)}(b,a[b])},registerEditorDropdowns:function(){try{var a=e.parseJSON(e(\".js-editorDropdowns\").first().html())||{}}catch(d){console.error(\"Editor dropdowns data not valid: \",d),a={}}for(var b in a)a.hasOwnProperty(b)&&function(a,b){b.icon=b.icon.substr(3);e.FE.DefineIcon(a,{NAME:b.icon});e.FE.RegisterCommand(a,{type:\"dropdown\",title:b.title,icon:a,undo:!1,focus:!1,html:function(){var c='<ul class=\"fr-dropdown-list\">',\nd=b.buttons,f,k;(f=XF.getEditorInContainer(this.$oel))&&f.buttonManager&&(d=f.buttonManager.getDropdown(a));for(var l in d)f=d[l],(k=e.FE.COMMANDS[f])&&(c+='<li><a class=\"fr-command\" data-cmd=\"'+f+'\">'+this.icon.create(k.icon||f)+\"&nbsp;&nbsp;\"+this.language.translate(k.title)+\"</a></li>\");return c+\"</ul>\"}})}(b,a[b])},registerDialogs:function(){XF.EditorHelpers.dialogs.media=new XF.EditorDialogMedia(\"media\");XF.EditorHelpers.dialogs.spoiler=new XF.EditorDialogSpoiler(\"spoiler\");XF.EditorHelpers.dialogs.code=\nnew XF.EditorDialogCode(\"code\")}};e(l).one(\"editor:start\",XF.editorStart.startAll);XF.EditorPlaceholderClick=XF.Event.newHandler({eventNameSpace:\"XFEditorPlaceholderClick\",options:{},edInitialized:!1,init:function(){},click:function(a){var b=this.$target,d=this;a=function(){d.edInitialized=!0;b.find(\".editorPlaceholder-editor\").removeClass(\"is-hidden\");b.find(\".editorPlaceholder-placeholder\").addClass(\"is-hidden\")};var c=XF.getEditorInContainer(b);c instanceof XF.Editor?this.edInitialized||c.startInit({beforeInit:a,\nafterInit:function(a,b){XF.EditorHelpers.focus(b);XF.isIOS()&&(a.scrollToCursor(),a.scrollToCursorAfterPendingResize());b.opts.tooltips&&setTimeout(function(){b.tooltip.hide()},30)}}):(a(),c instanceof e&&c.focus())}});XF.Event.register(\"click\",\"editor-placeholder\",\"XF.EditorPlaceholderClick\");XF.Element.register(\"editor\",\"XF.Editor\")}(jQuery,window,document);"
